"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function initializeApplication(){var e,t={lat:59.9138688,lng:10.752245399999993},n=new google.maps.InfoWindow,i={venues:"https://api.foursquare.com/v2/venues/",explore:"explore?",search:"search?",credentials:"client_id=Y0DEZ005CDT1Y2FBGGXV4KWYOEPLWAKFXTXC0UXLNAFHTFAY&client_secret=GEA32UVN3CUN0IHNCTSFU1SOABB0WT4HH2U2WYRR3ZLX4JX2",version:"&v=20130815"},r=function(e,t){var n="&ll="+e.lat+","+e.lng,r="&query=Popular with visitors",o=new XMLHttpRequest;o.open("GET",i.venues+i.explore+i.credentials+i.version+n+r,!0),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){var e=JSON.parse(o.responseText),n=e.response.groups[0].items;t(n)}},o.send("")},o=function(e,t){var n=new XMLHttpRequest;n.open("GET",i.venues+e+"?"+i.credentials+i.version,!0),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=JSON.parse(n.responseText);t(e)}},n.send("")},s=function(e){e.photoUrls=e.photos.groups[0].items.map(function(e){return e.prefix+"original"+e.suffix})},a=function(t){e=new google.maps.LatLngBounds;var i=0;r(t,function(t){t.forEach(function(t){o(t.venue.id,function(t){var r=t.response.venue,o={lat:r.location.lat,lng:r.location.lng},a=new google.maps.Marker({map:u,title:r.name,position:o});a.addListener("click",function(){l(r,n)}),r.marker=a,r.index=i++,s(r),console.log(r),f.addVenue(r),e.extend(new google.maps.LatLng(o)),u.fitBounds(e)})})})},l=function(e,t){if(t.marker!=e.marker){var n='<div id="content" class="content"><h1 class="content__heading" data-bind="text: venueList()['+e.index+'].name"></h1><div class="image-slider" data-bind="foreach: venueList()['+e.index+'].photoUrls"><div class="image-slider__image-container"><img style="max-width:300px;max-height:200px" class="image-slider__image" data-bind="attr: {src: $data}" alt=""></div></div></div>';t.marker=e.marker,t.setContent(n),t.open(u,e.marker),ko.applyBindings(f,document.getElementById("content"))}},u=new google.maps.Map(document.getElementById("map"),{center:t,zoom:15,fullscreenControl:!0}),d=document.getElementById("pac-input"),c=new google.maps.places.SearchBox(d);u.addListener("bounds_changed",function(){c.setBounds(u.getBounds())}),c.addListener("places_changed",function(){var e=c.getPlaces();if(0!==e.length){var t=google.maps.geometry.spherical.computeDistanceBetween(e[0].geometry.location,u.getCenter()),n=JSON.stringify(e[0].geometry.location),i=JSON.parse(n);return t>6e3?(f.removeAllVenues(),void a(i)):void 0}});var p=function(){this.venueList=ko.observableArray(),this.addVenue=this.addVenue.bind(this),this.removeAllVenues=this.removeAllVenues.bind(this)};p.prototype.addVenue=function(e){this.venueList.push(e)},p.prototype.removeAllVenues=function(){this.venueList().forEach(function(e){e.marker.setMap(null)}),this.venueList.removeAll()};var f=new p;ko.applyBindings(f),a(t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),SideNav=function(){function e(){_classCallCheck(this,e),this.showButtonEl=document.querySelector(".js-menu-show"),this.hideButtonEl=document.querySelector(".js-menu-hide"),this.sideNavEl=document.querySelector(".js-side-nav"),this.sideNavContainerEl=document.querySelector(".js-side-nav-container"),this.showSideNav=this.showSideNav.bind(this),this.hideSideNav=this.hideSideNav.bind(this),this.blockClicks=this.blockClicks.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTransitionEnd=this.onTransitionEnd.bind(this),this.update=this.update.bind(this),this.startX=0,this.currentX=0,this.touchingSideNav=!1,this.addEventListeners()}return _createClass(e,[{key:"addEventListeners",value:function(){this.showButtonEl.addEventListener("click",this.showSideNav),this.hideButtonEl.addEventListener("click",this.hideSideNav),this.sideNavEl.addEventListener("click",this.hideSideNav),this.sideNavContainerEl.addEventListener("click",this.blockClicks),this.sideNavEl.addEventListener("touchstart",this.onTouchStart),this.sideNavEl.addEventListener("touchmove",this.onTouchMove),this.sideNavEl.addEventListener("touchend",this.onTouchEnd)}},{key:"onTouchStart",value:function(e){this.sideNavEl.classList.contains("side-nav--visible")&&(this.startX=e.touches[0].pageX,this.currentX=this.startX,this.touchingSideNav=!0,requestAnimationFrame(this.update))}},{key:"onTouchMove",value:function(e){if(this.touchingSideNav){this.currentX=e.touches[0].pageX;var t=Math.min(0,this.currentX-this.startX);t<0&&e.preventDefault()}}},{key:"onTouchEnd",value:function(e){if(this.touchingSideNav){this.touchingSideNav=!1;var t=Math.min(0,this.currentX-this.startX);this.sideNavContainerEl.style.transform="",t<0&&this.hideSideNav()}}},{key:"update",value:function(){if(this.touchingSideNav){var e=Math.min(0,this.currentX-this.startX);this.sideNavContainerEl.style.transform="translateX("+e+"px)",requestAnimationFrame(this.update)}}},{key:"blockClicks",value:function(e){e.stopPropagation()}},{key:"onTransitionEnd",value:function(e){this.sideNavEl.classList.remove("side-nav--animatable"),this.sideNavEl.removeEventListener("transitionend",this.onTransitionEnd)}},{key:"showSideNav",value:function(){this.sideNavEl.classList.add("side-nav--animatable"),this.sideNavEl.classList.add("side-nav--visible"),this.sideNavEl.addEventListener("transitionend",this.onTransitionEnd)}},{key:"hideSideNav",value:function(){this.sideNavEl.classList.add("side-nav--animatable"),this.sideNavEl.classList.remove("side-nav--visible"),this.sideNavEl.addEventListener("transitionend",this.onTransitionEnd)}}]),e}();new SideNav;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e=!0;!function(t){var n=this||(0,eval)("this"),i=n.document,r=n.navigator,o=n.jQuery,s=n.JSON;!function(e){"function"==typeof define&&define.amd?define(["exports","require"],e):e("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports||exports:n.ko={})}(function(a,l){function u(e,t){var n=null===e||("undefined"==typeof e?"undefined":_typeof(e))in y;return!!n&&e===t}function d(e,n){var i;return function(){i||(i=g.utils.setTimeout(function(){i=t,e()},n))}}function c(e,t){var n;return function(){clearTimeout(n),n=g.utils.setTimeout(e,t)}}function p(e){var t=this;return e&&g.utils.objectForEach(e,function(e,n){var i=g.extenders[e];"function"==typeof i&&(t=i(t,n)||t)}),t}function f(e,t){t&&t!==x?"beforeChange"===t?this._limitBeforeChange(e):this._origNotifySubscribers(e,t):this._limitChange(e)}function m(e,t){null!==t&&t.dispose&&t.dispose()}function v(e,t){var n=this.computedObservable,i=n[C];i.isDisposed||(this.disposalCount&&this.disposalCandidates[t]?(n.addDependencyTracking(t,e,this.disposalCandidates[t]),this.disposalCandidates[t]=null,--this.disposalCount):i.dependencyTracking[t]||n.addDependencyTracking(t,e,i.isSleeping?{_target:e}:n.subscribeToDependency(e)))}function h(e){g.bindingHandlers[e]={init:function(t,n,i,r,o){var s=function(){var t={};return t[e]=n(),t};return g.bindingHandlers.event.init.call(this,t,s,i,r,o)}}}function b(e,t,n,i){g.bindingHandlers[e]={init:function(e,r,o,s,a){var l,u;return g.computed(function(){var o=g.utils.unwrapObservable(r()),s=!n!=!o,d=!u,c=d||t||s!==l;c&&(d&&g.computedContext.getDependenciesCount()&&(u=g.utils.cloneNodes(g.virtualElements.childNodes(e),!0)),s?(d||g.virtualElements.setDomNodeChildren(e,g.utils.cloneNodes(u)),g.applyBindingsToDescendants(i?i(a,o):a,e)):g.virtualElements.emptyNode(e),l=s)},null,{disposeWhenNodeIsRemoved:e}),{controlsDescendantBindings:!0}}},g.expressionRewriting.bindingRewriteValidators[e]=!1,g.virtualElements.allowedBindings[e]=!0}var g="undefined"!=typeof a?a:{};g.exportSymbol=function(e,t){for(var n=e.split("."),i=g,r=0;r<n.length-1;r++)i=i[n[r]];i[n[n.length-1]]=t},g.exportProperty=function(e,t,n){e[t]=n},g.version="3.4.0",g.exportSymbol("version",g.version),g.options={deferUpdates:!1,useOnlyNativeEvents:!1},g.utils=function(){function a(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function l(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function u(e,t){return e.__proto__=t,e}function d(e,t){if("input"!==g.utils.tagNameLower(e)||!e.type)return!1;if("click"!=t.toLowerCase())return!1;var n=e.type;return"checkbox"==n||"radio"==n}function c(e,t,n){var i;t&&("object"===_typeof(e.classList)?(i=e.classList[n?"add":"remove"],g.utils.arrayForEach(t.match(S),function(t){i.call(e.classList,t)})):"string"==typeof e.className.baseVal?p(e.className,"baseVal",t,n):p(e,"className",t,n))}function p(e,t,n,i){var r=e[t].match(S)||[];g.utils.arrayForEach(n.match(S),function(e){g.utils.addOrRemoveItem(r,e,i)}),e[t]=r.join(" ")}var f={__proto__:[]}instanceof Array,m=!e&&"function"==typeof Symbol,v={},h={},b=r&&/Firefox\/2/i.test(r.userAgent)?"KeyboardEvent":"UIEvents";v[b]=["keyup","keydown","keypress"],v.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],a(v,function(e,t){if(t.length)for(var n=0,i=t.length;n<i;n++)h[t[n]]=e});var y={propertychange:!0},x=i&&function(){for(var e=3,n=i.createElement("div"),r=n.getElementsByTagName("i");n.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",r[0];);return e>4?e:t}(),E=6===x,w=7===x,S=/\S+/g;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)},arrayIndexOf:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},arrayFirst:function(e,t,n){for(var i=0,r=e.length;i<r;i++)if(t.call(n,e[i],i))return e[i];return null},arrayRemoveItem:function(e,t){var n=g.utils.arrayIndexOf(e,t);n>0?e.splice(n,1):0===n&&e.shift()},arrayGetDistinctValues:function(e){e=e||[];for(var t=[],n=0,i=e.length;n<i;n++)g.utils.arrayIndexOf(t,e[n])<0&&t.push(e[n]);return t},arrayMap:function(e,t){e=e||[];for(var n=[],i=0,r=e.length;i<r;i++)n.push(t(e[i],i));return n},arrayFilter:function(e,t){e=e||[];for(var n=[],i=0,r=e.length;i<r;i++)t(e[i],i)&&n.push(e[i]);return n},arrayPushAll:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,i=t.length;n<i;n++)e.push(t[n]);return e},addOrRemoveItem:function(e,t,n){var i=g.utils.arrayIndexOf(g.utils.peekObservable(e),t);i<0?n&&e.push(t):n||e.splice(i,1)},canSetPrototype:f,extend:l,setPrototypeOf:u,setPrototypeOfOrExtend:f?u:l,objectForEach:a,objectMap:function(e,t){if(!e)return e;var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=t(e[i],i,e));return n},emptyDomNode:function(e){for(;e.firstChild;)g.removeNode(e.firstChild)},moveCleanedNodesToContainerElement:function(e){for(var t=g.utils.makeArray(e),n=t[0]&&t[0].ownerDocument||i,r=n.createElement("div"),o=0,s=t.length;o<s;o++)r.appendChild(g.cleanNode(t[o]));return r},cloneNodes:function(e,t){for(var n=0,i=e.length,r=[];n<i;n++){var o=e[n].cloneNode(!0);r.push(t?g.cleanNode(o):o)}return r},setDomNodeChildren:function(e,t){if(g.utils.emptyDomNode(e),t)for(var n=0,i=t.length;n<i;n++)e.appendChild(t[n])},replaceDomNodes:function(e,t){var n=e.nodeType?[e]:e;if(n.length>0){for(var i=n[0],r=i.parentNode,o=0,s=t.length;o<s;o++)r.insertBefore(t[o],i);for(var o=0,s=n.length;o<s;o++)g.removeNode(n[o])}},fixUpContinuousNodeArray:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);for(;e.length>1&&e[e.length-1].parentNode!==t;)e.length--;if(e.length>1){var n=e[0],i=e[e.length-1];for(e.length=0;n!==i;)e.push(n),n=n.nextSibling;e.push(i)}}return e},setOptionNodeSelectionState:function(e,t){x<7?e.setAttribute("selected",t):e.selected=t},stringTrim:function(e){return null===e||e===t?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringStartsWith:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},domNodeIsContainedBy:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},domNodeIsAttachedToDocument:function(e){return g.utils.domNodeIsContainedBy(e,e.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(e){return!!g.utils.arrayFirst(e,g.utils.domNodeIsAttachedToDocument)},tagNameLower:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},catchFunctionErrors:function(e){return g.onError?function(){try{return e.apply(this,arguments)}catch(e){throw g.onError&&g.onError(e),e}}:e},setTimeout:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return setTimeout(g.utils.catchFunctionErrors(e),t)}),deferError:function(e){setTimeout(function(){throw g.onError&&g.onError(e),e},0)},registerEventHandler:function(e,t,n){var i=g.utils.catchFunctionErrors(n),r=x&&y[t];if(g.options.useOnlyNativeEvents||r||!o)if(r||"function"!=typeof e.addEventListener){if("undefined"==typeof e.attachEvent)throw new Error("Browser doesn't support addEventListener or attachEvent");var s=function(t){i.call(e,t)},a="on"+t;e.attachEvent(a,s),g.utils.domNodeDisposal.addDisposeCallback(e,function(){e.detachEvent(a,s)})}else e.addEventListener(t,i,!1);else o(e).bind(t,i)},triggerEvent:function(e,t){if(!e||!e.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");var r=d(e,t);if(g.options.useOnlyNativeEvents||!o||r)if("function"==typeof i.createEvent){if("function"!=typeof e.dispatchEvent)throw new Error("The supplied element doesn't support dispatchEvent");var s=h[t]||"HTMLEvents",a=i.createEvent(s);a.initEvent(t,!0,!0,n,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(a)}else if(r&&e.click)e.click();else{if("undefined"==typeof e.fireEvent)throw new Error("Browser doesn't support triggering events");e.fireEvent("on"+t)}else o(e).trigger(t)},unwrapObservable:function(e){return g.isObservable(e)?e():e},peekObservable:function(e){return g.isObservable(e)?e.peek():e},toggleDomNodeCssClass:c,setTextContent:function(e,n){var i=g.utils.unwrapObservable(n);null!==i&&i!==t||(i="");var r=g.virtualElements.firstChild(e);!r||3!=r.nodeType||g.virtualElements.nextSibling(r)?g.virtualElements.setDomNodeChildren(e,[e.ownerDocument.createTextNode(i)]):r.data=i,g.utils.forceRefresh(e)},setElementName:function(e,t){if(e.name=t,x<=7)try{e.mergeAttributes(i.createElement("<input name='"+e.name+"'/>"),!1)}catch(e){}},forceRefresh:function(e){if(x>=9){var t=1==e.nodeType?e:e.parentNode;t.style&&(t.style.zoom=t.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(e){if(x){var t=e.style.width;e.style.width=0,e.style.width=t}},range:function(e,t){e=g.utils.unwrapObservable(e),t=g.utils.unwrapObservable(t);for(var n=[],i=e;i<=t;i++)n.push(i);return n},makeArray:function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n]);return t},createSymbolOrString:function(e){return m?Symbol(e):e},isIe6:E,isIe7:w,ieVersion:x,getFormFields:function(e,t){for(var n=g.utils.makeArray(e.getElementsByTagName("input")).concat(g.utils.makeArray(e.getElementsByTagName("textarea"))),i="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},r=[],o=n.length-1;o>=0;o--)i(n[o])&&r.push(n[o]);return r},parseJson:function(e){return"string"==typeof e&&(e=g.utils.stringTrim(e))?s&&s.parse?s.parse(e):new Function("return "+e)():null},stringifyJson:function(e,t,n){if(!s||!s.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return s.stringify(g.utils.unwrapObservable(e),t,n)},postJson:function(e,t,n){n=n||{};var r=n.params||{},o=n.includeFields||this.fieldsIncludedWithJsonPost,s=e;if("object"==("undefined"==typeof e?"undefined":_typeof(e))&&"form"===g.utils.tagNameLower(e)){var l=e;s=l.action;for(var u=o.length-1;u>=0;u--)for(var d=g.utils.getFormFields(l,o[u]),c=d.length-1;c>=0;c--)r[d[c].name]=d[c].value}t=g.utils.unwrapObservable(t);var p=i.createElement("form");p.style.display="none",p.action=s,p.method="post";for(var f in t){var m=i.createElement("input");m.type="hidden",m.name=f,m.value=g.utils.stringifyJson(g.utils.unwrapObservable(t[f])),p.appendChild(m)}a(r,function(e,t){var n=i.createElement("input");n.type="hidden",n.name=e,n.value=t,p.appendChild(n)}),i.body.appendChild(p),n.submitter?n.submitter(p):p.submit(),setTimeout(function(){p.parentNode.removeChild(p)},0)}}}(),g.exportSymbol("utils",g.utils),g.exportSymbol("utils.arrayForEach",g.utils.arrayForEach),g.exportSymbol("utils.arrayFirst",g.utils.arrayFirst),g.exportSymbol("utils.arrayFilter",g.utils.arrayFilter),g.exportSymbol("utils.arrayGetDistinctValues",g.utils.arrayGetDistinctValues),g.exportSymbol("utils.arrayIndexOf",g.utils.arrayIndexOf),g.exportSymbol("utils.arrayMap",g.utils.arrayMap),g.exportSymbol("utils.arrayPushAll",g.utils.arrayPushAll),g.exportSymbol("utils.arrayRemoveItem",g.utils.arrayRemoveItem),g.exportSymbol("utils.extend",g.utils.extend),g.exportSymbol("utils.fieldsIncludedWithJsonPost",g.utils.fieldsIncludedWithJsonPost),g.exportSymbol("utils.getFormFields",g.utils.getFormFields),g.exportSymbol("utils.peekObservable",g.utils.peekObservable),g.exportSymbol("utils.postJson",g.utils.postJson),g.exportSymbol("utils.parseJson",g.utils.parseJson),g.exportSymbol("utils.registerEventHandler",g.utils.registerEventHandler),g.exportSymbol("utils.stringifyJson",g.utils.stringifyJson),g.exportSymbol("utils.range",g.utils.range),g.exportSymbol("utils.toggleDomNodeCssClass",g.utils.toggleDomNodeCssClass),g.exportSymbol("utils.triggerEvent",g.utils.triggerEvent),g.exportSymbol("utils.unwrapObservable",g.utils.unwrapObservable),g.exportSymbol("utils.objectForEach",g.utils.objectForEach),g.exportSymbol("utils.addOrRemoveItem",g.utils.addOrRemoveItem),g.exportSymbol("utils.setTextContent",g.utils.setTextContent),g.exportSymbol("unwrap",g.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(1===arguments.length)return function(){return t.apply(e,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice(0);return i.push.apply(i,arguments),t.apply(e,i)}}),g.utils.domData=new function(){function e(e,o){var s=e[i],a=s&&"null"!==s&&r[s];if(!a){if(!o)return t;s=e[i]="ko"+n++,r[s]={}}return r[s]}var n=0,i="__ko__"+(new Date).getTime(),r={};return{get:function(n,i){var r=e(n,!1);return r===t?t:r[i]},set:function(n,i,r){if(r!==t||e(n,!1)!==t){var o=e(n,!0);o[i]=r}},clear:function(e){var t=e[i];return!!t&&(delete r[t],e[i]=null,!0)},nextKey:function(){return n++ +i}}},g.exportSymbol("utils.domData",g.utils.domData),g.exportSymbol("utils.domData.clear",g.utils.domData.clear),g.utils.domNodeDisposal=new function(){function e(e,n){var i=g.utils.domData.get(e,s);return i===t&&n&&(i=[],g.utils.domData.set(e,s,i)),i}function n(e){g.utils.domData.set(e,s,t)}function i(t){var n=e(t,!1);if(n){n=n.slice(0);for(var i=0;i<n.length;i++)n[i](t)}g.utils.domData.clear(t),g.utils.domNodeDisposal.cleanExternalData(t),l[t.nodeType]&&r(t)}function r(e){for(var t,n=e.firstChild;t=n;)n=t.nextSibling,8===t.nodeType&&i(t)}var s=g.utils.domData.nextKey(),a={1:!0,8:!0,9:!0},l={1:!0,9:!0};return{addDisposeCallback:function(t,n){if("function"!=typeof n)throw new Error("Callback must be a function");e(t,!0).push(n)},removeDisposeCallback:function(t,i){var r=e(t,!1);r&&(g.utils.arrayRemoveItem(r,i),0==r.length&&n(t))},cleanNode:function(e){if(a[e.nodeType]&&(i(e),l[e.nodeType])){var t=[];g.utils.arrayPushAll(t,e.getElementsByTagName("*"));for(var n=0,r=t.length;n<r;n++)i(t[n])}return e},removeNode:function(e){g.cleanNode(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){o&&"function"==typeof o.cleanData&&o.cleanData([e])}}},g.cleanNode=g.utils.domNodeDisposal.cleanNode,g.removeNode=g.utils.domNodeDisposal.removeNode,g.exportSymbol("cleanNode",g.cleanNode),g.exportSymbol("removeNode",g.removeNode),g.exportSymbol("utils.domNodeDisposal",g.utils.domNodeDisposal),g.exportSymbol("utils.domNodeDisposal.addDisposeCallback",g.utils.domNodeDisposal.addDisposeCallback),g.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",g.utils.domNodeDisposal.removeDisposeCallback),function(){function e(e){var t=e.match(/^<([a-z]+)[ >]/);return t&&p[t[1]]||a}function r(t,r){r||(r=i);var o=r.parentWindow||r.defaultView||n,s=g.utils.stringTrim(t).toLowerCase(),a=r.createElement("div"),l=e(s),u=l[0],d="ignored<div>"+l[1]+t+l[2]+"</div>";for("function"==typeof o.innerShiv?a.appendChild(o.innerShiv(d)):(f&&r.appendChild(a),a.innerHTML=d,f&&a.parentNode.removeChild(a));u--;)a=a.lastChild;return g.utils.makeArray(a.lastChild.childNodes)}function s(e,t){if(o.parseHTML)return o.parseHTML(e,t)||[];var n=o.clean([e],t);if(n&&n[0]){for(var i=n[0];i.parentNode&&11!==i.parentNode.nodeType;)i=i.parentNode;i.parentNode&&i.parentNode.removeChild(i)}return n}var a=[0,"",""],l=[1,"<table>","</table>"],u=[2,"<table><tbody>","</tbody></table>"],d=[3,"<table><tbody><tr>","</tr></tbody></table>"],c=[1,"<select multiple='multiple'>","</select>"],p={thead:l,tbody:l,tfoot:l,tr:u,td:d,th:d,option:c,optgroup:c},f=g.utils.ieVersion<=8;g.utils.parseHtmlFragment=function(e,t){return o?s(e,t):r(e,t)},g.utils.setHtml=function(e,n){if(g.utils.emptyDomNode(e),n=g.utils.unwrapObservable(n),null!==n&&n!==t)if("string"!=typeof n&&(n=n.toString()),o)o(e).html(n);else for(var i=g.utils.parseHtmlFragment(n,e.ownerDocument),r=0;r<i.length;r++)e.appendChild(i[r])}}(),g.exportSymbol("utils.parseHtmlFragment",g.utils.parseHtmlFragment),g.exportSymbol("utils.setHtml",g.utils.setHtml),g.memoization=function(){function e(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}function n(){return e()+e()}function i(e,t){if(e)if(8==e.nodeType){var n=g.memoization.parseMemoText(e.nodeValue);null!=n&&t.push({domNode:e,memoId:n})}else if(1==e.nodeType)for(var r=0,o=e.childNodes,s=o.length;r<s;r++)i(o[r],t)}var r={};return{memoize:function(e){if("function"!=typeof e)throw new Error("You can only pass a function to ko.memoization.memoize()");var t=n();return r[t]=e,"<!--[ko_memo:"+t+"]-->"},unmemoize:function(e,n){var i=r[e];if(i===t)throw new Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return i.apply(null,n||[]),!0}finally{delete r[e]}},unmemoizeDomNodeAndDescendants:function(e,t){var n=[];i(e,n);for(var r=0,o=n.length;r<o;r++){var s=n[r].domNode,a=[s];t&&g.utils.arrayPushAll(a,t),g.memoization.unmemoize(n[r].memoId,a),s.nodeValue="",s.parentNode&&s.parentNode.removeChild(s)}},parseMemoText:function(e){var t=e.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}(),g.exportSymbol("memoization",g.memoization),g.exportSymbol("memoization.memoize",g.memoization.memoize),g.exportSymbol("memoization.unmemoize",g.memoization.unmemoize),g.exportSymbol("memoization.parseMemoText",g.memoization.parseMemoText),g.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",g.memoization.unmemoizeDomNodeAndDescendants),g.tasks=function(){function e(){if(a)for(var e,t=a,n=0;u<a;)if(e=s[u++]){if(u>t){if(++n>=5e3){u=a,g.utils.deferError(Error("'Too much recursion' after processing "+n+" task groups."));break}t=a}try{e()}catch(e){g.utils.deferError(e)}}}function t(){e(),u=a=s.length=0}function r(){g.tasks.scheduler(t)}var o,s=[],a=0,l=1,u=0;o=n.MutationObserver?function(e){var t=i.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}(t):i&&"onreadystatechange"in i.createElement("script")?function(e){var t=i.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,i.documentElement.removeChild(t),t=null,e()},i.documentElement.appendChild(t)}:function(e){setTimeout(e,0)};var d={scheduler:o,schedule:function(e){return a||r(),s[a++]=e,l++},cancel:function(e){var t=e-(l-a);t>=u&&t<a&&(s[t]=null)},resetForTesting:function(){var e=a-u;return u=a=s.length=0,e},runEarly:e};return d}(),g.exportSymbol("tasks",g.tasks),g.exportSymbol("tasks.schedule",g.tasks.schedule),g.exportSymbol("tasks.runEarly",g.tasks.runEarly),g.extenders={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return g.dependentObservable({read:e,write:function(i){clearTimeout(n),n=g.utils.setTimeout(function(){e(i)},t)}})},rateLimit:function(e,t){var n,i,r;"number"==typeof t?n=t:(n=t.timeout,i=t.method),e._deferUpdates=!1,r="notifyWhenChangesStop"==i?c:d,e.limit(function(e){return r(e,n)})},deferred:function(e,n){if(n!==!0)throw new Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");e._deferUpdates||(e._deferUpdates=!0,e.limit(function(n){var i;return function(){g.tasks.cancel(i),i=g.tasks.schedule(n),e.notifySubscribers(t,"dirty")}}))},notify:function(e,t){e.equalityComparer="always"==t?null:u}};var y={undefined:1,boolean:1,number:1,string:1};g.exportSymbol("extenders",g.extenders),g.subscription=function(e,t,n){this._target=e,this.callback=t,this.disposeCallback=n,this.isDisposed=!1,g.exportProperty(this,"dispose",this.dispose)},g.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},g.subscribable=function(){g.utils.setPrototypeOfOrExtend(this,E),E.init(this)};var x="change",E={init:function(e){e._subscriptions={},e._versionNumber=1},subscribe:function(e,t,n){var i=this;n=n||x;var r=t?e.bind(t):e,o=new g.subscription(i,r,function(){g.utils.arrayRemoveItem(i._subscriptions[n],o),i.afterSubscriptionRemove&&i.afterSubscriptionRemove(n)});return i.beforeSubscriptionAdd&&i.beforeSubscriptionAdd(n),i._subscriptions[n]||(i._subscriptions[n]=[]),i._subscriptions[n].push(o),o},notifySubscribers:function(e,t){if(t=t||x,t===x&&this.updateVersion(),this.hasSubscriptionsForEvent(t))try{g.dependencyDetection.begin();for(var n,i=this._subscriptions[t].slice(0),r=0;n=i[r];++r)n.isDisposed||n.callback(e)}finally{g.dependencyDetection.end()}},getVersion:function(){return this._versionNumber},hasChanged:function(e){return this.getVersion()!==e},updateVersion:function(){++this._versionNumber},limit:function(e){var t,n,i,r=this,o=g.isObservable(r),s="beforeChange";r._origNotifySubscribers||(r._origNotifySubscribers=r.notifySubscribers,r.notifySubscribers=f);var a=e(function(){r._notificationIsPending=!1,o&&i===r&&(i=r()),t=!1,r.isDifferent(n,i)&&r._origNotifySubscribers(n=i)});r._limitChange=function(e){r._notificationIsPending=t=!0,i=e,a()},r._limitBeforeChange=function(e){t||(n=e,r._origNotifySubscribers(e,s))}},hasSubscriptionsForEvent:function(e){return this._subscriptions[e]&&this._subscriptions[e].length},getSubscriptionsCount:function(e){if(e)return this._subscriptions[e]&&this._subscriptions[e].length||0;var t=0;return g.utils.objectForEach(this._subscriptions,function(e,n){"dirty"!==e&&(t+=n.length)}),t},isDifferent:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:p};g.exportProperty(E,"subscribe",E.subscribe),g.exportProperty(E,"extend",E.extend),g.exportProperty(E,"getSubscriptionsCount",E.getSubscriptionsCount),g.utils.canSetPrototype&&g.utils.setPrototypeOf(E,Function.prototype),g.subscribable.fn=E,g.isSubscribable=function(e){return null!=e&&"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},g.exportSymbol("subscribable",g.subscribable),g.exportSymbol("isSubscribable",g.isSubscribable),g.computedContext=g.dependencyDetection=function(){function e(){return++o}function t(e){r.push(i),i=e}function n(){i=r.pop()}var i,r=[],o=0;return{begin:t,end:n,registerDependency:function(t){if(i){if(!g.isSubscribable(t))throw new Error("Only subscribable things can act as dependencies");i.callback.call(i.callbackTarget,t,t._id||(t._id=e()))}},ignore:function(e,i,r){try{return t(),e.apply(i,r||[])}finally{n()}},getDependenciesCount:function(){if(i)return i.computed.getDependenciesCount()},isInitial:function(){if(i)return i.isInitial}}}(),g.exportSymbol("computedContext",g.computedContext),g.exportSymbol("computedContext.getDependenciesCount",g.computedContext.getDependenciesCount),g.exportSymbol("computedContext.isInitial",g.computedContext.isInitial),g.exportSymbol("ignoreDependencies",g.ignoreDependencies=g.dependencyDetection.ignore);var w=g.utils.createSymbolOrString("_latestValue");g.observable=function(e){function t(){return arguments.length>0?(t.isDifferent(t[w],arguments[0])&&(t.valueWillMutate(),t[w]=arguments[0],t.valueHasMutated()),this):(g.dependencyDetection.registerDependency(t),t[w])}return t[w]=e,g.utils.canSetPrototype||g.utils.extend(t,g.subscribable.fn),g.subscribable.fn.init(t),g.utils.setPrototypeOfOrExtend(t,S),g.options.deferUpdates&&g.extenders.deferred(t,!0),t};var S={equalityComparer:u,peek:function(){return this[w]},valueHasMutated:function(){this.notifySubscribers(this[w])},valueWillMutate:function(){this.notifySubscribers(this[w],"beforeChange")}};g.utils.canSetPrototype&&g.utils.setPrototypeOf(S,g.subscribable.fn);var N=g.observable.protoProperty="__ko_proto__";S[N]=g.observable,g.hasPrototype=function(e,n){return null!==e&&e!==t&&e[N]!==t&&(e[N]===n||g.hasPrototype(e[N],n))},g.isObservable=function(e){return g.hasPrototype(e,g.observable)},g.isWriteableObservable=function(e){return"function"==typeof e&&e[N]===g.observable||!("function"!=typeof e||e[N]!==g.dependentObservable||!e.hasWriteFunction)},g.exportSymbol("observable",g.observable),g.exportSymbol("isObservable",g.isObservable),g.exportSymbol("isWriteableObservable",g.isWriteableObservable),g.exportSymbol("isWritableObservable",g.isWriteableObservable),g.exportSymbol("observable.fn",S),g.exportProperty(S,"peek",S.peek),g.exportProperty(S,"valueHasMutated",S.valueHasMutated),g.exportProperty(S,"valueWillMutate",S.valueWillMutate),g.observableArray=function(e){if(e=e||[],"object"!=("undefined"==typeof e?"undefined":_typeof(e))||!("length"in e))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var t=g.observable(e);return g.utils.setPrototypeOfOrExtend(t,g.observableArray.fn),t.extend({trackArrayChanges:!0})},g.observableArray.fn={remove:function(e){for(var t=this.peek(),n=[],i="function"!=typeof e||g.isObservable(e)?function(t){return t===e}:e,r=0;r<t.length;r++){var o=t[r];i(o)&&(0===n.length&&this.valueWillMutate(),n.push(o),t.splice(r,1),r--)}return n.length&&this.valueHasMutated(),n},removeAll:function(e){if(e===t){var n=this.peek(),i=n.slice(0);return this.valueWillMutate(),n.splice(0,n.length),this.valueHasMutated(),i}return e?this.remove(function(t){return g.utils.arrayIndexOf(e,t)>=0}):[]},destroy:function(e){var t=this.peek(),n="function"!=typeof e||g.isObservable(e)?function(t){return t===e}:e;this.valueWillMutate();for(var i=t.length-1;i>=0;i--){var r=t[i];n(r)&&(t[i]._destroy=!0)}this.valueHasMutated()},destroyAll:function(e){return e===t?this.destroy(function(){return!0}):e?this.destroy(function(t){return g.utils.arrayIndexOf(e,t)>=0}):[]},indexOf:function(e){var t=this();return g.utils.arrayIndexOf(t,e)},replace:function(e,t){var n=this.indexOf(e);n>=0&&(this.valueWillMutate(),this.peek()[n]=t,this.valueHasMutated())}},g.utils.canSetPrototype&&g.utils.setPrototypeOf(g.observableArray.fn,g.observable.fn),g.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(e){g.observableArray.fn[e]=function(){var t=this.peek();this.valueWillMutate(),this.cacheDiffForKnownOperation(t,e,arguments);
var n=t[e].apply(t,arguments);return this.valueHasMutated(),n===t?this:n}}),g.utils.arrayForEach(["slice"],function(e){g.observableArray.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),g.exportSymbol("observableArray",g.observableArray);var T="arrayChange";g.extenders.trackArrayChanges=function(e,t){function n(){if(!o){o=!0;var t=e.notifySubscribers;e.notifySubscribers=function(e,n){return n&&n!==x||++a,t.apply(this,arguments)};var n=[].concat(e.peek()||[]);s=null,r=e.subscribe(function(t){if(t=[].concat(t||[]),e.hasSubscriptionsForEvent(T))var r=i(n,t);n=t,s=null,a=0,r&&r.length&&e.notifySubscribers(r,T)})}}function i(t,n){return(!s||a>1)&&(s=g.utils.compareArrays(t,n,e.compareArrayOptions)),s}if(e.compareArrayOptions={},t&&"object"==("undefined"==typeof t?"undefined":_typeof(t))&&g.utils.extend(e.compareArrayOptions,t),e.compareArrayOptions.sparse=!0,!e.cacheDiffForKnownOperation){var r,o=!1,s=null,a=0,l=e.beforeSubscriptionAdd,u=e.afterSubscriptionRemove;e.beforeSubscriptionAdd=function(t){l&&l.call(e,t),t===T&&n()},e.afterSubscriptionRemove=function(t){u&&u.call(e,t),t!==T||e.hasSubscriptionsForEvent(T)||(r.dispose(),o=!1)},e.cacheDiffForKnownOperation=function(e,t,n){function i(e,t,n){return r[r.length]={status:e,value:t,index:n}}if(o&&!a){var r=[],l=e.length,u=n.length,d=0;switch(t){case"push":d=l;case"unshift":for(var c=0;c<u;c++)i("added",n[c],d+c);break;case"pop":d=l-1;case"shift":l&&i("deleted",e[d],d);break;case"splice":for(var p=Math.min(Math.max(0,n[0]<0?l+n[0]:n[0]),l),f=1===u?l:Math.min(p+(n[1]||0),l),m=p+u-2,v=Math.max(f,m),h=[],b=[],c=p,y=2;c<v;++c,++y)c<f&&b.push(i("deleted",e[c],c)),c<m&&h.push(i("added",n[y],c));g.utils.findMovesInArrayComparison(b,h);break;default:return}s=r}}}};var C=g.utils.createSymbolOrString("_state");g.computed=g.dependentObservable=function(n,i,r){function o(){if(arguments.length>0){if("function"!=typeof s)throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return s.apply(a.evaluatorFunctionTarget,arguments),this}return g.dependencyDetection.registerDependency(o),(a.isStale||a.isSleeping&&o.haveDependenciesChanged())&&o.evaluateImmediate(),a.latestValue}if("object"===("undefined"==typeof n?"undefined":_typeof(n))?r=n:(r=r||{},n&&(r.read=n)),"function"!=typeof r.read)throw Error("Pass a function that returns the value of the ko.computed");var s=r.write,a={latestValue:t,isStale:!0,isBeingEvaluated:!1,suppressDisposalUntilDisposeWhenReturnsFalse:!1,isDisposed:!1,pure:!1,isSleeping:!1,readFunction:r.read,evaluatorFunctionTarget:i||r.owner,disposeWhenNodeIsRemoved:r.disposeWhenNodeIsRemoved||r.disposeWhenNodeIsRemoved||null,disposeWhen:r.disposeWhen||r.disposeWhen,domNodeDisposalCallback:null,dependencyTracking:{},dependenciesCount:0,evaluationTimeoutInstance:null};return o[C]=a,o.hasWriteFunction="function"==typeof s,g.utils.canSetPrototype||g.utils.extend(o,g.subscribable.fn),g.subscribable.fn.init(o),g.utils.setPrototypeOfOrExtend(o,D),r.pure?(a.pure=!0,a.isSleeping=!0,g.utils.extend(o,k)):r.deferEvaluation&&g.utils.extend(o,O),g.options.deferUpdates&&g.extenders.deferred(o,!0),e&&(o._options=r),a.disposeWhenNodeIsRemoved&&(a.suppressDisposalUntilDisposeWhenReturnsFalse=!0,a.disposeWhenNodeIsRemoved.nodeType||(a.disposeWhenNodeIsRemoved=null)),a.isSleeping||r.deferEvaluation||o.evaluateImmediate(),a.disposeWhenNodeIsRemoved&&o.isActive()&&g.utils.domNodeDisposal.addDisposeCallback(a.disposeWhenNodeIsRemoved,a.domNodeDisposalCallback=function(){o.dispose()}),o};var D={equalityComparer:u,getDependenciesCount:function(){return this[C].dependenciesCount},addDependencyTracking:function(e,t,n){if(this[C].pure&&t===this)throw Error("A 'pure' computed must not be called recursively");this[C].dependencyTracking[e]=n,n._order=this[C].dependenciesCount++,n._version=t.getVersion()},haveDependenciesChanged:function(){var e,t,n=this[C].dependencyTracking;for(e in n)if(n.hasOwnProperty(e)&&(t=n[e],t._target.hasChanged(t._version)))return!0},markDirty:function(){this._evalDelayed&&!this[C].isBeingEvaluated&&this._evalDelayed()},isActive:function(){return this[C].isStale||this[C].dependenciesCount>0},respondToChange:function(){this._notificationIsPending||this.evaluatePossiblyAsync()},subscribeToDependency:function(e){if(e._deferUpdates&&!this[C].disposeWhenNodeIsRemoved){var t=e.subscribe(this.markDirty,this,"dirty"),n=e.subscribe(this.respondToChange,this);return{_target:e,dispose:function(){t.dispose(),n.dispose()}}}return e.subscribe(this.evaluatePossiblyAsync,this)},evaluatePossiblyAsync:function(){var e=this,t=e.throttleEvaluation;t&&t>=0?(clearTimeout(this[C].evaluationTimeoutInstance),this[C].evaluationTimeoutInstance=g.utils.setTimeout(function(){e.evaluateImmediate(!0)},t)):e._evalDelayed?e._evalDelayed():e.evaluateImmediate(!0)},evaluateImmediate:function(e){var t=this,n=t[C],i=n.disposeWhen;if(!n.isBeingEvaluated&&!n.isDisposed){if(n.disposeWhenNodeIsRemoved&&!g.utils.domNodeIsAttachedToDocument(n.disposeWhenNodeIsRemoved)||i&&i()){if(!n.suppressDisposalUntilDisposeWhenReturnsFalse)return void t.dispose()}else n.suppressDisposalUntilDisposeWhenReturnsFalse=!1;n.isBeingEvaluated=!0;try{this.evaluateImmediate_CallReadWithDependencyDetection(e)}finally{n.isBeingEvaluated=!1}n.dependenciesCount||t.dispose()}},evaluateImmediate_CallReadWithDependencyDetection:function(e){var n=this,i=n[C],r=i.pure?t:!i.dependenciesCount,o={computedObservable:n,disposalCandidates:i.dependencyTracking,disposalCount:i.dependenciesCount};g.dependencyDetection.begin({callbackTarget:o,callback:v,computed:n,isInitial:r}),i.dependencyTracking={},i.dependenciesCount=0;var s=this.evaluateImmediate_CallReadThenEndDependencyDetection(i,o);n.isDifferent(i.latestValue,s)&&(i.isSleeping||n.notifySubscribers(i.latestValue,"beforeChange"),i.latestValue=s,i.isSleeping?n.updateVersion():e&&n.notifySubscribers(i.latestValue)),r&&n.notifySubscribers(i.latestValue,"awake")},evaluateImmediate_CallReadThenEndDependencyDetection:function(e,t){try{var n=e.readFunction;return e.evaluatorFunctionTarget?n.call(e.evaluatorFunctionTarget):n()}finally{g.dependencyDetection.end(),t.disposalCount&&!e.isSleeping&&g.utils.objectForEach(t.disposalCandidates,m),e.isStale=!1}},peek:function(){var e=this[C];return(e.isStale&&!e.dependenciesCount||e.isSleeping&&this.haveDependenciesChanged())&&this.evaluateImmediate(),e.latestValue},limit:function(e){g.subscribable.fn.limit.call(this,e),this._evalDelayed=function(){this._limitBeforeChange(this[C].latestValue),this[C].isStale=!0,this._limitChange(this)}},dispose:function(){var e=this[C];!e.isSleeping&&e.dependencyTracking&&g.utils.objectForEach(e.dependencyTracking,function(e,t){t.dispose&&t.dispose()}),e.disposeWhenNodeIsRemoved&&e.domNodeDisposalCallback&&g.utils.domNodeDisposal.removeDisposeCallback(e.disposeWhenNodeIsRemoved,e.domNodeDisposalCallback),e.dependencyTracking=null,e.dependenciesCount=0,e.isDisposed=!0,e.isStale=!1,e.isSleeping=!1,e.disposeWhenNodeIsRemoved=null}},k={beforeSubscriptionAdd:function(e){var t=this,n=t[C];if(!n.isDisposed&&n.isSleeping&&"change"==e){if(n.isSleeping=!1,n.isStale||t.haveDependenciesChanged())n.dependencyTracking=null,n.dependenciesCount=0,n.isStale=!0,t.evaluateImmediate();else{var i=[];g.utils.objectForEach(n.dependencyTracking,function(e,t){i[t._order]=e}),g.utils.arrayForEach(i,function(e,i){var r=n.dependencyTracking[e],o=t.subscribeToDependency(r._target);o._order=i,o._version=r._version,n.dependencyTracking[e]=o})}n.isDisposed||t.notifySubscribers(n.latestValue,"awake")}},afterSubscriptionRemove:function(e){var n=this[C];n.isDisposed||"change"!=e||this.hasSubscriptionsForEvent("change")||(g.utils.objectForEach(n.dependencyTracking,function(e,t){t.dispose&&(n.dependencyTracking[e]={_target:t._target,_order:t._order,_version:t._version},t.dispose())}),n.isSleeping=!0,this.notifySubscribers(t,"asleep"))},getVersion:function(){var e=this[C];return e.isSleeping&&(e.isStale||this.haveDependenciesChanged())&&this.evaluateImmediate(),g.subscribable.fn.getVersion.call(this)}},O={beforeSubscriptionAdd:function(e){"change"!=e&&"beforeChange"!=e||this.peek()}};g.utils.canSetPrototype&&g.utils.setPrototypeOf(D,g.subscribable.fn);var _=g.observable.protoProperty;g.computed[_]=g.observable,D[_]=g.computed,g.isComputed=function(e){return g.hasPrototype(e,g.computed)},g.isPureComputed=function(e){return g.hasPrototype(e,g.computed)&&e[C]&&e[C].pure},g.exportSymbol("computed",g.computed),g.exportSymbol("dependentObservable",g.computed),g.exportSymbol("isComputed",g.isComputed),g.exportSymbol("isPureComputed",g.isPureComputed),g.exportSymbol("computed.fn",D),g.exportProperty(D,"peek",D.peek),g.exportProperty(D,"dispose",D.dispose),g.exportProperty(D,"isActive",D.isActive),g.exportProperty(D,"getDependenciesCount",D.getDependenciesCount),g.pureComputed=function(e,t){return"function"==typeof e?g.computed(e,t,{pure:!0}):(e=g.utils.extend({},e),e.pure=!0,g.computed(e,t))},g.exportSymbol("pureComputed",g.pureComputed),function(){function e(r,o,s){s=s||new i,r=o(r);var a=!("object"!=("undefined"==typeof r?"undefined":_typeof(r))||null===r||r===t||r instanceof RegExp||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean);if(!a)return r;var l=r instanceof Array?[]:{};return s.save(r,l),n(r,function(n){var i=o(r[n]);switch("undefined"==typeof i?"undefined":_typeof(i)){case"boolean":case"number":case"string":case"function":l[n]=i;break;case"object":case"undefined":var a=s.get(i);l[n]=a!==t?a:e(i,o,s)}}),l}function n(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(var i in e)t(i)}function i(){this.keys=[],this.values=[]}var r=10;g.toJS=function(t){if(0==arguments.length)throw new Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(e){for(var t=0;g.isObservable(e)&&t<r;t++)e=e();return e})},g.toJSON=function(e,t,n){var i=g.toJS(e);return g.utils.stringifyJson(i,t,n)},i.prototype={constructor:i,save:function(e,t){var n=g.utils.arrayIndexOf(this.keys,e);n>=0?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(e){var n=g.utils.arrayIndexOf(this.keys,e);return n>=0?this.values[n]:t}}}(),g.exportSymbol("toJS",g.toJS),g.exportSymbol("toJSON",g.toJSON),function(){var e="__ko__hasDomDataOptionValue__";g.selectExtensions={readValue:function(n){switch(g.utils.tagNameLower(n)){case"option":return n[e]===!0?g.utils.domData.get(n,g.bindingHandlers.options.optionValueDomDataKey):g.utils.ieVersion<=7?n.getAttributeNode("value")&&n.getAttributeNode("value").specified?n.value:n.text:n.value;case"select":return n.selectedIndex>=0?g.selectExtensions.readValue(n.options[n.selectedIndex]):t;default:return n.value}},writeValue:function(n,i,r){switch(g.utils.tagNameLower(n)){case"option":switch("undefined"==typeof i?"undefined":_typeof(i)){case"string":g.utils.domData.set(n,g.bindingHandlers.options.optionValueDomDataKey,t),e in n&&delete n[e],n.value=i;break;default:g.utils.domData.set(n,g.bindingHandlers.options.optionValueDomDataKey,i),n[e]=!0,n.value="number"==typeof i?i:""}break;case"select":""!==i&&null!==i||(i=t);for(var o,s=-1,a=0,l=n.options.length;a<l;++a)if(o=g.selectExtensions.readValue(n.options[a]),o==i||""==o&&i===t){s=a;break}(r||s>=0||i===t&&n.size>1)&&(n.selectedIndex=s);break;default:null!==i&&i!==t||(i=""),n.value=i}}}}(),g.exportSymbol("selectExtensions",g.selectExtensions),g.exportSymbol("selectExtensions.readValue",g.selectExtensions.readValue),g.exportSymbol("selectExtensions.writeValue",g.selectExtensions.writeValue),g.expressionRewriting=function(){function e(e){if(g.utils.arrayIndexOf(i,e)>=0)return!1;var t=e.match(r);return null!==t&&(t[1]?"Object("+t[1]+")"+t[2]:e)}function t(e){var t=g.utils.stringTrim(e);123===t.charCodeAt(0)&&(t=t.slice(1,-1));var n,i=[],r=t.match(c),o=[],s=0;if(r){r.push(",");for(var a,l=0;a=r[l];++l){var u=a.charCodeAt(0);if(44===u){if(s<=0){i.push(n&&o.length?{key:n,value:o.join("")}:{unknown:n||o.join("")}),n=s=0,o=[];continue}}else if(58===u){if(!s&&!n&&1===o.length){n=o.pop();continue}}else if(47===u&&l&&a.length>1){var d=r[l-1].match(p);d&&!f[d[0]]&&(t=t.substr(t.indexOf(a)+1),r=t.match(c),r.push(","),l=-1,a="/")}else 40===u||123===u||91===u?++s:41===u||125===u||93===u?--s:n||o.length||34!==u&&39!==u||(a=a.slice(1,-1));o.push(a)}}return i}function n(n,i){function r(t,n){function i(e){return!e||!e.preprocess||(n=e.preprocess(n,t,r))}var u;if(!l){if(!i(g.getBindingHandler(t)))return;m[t]&&(u=e(n))&&s.push("'"+t+"':function(_z){"+u+"=_z}")}a&&(n="function(){return "+n+" }"),o.push("'"+t+"':"+n)}i=i||{};var o=[],s=[],a=i.valueAccessors,l=i.bindingParams,u="string"==typeof n?t(n):n;return g.utils.arrayForEach(u,function(e){r(e.key||e.unknown,e.value)}),s.length&&r("_ko_property_writers","{"+s.join(",")+" }"),o.join(",")}var i=["true","false","null","undefined"],r=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,o='"(?:[^"\\\\]|\\\\.)*"',s="'(?:[^'\\\\]|\\\\.)*'",a="/(?:[^/\\\\]|\\\\.)*/w*",l=",\"'{}()/:[\\]",u="[^\\s:,/][^"+l+"]*[^\\s"+l+"]",d="[^\\s]",c=RegExp(o+"|"+s+"|"+a+"|"+u+"|"+d,"g"),p=/[\])"'A-Za-z0-9_$]+$/,f={in:1,return:1,typeof:1},m={};return{bindingRewriteValidators:[],twoWayBindings:m,parseObjectLiteral:t,preProcessBindings:n,keyValueArrayContainsKey:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},writeValueToProperty:function(e,t,n,i,r){if(e&&g.isObservable(e))!g.isWriteableObservable(e)||r&&e.peek()===i||e(i);else{var o=t.get("_ko_property_writers");o&&o[n]&&o[n](i)}}}}(),g.exportSymbol("expressionRewriting",g.expressionRewriting),g.exportSymbol("expressionRewriting.bindingRewriteValidators",g.expressionRewriting.bindingRewriteValidators),g.exportSymbol("expressionRewriting.parseObjectLiteral",g.expressionRewriting.parseObjectLiteral),g.exportSymbol("expressionRewriting.preProcessBindings",g.expressionRewriting.preProcessBindings),g.exportSymbol("expressionRewriting._twoWayBindings",g.expressionRewriting.twoWayBindings),g.exportSymbol("jsonExpressionRewriting",g.expressionRewriting),g.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",g.expressionRewriting.preProcessBindings),function(){function e(e){return 8==e.nodeType&&a.test(s?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&l.test(s?e.text:e.nodeValue)}function n(n,i){for(var r=n,o=1,s=[];r=r.nextSibling;){if(t(r)&&(o--,0===o))return s;s.push(r),e(r)&&o++}if(!i)throw new Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function r(e,t){var i=n(e,t);return i?i.length>0?i[i.length-1].nextSibling:e.nextSibling:null}function o(n){var i=n.firstChild,o=null;if(i)do if(o)o.push(i);else if(e(i)){var s=r(i,!0);s?i=s:o=[i]}else t(i)&&(o=[i]);while(i=i.nextSibling);return o}var s=i&&"<!--test-->"===i.createComment("test").text,a=s?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,l=s?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,u={ul:!0,ol:!0};g.virtualElements={allowedBindings:{},childNodes:function(t){return e(t)?n(t):t.childNodes},emptyNode:function(t){if(e(t))for(var n=g.virtualElements.childNodes(t),i=0,r=n.length;i<r;i++)g.removeNode(n[i]);else g.utils.emptyDomNode(t)},setDomNodeChildren:function(t,n){if(e(t)){g.virtualElements.emptyNode(t);for(var i=t.nextSibling,r=0,o=n.length;r<o;r++)i.parentNode.insertBefore(n[r],i)}else g.utils.setDomNodeChildren(t,n)},prepend:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},insertAfter:function(t,n,i){i?e(t)?t.parentNode.insertBefore(n,i.nextSibling):i.nextSibling?t.insertBefore(n,i.nextSibling):t.appendChild(n):g.virtualElements.prepend(t,n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return e(n)&&(n=r(n)),n.nextSibling&&t(n.nextSibling)?null:n.nextSibling},hasBindingValue:e,virtualNodeBindingValue:function(e){var t=(s?e.text:e.nodeValue).match(a);return t?t[1]:null},normaliseVirtualElementDomStructure:function(e){if(u[g.utils.tagNameLower(e)]){var t=e.firstChild;if(t)do if(1===t.nodeType){var n=o(t);if(n)for(var i=t.nextSibling,r=0;r<n.length;r++)i?e.insertBefore(n[r],i):e.appendChild(n[r])}while(t=t.nextSibling)}}}}(),g.exportSymbol("virtualElements",g.virtualElements),g.exportSymbol("virtualElements.allowedBindings",g.virtualElements.allowedBindings),g.exportSymbol("virtualElements.emptyNode",g.virtualElements.emptyNode),g.exportSymbol("virtualElements.insertAfter",g.virtualElements.insertAfter),g.exportSymbol("virtualElements.prepend",g.virtualElements.prepend),g.exportSymbol("virtualElements.setDomNodeChildren",g.virtualElements.setDomNodeChildren),function(){function e(e,n,i){var r=e+(i&&i.valueAccessors||"");return n[r]||(n[r]=t(e,i))}function t(e,t){var n=g.expressionRewriting.preProcessBindings(e,t),i="with($context){with($data||{}){return{"+n+"}}}";return new Function("$context","$element",i)}var n="data-bind";g.bindingProvider=function(){this.bindingCache={}},g.utils.extend(g.bindingProvider.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute(n)||g.components.getComponentNameForNode(e);case 8:return g.virtualElements.hasBindingValue(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t),i=n?this.parseBindingsString(n,t,e):null;return g.components.addBindingsForCustomElement(i,e,t,!1)},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t),i=n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return g.components.addBindingsForCustomElement(i,e,t,!0)},getBindingsString:function(e,t){switch(e.nodeType){case 1:return e.getAttribute(n);case 8:return g.virtualElements.virtualNodeBindingValue(e);default:return null}},parseBindingsString:function(t,n,i,r){try{var o=e(t,this.bindingCache,r);return o(n,i)}catch(e){throw e.message="Unable to parse bindings.\nBindings value: "+t+"\nMessage: "+e.message,e}}}),g.bindingProvider.instance=new g.bindingProvider}(),g.exportSymbol("bindingProvider",g.bindingProvider),function(){function e(e){return function(){return e}}function i(e){return e()}function r(e){return g.utils.objectMap(g.dependencyDetection.ignore(e),function(t,n){return function(){return e()[n]}})}function s(t,n,i){return"function"==typeof t?r(t.bind(null,n,i)):g.utils.objectMap(t,e)}function a(e,t){return r(this.getBindings.bind(this,e,t))}function l(e){var t=g.virtualElements.allowedBindings[e];if(!t)throw new Error("The binding '"+e+"' cannot be used with virtual elements")}function u(e,t,n){var i,r=g.virtualElements.firstChild(t),o=g.bindingProvider.instance,s=o.preprocessNode;if(s){for(;i=r;)r=g.virtualElements.nextSibling(i),s.call(o,i);r=g.virtualElements.firstChild(t)}for(;i=r;)r=g.virtualElements.nextSibling(i),d(e,i,n)}function d(e,t,n){var i=!0,r=1===t.nodeType;r&&g.virtualElements.normaliseVirtualElementDomStructure(t);var o=r&&n||g.bindingProvider.instance.nodeHasBindings(t);o&&(i=p(t,null,e,n).shouldBindDescendants),i&&!m[g.utils.tagNameLower(t)]&&u(e,t,!r)}function c(e){var t=[],n={},i=[];return g.utils.objectForEach(e,function r(o){if(!n[o]){var s=g.getBindingHandler(o);s&&(s.after&&(i.push(o),g.utils.arrayForEach(s.after,function(t){if(e[t]){if(g.utils.arrayIndexOf(i,t)!==-1)throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));r(t)}}),i.length--),t.push({key:o,handler:s})),n[o]=!0}}),t}function p(e,n,r,o){var s=g.utils.domData.get(e,v);if(!n){if(s)throw Error("You cannot apply bindings multiple times to the same element.");g.utils.domData.set(e,v,!0)}!s&&o&&g.storedBindingContextForNode(e,r);var u;if(n&&"function"!=typeof n)u=n;else{var d=g.bindingProvider.instance,p=d.getBindingAccessors||a,f=g.dependentObservable(function(){return u=n?n(r,e):p.call(d,e,r),u&&r._subscribable&&r._subscribable(),u},null,{disposeWhenNodeIsRemoved:e});u&&f.isActive()||(f=null)}var m;if(u){var h,b;!function(){var n=function(){return g.utils.objectMap(f?f():u,i)};h=f?function(e){return function(){return i(f()[e])}}:function(e){return u[e]},n.get=function(e){return u[e]&&i(h(e))},n.has=function(e){return e in u},b=c(u),g.utils.arrayForEach(b,function(i){var o=i.handler.init,s=i.handler.update,a=i.key;8===e.nodeType&&l(a);try{"function"==typeof o&&g.dependencyDetection.ignore(function(){var i=o(e,h(a),n,r.$data,r);if(i&&i.controlsDescendantBindings){if(m!==t)throw new Error("Multiple bindings ("+m+" and "+a+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");m=a}}),"function"==typeof s&&g.dependentObservable(function(){s(e,h(a),n,r.$data,r)},null,{disposeWhenNodeIsRemoved:e})}catch(e){throw e.message='Unable to process binding "'+a+": "+u[a]+'"\nMessage: '+e.message,e}})}()}return{shouldBindDescendants:m===t}}function f(e){return e&&e instanceof g.bindingContext?e:new g.bindingContext(e)}g.bindingHandlers={};var m={script:!0,textarea:!0,template:!0};g.getBindingHandler=function(e){return g.bindingHandlers[e]},g.bindingContext=function(e,n,i,r){function o(){var t=u?e():e,o=g.utils.unwrapObservable(t);return n?(n._subscribable&&n._subscribable(),g.utils.extend(l,n),d&&(l._subscribable=d)):(l.$parents=[],l.$root=o,l.ko=g),l.$rawData=t,l.$data=o,i&&(l[i]=o),r&&r(l,n,o),l.$data}function s(){return a&&!g.utils.anyDomNodeIsAttachedToDocument(a)}var a,l=this,u="function"==typeof e&&!g.isObservable(e),d=g.dependentObservable(o,null,{disposeWhen:s,disposeWhenNodeIsRemoved:!0});d.isActive()&&(l._subscribable=d,d.equalityComparer=null,a=[],d._addNode=function(e){a.push(e),g.utils.domNodeDisposal.addDisposeCallback(e,function(e){g.utils.arrayRemoveItem(a,e),a.length||(d.dispose(),l._subscribable=d=t)})})},g.bindingContext.prototype.createChildContext=function(e,t,n){return new g.bindingContext(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)})},g.bindingContext.prototype.extend=function(e){return new g.bindingContext(this._subscribable||this.$data,this,null,function(t,n){t.$rawData=n.$rawData,g.utils.extend(t,"function"==typeof e?e():e)})};var v=g.utils.domData.nextKey(),h=g.utils.domData.nextKey();g.storedBindingContextForNode=function(e,t){return 2!=arguments.length?g.utils.domData.get(e,h):(g.utils.domData.set(e,h,t),void(t._subscribable&&t._subscribable._addNode(e)))},g.applyBindingAccessorsToNode=function(e,t,n){return 1===e.nodeType&&g.virtualElements.normaliseVirtualElementDomStructure(e),p(e,t,f(n),!0)},g.applyBindingsToNode=function(e,t,n){var i=f(n);return g.applyBindingAccessorsToNode(e,s(t,i,e),i)},g.applyBindingsToDescendants=function(e,t){1!==t.nodeType&&8!==t.nodeType||u(f(e),t,!0)},g.applyBindings=function(e,t){if(!o&&n.jQuery&&(o=n.jQuery),t&&1!==t.nodeType&&8!==t.nodeType)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");t=t||n.document.body,d(f(e),t,!0)},g.contextFor=function(e){switch(e.nodeType){case 1:case 8:var n=g.storedBindingContextForNode(e);if(n)return n;if(e.parentNode)return g.contextFor(e.parentNode)}return t},g.dataFor=function(e){var n=g.contextFor(e);return n?n.$data:t},g.exportSymbol("bindingHandlers",g.bindingHandlers),g.exportSymbol("applyBindings",g.applyBindings),g.exportSymbol("applyBindingsToDescendants",g.applyBindingsToDescendants),g.exportSymbol("applyBindingAccessorsToNode",g.applyBindingAccessorsToNode),g.exportSymbol("applyBindingsToNode",g.applyBindingsToNode),g.exportSymbol("contextFor",g.contextFor),g.exportSymbol("dataFor",g.dataFor)}(),function(e){function t(t,n){return t.hasOwnProperty(n)?t[n]:e}function n(e,n){var r,a=t(o,e);a?a.subscribe(n):(a=o[e]=new g.subscribable,a.subscribe(n),i(e,function(t,n){var i=!(!n||!n.synchronous);s[e]={definition:t,isSynchronousComponent:i},delete o[e],r||i?a.notifySubscribers(t):g.tasks.schedule(function(){a.notifySubscribers(t)})}),r=!0)}function i(e,t){r("getConfig",[e],function(n){n?r("loadComponent",[e,n],function(e){t(e,n)}):t(null,null)})}function r(t,n,i,o){o||(o=g.components.loaders.slice(0));var s=o.shift();if(s){var a=s[t];if(a){var l=!1,u=a.apply(s,n.concat(function(e){l?i(null):null!==e?i(e):r(t,n,i,o)}));if(u!==e&&(l=!0,!s.suppressLoaderExceptions))throw new Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else r(t,n,i,o)}else i(null)}var o={},s={};g.components={get:function(e,i){var r=t(s,e);r?r.isSynchronousComponent?g.dependencyDetection.ignore(function(){i(r.definition)}):g.tasks.schedule(function(){i(r.definition)}):n(e,i)},clearCachedDefinition:function(e){delete s[e]},_getFirstResultFromLoaders:r},g.components.loaders=[],g.exportSymbol("components",g.components),g.exportSymbol("components.get",g.components.get),g.exportSymbol("components.clearCachedDefinition",g.components.clearCachedDefinition)}(),function(e){function t(e,t,n,i){var r={},o=2,s=function(){0===--o&&i(r)},a=n.template,l=n.viewModel;a?d(t,a,function(t){g.components._getFirstResultFromLoaders("loadTemplate",[e,t],function(e){r.template=e,s()})}):s(),l?d(t,l,function(t){g.components._getFirstResultFromLoaders("loadViewModel",[e,t],function(e){r[f]=e,s()})}):s()}function r(e,t,n){if("string"==typeof t)n(g.utils.parseHtmlFragment(t));else if(t instanceof Array)n(t);else if(u(t))n(g.utils.makeArray(t.childNodes));else if(t.element){var r=t.element;if(a(r))n(s(r));else if("string"==typeof r){var o=i.getElementById(r);o?n(s(o)):e("Cannot find element with ID "+r)}else e("Unknown element type: "+r)}else e("Unknown template value: "+t)}function o(e,t,n){if("function"==typeof t)n(function(e){return new t(e)});else if("function"==typeof t[f])n(t[f]);else if("instance"in t){var i=t.instance;n(function(e,t){return i})}else"viewModel"in t?o(e,t.viewModel,n):e("Unknown viewModel value: "+t)}function s(e){switch(g.utils.tagNameLower(e)){case"script":return g.utils.parseHtmlFragment(e.text);case"textarea":return g.utils.parseHtmlFragment(e.value);case"template":if(u(e.content))return g.utils.cloneNodes(e.content.childNodes)}return g.utils.cloneNodes(e.childNodes)}function a(e){return n.HTMLElement?e instanceof HTMLElement:e&&e.tagName&&1===e.nodeType}function u(e){return n.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function d(e,t,i){"string"==typeof t.require?l||n.require?(l||n.require)([t.require],i):e("Uses require, but no AMD loader is present"):i(t)}function c(e){return function(t){throw new Error("Component '"+e+"': "+t)}}var p={};g.components.register=function(e,t){if(!t)throw new Error("Invalid configuration for "+e);if(g.components.isRegistered(e))throw new Error("Component "+e+" is already registered");p[e]=t},g.components.isRegistered=function(e){return p.hasOwnProperty(e)},g.components.unregister=function(e){delete p[e],g.components.clearCachedDefinition(e)},g.components.defaultLoader={getConfig:function(e,t){var n=p.hasOwnProperty(e)?p[e]:null;t(n)},loadComponent:function(e,n,i){var r=c(e);d(r,n,function(n){t(e,r,n,i)})},loadTemplate:function(e,t,n){r(c(e),t,n)},loadViewModel:function(e,t,n){o(c(e),t,n)}};var f="createViewModel";g.exportSymbol("components.register",g.components.register),g.exportSymbol("components.isRegistered",g.components.isRegistered),g.exportSymbol("components.unregister",g.components.unregister),g.exportSymbol("components.defaultLoader",g.components.defaultLoader),g.components.loaders.push(g.components.defaultLoader),g.components._allRegisteredComponents=p}(),function(e){function t(e,t){var i=e.getAttribute("params");if(i){var r=n.parseBindingsString(i,t,e,{valueAccessors:!0,bindingParams:!0}),o=g.utils.objectMap(r,function(t,n){return g.computed(t,null,{disposeWhenNodeIsRemoved:e})}),s=g.utils.objectMap(o,function(t,n){var i=t.peek();return t.isActive()?g.computed({read:function(){return g.utils.unwrapObservable(t())},write:g.isWriteableObservable(i)&&function(e){t()(e)},disposeWhenNodeIsRemoved:e}):i});return s.hasOwnProperty("$raw")||(s.$raw=o),s}return{$raw:{}}}g.components.getComponentNameForNode=function(e){var t=g.utils.tagNameLower(e);if(g.components.isRegistered(t)&&(t.indexOf("-")!=-1||""+e=="[object HTMLUnknownElement]"||g.utils.ieVersion<=8&&e.tagName===t))return t},g.components.addBindingsForCustomElement=function(e,n,i,r){if(1===n.nodeType){var o=g.components.getComponentNameForNode(n);if(o){if(e=e||{},e.component)throw new Error('Cannot use the "component" binding on a custom element matching a component');var s={name:o,params:t(n,i)};e.component=r?function(){return s}:s}}return e};var n=new g.bindingProvider;g.utils.ieVersion<9&&(g.components.register=function(e){return function(t){return i.createElement(t),e.apply(this,arguments)}}(g.components.register),i.createDocumentFragment=function(e){return function(){var t=e(),n=g.components._allRegisteredComponents;for(var i in n)n.hasOwnProperty(i)&&t.createElement(i);return t}}(i.createDocumentFragment))}(),function(e){function t(e,t,n){var i=t.template;if(!i)throw new Error("Component '"+e+"' has no template");var r=g.utils.cloneNodes(i);g.virtualElements.setDomNodeChildren(n,r)}function n(e,t,n,i){var r=e.createViewModel;return r?r.call(e,i,{element:t,templateNodes:n}):i}var i=0;g.bindingHandlers.component={init:function(r,o,s,a,l){var u,d,c=function(){var e=u&&u.dispose;"function"==typeof e&&e.call(u),u=null,d=null},p=g.utils.makeArray(g.virtualElements.childNodes(r));return g.utils.domNodeDisposal.addDisposeCallback(r,c),g.computed(function(){var s,a,f=g.utils.unwrapObservable(o());if("string"==typeof f?s=f:(s=g.utils.unwrapObservable(f.name),a=g.utils.unwrapObservable(f.params)),!s)throw new Error("No component name specified");var m=d=++i;g.components.get(s,function(i){if(d===m){if(c(),!i)throw new Error("Unknown component '"+s+"'");t(s,i,r);var o=n(i,r,p,a),f=l.createChildContext(o,e,function(e){e.$component=o,e.$componentTemplateNodes=p});u=o,g.applyBindingsToDescendants(f,r)}})},null,{disposeWhenNodeIsRemoved:r}),{controlsDescendantBindings:!0}}},g.virtualElements.allowedBindings.component=!0}();var A={class:"className",for:"htmlFor"};g.bindingHandlers.attr={update:function(e,n,i){var r=g.utils.unwrapObservable(n())||{};g.utils.objectForEach(r,function(n,i){i=g.utils.unwrapObservable(i);var r=i===!1||null===i||i===t;r&&e.removeAttribute(n),g.utils.ieVersion<=8&&n in A?(n=A[n],r?e.removeAttribute(n):e[n]=i):r||e.setAttribute(n,i.toString()),"name"===n&&g.utils.setElementName(e,r?"":i.toString())})}},function(){g.bindingHandlers.checked={after:["value","attr"],init:function(e,n,i){function r(){var t=e.checked,r=f?s():t;if(!g.computedContext.isInitial()&&(!l||t)){var o=g.dependencyDetection.ignore(n);if(d){var a=c?o.peek():o;p!==r?(t&&(g.utils.addOrRemoveItem(a,r,!0),g.utils.addOrRemoveItem(a,p,!1)),p=r):g.utils.addOrRemoveItem(a,r,t),c&&g.isWriteableObservable(o)&&o(a)}else g.expressionRewriting.writeValueToProperty(o,i,"checked",r,!0)}}function o(){var t=g.utils.unwrapObservable(n());d?e.checked=g.utils.arrayIndexOf(t,s())>=0:a?e.checked=t:e.checked=s()===t}var s=g.pureComputed(function(){return i.has("checkedValue")?g.utils.unwrapObservable(i.get("checkedValue")):i.has("value")?g.utils.unwrapObservable(i.get("value")):e.value}),a="checkbox"==e.type,l="radio"==e.type;if(a||l){var u=n(),d=a&&g.utils.unwrapObservable(u)instanceof Array,c=!(d&&u.push&&u.splice),p=d?s():t,f=l||d;l&&!e.name&&g.bindingHandlers.uniqueName.init(e,function(){return!0}),g.computed(r,null,{disposeWhenNodeIsRemoved:e}),g.utils.registerEventHandler(e,"click",r),g.computed(o,null,{disposeWhenNodeIsRemoved:e}),u=t}}},g.expressionRewriting.twoWayBindings.checked=!0,g.bindingHandlers.checkedValue={update:function(e,t){e.value=g.utils.unwrapObservable(t())}}}();var R="__ko__cssValue";g.bindingHandlers.css={update:function(e,t){var n=g.utils.unwrapObservable(t());null!==n&&"object"==("undefined"==typeof n?"undefined":_typeof(n))?g.utils.objectForEach(n,function(t,n){
n=g.utils.unwrapObservable(n),g.utils.toggleDomNodeCssClass(e,t,n)}):(n=g.utils.stringTrim(String(n||"")),g.utils.toggleDomNodeCssClass(e,e[R],!1),e[R]=n,g.utils.toggleDomNodeCssClass(e,n,!0))}},g.bindingHandlers.enable={update:function(e,t){var n=g.utils.unwrapObservable(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},g.bindingHandlers.disable={update:function(e,t){g.bindingHandlers.enable.update(e,function(){return!g.utils.unwrapObservable(t())})}},g.bindingHandlers.event={init:function(e,t,n,i,r){var o=t()||{};g.utils.objectForEach(o,function(o){"string"==typeof o&&g.utils.registerEventHandler(e,o,function(e){var s,a=t()[o];if(a){try{var l=g.utils.makeArray(arguments);i=r.$data,l.unshift(i),s=a.apply(i,l)}finally{s!==!0&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}var u=n.get(o+"Bubble")!==!1;u||(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},g.bindingHandlers.foreach={makeTemplateValueAccessor:function(e){return function(){var t=e(),n=g.utils.peekObservable(t);return n&&"number"!=typeof n.length?(g.utils.unwrapObservable(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:g.nativeTemplateEngine.instance}):{foreach:t,templateEngine:g.nativeTemplateEngine.instance}}},init:function(e,t,n,i,r){return g.bindingHandlers.template.init(e,g.bindingHandlers.foreach.makeTemplateValueAccessor(t))},update:function(e,t,n,i,r){return g.bindingHandlers.template.update(e,g.bindingHandlers.foreach.makeTemplateValueAccessor(t),n,i,r)}},g.expressionRewriting.bindingRewriteValidators.foreach=!1,g.virtualElements.allowedBindings.foreach=!0;var I="__ko_hasfocusUpdating",B="__ko_hasfocusLastValue";g.bindingHandlers.hasfocus={init:function(e,t,n){var i=function(i){e[I]=!0;var r=e.ownerDocument;if("activeElement"in r){var o;try{o=r.activeElement}catch(e){o=r.body}i=o===e}var s=t();g.expressionRewriting.writeValueToProperty(s,n,"hasfocus",i,!0),e[B]=i,e[I]=!1},r=i.bind(null,!0),o=i.bind(null,!1);g.utils.registerEventHandler(e,"focus",r),g.utils.registerEventHandler(e,"focusin",r),g.utils.registerEventHandler(e,"blur",o),g.utils.registerEventHandler(e,"focusout",o)},update:function(e,t){var n=!!g.utils.unwrapObservable(t());e[I]||e[B]===n||(n?e.focus():e.blur(),!n&&e[B]&&e.ownerDocument.body.focus(),g.dependencyDetection.ignore(g.utils.triggerEvent,null,[e,n?"focusin":"focusout"]))}},g.expressionRewriting.twoWayBindings.hasfocus=!0,g.bindingHandlers.hasFocus=g.bindingHandlers.hasfocus,g.expressionRewriting.twoWayBindings.hasFocus=!0,g.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){g.utils.setHtml(e,t())}},b("if"),b("ifnot",!1,!0),b("with",!0,!1,function(e,t){return e.createChildContext(t)});var F={};g.bindingHandlers.options={init:function(e){if("select"!==g.utils.tagNameLower(e))throw new Error("options binding applies only to SELECT elements");for(;e.length>0;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(e,n,i){function r(){return g.utils.arrayFilter(e.options,function(e){return e.selected})}function o(e,t,n){var i="undefined"==typeof t?"undefined":_typeof(t);return"function"==i?t(e):"string"==i?e[t]:n}function s(n,r,s){s.length&&(b=!m&&s[0].selected?[g.selectExtensions.readValue(s[0])]:[],y=!0);var a=e.ownerDocument.createElement("option");if(n===F)g.utils.setTextContent(a,i.get("optionsCaption")),g.selectExtensions.writeValue(a,t);else{var l=o(n,i.get("optionsValue"),n);g.selectExtensions.writeValue(a,g.utils.unwrapObservable(l));var u=o(n,i.get("optionsText"),l);g.utils.setTextContent(a,u)}return[a]}function a(t,n){if(y&&m)g.selectExtensions.writeValue(e,g.utils.unwrapObservable(i.get("value")),!0);else if(b.length){var r=g.utils.arrayIndexOf(b,g.selectExtensions.readValue(n[0]))>=0;g.utils.setOptionNodeSelectionState(n[0],r),y&&!r&&g.dependencyDetection.ignore(g.utils.triggerEvent,null,[e,"change"])}}var l,u,d=0==e.length,c=e.multiple,p=!d&&c?e.scrollTop:null,f=g.utils.unwrapObservable(n()),m=i.get("valueAllowUnset")&&i.has("value"),v=i.get("optionsIncludeDestroyed"),h={},b=[];m||(c?b=g.utils.arrayMap(r(),g.selectExtensions.readValue):e.selectedIndex>=0&&b.push(g.selectExtensions.readValue(e.options[e.selectedIndex]))),f&&("undefined"==typeof f.length&&(f=[f]),u=g.utils.arrayFilter(f,function(e){return v||e===t||null===e||!g.utils.unwrapObservable(e._destroy)}),i.has("optionsCaption")&&(l=g.utils.unwrapObservable(i.get("optionsCaption")),null!==l&&l!==t&&u.unshift(F)));var y=!1;h.beforeRemove=function(t){e.removeChild(t)};var x=a;i.has("optionsAfterRender")&&"function"==typeof i.get("optionsAfterRender")&&(x=function(e,n){a(e,n),g.dependencyDetection.ignore(i.get("optionsAfterRender"),null,[n[0],e!==F?e:t])}),g.utils.setDomNodeChildrenFromArrayMapping(e,u,s,h,x),g.dependencyDetection.ignore(function(){if(m)g.selectExtensions.writeValue(e,g.utils.unwrapObservable(i.get("value")),!0);else{var t;t=c?b.length&&r().length<b.length:b.length&&e.selectedIndex>=0?g.selectExtensions.readValue(e.options[e.selectedIndex])!==b[0]:b.length||e.selectedIndex>=0,t&&g.utils.triggerEvent(e,"change")}}),g.utils.ensureSelectElementIsRenderedCorrectly(e),p&&Math.abs(p-e.scrollTop)>20&&(e.scrollTop=p)}},g.bindingHandlers.options.optionValueDomDataKey=g.utils.domData.nextKey(),g.bindingHandlers.selectedOptions={after:["options","foreach"],init:function(e,t,n){g.utils.registerEventHandler(e,"change",function(){var i=t(),r=[];g.utils.arrayForEach(e.getElementsByTagName("option"),function(e){e.selected&&r.push(g.selectExtensions.readValue(e))}),g.expressionRewriting.writeValueToProperty(i,n,"selectedOptions",r)})},update:function(e,t){if("select"!=g.utils.tagNameLower(e))throw new Error("values binding applies only to SELECT elements");var n=g.utils.unwrapObservable(t()),i=e.scrollTop;n&&"number"==typeof n.length&&g.utils.arrayForEach(e.getElementsByTagName("option"),function(e){var t=g.utils.arrayIndexOf(n,g.selectExtensions.readValue(e))>=0;e.selected!=t&&g.utils.setOptionNodeSelectionState(e,t)}),e.scrollTop=i}},g.expressionRewriting.twoWayBindings.selectedOptions=!0,g.bindingHandlers.style={update:function(e,n){var i=g.utils.unwrapObservable(n()||{});g.utils.objectForEach(i,function(n,i){i=g.utils.unwrapObservable(i),null!==i&&i!==t&&i!==!1||(i=""),e.style[n]=i})}},g.bindingHandlers.submit={init:function(e,t,n,i,r){if("function"!=typeof t())throw new Error("The value for a submit binding must be a function");g.utils.registerEventHandler(e,"submit",function(n){var i,o=t();try{i=o.call(r.$data,e)}finally{i!==!0&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},g.bindingHandlers.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){g.utils.setTextContent(e,t())}},g.virtualElements.allowedBindings.text=!0,function(){if(n&&n.navigator)var i=function(e){if(e)return parseFloat(e[1])},r=n.opera&&n.opera.version&&parseInt(n.opera.version()),o=n.navigator.userAgent,s=i(o.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),a=i(o.match(/Firefox\/([^ ]*)/));if(g.utils.ieVersion<10)var l=g.utils.domData.nextKey(),u=g.utils.domData.nextKey(),d=function(e){var t=this.activeElement,n=t&&g.utils.domData.get(t,u);n&&n(e)},c=function(e,t){var n=e.ownerDocument;g.utils.domData.get(n,l)||(g.utils.domData.set(n,l,!0),g.utils.registerEventHandler(n,"selectionchange",d)),g.utils.domData.set(e,u,t)};g.bindingHandlers.textInput={init:function(n,i,o){var l,u,d=n.value,p=function(r){clearTimeout(l),u=l=t;var s=n.value;d!==s&&(e&&r&&(n._ko_textInputProcessedEvent=r.type),d=s,g.expressionRewriting.writeValueToProperty(i(),o,"textInput",s))},f=function(t){if(!l){u=n.value;var i=e?p.bind(n,{type:t.type}):p;l=g.utils.setTimeout(i,4)}},m=9==g.utils.ieVersion?f:p,v=function e(){var r=g.utils.unwrapObservable(i());return null!==r&&r!==t||(r=""),u!==t&&r===u?void g.utils.setTimeout(e,4):void(n.value!==r&&(d=r,n.value=r))},h=function(e,t){g.utils.registerEventHandler(n,e,t)};e&&g.bindingHandlers.textInput._forceUpdateOn?g.utils.arrayForEach(g.bindingHandlers.textInput._forceUpdateOn,function(e){"after"==e.slice(0,5)?h(e.slice(5),f):h(e,p)}):g.utils.ieVersion<10?(h("propertychange",function(e){"value"===e.propertyName&&m(e)}),8==g.utils.ieVersion&&(h("keyup",p),h("keydown",p)),g.utils.ieVersion>=8&&(c(n,m),h("dragend",f))):(h("input",p),s<5&&"textarea"===g.utils.tagNameLower(n)?(h("keydown",f),h("paste",f),h("cut",f)):r<11?h("keydown",f):a<4&&(h("DOMAutoComplete",p),h("dragdrop",p),h("drop",p))),h("change",p),g.computed(v,null,{disposeWhenNodeIsRemoved:n})}},g.expressionRewriting.twoWayBindings.textInput=!0,g.bindingHandlers.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),g.bindingHandlers.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++g.bindingHandlers.uniqueName.currentIndex;g.utils.setElementName(e,n)}}},g.bindingHandlers.uniqueName.currentIndex=0,g.bindingHandlers.value={after:["options","foreach"],init:function(e,t,n){if("input"==e.tagName.toLowerCase()&&("checkbox"==e.type||"radio"==e.type))return void g.applyBindingAccessorsToNode(e,{checkedValue:t});var i=["change"],r=n.get("valueUpdate"),o=!1,s=null;r&&("string"==typeof r&&(r=[r]),g.utils.arrayPushAll(i,r),i=g.utils.arrayGetDistinctValues(i));var a=function(){s=null,o=!1;var i=t(),r=g.selectExtensions.readValue(e);g.expressionRewriting.writeValueToProperty(i,n,"value",r)},l=g.utils.ieVersion&&"input"==e.tagName.toLowerCase()&&"text"==e.type&&"off"!=e.autocomplete&&(!e.form||"off"!=e.form.autocomplete);l&&g.utils.arrayIndexOf(i,"propertychange")==-1&&(g.utils.registerEventHandler(e,"propertychange",function(){o=!0}),g.utils.registerEventHandler(e,"focus",function(){o=!1}),g.utils.registerEventHandler(e,"blur",function(){o&&a()})),g.utils.arrayForEach(i,function(t){var n=a;g.utils.stringStartsWith(t,"after")&&(n=function(){s=g.selectExtensions.readValue(e),g.utils.setTimeout(a,0)},t=t.substring("after".length)),g.utils.registerEventHandler(e,t,n)});var u=function i(){var r=g.utils.unwrapObservable(t()),o=g.selectExtensions.readValue(e);if(null!==s&&r===s)return void g.utils.setTimeout(i,0);var a=r!==o;if(a)if("select"===g.utils.tagNameLower(e)){var l=n.get("valueAllowUnset"),u=function(){g.selectExtensions.writeValue(e,r,l)};u(),l||r===g.selectExtensions.readValue(e)?g.utils.setTimeout(u,0):g.dependencyDetection.ignore(g.utils.triggerEvent,null,[e,"change"])}else g.selectExtensions.writeValue(e,r)};g.computed(u,null,{disposeWhenNodeIsRemoved:e})},update:function(){}},g.expressionRewriting.twoWayBindings.value=!0,g.bindingHandlers.visible={update:function(e,t){var n=g.utils.unwrapObservable(t()),i=!("none"==e.style.display);n&&!i?e.style.display="":!n&&i&&(e.style.display="none")}},h("click"),g.templateEngine=function(){},g.templateEngine.prototype.renderTemplateSource=function(e,t,n,i){throw new Error("Override renderTemplateSource")},g.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(e){throw new Error("Override createJavaScriptEvaluatorBlock")},g.templateEngine.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||i;var n=t.getElementById(e);if(!n)throw new Error("Cannot find template with ID "+e);return new g.templateSources.domElement(n)}if(1==e.nodeType||8==e.nodeType)return new g.templateSources.anonymousTemplate(e);throw new Error("Unknown template type: "+e)},g.templateEngine.prototype.renderTemplate=function(e,t,n,i){var r=this.makeTemplateSource(e,i);return this.renderTemplateSource(r,t,n,i)},g.templateEngine.prototype.isTemplateRewritten=function(e,t){return this.allowTemplateRewriting===!1||this.makeTemplateSource(e,t).data("isRewritten")},g.templateEngine.prototype.rewriteTemplate=function(e,t,n){var i=this.makeTemplateSource(e,n),r=t(i.text());i.text(r),i.data("isRewritten",!0)},g.exportSymbol("templateEngine",g.templateEngine),g.templateRewriting=function(){function e(e){for(var t=g.expressionRewriting.bindingRewriteValidators,n=0;n<e.length;n++){var i=e[n].key;if(t.hasOwnProperty(i)){var r=t[i];if("function"==typeof r){var o=r(e[n].value);if(o)throw new Error(o)}else if(!r)throw new Error("This template engine does not support the '"+i+"' binding within its templates")}}}function t(t,n,i,r){var o=g.expressionRewriting.parseObjectLiteral(t);e(o);var s=g.expressionRewriting.preProcessBindings(o,{valueAccessors:!0}),a="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+s+" } })()},'"+i.toLowerCase()+"')";return r.createJavaScriptEvaluatorBlock(a)+n}var n=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,i=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return g.templateRewriting.memoizeBindingAttributeSyntax(e,t)},n)},memoizeBindingAttributeSyntax:function(e,r){return e.replace(n,function(){return t(arguments[4],arguments[1],arguments[2],r)}).replace(i,function(){return t(arguments[1],"<!-- ko -->","#comment",r)})},applyMemoizedBindingsToNextSibling:function(e,t){return g.memoization.memoize(function(n,i){var r=n.nextSibling;r&&r.nodeName.toLowerCase()===t&&g.applyBindingAccessorsToNode(r,e,i)})}}}(),g.exportSymbol("__tr_ambtns",g.templateRewriting.applyMemoizedBindingsToNextSibling),function(){function e(e){return g.utils.domData.get(e,l)||{}}function n(e,t){g.utils.domData.set(e,l,t)}g.templateSources={};var i=1,r=2,o=3,s=4;g.templateSources.domElement=function(e){if(this.domElement=e,e){var t=g.utils.tagNameLower(e);this.templateType="script"===t?i:"textarea"===t?r:"template"==t&&e.content&&11===e.content.nodeType?o:s}},g.templateSources.domElement.prototype.text=function(){var e=this.templateType===i?"text":this.templateType===r?"value":"innerHTML";if(0==arguments.length)return this.domElement[e];var t=arguments[0];"innerHTML"===e?g.utils.setHtml(this.domElement,t):this.domElement[e]=t};var a=g.utils.domData.nextKey()+"_";g.templateSources.domElement.prototype.data=function(e){return 1===arguments.length?g.utils.domData.get(this.domElement,a+e):void g.utils.domData.set(this.domElement,a+e,arguments[1])};var l=g.utils.domData.nextKey();g.templateSources.domElement.prototype.nodes=function(){var i=this.domElement;if(0==arguments.length){var r=e(i),a=r.containerData;return a||(this.templateType===o?i.content:this.templateType===s?i:t)}var l=arguments[0];n(i,{containerData:l})},g.templateSources.anonymousTemplate=function(e){this.domElement=e},g.templateSources.anonymousTemplate.prototype=new g.templateSources.domElement,g.templateSources.anonymousTemplate.prototype.constructor=g.templateSources.anonymousTemplate,g.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var i=e(this.domElement);return i.textData===t&&i.containerData&&(i.textData=i.containerData.innerHTML),i.textData}var r=arguments[0];n(this.domElement,{textData:r})},g.exportSymbol("templateSources",g.templateSources),g.exportSymbol("templateSources.domElement",g.templateSources.domElement),g.exportSymbol("templateSources.anonymousTemplate",g.templateSources.anonymousTemplate)}(),function(){function e(e,t,n){for(var i,r=e,o=g.virtualElements.nextSibling(t);r&&(i=r)!==o;)r=g.virtualElements.nextSibling(i),n(i,r)}function n(t,n){if(t.length){var i=t[0],r=t[t.length-1],o=i.parentNode,s=g.bindingProvider.instance,a=s.preprocessNode;if(a){if(e(i,r,function(e,t){var n=e.previousSibling,o=a.call(s,e);o&&(e===i&&(i=o[0]||t),e===r&&(r=o[o.length-1]||n))}),t.length=0,!i)return;i===r?t.push(i):(t.push(i,r),g.utils.fixUpContinuousNodeArray(t,o))}e(i,r,function(e){1!==e.nodeType&&8!==e.nodeType||g.applyBindings(n,e)}),e(i,r,function(e){1!==e.nodeType&&8!==e.nodeType||g.memoization.unmemoizeDomNodeAndDescendants(e,[n])}),g.utils.fixUpContinuousNodeArray(t,o)}}function i(e){return e.nodeType?e:e.length>0?e[0]:null}function r(e,t,r,o,s){s=s||{};var l=e&&i(e),u=(l||r||{}).ownerDocument,d=s.templateEngine||a;g.templateRewriting.ensureTemplateIsRewritten(r,d,u);var c=d.renderTemplate(r,o,s,u);if("number"!=typeof c.length||c.length>0&&"number"!=typeof c[0].nodeType)throw new Error("Template engine must return an array of DOM nodes");var p=!1;switch(t){case"replaceChildren":g.virtualElements.setDomNodeChildren(e,c),p=!0;break;case"replaceNode":g.utils.replaceDomNodes(e,c),p=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+t)}return p&&(n(c,o),s.afterRender&&g.dependencyDetection.ignore(s.afterRender,null,[c,o.$data])),c}function o(e,t,n){return g.isObservable(e)?e():"function"==typeof e?e(t,n):e}function s(e,n){var i=g.utils.domData.get(e,l);i&&"function"==typeof i.dispose&&i.dispose(),g.utils.domData.set(e,l,n&&n.isActive()?n:t)}var a;g.setTemplateEngine=function(e){if(e!=t&&!(e instanceof g.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");a=e},g.renderTemplate=function(e,n,s,l,u){if(s=s||{},(s.templateEngine||a)==t)throw new Error("Set a template engine before calling renderTemplate");if(u=u||"replaceChildren",l){var d=i(l),c=function(){return!d||!g.utils.domNodeIsAttachedToDocument(d)},p=d&&"replaceNode"==u?d.parentNode:d;return g.dependentObservable(function(){var t=n&&n instanceof g.bindingContext?n:new g.bindingContext(g.utils.unwrapObservable(n)),a=o(e,t.$data,t),c=r(l,u,a,t,s);"replaceNode"==u&&(l=c,d=i(l))},null,{disposeWhen:c,disposeWhenNodeIsRemoved:p})}return g.memoization.memoize(function(t){g.renderTemplate(e,n,s,t,"replaceNode")})},g.renderTemplateForEach=function(e,i,s,a,l){var u,d=function(t,n){u=l.createChildContext(t,s.as,function(e){e.$index=n});var i=o(e,t,u);return r(null,"ignoreTargetNode",i,u,s)},c=function(e,t,i){n(t,u),s.afterRender&&s.afterRender(t,e),u=null};return g.dependentObservable(function(){var e=g.utils.unwrapObservable(i)||[];"undefined"==typeof e.length&&(e=[e]);var n=g.utils.arrayFilter(e,function(e){return s.includeDestroyed||e===t||null===e||!g.utils.unwrapObservable(e._destroy)});g.dependencyDetection.ignore(g.utils.setDomNodeChildrenFromArrayMapping,null,[a,n,d,s,c])},null,{disposeWhenNodeIsRemoved:a})};var l=g.utils.domData.nextKey();g.bindingHandlers.template={init:function(e,t){var n=g.utils.unwrapObservable(t());if("string"==typeof n||n.name)g.virtualElements.emptyNode(e);else if("nodes"in n){var i=n.nodes||[];if(g.isObservable(i))throw new Error('The "nodes" option must be a plain, non-observable array.');var r=g.utils.moveCleanedNodesToContainerElement(i);new g.templateSources.anonymousTemplate(e).nodes(r)}else{var o=g.virtualElements.childNodes(e),r=g.utils.moveCleanedNodesToContainerElement(o);new g.templateSources.anonymousTemplate(e).nodes(r)}return{controlsDescendantBindings:!0}},update:function(e,t,n,i,r){var o,a,l=t(),u=g.utils.unwrapObservable(l),d=!0,c=null;if("string"==typeof u?(a=l,u={}):(a=u.name,"if"in u&&(d=g.utils.unwrapObservable(u.if)),d&&"ifnot"in u&&(d=!g.utils.unwrapObservable(u.ifnot)),o=g.utils.unwrapObservable(u.data)),"foreach"in u){var p=d&&u.foreach||[];c=g.renderTemplateForEach(a||e,p,u,e,r)}else if(d){var f="data"in u?r.createChildContext(o,u.as):r;c=g.renderTemplate(a||e,f,u,e)}else g.virtualElements.emptyNode(e);s(e,c)}},g.expressionRewriting.bindingRewriteValidators.template=function(e){var t=g.expressionRewriting.parseObjectLiteral(e);return 1==t.length&&t[0].unknown?null:g.expressionRewriting.keyValueArrayContainsKey(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},g.virtualElements.allowedBindings.template=!0}(),g.exportSymbol("setTemplateEngine",g.setTemplateEngine),g.exportSymbol("renderTemplate",g.renderTemplate),g.utils.findMovesInArrayComparison=function(e,t,n){if(e.length&&t.length){var i,r,o,s,a;for(i=r=0;(!n||i<n)&&(s=e[r]);++r){for(o=0;a=t[o];++o)if(s.value===a.value){s.moved=a.index,a.moved=s.index,t.splice(o,1),i=o=0;break}i+=o}}},g.utils.compareArrays=function(){function e(e,r,o){return o="boolean"==typeof o?{dontLimitMoves:o}:o||{},e=e||[],r=r||[],e.length<r.length?t(e,r,n,i,o):t(r,e,i,n,o)}function t(e,t,n,i,r){var o,s,a,l,u,d,c=Math.min,p=Math.max,f=[],m=e.length,v=t.length,h=v-m||1,b=m+v+1;for(o=0;o<=m;o++)for(l=a,f.push(a=[]),u=c(v,o+h),d=p(0,o-1),s=d;s<=u;s++)if(s)if(o)if(e[o-1]===t[s-1])a[s]=l[s-1];else{var y=l[s]||b,x=a[s-1]||b;a[s]=c(y,x)+1}else a[s]=s+1;else a[s]=o+1;var E,w=[],S=[],N=[];for(o=m,s=v;o||s;)E=f[o][s]-1,s&&E===f[o][s-1]?S.push(w[w.length]={status:n,value:t[--s],index:s}):o&&E===f[o-1][s]?N.push(w[w.length]={status:i,value:e[--o],index:o}):(--s,--o,r.sparse||w.push({status:"retained",value:t[s]}));return g.utils.findMovesInArrayComparison(N,S,!r.dontLimitMoves&&10*m),w.reverse()}var n="added",i="deleted";return e}(),g.exportSymbol("utils.compareArrays",g.utils.compareArrays),function(){function e(e,n,i,r,o){var s=[],a=g.dependentObservable(function(){var t=n(i,o,g.utils.fixUpContinuousNodeArray(s,e))||[];s.length>0&&(g.utils.replaceDomNodes(s,t),r&&g.dependencyDetection.ignore(r,null,[i,t,o])),s.length=0,g.utils.arrayPushAll(s,t)},null,{disposeWhenNodeIsRemoved:e,disposeWhen:function(){return!g.utils.anyDomNodeIsAttachedToDocument(s)}});return{mappedNodes:s,dependentObservable:a.isActive()?a:t}}var n=g.utils.domData.nextKey(),i=g.utils.domData.nextKey();g.utils.setDomNodeChildrenFromArrayMapping=function(r,o,s,a,l){function u(e,t){c=v[t],E!==t&&(T[e]=c),c.indexObservable(E++),g.utils.fixUpContinuousNodeArray(c.mappedNodes,r),y.push(c),S.push(c)}function d(e,t){if(e)for(var n=0,i=t.length;n<i;n++)t[n]&&g.utils.arrayForEach(t[n].mappedNodes,function(i){e(i,n,t[n].arrayEntry)})}o=o||[],a=a||{};for(var c,p,f,m=g.utils.domData.get(r,n)===t,v=g.utils.domData.get(r,n)||[],h=g.utils.arrayMap(v,function(e){return e.arrayEntry}),b=g.utils.compareArrays(h,o,a.dontLimitMoves),y=[],x=0,E=0,w=[],S=[],N=[],T=[],C=[],D=0;p=b[D];D++)switch(f=p.moved,p.status){case"deleted":f===t&&(c=v[x],c.dependentObservable&&(c.dependentObservable.dispose(),c.dependentObservable=t),g.utils.fixUpContinuousNodeArray(c.mappedNodes,r).length&&(a.beforeRemove&&(y.push(c),S.push(c),c.arrayEntry===i?c=null:N[D]=c),c&&w.push.apply(w,c.mappedNodes))),x++;break;case"retained":u(D,x++);break;case"added":f!==t?u(D,f):(c={arrayEntry:p.value,indexObservable:g.observable(E++)},y.push(c),S.push(c),m||(C[D]=c))}g.utils.domData.set(r,n,y),d(a.beforeMove,T),g.utils.arrayForEach(w,a.beforeRemove?g.cleanNode:g.removeNode);for(var k,O,D=0,_=g.virtualElements.firstChild(r);c=S[D];D++){c.mappedNodes||g.utils.extend(c,e(r,s,c.arrayEntry,l,c.indexObservable));for(var A=0;O=c.mappedNodes[A];_=O.nextSibling,k=O,A++)O!==_&&g.virtualElements.insertAfter(r,O,k);!c.initialized&&l&&(l(c.arrayEntry,c.mappedNodes,c.indexObservable),c.initialized=!0)}for(d(a.beforeRemove,N),D=0;D<N.length;++D)N[D]&&(N[D].arrayEntry=i);d(a.afterMove,T),d(a.afterAdd,C)}}(),g.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",g.utils.setDomNodeChildrenFromArrayMapping),g.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},g.nativeTemplateEngine.prototype=new g.templateEngine,g.nativeTemplateEngine.prototype.constructor=g.nativeTemplateEngine,g.nativeTemplateEngine.prototype.renderTemplateSource=function(e,t,n,i){var r=!(g.utils.ieVersion<9),o=r?e.nodes:null,s=o?e.nodes():null;if(s)return g.utils.makeArray(s.cloneNode(!0).childNodes);var a=e.text();return g.utils.parseHtmlFragment(a,i)},g.nativeTemplateEngine.instance=new g.nativeTemplateEngine,g.setTemplateEngine(g.nativeTemplateEngine.instance),g.exportSymbol("nativeTemplateEngine",g.nativeTemplateEngine),function(){g.jqueryTmplTemplateEngine=function(){function e(){if(n<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function t(e,t,n){return o.tmpl(e,t,n)}var n=this.jQueryTmplVersion=function(){if(!o||!o.tmpl)return 0;try{if(o.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(e){}return 1}();this.renderTemplateSource=function(n,r,s,a){a=a||i,s=s||{},e();var l=n.data("precompiled");if(!l){var u=n.text()||"";u="{{ko_with $item.koBindingContext}}"+u+"{{/ko_with}}",l=o.template(null,u),n.data("precompiled",l)}var d=[r.$data],c=o.extend({koBindingContext:r},s.templateOptions),p=t(l,d,c);return p.appendTo(a.createElement("div")),o.fragments={},p},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){i.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},n>0&&(o.tmpl.tag.ko_code={open:"__.push($1 || '');"},o.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},g.jqueryTmplTemplateEngine.prototype=new g.templateEngine,g.jqueryTmplTemplateEngine.prototype.constructor=g.jqueryTmplTemplateEngine;var e=new g.jqueryTmplTemplateEngine;e.jQueryTmplVersion>0&&g.setTemplateEngine(e),g.exportSymbol("jqueryTmplTemplateEngine",g.jqueryTmplTemplateEngine)}()})}()}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImtub2Nrb3V0LmpzIl0sIm5hbWVzIjpbImluaXRpYWxpemVBcHBsaWNhdGlvbiIsImJvdW5kcyIsIm9zbG8iLCJsYXQiLCJsbmciLCJpbmZvV2luZG93IiwiZ29vZ2xlIiwibWFwcyIsIkluZm9XaW5kb3ciLCJmb3Vyc3F1YXJlIiwidmVudWVzIiwiZXhwbG9yZSIsInNlYXJjaCIsImNyZWRlbnRpYWxzIiwidmVyc2lvbiIsImdldFBvcHVsYXJTcG90cyIsImNlbnRlciIsImNhbGxiYWNrIiwiY29vcmRpbmF0ZXMiLCJxdWVyeSIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwiYW5zd2VyIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwiaXRlbXMiLCJyZXNwb25zZSIsImdyb3VwcyIsInNlbmQiLCJnZXRWZW51ZURldGFpbHMiLCJ2ZW51ZUlkIiwidmVudWUiLCJjb25zdHJ1Y3RQaG90b3NBcnJheSIsInBob3RvVXJscyIsInBob3RvcyIsIm1hcCIsIml0ZW0iLCJwcmVmaXgiLCJzdWZmaXgiLCJoZXlOZXdQbGFjZSIsInBsYWNlIiwiTGF0TG5nQm91bmRzIiwiaW5kZXgiLCJmb3JFYWNoIiwiaWQiLCJyZXNwb25zZU9iamVjdCIsInBvc2l0aW9uIiwibG9jYXRpb24iLCJtYXJrZXIiLCJNYXJrZXIiLCJ0aXRsZSIsIm5hbWUiLCJhZGRMaXN0ZW5lciIsInNob3dJbmZvIiwiY29uc29sZSIsImxvZyIsImNpdHlFeHBsb3JlciIsImFkZFZlbnVlIiwiZXh0ZW5kIiwiTGF0TG5nIiwiZml0Qm91bmRzIiwiaW5mb3dpbmRvdyIsImNvbnRlbnQiLCJzZXRDb250ZW50Iiwia28iLCJhcHBseUJpbmRpbmdzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIk1hcCIsInpvb20iLCJmdWxsc2NyZWVuQ29udHJvbCIsImlucHV0Iiwic2VhcmNoQm94IiwicGxhY2VzIiwiU2VhcmNoQm94Iiwic2V0Qm91bmRzIiwiZ2V0Qm91bmRzIiwiZ2V0UGxhY2VzIiwibGVuZ3RoIiwiZGlzdGFuY2UiLCJnZW9tZXRyeSIsInNwaGVyaWNhbCIsImNvbXB1dGVEaXN0YW5jZUJldHdlZW4iLCJnZXRDZW50ZXIiLCJuZXdDZW50ZXIiLCJzdHJpbmdpZnkiLCJuZXdDaXR5IiwicmVtb3ZlQWxsVmVudWVzIiwiVmlld01vZGVsIiwidGhpcyIsInZlbnVlTGlzdCIsIm9ic2VydmFibGVBcnJheSIsImJpbmQiLCJwcm90b3R5cGUiLCJwdXNoIiwic2V0TWFwIiwicmVtb3ZlQWxsIiwiU2lkZU5hdiIsIl9jbGFzc0NhbGxDaGVjayIsInNob3dCdXR0b25FbCIsInF1ZXJ5U2VsZWN0b3IiLCJoaWRlQnV0dG9uRWwiLCJzaWRlTmF2RWwiLCJzaWRlTmF2Q29udGFpbmVyRWwiLCJzaG93U2lkZU5hdiIsImhpZGVTaWRlTmF2IiwiYmxvY2tDbGlja3MiLCJvblRvdWNoU3RhcnQiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hFbmQiLCJvblRyYW5zaXRpb25FbmQiLCJ1cGRhdGUiLCJzdGFydFgiLCJjdXJyZW50WCIsInRvdWNoaW5nU2lkZU5hdiIsImFkZEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwidG91Y2hlcyIsInBhZ2VYIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidHJhbnNsYXRlWCIsIk1hdGgiLCJtaW4iLCJwcmV2ZW50RGVmYXVsdCIsInN0eWxlIiwidHJhbnNmb3JtIiwic3RvcFByb3BhZ2F0aW9uIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZCIsIkRFQlVHIiwidW5kZWZpbmVkIiwid2luZG93IiwiZXZhbCIsIm5hdmlnYXRvciIsImpRdWVyeUluc3RhbmNlIiwiZmFjdG9yeSIsImRlZmluZSIsImV4cG9ydHMiLCJfdHlwZW9mIiwibW9kdWxlIiwia29FeHBvcnRzIiwiYW1kUmVxdWlyZSIsInZhbHVlc0FyZVByaW1pdGl2ZUFuZEVxdWFsIiwiYSIsImIiLCJvbGRWYWx1ZUlzUHJpbWl0aXZlIiwicHJpbWl0aXZlVHlwZXMiLCJ0aHJvdHRsZSIsInRpbWVvdXQiLCJ0aW1lb3V0SW5zdGFuY2UiLCJ1dGlscyIsInNldFRpbWVvdXQiLCJkZWJvdW5jZSIsImNsZWFyVGltZW91dCIsImFwcGx5RXh0ZW5kZXJzIiwicmVxdWVzdGVkRXh0ZW5kZXJzIiwidGFyZ2V0Iiwib2JqZWN0Rm9yRWFjaCIsImtleSIsInZhbHVlIiwiZXh0ZW5kZXJIYW5kbGVyIiwiZXh0ZW5kZXJzIiwibGltaXROb3RpZnlTdWJzY3JpYmVycyIsImV2ZW50IiwiZGVmYXVsdEV2ZW50IiwiX2xpbWl0QmVmb3JlQ2hhbmdlIiwiX29yaWdOb3RpZnlTdWJzY3JpYmVycyIsIl9saW1pdENoYW5nZSIsImNvbXB1dGVkRGlzcG9zZURlcGVuZGVuY3lDYWxsYmFjayIsImVudHJ5VG9EaXNwb3NlIiwiZGlzcG9zZSIsImNvbXB1dGVkQmVnaW5EZXBlbmRlbmN5RGV0ZWN0aW9uQ2FsbGJhY2siLCJzdWJzY3JpYmFibGUiLCJjb21wdXRlZE9ic2VydmFibGUiLCJzdGF0ZSIsImNvbXB1dGVkU3RhdGUiLCJpc0Rpc3Bvc2VkIiwiZGlzcG9zYWxDb3VudCIsImRpc3Bvc2FsQ2FuZGlkYXRlcyIsImFkZERlcGVuZGVuY3lUcmFja2luZyIsImRlcGVuZGVuY3lUcmFja2luZyIsImlzU2xlZXBpbmciLCJfdGFyZ2V0Iiwic3Vic2NyaWJlVG9EZXBlbmRlbmN5IiwibWFrZUV2ZW50SGFuZGxlclNob3J0Y3V0IiwiZXZlbnROYW1lIiwiYmluZGluZ0hhbmRsZXJzIiwiaW5pdCIsImVsZW1lbnQiLCJ2YWx1ZUFjY2Vzc29yIiwiYWxsQmluZGluZ3MiLCJ2aWV3TW9kZWwiLCJiaW5kaW5nQ29udGV4dCIsIm5ld1ZhbHVlQWNjZXNzb3IiLCJyZXN1bHQiLCJjYWxsIiwibWFrZVdpdGhJZkJpbmRpbmciLCJiaW5kaW5nS2V5IiwiaXNXaXRoIiwiaXNOb3QiLCJtYWtlQ29udGV4dENhbGxiYWNrIiwiZGlkRGlzcGxheU9uTGFzdFVwZGF0ZSIsInNhdmVkTm9kZXMiLCJjb21wdXRlZCIsImRhdGFWYWx1ZSIsInVud3JhcE9ic2VydmFibGUiLCJzaG91bGREaXNwbGF5IiwiaXNGaXJzdFJlbmRlciIsIm5lZWRzUmVmcmVzaCIsImNvbXB1dGVkQ29udGV4dCIsImdldERlcGVuZGVuY2llc0NvdW50IiwiY2xvbmVOb2RlcyIsInZpcnR1YWxFbGVtZW50cyIsImNoaWxkTm9kZXMiLCJzZXREb21Ob2RlQ2hpbGRyZW4iLCJhcHBseUJpbmRpbmdzVG9EZXNjZW5kYW50cyIsImVtcHR5Tm9kZSIsImRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZCIsImNvbnRyb2xzRGVzY2VuZGFudEJpbmRpbmdzIiwiZXhwcmVzc2lvblJld3JpdGluZyIsImJpbmRpbmdSZXdyaXRlVmFsaWRhdG9ycyIsImFsbG93ZWRCaW5kaW5ncyIsImV4cG9ydFN5bWJvbCIsImtvUGF0aCIsIm9iamVjdCIsInRva2VucyIsInNwbGl0IiwiaSIsImV4cG9ydFByb3BlcnR5Iiwib3duZXIiLCJwdWJsaWNOYW1lIiwib3B0aW9ucyIsImRlZmVyVXBkYXRlcyIsInVzZU9ubHlOYXRpdmVFdmVudHMiLCJvYmoiLCJhY3Rpb24iLCJwcm9wIiwiaGFzT3duUHJvcGVydHkiLCJzb3VyY2UiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvIiwiX19wcm90b19fIiwiaXNDbGlja09uQ2hlY2thYmxlRWxlbWVudCIsImV2ZW50VHlwZSIsInRhZ05hbWVMb3dlciIsInR5cGUiLCJ0b0xvd2VyQ2FzZSIsImlucHV0VHlwZSIsInRvZ2dsZURvbU5vZGVDc3NDbGFzcyIsIm5vZGUiLCJjbGFzc05hbWVzIiwic2hvdWxkSGF2ZUNsYXNzIiwiYWRkT3JSZW1vdmVGbiIsImFycmF5Rm9yRWFjaCIsIm1hdGNoIiwiY3NzQ2xhc3NOYW1lUmVnZXgiLCJjbGFzc05hbWUiLCJ0b2dnbGVPYmplY3RDbGFzc1Byb3BlcnR5U3RyaW5nIiwiY3VycmVudENsYXNzTmFtZXMiLCJhZGRPclJlbW92ZUl0ZW0iLCJqb2luIiwiY2FuU2V0UHJvdG90eXBlIiwiQXJyYXkiLCJjYW5Vc2VTeW1ib2xzIiwiU3ltYm9sIiwia25vd25FdmVudHMiLCJrbm93bkV2ZW50VHlwZXNCeUV2ZW50TmFtZSIsImtleUV2ZW50VHlwZU5hbWUiLCJ0ZXN0IiwidXNlckFnZW50Iiwia25vd25FdmVudHNGb3JUeXBlIiwiaiIsImV2ZW50c1RoYXRNdXN0QmVSZWdpc3RlcmVkVXNpbmdBdHRhY2hFdmVudCIsInByb3BlcnR5Y2hhbmdlIiwiaWVWZXJzaW9uIiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsImlFbGVtcyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaW5uZXJIVE1MIiwiaXNJZTYiLCJpc0llNyIsImZpZWxkc0luY2x1ZGVkV2l0aEpzb25Qb3N0IiwiYXJyYXkiLCJhcnJheUluZGV4T2YiLCJpbmRleE9mIiwiYXJyYXlGaXJzdCIsInByZWRpY2F0ZSIsInByZWRpY2F0ZU93bmVyIiwiYXJyYXlSZW1vdmVJdGVtIiwiaXRlbVRvUmVtb3ZlIiwic3BsaWNlIiwic2hpZnQiLCJhcnJheUdldERpc3RpbmN0VmFsdWVzIiwiYXJyYXlNYXAiLCJtYXBwaW5nIiwiYXJyYXlGaWx0ZXIiLCJhcnJheVB1c2hBbGwiLCJ2YWx1ZXNUb1B1c2giLCJhcHBseSIsImluY2x1ZGVkIiwiZXhpc3RpbmdFbnRyeUluZGV4IiwicGVla09ic2VydmFibGUiLCJzZXRQcm90b3R5cGVPZk9yRXh0ZW5kIiwib2JqZWN0TWFwIiwiZW1wdHlEb21Ob2RlIiwiZG9tTm9kZSIsImZpcnN0Q2hpbGQiLCJyZW1vdmVOb2RlIiwibW92ZUNsZWFuZWROb2Rlc1RvQ29udGFpbmVyRWxlbWVudCIsIm5vZGVzIiwibm9kZXNBcnJheSIsIm1ha2VBcnJheSIsInRlbXBsYXRlRG9jdW1lbnQiLCJvd25lckRvY3VtZW50IiwiY29udGFpbmVyIiwiYXBwZW5kQ2hpbGQiLCJjbGVhbk5vZGUiLCJzaG91bGRDbGVhbk5vZGVzIiwibmV3Tm9kZXNBcnJheSIsImNsb25lZE5vZGUiLCJjbG9uZU5vZGUiLCJyZXBsYWNlRG9tTm9kZXMiLCJub2RlVG9SZXBsYWNlT3JOb2RlQXJyYXkiLCJub2Rlc1RvUmVwbGFjZUFycmF5Iiwibm9kZVR5cGUiLCJpbnNlcnRpb25Qb2ludCIsInBhcmVudCIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJmaXhVcENvbnRpbnVvdXNOb2RlQXJyYXkiLCJjb250aW51b3VzTm9kZUFycmF5IiwiY3VycmVudCIsImxhc3QiLCJuZXh0U2libGluZyIsInNldE9wdGlvbk5vZGVTZWxlY3Rpb25TdGF0ZSIsIm9wdGlvbk5vZGUiLCJpc1NlbGVjdGVkIiwic2V0QXR0cmlidXRlIiwic2VsZWN0ZWQiLCJzdHJpbmdUcmltIiwic3RyaW5nIiwidHJpbSIsInRvU3RyaW5nIiwicmVwbGFjZSIsInN0cmluZ1N0YXJ0c1dpdGgiLCJzdGFydHNXaXRoIiwic3Vic3RyaW5nIiwiZG9tTm9kZUlzQ29udGFpbmVkQnkiLCJjb250YWluZWRCeU5vZGUiLCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsImRvbU5vZGVJc0F0dGFjaGVkVG9Eb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImFueURvbU5vZGVJc0F0dGFjaGVkVG9Eb2N1bWVudCIsInRhZ05hbWUiLCJjYXRjaEZ1bmN0aW9uRXJyb3JzIiwiZGVsZWdhdGUiLCJhcmd1bWVudHMiLCJlIiwiaGFuZGxlciIsImRlZmVyRXJyb3IiLCJlcnJvciIsInJlZ2lzdGVyRXZlbnRIYW5kbGVyIiwid3JhcHBlZEhhbmRsZXIiLCJtdXN0VXNlQXR0YWNoRXZlbnQiLCJhdHRhY2hFdmVudCIsIkVycm9yIiwiYXR0YWNoRXZlbnRIYW5kbGVyIiwiYXR0YWNoRXZlbnROYW1lIiwiZG9tTm9kZURpc3Bvc2FsIiwiYWRkRGlzcG9zZUNhbGxiYWNrIiwiZGV0YWNoRXZlbnQiLCJ0cmlnZ2VyRXZlbnQiLCJ1c2VDbGlja1dvcmthcm91bmQiLCJjcmVhdGVFdmVudCIsImRpc3BhdGNoRXZlbnQiLCJldmVudENhdGVnb3J5IiwiaW5pdEV2ZW50IiwiY2xpY2siLCJmaXJlRXZlbnQiLCJpc09ic2VydmFibGUiLCJwZWVrIiwic2V0VGV4dENvbnRlbnQiLCJ0ZXh0Q29udGVudCIsImlubmVyVGV4dE5vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImRhdGEiLCJmb3JjZVJlZnJlc2giLCJzZXRFbGVtZW50TmFtZSIsIm1lcmdlQXR0cmlidXRlcyIsImVsZW0iLCJlbnN1cmVTZWxlY3RFbGVtZW50SXNSZW5kZXJlZENvcnJlY3RseSIsInNlbGVjdEVsZW1lbnQiLCJvcmlnaW5hbFdpZHRoIiwid2lkdGgiLCJyYW5nZSIsIm1heCIsImFycmF5TGlrZU9iamVjdCIsImNyZWF0ZVN5bWJvbE9yU3RyaW5nIiwiaWRlbnRpZmllciIsImdldEZvcm1GaWVsZHMiLCJmb3JtIiwiZmllbGROYW1lIiwiZmllbGRzIiwiY29uY2F0IiwiaXNNYXRjaGluZ0ZpZWxkIiwiZmllbGQiLCJtYXRjaGVzIiwicGFyc2VKc29uIiwianNvblN0cmluZyIsIkZ1bmN0aW9uIiwic3RyaW5naWZ5SnNvbiIsInJlcGxhY2VyIiwic3BhY2UiLCJwb3N0SnNvbiIsInVybE9yRm9ybSIsInBhcmFtcyIsImluY2x1ZGVGaWVsZHMiLCJ1cmwiLCJvcmlnaW5hbEZvcm0iLCJkaXNwbGF5IiwibWV0aG9kIiwiYm9keSIsInN1Ym1pdCIsInJlbW92ZUNoaWxkIiwib3JpZ2luYWxGdW5jdGlvbiIsInBhcnRpYWxBcmdzIiwic2xpY2UiLCJhcmdzIiwiZG9tRGF0YSIsImdldEFsbCIsImNyZWF0ZUlmTm90Rm91bmQiLCJkYXRhU3RvcmVLZXkiLCJkYXRhU3RvcmVLZXlFeHBhbmRvUHJvcGVydHlOYW1lIiwiaGFzRXhpc3RpbmdEYXRhU3RvcmUiLCJkYXRhU3RvcmUiLCJ1bmlxdWVJZCIsIkRhdGUiLCJnZXRUaW1lIiwiZ2V0IiwiYWxsRGF0YUZvck5vZGUiLCJzZXQiLCJjbGVhciIsIm5leHRLZXkiLCJnZXREaXNwb3NlQ2FsbGJhY2tzQ29sbGVjdGlvbiIsImFsbERpc3Bvc2VDYWxsYmFja3MiLCJkb21EYXRhS2V5IiwiZGVzdHJveUNhbGxiYWNrc0NvbGxlY3Rpb24iLCJjbGVhblNpbmdsZU5vZGUiLCJjYWxsYmFja3MiLCJjbGVhbmFibGVOb2RlVHlwZXNXaXRoRGVzY2VuZGFudHMiLCJjbGVhbkltbWVkaWF0ZUNvbW1lbnRUeXBlQ2hpbGRyZW4iLCJub2RlV2l0aENoaWxkcmVuIiwiY2hpbGQiLCJuZXh0Q2hpbGQiLCJjbGVhbmFibGVOb2RlVHlwZXMiLCIxIiwiOCIsIjkiLCJyZW1vdmVEaXNwb3NlQ2FsbGJhY2siLCJjYWxsYmFja3NDb2xsZWN0aW9uIiwiZGVzY2VuZGFudHMiLCJjbGVhbkV4dGVybmFsRGF0YSIsImdldFdyYXAiLCJ0YWdzIiwibSIsImxvb2t1cCIsIm5vbmUiLCJzaW1wbGVIdG1sUGFyc2UiLCJodG1sIiwiZG9jdW1lbnRDb250ZXh0Iiwid2luZG93Q29udGV4dCIsIndyYXAiLCJkZXB0aCIsIm1hcmt1cCIsIm1heVJlcXVpcmVDcmVhdGVFbGVtZW50SGFjayIsImxhc3RDaGlsZCIsImpRdWVyeUh0bWxQYXJzZSIsImVsZW1zIiwidGFibGUiLCJ0Ym9keSIsInRyIiwic2VsZWN0IiwidGhlYWQiLCJ0Zm9vdCIsInRkIiwidGgiLCJvcHRpb24iLCJvcHRncm91cCIsInBhcnNlSHRtbEZyYWdtZW50Iiwic2V0SHRtbCIsInBhcnNlZE5vZGVzIiwibWVtb2l6YXRpb24iLCJyYW5kb21NYXg4SGV4Q2hhcnMiLCJyYW5kb20iLCJnZW5lcmF0ZVJhbmRvbUlkIiwiZmluZE1lbW9Ob2RlcyIsInJvb3ROb2RlIiwiYXBwZW5kVG9BcnJheSIsIm1lbW9JZCIsInBhcnNlTWVtb1RleHQiLCJub2RlVmFsdWUiLCJtZW1vcyIsIm1lbW9pemUiLCJ1bm1lbW9pemUiLCJjYWxsYmFja1BhcmFtcyIsInVubWVtb2l6ZURvbU5vZGVBbmREZXNjZW5kYW50cyIsImV4dHJhQ2FsbGJhY2tQYXJhbXNBcnJheSIsImNvbWJpbmVkUGFyYW1zIiwibWVtb1RleHQiLCJ0YXNrcyIsInByb2Nlc3NUYXNrcyIsInRhc2tRdWV1ZUxlbmd0aCIsInRhc2siLCJtYXJrIiwiY291bnRNYXJrcyIsIm5leHRJbmRleFRvUHJvY2VzcyIsInRhc2tRdWV1ZSIsImV4Iiwic2NoZWR1bGVkUHJvY2VzcyIsInNjaGVkdWxlVGFza1Byb2Nlc3NpbmciLCJzY2hlZHVsZXIiLCJuZXh0SGFuZGxlIiwiTXV0YXRpb25PYnNlcnZlciIsIm9ic2VydmUiLCJhdHRyaWJ1dGVzIiwidG9nZ2xlIiwic2NyaXB0Iiwic2NoZWR1bGUiLCJmdW5jIiwiY2FuY2VsIiwiaGFuZGxlIiwicmVzZXRGb3JUZXN0aW5nIiwicnVuRWFybHkiLCJ3cml0ZVRpbWVvdXRJbnN0YW5jZSIsImRlcGVuZGVudE9ic2VydmFibGUiLCJyZWFkIiwid3JpdGUiLCJyYXRlTGltaXQiLCJsaW1pdEZ1bmN0aW9uIiwiX2RlZmVyVXBkYXRlcyIsImxpbWl0IiwiZGVmZXJyZWQiLCJub3RpZnkiLCJub3RpZnlXaGVuIiwiYm9vbGVhbiIsIm51bWJlciIsInN1YnNjcmlwdGlvbiIsImRpc3Bvc2VDYWxsYmFjayIsImtvX3N1YnNjcmliYWJsZV9mbiIsImluc3RhbmNlIiwiX3N1YnNjcmlwdGlvbnMiLCJfdmVyc2lvbk51bWJlciIsInN1YnNjcmliZSIsImNhbGxiYWNrVGFyZ2V0Iiwic2VsZiIsImJvdW5kQ2FsbGJhY2siLCJhZnRlclN1YnNjcmlwdGlvblJlbW92ZSIsImJlZm9yZVN1YnNjcmlwdGlvbkFkZCIsIm5vdGlmeVN1YnNjcmliZXJzIiwidmFsdWVUb05vdGlmeSIsInVwZGF0ZVZlcnNpb24iLCJoYXNTdWJzY3JpcHRpb25zRm9yRXZlbnQiLCJkZXBlbmRlbmN5RGV0ZWN0aW9uIiwiYmVnaW4iLCJlbmQiLCJnZXRWZXJzaW9uIiwiaGFzQ2hhbmdlZCIsInZlcnNpb25Ub0NoZWNrIiwiaWdub3JlQmVmb3JlQ2hhbmdlIiwicHJldmlvdXNWYWx1ZSIsInBlbmRpbmdWYWx1ZSIsInNlbGZJc09ic2VydmFibGUiLCJiZWZvcmVDaGFuZ2UiLCJmaW5pc2giLCJfbm90aWZpY2F0aW9uSXNQZW5kaW5nIiwiaXNEaWZmZXJlbnQiLCJnZXRTdWJzY3JpcHRpb25zQ291bnQiLCJ0b3RhbCIsInN1YnNjcmlwdGlvbnMiLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwiaXNTdWJzY3JpYmFibGUiLCJnZXRJZCIsImxhc3RJZCIsIm91dGVyRnJhbWVzIiwiY3VycmVudEZyYW1lIiwicG9wIiwicmVnaXN0ZXJEZXBlbmRlbmN5IiwiX2lkIiwiaWdub3JlIiwiY2FsbGJhY2tBcmdzIiwiaXNJbml0aWFsIiwiaWdub3JlRGVwZW5kZW5jaWVzIiwib2JzZXJ2YWJsZUxhdGVzdFZhbHVlIiwib2JzZXJ2YWJsZSIsImluaXRpYWxWYWx1ZSIsInZhbHVlV2lsbE11dGF0ZSIsInZhbHVlSGFzTXV0YXRlZCIsIm9ic2VydmFibGVGbiIsImVxdWFsaXR5Q29tcGFyZXIiLCJwcm90b1Byb3BlcnR5IiwiaGFzUHJvdG90eXBlIiwiaXNXcml0ZWFibGVPYnNlcnZhYmxlIiwiaGFzV3JpdGVGdW5jdGlvbiIsImluaXRpYWxWYWx1ZXMiLCJ0cmFja0FycmF5Q2hhbmdlcyIsInZhbHVlT3JQcmVkaWNhdGUiLCJ1bmRlcmx5aW5nQXJyYXkiLCJyZW1vdmVkVmFsdWVzIiwiYXJyYXlPZlZhbHVlcyIsImFsbFZhbHVlcyIsImRlc3Ryb3kiLCJkZXN0cm95QWxsIiwib2xkSXRlbSIsIm5ld0l0ZW0iLCJtZXRob2ROYW1lIiwiY2FjaGVEaWZmRm9yS25vd25PcGVyYXRpb24iLCJtZXRob2RDYWxsUmVzdWx0IiwiYXJyYXlDaGFuZ2VFdmVudE5hbWUiLCJ0cmFja0NoYW5nZXMiLCJ0cmFja2luZ0NoYW5nZXMiLCJ1bmRlcmx5aW5nTm90aWZ5U3Vic2NyaWJlcnNGdW5jdGlvbiIsInBlbmRpbmdOb3RpZmljYXRpb25zIiwicHJldmlvdXNDb250ZW50cyIsImNhY2hlZERpZmYiLCJhcnJheUNoYW5nZVN1YnNjcmlwdGlvbiIsImN1cnJlbnRDb250ZW50cyIsImNoYW5nZXMiLCJnZXRDaGFuZ2VzIiwiY29tcGFyZUFycmF5cyIsImNvbXBhcmVBcnJheU9wdGlvbnMiLCJ1bmRlcmx5aW5nQmVmb3JlU3Vic2NyaXB0aW9uQWRkRnVuY3Rpb24iLCJ1bmRlcmx5aW5nQWZ0ZXJTdWJzY3JpcHRpb25SZW1vdmVGdW5jdGlvbiIsInJhd0FycmF5Iiwib3BlcmF0aW9uTmFtZSIsInB1c2hEaWZmIiwiZGlmZiIsImFycmF5TGVuZ3RoIiwiYXJnc0xlbmd0aCIsIm9mZnNldCIsInN0YXJ0SW5kZXgiLCJlbmREZWxldGVJbmRleCIsImVuZEFkZEluZGV4IiwiZW5kSW5kZXgiLCJhZGRpdGlvbnMiLCJkZWxldGlvbnMiLCJhcmdzSW5kZXgiLCJmaW5kTW92ZXNJbkFycmF5Q29tcGFyaXNvbiIsImV2YWx1YXRvckZ1bmN0aW9uT3JPcHRpb25zIiwiZXZhbHVhdG9yRnVuY3Rpb25UYXJnZXQiLCJ3cml0ZUZ1bmN0aW9uIiwiaXNTdGFsZSIsImhhdmVEZXBlbmRlbmNpZXNDaGFuZ2VkIiwiZXZhbHVhdGVJbW1lZGlhdGUiLCJsYXRlc3RWYWx1ZSIsImlzQmVpbmdFdmFsdWF0ZWQiLCJzdXBwcmVzc0Rpc3Bvc2FsVW50aWxEaXNwb3NlV2hlblJldHVybnNGYWxzZSIsInB1cmUiLCJyZWFkRnVuY3Rpb24iLCJkaXNwb3NlV2hlbiIsImRvbU5vZGVEaXNwb3NhbENhbGxiYWNrIiwiZGVwZW5kZW5jaWVzQ291bnQiLCJldmFsdWF0aW9uVGltZW91dEluc3RhbmNlIiwiY29tcHV0ZWRGbiIsInB1cmVDb21wdXRlZE92ZXJyaWRlcyIsImRlZmVyRXZhbHVhdGlvbk92ZXJyaWRlcyIsImlzQWN0aXZlIiwidHJhY2tpbmdPYmoiLCJfb3JkZXIiLCJfdmVyc2lvbiIsImRlcGVuZGVuY3kiLCJtYXJrRGlydHkiLCJfZXZhbERlbGF5ZWQiLCJyZXNwb25kVG9DaGFuZ2UiLCJldmFsdWF0ZVBvc3NpYmx5QXN5bmMiLCJkaXJ0eVN1YiIsImNoYW5nZVN1YiIsInRocm90dGxlRXZhbHVhdGlvblRpbWVvdXQiLCJub3RpZnlDaGFuZ2UiLCJldmFsdWF0ZUltbWVkaWF0ZV9DYWxsUmVhZFdpdGhEZXBlbmRlbmN5RGV0ZWN0aW9uIiwiZGVwZW5kZW5jeURldGVjdGlvbkNvbnRleHQiLCJldmFsdWF0ZUltbWVkaWF0ZV9DYWxsUmVhZFRoZW5FbmREZXBlbmRlbmN5RGV0ZWN0aW9uIiwiZGVwZW5kZWNpZXNPcmRlciIsIm9yZGVyIiwicHJvdG9Qcm9wIiwiaXNDb21wdXRlZCIsImlzUHVyZUNvbXB1dGVkIiwicHVyZUNvbXB1dGVkIiwibWFwSnNPYmplY3RHcmFwaCIsInJvb3RPYmplY3QiLCJtYXBJbnB1dENhbGxiYWNrIiwidmlzaXRlZE9iamVjdHMiLCJvYmplY3RMb29rdXAiLCJjYW5IYXZlUHJvcGVydGllcyIsIlJlZ0V4cCIsIlN0cmluZyIsIk51bWJlciIsIkJvb2xlYW4iLCJvdXRwdXRQcm9wZXJ0aWVzIiwic2F2ZSIsInZpc2l0UHJvcGVydGllc09yQXJyYXlFbnRyaWVzIiwiaW5kZXhlciIsInByb3BlcnR5VmFsdWUiLCJwcmV2aW91c2x5TWFwcGVkVmFsdWUiLCJ2aXNpdG9yQ2FsbGJhY2siLCJwcm9wZXJ0eU5hbWUiLCJrZXlzIiwidmFsdWVzIiwibWF4TmVzdGVkT2JzZXJ2YWJsZURlcHRoIiwidG9KUyIsInZhbHVlVG9NYXAiLCJ0b0pTT04iLCJwbGFpbkphdmFTY3JpcHRPYmplY3QiLCJjb25zdHJ1Y3RvciIsImV4aXN0aW5nSW5kZXgiLCJoYXNEb21EYXRhRXhwYW5kb1Byb3BlcnR5Iiwic2VsZWN0RXh0ZW5zaW9ucyIsInJlYWRWYWx1ZSIsIm9wdGlvblZhbHVlRG9tRGF0YUtleSIsImdldEF0dHJpYnV0ZU5vZGUiLCJzcGVjaWZpZWQiLCJ0ZXh0Iiwic2VsZWN0ZWRJbmRleCIsIndyaXRlVmFsdWUiLCJhbGxvd1Vuc2V0Iiwib3B0aW9uVmFsdWUiLCJzZWxlY3Rpb24iLCJuIiwic2l6ZSIsImdldFdyaXRlYWJsZVZhbHVlIiwiZXhwcmVzc2lvbiIsImphdmFTY3JpcHRSZXNlcnZlZFdvcmRzIiwiamF2YVNjcmlwdEFzc2lnbm1lbnRUYXJnZXQiLCJwYXJzZU9iamVjdExpdGVyYWwiLCJvYmplY3RMaXRlcmFsU3RyaW5nIiwic3RyIiwiY2hhckNvZGVBdCIsInRva3MiLCJiaW5kaW5nVG9rZW4iLCJ0b2siLCJjIiwidW5rbm93biIsImRpdmlzaW9uTG9va0JlaGluZCIsImtleXdvcmRSZWdleExvb2tCZWhpbmQiLCJzdWJzdHIiLCJwcmVQcm9jZXNzQmluZGluZ3MiLCJiaW5kaW5nc1N0cmluZ09yS2V5VmFsdWVBcnJheSIsImJpbmRpbmdPcHRpb25zIiwicHJvY2Vzc0tleVZhbHVlIiwidmFsIiwiY2FsbFByZXByb2Nlc3NIb29rIiwid3JpdGFibGVWYWwiLCJiaW5kaW5nUGFyYW1zIiwidHdvV2F5QmluZGluZ3MiLCJwcm9wZXJ0eUFjY2Vzc29yUmVzdWx0U3RyaW5ncyIsIm1ha2VWYWx1ZUFjY2Vzc29ycyIsInJlc3VsdFN0cmluZ3MiLCJrZXlWYWx1ZUFycmF5Iiwia2V5VmFsdWUiLCJzdHJpbmdEb3VibGUiLCJzdHJpbmdTaW5nbGUiLCJzdHJpbmdSZWdleHAiLCJzcGVjaWFscyIsImV2ZXJ5VGhpbmdFbHNlIiwib25lTm90U3BhY2UiLCJpbiIsInJldHVybiIsInR5cGVvZiIsImtleVZhbHVlQXJyYXlDb250YWluc0tleSIsIndyaXRlVmFsdWVUb1Byb3BlcnR5IiwicHJvcGVydHkiLCJjaGVja0lmRGlmZmVyZW50IiwicHJvcFdyaXRlcnMiLCJpc1N0YXJ0Q29tbWVudCIsInN0YXJ0Q29tbWVudFJlZ2V4IiwiY29tbWVudE5vZGVzSGF2ZVRleHRQcm9wZXJ0eSIsImlzRW5kQ29tbWVudCIsImVuZENvbW1lbnRSZWdleCIsImdldFZpcnR1YWxDaGlsZHJlbiIsInN0YXJ0Q29tbWVudCIsImFsbG93VW5iYWxhbmNlZCIsImN1cnJlbnROb2RlIiwiY2hpbGRyZW4iLCJnZXRNYXRjaGluZ0VuZENvbW1lbnQiLCJhbGxWaXJ0dWFsQ2hpbGRyZW4iLCJnZXRVbmJhbGFuY2VkQ2hpbGRUYWdzIiwiY2hpbGROb2RlIiwiY2FwdHVyZVJlbWFpbmluZyIsIm1hdGNoaW5nRW5kQ29tbWVudCIsImNyZWF0ZUNvbW1lbnQiLCJodG1sVGFnc1dpdGhPcHRpb25hbGx5Q2xvc2luZ0NoaWxkcmVuIiwidWwiLCJvbCIsInZpcnR1YWxDaGlsZHJlbiIsImVuZENvbW1lbnROb2RlIiwicHJlcGVuZCIsImNvbnRhaW5lck5vZGUiLCJub2RlVG9QcmVwZW5kIiwiaW5zZXJ0QWZ0ZXIiLCJub2RlVG9JbnNlcnQiLCJpbnNlcnRBZnRlck5vZGUiLCJoYXNCaW5kaW5nVmFsdWUiLCJ2aXJ0dWFsTm9kZUJpbmRpbmdWYWx1ZSIsInJlZ2V4TWF0Y2giLCJub3JtYWxpc2VWaXJ0dWFsRWxlbWVudERvbVN0cnVjdHVyZSIsImVsZW1lbnRWZXJpZmllZCIsInVuYmFsYW5jZWRUYWdzIiwibm9kZVRvSW5zZXJ0QmVmb3JlIiwiY3JlYXRlQmluZGluZ3NTdHJpbmdFdmFsdWF0b3JWaWFDYWNoZSIsImJpbmRpbmdzU3RyaW5nIiwiY2FjaGUiLCJjYWNoZUtleSIsImNyZWF0ZUJpbmRpbmdzU3RyaW5nRXZhbHVhdG9yIiwicmV3cml0dGVuQmluZGluZ3MiLCJmdW5jdGlvbkJvZHkiLCJkZWZhdWx0QmluZGluZ0F0dHJpYnV0ZU5hbWUiLCJiaW5kaW5nUHJvdmlkZXIiLCJiaW5kaW5nQ2FjaGUiLCJub2RlSGFzQmluZGluZ3MiLCJnZXRBdHRyaWJ1dGUiLCJjb21wb25lbnRzIiwiZ2V0QmluZGluZ3MiLCJwYXJzZWRCaW5kaW5ncyIsImFkZEJpbmRpbmdzRm9yQ3VzdG9tRWxlbWVudCIsImdldEJpbmRpbmdBY2Nlc3NvcnMiLCJ2YWx1ZUFjY2Vzc29ycyIsImdldEJpbmRpbmdzU3RyaW5nIiwicGFyc2VCaW5kaW5nc1N0cmluZyIsImJpbmRpbmdGdW5jdGlvbiIsIm1lc3NhZ2UiLCJtYWtlVmFsdWVBY2Nlc3NvciIsImV2YWx1YXRlVmFsdWVBY2Nlc3NvciIsIm1ha2VBY2Nlc3NvcnNGcm9tRnVuY3Rpb24iLCJtYWtlQmluZGluZ0FjY2Vzc29ycyIsImJpbmRpbmdzIiwiY29udGV4dCIsImdldEJpbmRpbmdzQW5kTWFrZUFjY2Vzc29ycyIsInZhbGlkYXRlVGhhdEJpbmRpbmdJc0FsbG93ZWRGb3JWaXJ0dWFsRWxlbWVudHMiLCJiaW5kaW5nTmFtZSIsInZhbGlkYXRvciIsImFwcGx5QmluZGluZ3NUb0Rlc2NlbmRhbnRzSW50ZXJuYWwiLCJlbGVtZW50T3JWaXJ0dWFsRWxlbWVudCIsImJpbmRpbmdDb250ZXh0c01heURpZmZlckZyb21Eb21QYXJlbnRFbGVtZW50IiwiY3VycmVudENoaWxkIiwibmV4dEluUXVldWUiLCJwcm92aWRlciIsInByZXByb2Nlc3NOb2RlIiwiYXBwbHlCaW5kaW5nc1RvTm9kZUFuZERlc2NlbmRhbnRzSW50ZXJuYWwiLCJub2RlVmVyaWZpZWQiLCJiaW5kaW5nQ29udGV4dE1heURpZmZlckZyb21Eb21QYXJlbnRFbGVtZW50Iiwic2hvdWxkQmluZERlc2NlbmRhbnRzIiwiaXNFbGVtZW50Iiwic2hvdWxkQXBwbHlCaW5kaW5ncyIsImFwcGx5QmluZGluZ3NUb05vZGVJbnRlcm5hbCIsImJpbmRpbmdEb2VzTm90UmVjdXJzZUludG9FbGVtZW50VHlwZXMiLCJ0b3BvbG9naWNhbFNvcnRCaW5kaW5ncyIsImJpbmRpbmdzQ29uc2lkZXJlZCIsImN5Y2xpY0RlcGVuZGVuY3lTdGFjayIsInB1c2hCaW5kaW5nIiwiYmluZGluZyIsImJpbmRpbmdEZXBlbmRlbmN5S2V5Iiwic291cmNlQmluZGluZ3MiLCJhbHJlYWR5Qm91bmQiLCJib3VuZEVsZW1lbnREb21EYXRhS2V5Iiwic3RvcmVkQmluZGluZ0NvbnRleHRGb3JOb2RlIiwiYmluZGluZ3NVcGRhdGVyIiwiX3N1YnNjcmliYWJsZSIsImJpbmRpbmdIYW5kbGVyVGhhdENvbnRyb2xzRGVzY2VuZGFudEJpbmRpbmdzIiwiZ2V0VmFsdWVBY2Nlc3NvciIsIm9yZGVyZWRCaW5kaW5ncyIsImJpbmRpbmdLZXlBbmRIYW5kbGVyIiwiaGFuZGxlckluaXRGbiIsImhhbmRsZXJVcGRhdGVGbiIsImluaXRSZXN1bHQiLCJnZXRCaW5kaW5nQ29udGV4dCIsInZpZXdNb2RlbE9yQmluZGluZ0NvbnRleHQiLCJ0ZXh0YXJlYSIsInRlbXBsYXRlIiwiZGF0YUl0ZW1PckFjY2Vzc29yIiwicGFyZW50Q29udGV4dCIsImRhdGFJdGVtQWxpYXMiLCJleHRlbmRDYWxsYmFjayIsInVwZGF0ZUNvbnRleHQiLCJkYXRhSXRlbU9yT2JzZXJ2YWJsZSIsImlzRnVuYyIsImRhdGFJdGVtIiwiX2FkZE5vZGUiLCJ1bnNoaWZ0IiwicHJvcGVydGllcyIsInN0b3JlZEJpbmRpbmdDb250ZXh0RG9tRGF0YUtleSIsImFwcGx5QmluZGluZ0FjY2Vzc29yc1RvTm9kZSIsImFwcGx5QmluZGluZ3NUb05vZGUiLCJjb250ZXh0Rm9yIiwiZGF0YUZvciIsImdldE9iamVjdE93blByb3BlcnR5IiwicHJvcE5hbWUiLCJsb2FkQ29tcG9uZW50QW5kTm90aWZ5IiwiY29tcG9uZW50TmFtZSIsImNvbXBsZXRlZEFzeW5jIiwibG9hZGluZ1N1YnNjcmliYWJsZXNDYWNoZSIsImJlZ2luTG9hZGluZ0NvbXBvbmVudCIsImRlZmluaXRpb24iLCJjb25maWciLCJpc1N5bmNocm9ub3VzQ29tcG9uZW50IiwibG9hZGVkRGVmaW5pdGlvbnNDYWNoZSIsImdldEZpcnN0UmVzdWx0RnJvbUxvYWRlcnMiLCJhcmdzRXhjZXB0Q2FsbGJhY2siLCJjYW5kaWRhdGVMb2FkZXJzIiwiY3VycmVudENhbmRpZGF0ZUxvYWRlciIsIm1ldGhvZEluc3RhbmNlIiwid2FzQWJvcnRlZCIsInN5bmNocm9ub3VzUmV0dXJuVmFsdWUiLCJjYWNoZWREZWZpbml0aW9uIiwiY2xlYXJDYWNoZWREZWZpbml0aW9uIiwiX2dldEZpcnN0UmVzdWx0RnJvbUxvYWRlcnMiLCJyZXNvbHZlQ29uZmlnIiwiZXJyb3JDYWxsYmFjayIsIm1ha2VDYWxsQmFja1doZW5aZXJvIiwidHJ5SXNzdWVDYWxsYmFjayIsInRlbXBsYXRlQ29uZmlnIiwidmlld01vZGVsQ29uZmlnIiwicG9zc2libHlHZXRDb25maWdGcm9tQW1kIiwibG9hZGVkQ29uZmlnIiwicmVzb2x2ZWRUZW1wbGF0ZSIsInJlc29sdmVkVmlld01vZGVsIiwiY3JlYXRlVmlld01vZGVsS2V5IiwicmVzb2x2ZVRlbXBsYXRlIiwiaXNEb2N1bWVudEZyYWdtZW50IiwiaXNEb21FbGVtZW50IiwiY2xvbmVOb2Rlc0Zyb21UZW1wbGF0ZVNvdXJjZUVsZW1lbnQiLCJlbGVtSW5zdGFuY2UiLCJyZXNvbHZlVmlld01vZGVsIiwiZml4ZWRJbnN0YW5jZSIsImNvbXBvbmVudEluZm8iLCJIVE1MRWxlbWVudCIsIkRvY3VtZW50RnJhZ21lbnQiLCJtYWtlRXJyb3JDYWxsYmFjayIsImRlZmF1bHRDb25maWdSZWdpc3RyeSIsInJlZ2lzdGVyIiwiaXNSZWdpc3RlcmVkIiwidW5yZWdpc3RlciIsImRlZmF1bHRMb2FkZXIiLCJnZXRDb25maWciLCJsb2FkQ29tcG9uZW50IiwibG9hZFRlbXBsYXRlIiwibG9hZFZpZXdNb2RlbCIsIl9hbGxSZWdpc3RlcmVkQ29tcG9uZW50cyIsImdldENvbXBvbmVudFBhcmFtc0Zyb21DdXN0b21FbGVtZW50IiwicGFyYW1zQXR0cmlidXRlIiwibmF0aXZlQmluZGluZ1Byb3ZpZGVySW5zdGFuY2UiLCJyYXdQYXJhbUNvbXB1dGVkVmFsdWVzIiwicGFyYW1WYWx1ZSIsInBhcmFtTmFtZSIsInBhcmFtVmFsdWVDb21wdXRlZCIsIiRyYXciLCJjb21wb25lbnRCaW5kaW5nVmFsdWUiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwibmV3RG9jRnJhZyIsImFsbENvbXBvbmVudHMiLCJjbG9uZVRlbXBsYXRlSW50b0VsZW1lbnQiLCJjb21wb25lbnREZWZpbml0aW9uIiwiY2xvbmVkTm9kZXNBcnJheSIsImNyZWF0ZVZpZXdNb2RlbCIsIm9yaWdpbmFsQ2hpbGROb2RlcyIsImNvbXBvbmVudFBhcmFtcyIsImNvbXBvbmVudFZpZXdNb2RlbEZhY3RvcnkiLCJ0ZW1wbGF0ZU5vZGVzIiwiY29tcG9uZW50TG9hZGluZ09wZXJhdGlvblVuaXF1ZUlkIiwiaWdub3JlZDEiLCJpZ25vcmVkMiIsImN1cnJlbnRWaWV3TW9kZWwiLCJjdXJyZW50TG9hZGluZ09wZXJhdGlvbklkIiwiZGlzcG9zZUFzc29jaWF0ZWRDb21wb25lbnRWaWV3TW9kZWwiLCJjdXJyZW50Vmlld01vZGVsRGlzcG9zZSIsImxvYWRpbmdPcGVyYXRpb25JZCIsImNvbXBvbmVudFZpZXdNb2RlbCIsImNoaWxkQmluZGluZ0NvbnRleHQiLCJjdHgiLCJhdHRySHRtbFRvSmF2YXNjcmlwdE1hcCIsImNsYXNzIiwiZm9yIiwiYXR0ck5hbWUiLCJhdHRyVmFsdWUiLCJ0b1JlbW92ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImFmdGVyIiwidXBkYXRlTW9kZWwiLCJpc0NoZWNrZWQiLCJjaGVja2VkIiwiZWxlbVZhbHVlIiwidXNlQ2hlY2tlZFZhbHVlIiwiY2hlY2tlZFZhbHVlIiwiaXNSYWRpbyIsIm1vZGVsVmFsdWUiLCJ2YWx1ZUlzQXJyYXkiLCJ3cml0YWJsZVZhbHVlIiwicmF3VmFsdWVJc05vbkFycmF5T2JzZXJ2YWJsZSIsIm9sZEVsZW1WYWx1ZSIsInVwZGF0ZVZpZXciLCJpc0NoZWNrYm94IiwicmF3VmFsdWUiLCJjbGFzc2VzV3JpdHRlbkJ5QmluZGluZ0tleSIsImRpc2FibGVkIiwiZXZlbnRzVG9IYW5kbGUiLCJoYW5kbGVyUmV0dXJuVmFsdWUiLCJoYW5kbGVyRnVuY3Rpb24iLCJhcmdzRm9ySGFuZGxlciIsInJldHVyblZhbHVlIiwiYnViYmxlIiwiY2FuY2VsQnViYmxlIiwibWFrZVRlbXBsYXRlVmFsdWVBY2Nlc3NvciIsInVud3JhcHBlZFZhbHVlIiwiZm9yZWFjaCIsImFzIiwiaW5jbHVkZURlc3Ryb3llZCIsImFmdGVyQWRkIiwiYmVmb3JlUmVtb3ZlIiwiYWZ0ZXJSZW5kZXIiLCJiZWZvcmVNb3ZlIiwiYWZ0ZXJNb3ZlIiwidGVtcGxhdGVFbmdpbmUiLCJuYXRpdmVUZW1wbGF0ZUVuZ2luZSIsImhhc2ZvY3VzVXBkYXRpbmdQcm9wZXJ0eSIsImhhc2ZvY3VzTGFzdFZhbHVlIiwiaGFuZGxlRWxlbWVudEZvY3VzQ2hhbmdlIiwiaXNGb2N1c2VkIiwib3duZXJEb2MiLCJhY3RpdmUiLCJhY3RpdmVFbGVtZW50IiwiaGFuZGxlRWxlbWVudEZvY3VzSW4iLCJoYW5kbGVFbGVtZW50Rm9jdXNPdXQiLCJmb2N1cyIsImJsdXIiLCJjYXB0aW9uUGxhY2Vob2xkZXIiLCJzZWxlY3RlZE9wdGlvbnMiLCJhcHBseVRvT2JqZWN0IiwiZGVmYXVsdFZhbHVlIiwicHJlZGljYXRlVHlwZSIsIm9wdGlvbkZvckFycmF5SXRlbSIsImFycmF5RW50cnkiLCJvbGRPcHRpb25zIiwicHJldmlvdXNTZWxlY3RlZFZhbHVlcyIsInZhbHVlQWxsb3dVbnNldCIsIml0ZW1VcGRhdGUiLCJvcHRpb25UZXh0Iiwic2V0U2VsZWN0aW9uQ2FsbGJhY2siLCJuZXdPcHRpb25zIiwiY2FwdGlvblZhbHVlIiwiZmlsdGVyZWRBcnJheSIsInNlbGVjdFdhc1ByZXZpb3VzbHlFbXB0eSIsIm11bHRpcGxlIiwicHJldmlvdXNTY3JvbGxUb3AiLCJzY3JvbGxUb3AiLCJ1bndyYXBwZWRBcnJheSIsImFycmF5VG9Eb21Ob2RlQ2hpbGRyZW5PcHRpb25zIiwic2V0RG9tTm9kZUNoaWxkcmVuRnJvbUFycmF5TWFwcGluZyIsInNlbGVjdGlvbkNoYW5nZWQiLCJhYnMiLCJ2YWx1ZVRvV3JpdGUiLCJzdHlsZU5hbWUiLCJzdHlsZVZhbHVlIiwicGFyc2VWZXJzaW9uIiwicGFyc2VGbG9hdCIsIm9wZXJhVmVyc2lvbiIsIm9wZXJhIiwicGFyc2VJbnQiLCJzYWZhcmlWZXJzaW9uIiwiZmlyZWZveFZlcnNpb24iLCJzZWxlY3Rpb25DaGFuZ2VSZWdpc3RlcmVkTmFtZSIsInNlbGVjdGlvbkNoYW5nZUhhbmRsZXJOYW1lIiwic2VsZWN0aW9uQ2hhbmdlSGFuZGxlciIsInJlZ2lzdGVyRm9yU2VsZWN0aW9uQ2hhbmdlRXZlbnQiLCJ0aW1lb3V0SGFuZGxlIiwiZWxlbWVudFZhbHVlQmVmb3JlRXZlbnQiLCJwcmV2aW91c0VsZW1lbnRWYWx1ZSIsImVsZW1lbnRWYWx1ZSIsImRlZmVyVXBkYXRlTW9kZWwiLCJpZVVwZGF0ZU1vZGVsIiwib25FdmVudCIsInByZXByb2Nlc3MiLCJhZGRCaW5kaW5nIiwiY3VycmVudEluZGV4IiwiZXZlbnRzVG9DYXRjaCIsInJlcXVlc3RlZEV2ZW50c1RvQ2F0Y2giLCJwcm9wZXJ0eUNoYW5nZWRGaXJlZCIsInZhbHVlVXBkYXRlSGFuZGxlciIsImllQXV0b0NvbXBsZXRlSGFja05lZWRlZCIsImF1dG9jb21wbGV0ZSIsInVwZGF0ZUZyb21Nb2RlbCIsInZhbHVlSGFzQ2hhbmdlZCIsImFwcGx5VmFsdWVBY3Rpb24iLCJpc0N1cnJlbnRseVZpc2libGUiLCJ0ZW1wbGF0ZVNvdXJjZSIsInRlbXBsYXRlU291cmNlcyIsImRvbUVsZW1lbnQiLCJhbm9ueW1vdXNUZW1wbGF0ZSIsInJld3JpdGVyQ2FsbGJhY2siLCJyZXdyaXR0ZW4iLCJ0ZW1wbGF0ZVJld3JpdGluZyIsInZhbGlkYXRlRGF0YUJpbmRWYWx1ZXNGb3JSZXdyaXRpbmciLCJhbGxWYWxpZGF0b3JzIiwicG9zc2libGVFcnJvck1lc3NhZ2UiLCJjb25zdHJ1Y3RNZW1vaXplZFRhZ1JlcGxhY2VtZW50IiwiZGF0YUJpbmRBdHRyaWJ1dGVWYWx1ZSIsInRhZ1RvUmV0YWluIiwibm9kZU5hbWUiLCJkYXRhQmluZEtleVZhbHVlQXJyYXkiLCJyZXdyaXR0ZW5EYXRhQmluZEF0dHJpYnV0ZVZhbHVlIiwiYXBwbHlCaW5kaW5nc1RvTmV4dFNpYmxpbmdTY3JpcHQiLCJtZW1vaXplRGF0YUJpbmRpbmdBdHRyaWJ1dGVTeW50YXhSZWdleCIsIm1lbW9pemVWaXJ0dWFsQ29udGFpbmVyQmluZGluZ1N5bnRheFJlZ2V4IiwiZW5zdXJlVGVtcGxhdGVJc1Jld3JpdHRlbiIsImh0bWxTdHJpbmciLCJtZW1vaXplQmluZGluZ0F0dHJpYnV0ZVN5bnRheCIsImFwcGx5TWVtb2l6ZWRCaW5kaW5nc1RvTmV4dFNpYmxpbmciLCJub2RlVG9CaW5kIiwiZ2V0VGVtcGxhdGVEb21EYXRhIiwidGVtcGxhdGVzRG9tRGF0YUtleSIsInNldFRlbXBsYXRlRG9tRGF0YSIsInRlbXBsYXRlU2NyaXB0IiwidGVtcGxhdGVUZXh0QXJlYSIsInRlbXBsYXRlVGVtcGxhdGUiLCJ0ZW1wbGF0ZUVsZW1lbnQiLCJ0ZW1wbGF0ZVR5cGUiLCJlbGVtQ29udGVudHNQcm9wZXJ0eSIsImRhdGFEb21EYXRhUHJlZml4IiwidGVtcGxhdGVEYXRhIiwiY29udGFpbmVyRGF0YSIsInRleHREYXRhIiwiaW52b2tlRm9yRWFjaE5vZGVJbkNvbnRpbnVvdXNSYW5nZSIsImZpcnN0Tm9kZSIsImxhc3ROb2RlIiwiZmlyc3RPdXRPZlJhbmdlTm9kZSIsImFjdGl2YXRlQmluZGluZ3NPbkNvbnRpbnVvdXNOb2RlQXJyYXkiLCJuZXh0Tm9kZUluUmFuZ2UiLCJub2RlUHJldmlvdXNTaWJsaW5nIiwicHJldmlvdXNTaWJsaW5nIiwibmV3Tm9kZXMiLCJnZXRGaXJzdE5vZGVGcm9tUG9zc2libGVBcnJheSIsIm5vZGVPck5vZGVBcnJheSIsImV4ZWN1dGVUZW1wbGF0ZSIsInRhcmdldE5vZGVPck5vZGVBcnJheSIsInJlbmRlck1vZGUiLCJmaXJzdFRhcmdldE5vZGUiLCJ0ZW1wbGF0ZUVuZ2luZVRvVXNlIiwiX3RlbXBsYXRlRW5naW5lIiwicmVuZGVyZWROb2Rlc0FycmF5IiwiaGF2ZUFkZGVkTm9kZXNUb1BhcmVudCIsInJlc29sdmVUZW1wbGF0ZU5hbWUiLCJkaXNwb3NlT2xkQ29tcHV0ZWRBbmRTdG9yZU5ld09uZSIsIm5ld0NvbXB1dGVkIiwib2xkQ29tcHV0ZWQiLCJ0ZW1wbGF0ZUNvbXB1dGVkRG9tRGF0YUtleSIsInNldFRlbXBsYXRlRW5naW5lIiwicmVuZGVyVGVtcGxhdGUiLCJkYXRhT3JCaW5kaW5nQ29udGV4dCIsIndoZW5Ub0Rpc3Bvc2UiLCJhY3RpdmVseURpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZCIsInRlbXBsYXRlTmFtZSIsInJlbmRlclRlbXBsYXRlRm9yRWFjaCIsImFycmF5T3JPYnNlcnZhYmxlQXJyYXkiLCJ0YXJnZXROb2RlIiwicGFyZW50QmluZGluZ0NvbnRleHQiLCJhcnJheUl0ZW1Db250ZXh0IiwiZXhlY3V0ZVRlbXBsYXRlRm9yQXJyYXlJdGVtIiwiYXJyYXlWYWx1ZSIsImFjdGl2YXRlQmluZGluZ3NDYWxsYmFjayIsImFkZGVkTm9kZXNBcnJheSIsImJpbmRpbmdWYWx1ZSIsInRlbXBsYXRlQ29tcHV0ZWQiLCJkYXRhQXJyYXkiLCJpbm5lckJpbmRpbmdDb250ZXh0IiwicGFyc2VkQmluZGluZ1ZhbHVlIiwibGVmdCIsInJpZ2h0IiwibGltaXRGYWlsZWRDb21wYXJlcyIsImZhaWxlZENvbXBhcmVzIiwibCIsInIiLCJsZWZ0SXRlbSIsInJpZ2h0SXRlbSIsIm9sZEFycmF5IiwibmV3QXJyYXkiLCJkb250TGltaXRNb3ZlcyIsImNvbXBhcmVTbWFsbEFycmF5VG9CaWdBcnJheSIsInN0YXR1c05vdEluT2xkIiwic3RhdHVzTm90SW5OZXciLCJzbWxBcnJheSIsImJpZ0FycmF5Iiwic3RhdHVzTm90SW5TbWwiLCJzdGF0dXNOb3RJbkJpZyIsInNtbEluZGV4IiwiYmlnSW5kZXgiLCJ0aGlzUm93IiwibGFzdFJvdyIsImJpZ0luZGV4TWF4Rm9yUm93IiwiYmlnSW5kZXhNaW5Gb3JSb3ciLCJteU1pbiIsIm15TWF4IiwiZWRpdERpc3RhbmNlTWF0cml4Iiwic21sSW5kZXhNYXgiLCJiaWdJbmRleE1heCIsImNvbXBhcmVSYW5nZSIsIm1heERpc3RhbmNlIiwibm9ydGhEaXN0YW5jZSIsIndlc3REaXN0YW5jZSIsIm1lTWludXNPbmUiLCJlZGl0U2NyaXB0Iiwibm90SW5TbWwiLCJub3RJbkJpZyIsInJldmVyc2UiLCJtYXBOb2RlQW5kUmVmcmVzaFdoZW5DaGFuZ2VkIiwiY2FsbGJhY2tBZnRlckFkZGluZ05vZGVzIiwibWFwcGVkTm9kZXMiLCJuZXdNYXBwZWROb2RlcyIsImxhc3RNYXBwaW5nUmVzdWx0RG9tRGF0YUtleSIsImRlbGV0ZWRJdGVtRHVtbXlWYWx1ZSIsIml0ZW1Nb3ZlZE9yUmV0YWluZWQiLCJlZGl0U2NyaXB0SW5kZXgiLCJvbGRQb3NpdGlvbiIsIm1hcERhdGEiLCJsYXN0TWFwcGluZ1Jlc3VsdCIsIm5ld01hcHBpbmdSZXN1bHRJbmRleCIsIml0ZW1zRm9yTW92ZUNhbGxiYWNrcyIsImluZGV4T2JzZXJ2YWJsZSIsIm5ld01hcHBpbmdSZXN1bHQiLCJpdGVtc1RvUHJvY2VzcyIsImNhbGxDYWxsYmFjayIsImVkaXRTY3JpcHRJdGVtIiwibW92ZWRJbmRleCIsImlzRmlyc3RFeGVjdXRpb24iLCJsYXN0QXJyYXkiLCJ4IiwibGFzdE1hcHBpbmdSZXN1bHRJbmRleCIsIm5vZGVzVG9EZWxldGUiLCJpdGVtc0ZvckJlZm9yZVJlbW92ZUNhbGxiYWNrcyIsIml0ZW1zRm9yQWZ0ZXJBZGRDYWxsYmFja3MiLCJuZXh0Tm9kZSIsImluaXRpYWxpemVkIiwidXNlTm9kZXNJZkF2YWlsYWJsZSIsInRlbXBsYXRlTm9kZXNGdW5jIiwidGVtcGxhdGVUZXh0IiwianF1ZXJ5VG1wbFRlbXBsYXRlRW5naW5lIiwiZW5zdXJlSGFzUmVmZXJlbmNlZEpRdWVyeVRlbXBsYXRlcyIsImpRdWVyeVRtcGxWZXJzaW9uIiwiY29tcGlsZWRUZW1wbGF0ZSIsImpRdWVyeVRlbXBsYXRlT3B0aW9ucyIsInByZWNvbXBpbGVkIiwia29CaW5kaW5nQ29udGV4dCIsInJlc3VsdE5vZGVzIiwidGVtcGxhdGVNYXJrdXAiLCJjbG9zZSIsImpxdWVyeVRtcGxUZW1wbGF0ZUVuZ2luZUluc3RhbmNlIl0sIm1hcHBpbmdzIjoiQUFzQkEseUhBOEdBLFFBQVNBLHlCQUdQLEdBSUlDLEdBSkFDLEdBQVFDLElBQUksV0FBV0MsSUFBSSxvQkFFM0JDLEVBQWEsR0FBSUMsUUFBT0MsS0FBS0MsV0FJN0JDLEdBQ0ZDLE9BQVEsd0NBQ1JDLFFBQVMsV0FD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YUFDTzRsQyxHQUdYN29DLEtBQUEsK0JBQXlDLFNBQVMwYixHQUM5QyxNQUFPLG1DQUFxQ0EsRUFBUyxhQUd6RDFiLEtBQUEsWUFBc0IsU0FBU2tqQyxFQUFjNEYsR0FDekNycUMsRUFBUzJkLE1BQU0sZ0NBQWtDOG1CLEVBQWUsS0FBTzRGLEVBQWlCLGNBR3hGTixFQUFvQixJQUNwQnZsQyxFQUFBLEtBQUEsSUFBQSxTQUNJekgsS0FBTSxzQkFFVnlILEVBQUEsS0FBQSxJQUFBLFNBQ0l6SCxLQUFNLGFBQ051dEMsTUFBTyxRQUtuQnhxQyxFQUFHK3BDLHlCQUF5QmxvQyxVQUFZLEdBQUk3QixHQUFHaThCLGVBQy9DajhCLEVBQUcrcEMseUJBQXlCbG9DLFVBQVVpbkIsWUFBYzlvQixFQUFHK3BDLHdCQUd2RCxJQUFJVSxHQUFtQyxHQUFJenFDLEdBQUcrcEMsd0JBQzFDVSxHQUFpQ1Isa0JBQW9CLEdBQ3JEanFDLEVBQUdza0Msa0JBQWtCbUcsR0FFekJ6cUMsRUFBR2tLLGFBQWEsMkJBQTRCbEssRUFBRytwQyIsImZpbGUiOiJhbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgU2lkZU5hdiBjbGFzcyAgaXMgd3JpdHRlbiBieSBQYXVsIExld2lzIGFuZCBTdXJtYSAoU29ycnkgZG9uJ3Qga25vdyB0aGUgbGFzdCAgbmFtZSlcbi8vIGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9ZTVDWGcxc2pUcVFcblxuLyoqXG4gKlxuICogQ29weXJpZ2h0IDIwMTYgR29vZ2xlIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG5cbid1c2Ugc3RyaWN0JztcblxuY2xhc3MgU2lkZU5hdiB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLnNob3dCdXR0b25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1tZW51LXNob3cnKTtcbiAgICB0aGlzLmhpZGVCdXR0b25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1tZW51LWhpZGUnKTtcbiAgICB0aGlzLnNpZGVOYXZFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zaWRlLW5hdicpO1xuICAgIHRoaXMuc2lkZU5hdkNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXNpZGUtbmF2LWNvbnRhaW5lcicpO1xuXG4gICAgdGhpcy5zaG93U2lkZU5hdiA9IHRoaXMuc2hvd1NpZGVOYXYuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhpZGVTaWRlTmF2ID0gdGhpcy5oaWRlU2lkZU5hdi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYmxvY2tDbGlja3MgPSB0aGlzLmJsb2NrQ2xpY2tzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblRvdWNoU3RhcnQgPSB0aGlzLm9uVG91Y2hTdGFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25Ub3VjaE1vdmUgPSB0aGlzLm9uVG91Y2hNb3ZlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblRvdWNoRW5kID0gdGhpcy5vblRvdWNoRW5kLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblRyYW5zaXRpb25FbmQgPSB0aGlzLm9uVHJhbnNpdGlvbkVuZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuc3RhcnRYID0gMDtcbiAgICB0aGlzLmN1cnJlbnRYID0gMDtcbiAgICB0aGlzLnRvdWNoaW5nU2lkZU5hdiA9IGZhbHNlO1xuXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgYWRkRXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgIHRoaXMuc2hvd0J1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5zaG93U2lkZU5hdik7XG4gICAgdGhpcy5oaWRlQnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhpZGVTaWRlTmF2KTtcbiAgICB0aGlzLnNpZGVOYXZFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGlkZVNpZGVOYXYpO1xuICAgIHRoaXMuc2lkZU5hdkNvbnRhaW5lckVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5ibG9ja0NsaWNrcyk7XG5cbiAgICB0aGlzLnNpZGVOYXZFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoU3RhcnQpO1xuICAgIHRoaXMuc2lkZU5hdkVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMub25Ub3VjaE1vdmUpO1xuICAgIHRoaXMuc2lkZU5hdkVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vblRvdWNoRW5kKTtcbiAgfVxuXG4gIG9uVG91Y2hTdGFydCAoZXZ0KSB7XG4gICAgaWYgKCF0aGlzLnNpZGVOYXZFbC5jbGFzc0xpc3QuY29udGFpbnMoJ3NpZGUtbmF2LS12aXNpYmxlJykpXG4gICAgICByZXR1cm47XG5cbiAgICB0aGlzLnN0YXJ0WCA9IGV2dC50b3VjaGVzWzBdLnBhZ2VYO1xuICAgIHRoaXMuY3VycmVudFggPSB0aGlzLnN0YXJ0WDtcblxuICAgIHRoaXMudG91Y2hpbmdTaWRlTmF2ID0gdHJ1ZTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGUpO1xuICB9XG5cbiAgb25Ub3VjaE1vdmUgKGV2dCkge1xuICAgIGlmICghdGhpcy50b3VjaGluZ1NpZGVOYXYpXG4gICAgICByZXR1cm47XG5cbiAgICB0aGlzLmN1cnJlbnRYID0gZXZ0LnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgY29uc3QgdHJhbnNsYXRlWCA9IE1hdGgubWluKDAsIHRoaXMuY3VycmVudFggLSB0aGlzLnN0YXJ0WCk7XG5cbiAgICBpZiAodHJhbnNsYXRlWCA8IDApIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxuXG4gIG9uVG91Y2hFbmQgKGV2dCkge1xuICAgIGlmICghdGhpcy50b3VjaGluZ1NpZGVOYXYpXG4gICAgICByZXR1cm47XG5cbiAgICB0aGlzLnRvdWNoaW5nU2lkZU5hdiA9IGZhbHNlO1xuXG4gICAgY29uc3QgdHJhbnNsYXRlWCA9IE1hdGgubWluKDAsIHRoaXMuY3VycmVudFggLSB0aGlzLnN0YXJ0WCk7XG4gICAgdGhpcy5zaWRlTmF2Q29udGFpbmVyRWwuc3R5bGUudHJhbnNmb3JtID0gJyc7XG5cbiAgICBpZiAodHJhbnNsYXRlWCA8IDApIHtcbiAgICAgIHRoaXMuaGlkZVNpZGVOYXYoKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGUgKCkge1xuICAgIGlmICghdGhpcy50b3VjaGluZ1NpZGVOYXYpXG4gICAgICByZXR1cm47XG5cblxuXG4gICAgY29uc3QgdHJhbnNsYXRlWCA9IE1hdGgubWluKDAsIHRoaXMuY3VycmVudFggLSB0aGlzLnN0YXJ0WCk7XG4gICAgdGhpcy5zaWRlTmF2Q29udGFpbmVyRWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHt0cmFuc2xhdGVYfXB4KWA7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlKTtcbiAgfVxuXG4gIGJsb2NrQ2xpY2tzIChldnQpIHtcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICBvblRyYW5zaXRpb25FbmQgKGV2dCkge1xuICAgIHRoaXMuc2lkZU5hdkVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NpZGUtbmF2LS1hbmltYXRhYmxlJyk7XG4gICAgdGhpcy5zaWRlTmF2RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHRoaXMub25UcmFuc2l0aW9uRW5kKTtcbiAgfVxuXG4gIHNob3dTaWRlTmF2ICgpIHtcbiAgICB0aGlzLnNpZGVOYXZFbC5jbGFzc0xpc3QuYWRkKCdzaWRlLW5hdi0tYW5pbWF0YWJsZScpO1xuICAgIHRoaXMuc2lkZU5hdkVsLmNsYXNzTGlzdC5hZGQoJ3NpZGUtbmF2LS12aXNpYmxlJyk7XG4gICAgdGhpcy5zaWRlTmF2RWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHRoaXMub25UcmFuc2l0aW9uRW5kKTtcbiAgfVxuXG4gIGhpZGVTaWRlTmF2ICgpIHtcbiAgICB0aGlzLnNpZGVOYXZFbC5jbGFzc0xpc3QuYWRkKCdzaWRlLW5hdi0tYW5pbWF0YWJsZScpO1xuICAgIHRoaXMuc2lkZU5hdkVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NpZGUtbmF2LS12aXNpYmxlJyk7XG4gICAgdGhpcy5zaWRlTmF2RWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHRoaXMub25UcmFuc2l0aW9uRW5kKTtcbiAgfVxufVxuXG5uZXcgU2lkZU5hdigpO1xuXG4vLyBBcHBsaWNhdGlvbiBjb2RlIHN0YXJ0cyBoZXJlXG5cbmZ1bmN0aW9uIGluaXRpYWxpemVBcHBsaWNhdGlvbigpIHtcblxuICAvLyBzdGFydGluZyBwb2ludFxuICB2YXIgb3NsbyA9IHtsYXQ6NTkuOTEzODY4OCxsbmc6MTAuNzUyMjQ1Mzk5OTk5OTkzfTtcbiAgdmFyIGZpcnN0UmVxdWVzdCA9IHRydWU7XG4gIHZhciBpbmZvV2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coKTtcblxuICB2YXIgYm91bmRzO1xuXG4gIHZhciBmb3Vyc3F1YXJlID0ge1xuICAgIHZlbnVlczogJ2h0dHBzOi8vYXBpLmZvdXJzcXVhcmUuY29tL3YyL3ZlbnVlcy8nLFxuICAgIGV4cGxvcmU6ICdleHBsb3JlPycsXG4gICAgc2VhcmNoOiAnc2VhcmNoPycsXG4gICAgY3JlZGVudGlhbHM6ICdjbGllbnRfaWQ9WTBERVowMDVDRFQxWTJGQkdHWFY0S1dZT0VQTFdBS0ZYVFhDMFVYTE5BRkhURkFZJmNsaWVudF9zZWNyZXQ9R0VBMzJVVk4zQ1VOMElITkNUU0ZVMVNPQUJCMFdUNEhIMlUyV1lSUjNaTFg0SlgyJyxcbiAgICB2ZXJzaW9uOiAnJnY9MjAxMzA4MTUnXG5cbiAgfTtcblxuXG4gIC8vIFVzZXMgdGhlIGZvdXJzcXVhcmUgYXBpIHRvIGZpbmQgcG9wdWxhciBzcG90cyBhcm91bmQgYSBwcm92aWRlZCBjZW50ZXJcbiAgLy8gQHBhcmFtZXRlcjogY2VudGVyLCB7bGF0OiBOdW1iZXIsIGxuZzogTnVtYmVyfVxuICAvLyBAcGFyYW1ldGVyOiBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGFuIGFycmF5IG9mIHBvcHVsYXIgc3BvdHNcbiAgdmFyIGdldFBvcHVsYXJTcG90cyA9IGZ1bmN0aW9uIChjZW50ZXIsIGNhbGxiYWNrKSB7XG5cbiAgICAvLyBpZiAoZmlyc3RSZXF1ZXN0KSB7XG4gICAgLy8gICB2YXIgY29vcmRpbmF0ZXMgPSAnJmxsPScgKyBjZW50ZXIubGF0ICsgJywnICsgY2VudGVyLmxuZztcbiAgICAvLyAgIGZpcnN0UmVxdWVzdCA9IGZhbHNlO1xuICAgIC8vIH1cbiAgICB2YXIgY29vcmRpbmF0ZXMgPSAnJmxsPScgKyBjZW50ZXIubGF0ICsgJywnICsgY2VudGVyLmxuZztcbiAgICB2YXIgcXVlcnkgPSAnJnF1ZXJ5PVBvcHVsYXIgd2l0aCB2aXNpdG9ycyc7XG5cbiAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgcmVxdWVzdC5vcGVuKFxuICAgICAgICdHRVQnLFxuICAgICAgIGZvdXJzcXVhcmUudmVudWVzICtcbiAgICAgICBmb3Vyc3F1YXJlLmV4cGxvcmUgK1xuICAgICAgIGZvdXJzcXVhcmUuY3JlZGVudGlhbHMgK1xuICAgICAgIGZvdXJzcXVhcmUudmVyc2lvbiArXG4gICAgICAgY29vcmRpbmF0ZXMgKyBxdWVyeSxcbiAgICAgICB0cnVlXG4gICAgICk7XG5cbiAgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICBpZiAoIHJlcXVlc3QucmVhZHlTdGF0ZSAhPSA0ICB8fCByZXF1ZXN0LnN0YXR1cyAhPSAyMDAgKSB7XG4gICAgICAgICByZXR1cm47XG4gICAgICAgfVxuICAgICAgIHZhciBhbnN3ZXIgPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiAgICAgICB2YXIgaXRlbXMgPSBhbnN3ZXIucmVzcG9uc2UuZ3JvdXBzWzBdLml0ZW1zO1xuICAgICAgIGNhbGxiYWNrKGl0ZW1zKTtcbiAgICAgfTtcblxuICAgICByZXF1ZXN0LnNlbmQoJycpO1xuICB9XG5cblxuICAvLyBVc2VzIHRoZSBmb3Vyc3F1YXJlIGFwaSB0byBnZXQgZGV0YWlscyBvZiBhIHByb3ZpZGVkIHZlbnVlXG4gIC8vIEBwYXJhbWV0ZXI6IHZlbnVlSWQsXG4gIC8vIEBwYXJhbWV0ZXI6IGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB2ZW51ZSBvYmplY3QgdG8gcHJvY2Vzc1xuICB2YXIgZ2V0VmVudWVEZXRhaWxzID0gZnVuY3Rpb24gKHZlbnVlSWQsIGNhbGxiYWNrKSB7XG5cbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHJlcXVlc3Qub3BlbihcbiAgICAgICdHRVQnLFxuICAgICAgZm91cnNxdWFyZS52ZW51ZXMgK1xuICAgICAgdmVudWVJZCArXG4gICAgICAnPycgK1xuICAgICAgZm91cnNxdWFyZS5jcmVkZW50aWFscyArXG4gICAgICBmb3Vyc3F1YXJlLnZlcnNpb24sXG4gICAgICB0cnVlXG4gICAgKTtcblxuICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIHJlcXVlc3QucmVhZHlTdGF0ZSAhPSA0ICB8fCByZXF1ZXN0LnN0YXR1cyAhPSAyMDAgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciB2ZW51ZSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgY2FsbGJhY2sodmVudWUpO1xuICAgIH07XG5cbiAgICByZXF1ZXN0LnNlbmQoJycpO1xuXG4gIH1cblxuICB2YXIgY29uc3RydWN0UGhvdG9zQXJyYXkgPSBmdW5jdGlvbiAodmVudWUpIHtcbiAgICB2ZW51ZS5waG90b1VybHMgPSB2ZW51ZS5waG90b3MuZ3JvdXBzWzBdLml0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0ucHJlZml4ICsgJ29yaWdpbmFsJyArIGl0ZW0uc3VmZml4O1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBjb25zdHJ1Y3RCZXN0UGhvdG8gPSBmdW5jdGlvbiAodmVudWUpIHtcbiAgICB2ZW51ZS5iZXN0UGhvdG9VcmwgPSB2ZW51ZS5iZXN0UGhvdG8ucHJlZml4ICsgJ29yaWdpbmFsJyArIHZlbnVlLmJlc3RQaG90by5zdWZmaXg7XG4gIH07XG5cbiAgdmFyIGhleU5ld1BsYWNlID0gZnVuY3Rpb24gKHBsYWNlKSB7XG4gICAgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgZ2V0UG9wdWxhclNwb3RzKHBsYWNlLCBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgZ2V0VmVudWVEZXRhaWxzKGl0ZW0udmVudWUuaWQsIGZ1bmN0aW9uIChyZXNwb25zZU9iamVjdCkge1xuICAgICAgICAgIHZhciB2ZW51ZSA9IHJlc3BvbnNlT2JqZWN0LnJlc3BvbnNlLnZlbnVlO1xuXG4gICAgICAgICAgdmFyIHBvc2l0aW9uID0ge1xuICAgICAgICAgICAgbGF0OiB2ZW51ZS5sb2NhdGlvbi5sYXQsXG4gICAgICAgICAgICBsbmc6IHZlbnVlLmxvY2F0aW9uLmxuZyxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICB0aXRsZTogdmVudWUubmFtZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvblxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgbWFya2VyLmFkZExpc3RlbmVyKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNob3dJbmZvKHZlbnVlLCBpbmZvV2luZG93KTtcbiAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICB2ZW51ZS5tYXJrZXIgPSBtYXJrZXI7XG4gICAgICAgICAgdmVudWUuaW5kZXggPSBpbmRleCsrO1xuICAgICAgICAgIGNvbnN0cnVjdFBob3Rvc0FycmF5KHZlbnVlKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyh2ZW51ZSk7XG4gICAgICAgICAgY2l0eUV4cGxvcmVyLmFkZFZlbnVlKHZlbnVlKTtcblxuXG4gICAgICAgICAgYm91bmRzLmV4dGVuZChuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHBvc2l0aW9uKSk7XG4gICAgICAgICAgbWFwLmZpdEJvdW5kcyhib3VuZHMpO1xuXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHNob3dJbmZvID0gZnVuY3Rpb24gKHZlbnVlLCBpbmZvd2luZG93KSB7XG4gICAgLy8gQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBpbmZvd2luZG93IGlzIG5vdCBhbHJlYWR5IG9wZW5lZCBvbiB0aGlzIG1hcmtlci5cbiAgICBpZiAoaW5mb3dpbmRvdy5tYXJrZXIgIT0gdmVudWUubWFya2VyKSB7XG5cbiAgICAgIHZhciBjb250ZW50ID0gJzxkaXYgaWQ9XCJjb250ZW50XCIgY2xhc3M9XCJjb250ZW50XCI+J1xuICAgICAgICAgICsgJzxoMSBjbGFzcz1cImNvbnRlbnRfX2hlYWRpbmdcIiBkYXRhLWJpbmQ9XCJ0ZXh0OiB2ZW51ZUxpc3QoKVsnICsgdmVudWUuaW5kZXggKyAnXS5uYW1lXCI+PC9oMT4nXG4gICAgICAgICAgKyAnPGRpdiBjbGFzcz1cImltYWdlLXNsaWRlclwiIGRhdGEtYmluZD1cImZvcmVhY2g6IHZlbnVlTGlzdCgpWycgKyB2ZW51ZS5pbmRleCArICddLnBob3RvVXJsc1wiPidcbiAgICAgICAgICArICAgICc8ZGl2IGNsYXNzPVwiaW1hZ2Utc2xpZGVyX19pbWFnZS1jb250YWluZXJcIj4nXG4gICAgICAgICAgKyAgICAgICc8aW1nIHN0eWxlPVwibWF4LXdpZHRoOjMwMHB4O21heC1oZWlnaHQ6MjAwcHhcIiBjbGFzcz1cImltYWdlLXNsaWRlcl9faW1hZ2VcIiBkYXRhLWJpbmQ9XCJhdHRyOiB7c3JjOiAkZGF0YX1cIiBhbHQ9XCJcIj4nXG4gICAgICAgICAgKyAgICAnPC9kaXY+J1xuICAgICAgICAgICsgICc8L2Rpdj4nXG5cbiAgICAgICAgICArICc8L2Rpdj4nO1xuXG5cbiAgICAgIGluZm93aW5kb3cubWFya2VyID0gdmVudWUubWFya2VyO1xuICAgICAgaW5mb3dpbmRvdy5zZXRDb250ZW50KGNvbnRlbnQpO1xuICAgICAgaW5mb3dpbmRvdy5vcGVuKG1hcCwgdmVudWUubWFya2VyKTtcblxuICAgICAgLy8gTmVlZCB0byBhcHBseSBiaW5kaW5ncyBiZWNhdXNlIHRoZSBjb250ZW50IGdldHMgcmVtb3ZlZCBhbmQgYWRkZWRcbiAgICAgIC8vIHRvIHRoZSBET00gZWFjaCB0aW1lXG4gICAgICBrby5hcHBseUJpbmRpbmdzKGNpdHlFeHBsb3JlciwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ3JlYXRlIGEgbWFwIGFuZCBjZW50ZXIgaXQgaW4gb3Nsb1xuICB2YXIgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcbiAgICBjZW50ZXI6IG9zbG8sXG4gICAgem9vbTogMTUsXG4gICAgZnVsbHNjcmVlbkNvbnRyb2w6IHRydWVcbiAgfSk7XG5cbiAgLy8gQ3JlYXRlIHRoZSBzZWFyY2ggYm94IGFuZCBsaW5rIGl0IHRvIHRoZSBVSSBlbGVtZW50LlxuICB2YXIgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFjLWlucHV0Jyk7XG4gIHZhciBzZWFyY2hCb3ggPSBuZXcgZ29vZ2xlLm1hcHMucGxhY2VzLlNlYXJjaEJveChpbnB1dCk7XG5cbiAgLy8gQmlhcyB0aGUgU2VhcmNoQm94IHJlc3VsdHMgdG93YXJkcyBjdXJyZW50IG1hcCdzIHZpZXdwb3J0LlxuICBtYXAuYWRkTGlzdGVuZXIoJ2JvdW5kc19jaGFuZ2VkJywgZnVuY3Rpb24oKSB7XG4gICAgc2VhcmNoQm94LnNldEJvdW5kcyhtYXAuZ2V0Qm91bmRzKCkpO1xuICB9KTtcblxuICAvLyBXaGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBzZWFyY2ggb3B0aW9uXG4gIHNlYXJjaEJveC5hZGRMaXN0ZW5lcigncGxhY2VzX2NoYW5nZWQnLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGxhY2VzID0gc2VhcmNoQm94LmdldFBsYWNlcygpO1xuXG4gICAgaWYgKHBsYWNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBjYWxjdWxhdGUgZGlzdGFuY2VcbiAgICB2YXIgZGlzdGFuY2UgPVxuICAgIGdvb2dsZS5tYXBzLmdlb21ldHJ5LnNwaGVyaWNhbC5cbiAgICBjb21wdXRlRGlzdGFuY2VCZXR3ZWVuKHBsYWNlc1swXS5nZW9tZXRyeS5sb2NhdGlvbiwgbWFwLmdldENlbnRlcigpKTtcblxuICAgIC8vIENvbnZlcnQgdG8gYSBMYXRMbmcgbGl0ZXJhbCBvYmplY3RcbiAgICB2YXIgbmV3Q2VudGVyID0gSlNPTi5zdHJpbmdpZnkocGxhY2VzWzBdLmdlb21ldHJ5LmxvY2F0aW9uKTtcbiAgICB2YXIgbmV3Q2l0eSA9IEpTT04ucGFyc2UobmV3Q2VudGVyKTtcblxuICAgIC8vIElmIHVzZXIgY2hvc2UgYSBwbGFjZSBmYXIgYXdheVxuICAgIC8vIHRoZXkgcHJvYmFibHkgd2FudCB0byBleHBsb3JlIGFub3RoZXIgY2l0eVxuICAgIGlmIChkaXN0YW5jZSA+IDYwMDApIHtcbiAgICAgIGNpdHlFeHBsb3Jlci5yZW1vdmVBbGxWZW51ZXMoKTtcbiAgICAgIGhleU5ld1BsYWNlKG5ld0NpdHkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICB9KTtcblxuXG4gIHZhciBWaWV3TW9kZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy52ZW51ZUxpc3QgPSBrby5vYnNlcnZhYmxlQXJyYXkoKTtcblxuICAgIHRoaXMuYWRkVmVudWUgPSB0aGlzLmFkZFZlbnVlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZW1vdmVBbGxWZW51ZXMgPSB0aGlzLnJlbW92ZUFsbFZlbnVlcy5iaW5kKHRoaXMpO1xuICB9XG5cbiAgVmlld01vZGVsLnByb3RvdHlwZS5hZGRWZW51ZSA9IGZ1bmN0aW9uICh2ZW51ZSkge1xuICAgIHRoaXMudmVudWVMaXN0LnB1c2godmVudWUpO1xuICB9XG4gIFZpZXdNb2RlbC5wcm90b3R5cGUucmVtb3ZlQWxsVmVudWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMudmVudWVMaXN0KCkuZm9yRWFjaChmdW5jdGlvbiAodmVudWUpIHtcbiAgICAgIHZlbnVlLm1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgfSk7XG4gICAgdGhpcy52ZW51ZUxpc3QucmVtb3ZlQWxsKCk7XG4gIH1cblxuICB2YXIgY2l0eUV4cGxvcmVyID0gIG5ldyBWaWV3TW9kZWwoKTtcblxuICBrby5hcHBseUJpbmRpbmdzKGNpdHlFeHBsb3Jlcik7XG4gIGhleU5ld1BsYWNlKG9zbG8pO1xufVxuIiwiLyohXG4gKiBLbm9ja291dCBKYXZhU2NyaXB0IGxpYnJhcnkgdjMuNC4wXG4gKiAoYykgU3RldmVuIFNhbmRlcnNvbiAtIGh0dHA6Ly9rbm9ja291dGpzLmNvbS9cbiAqIExpY2Vuc2U6IE1JVCAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHApXG4gKi9cblxuKGZ1bmN0aW9uKCl7XG52YXIgREVCVUc9dHJ1ZTtcbihmdW5jdGlvbih1bmRlZmluZWQpe1xuICAgIC8vICgwLCBldmFsKSgndGhpcycpIGlzIGEgcm9idXN0IHdheSBvZiBnZXR0aW5nIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG4gICAgLy8gRm9yIGRldGFpbHMsIHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE0MTE5OTg4L3JldHVybi10aGlzLTAtZXZhbHRoaXMvMTQxMjAwMjMjMTQxMjAwMjNcbiAgICB2YXIgd2luZG93ID0gdGhpcyB8fCAoMCwgZXZhbCkoJ3RoaXMnKSxcbiAgICAgICAgZG9jdW1lbnQgPSB3aW5kb3dbJ2RvY3VtZW50J10sXG4gICAgICAgIG5hdmlnYXRvciA9IHdpbmRvd1snbmF2aWdhdG9yJ10sXG4gICAgICAgIGpRdWVyeUluc3RhbmNlID0gd2luZG93W1wialF1ZXJ5XCJdLFxuICAgICAgICBKU09OID0gd2luZG93W1wiSlNPTlwiXTtcbihmdW5jdGlvbihmYWN0b3J5KSB7XG4gICAgLy8gU3VwcG9ydCB0aHJlZSBtb2R1bGUgbG9hZGluZyBzY2VuYXJpb3NcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmVbJ2FtZCddKSB7XG4gICAgICAgIC8vIFsxXSBBTUQgYW5vbnltb3VzIG1vZHVsZVxuICAgICAgICBkZWZpbmUoWydleHBvcnRzJywgJ3JlcXVpcmUnXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gWzJdIENvbW1vbkpTL05vZGUuanNcbiAgICAgICAgZmFjdG9yeShtb2R1bGVbJ2V4cG9ydHMnXSB8fCBleHBvcnRzKTsgIC8vIG1vZHVsZS5leHBvcnRzIGlzIGZvciBOb2RlLmpzXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gWzNdIE5vIG1vZHVsZSBsb2FkZXIgKHBsYWluIDxzY3JpcHQ+IHRhZykgLSBwdXQgZGlyZWN0bHkgaW4gZ2xvYmFsIG5hbWVzcGFjZVxuICAgICAgICBmYWN0b3J5KHdpbmRvd1sna28nXSA9IHt9KTtcbiAgICB9XG59KGZ1bmN0aW9uKGtvRXhwb3J0cywgYW1kUmVxdWlyZSl7XG4vLyBJbnRlcm5hbGx5LCBhbGwgS08gb2JqZWN0cyBhcmUgYXR0YWNoZWQgdG8ga29FeHBvcnRzIChldmVuIHRoZSBub24tZXhwb3J0ZWQgb25lcyB3aG9zZSBuYW1lcyB3aWxsIGJlIG1pbmlmaWVkIGJ5IHRoZSBjbG9zdXJlIGNvbXBpbGVyKS5cbi8vIEluIHRoZSBmdXR1cmUsIHRoZSBmb2xsb3dpbmcgXCJrb1wiIHZhcmlhYmxlIG1heSBiZSBtYWRlIGRpc3RpbmN0IGZyb20gXCJrb0V4cG9ydHNcIiBzbyB0aGF0IHByaXZhdGUgb2JqZWN0cyBhcmUgbm90IGV4dGVybmFsbHkgcmVhY2hhYmxlLlxudmFyIGtvID0gdHlwZW9mIGtvRXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcgPyBrb0V4cG9ydHMgOiB7fTtcbi8vIEdvb2dsZSBDbG9zdXJlIENvbXBpbGVyIGhlbHBlcnMgKHVzZWQgb25seSB0byBtYWtlIHRoZSBtaW5pZmllZCBmaWxlIHNtYWxsZXIpXG5rby5leHBvcnRTeW1ib2wgPSBmdW5jdGlvbihrb1BhdGgsIG9iamVjdCkge1xuICAgIHZhciB0b2tlbnMgPSBrb1BhdGguc3BsaXQoXCIuXCIpO1xuXG4gICAgLy8gSW4gdGhlIGZ1dHVyZSwgXCJrb1wiIG1heSBiZWNvbWUgZGlzdGluY3QgZnJvbSBcImtvRXhwb3J0c1wiIChzbyB0aGF0IG5vbi1leHBvcnRlZCBvYmplY3RzIGFyZSBub3QgcmVhY2hhYmxlKVxuICAgIC8vIEF0IHRoYXQgcG9pbnQsIFwidGFyZ2V0XCIgd291bGQgYmUgc2V0IHRvOiAodHlwZW9mIGtvRXhwb3J0cyAhPT0gXCJ1bmRlZmluZWRcIiA/IGtvRXhwb3J0cyA6IGtvKVxuICAgIHZhciB0YXJnZXQgPSBrbztcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aCAtIDE7IGkrKylcbiAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0W3Rva2Vuc1tpXV07XG4gICAgdGFyZ2V0W3Rva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV1dID0gb2JqZWN0O1xufTtcbmtvLmV4cG9ydFByb3BlcnR5ID0gZnVuY3Rpb24ob3duZXIsIHB1YmxpY05hbWUsIG9iamVjdCkge1xuICAgIG93bmVyW3B1YmxpY05hbWVdID0gb2JqZWN0O1xufTtcbmtvLnZlcnNpb24gPSBcIjMuNC4wXCI7XG5cbmtvLmV4cG9ydFN5bWJvbCgndmVyc2lvbicsIGtvLnZlcnNpb24pO1xuLy8gRm9yIGFueSBvcHRpb25zIHRoYXQgbWF5IGFmZmVjdCB2YXJpb3VzIGFyZWFzIG9mIEtub2Nrb3V0IGFuZCBhcmVuJ3QgZGlyZWN0bHkgYXNzb2NpYXRlZCB3aXRoIGRhdGEgYmluZGluZy5cbmtvLm9wdGlvbnMgPSB7XG4gICAgJ2RlZmVyVXBkYXRlcyc6IGZhbHNlLFxuICAgICd1c2VPbmx5TmF0aXZlRXZlbnRzJzogZmFsc2Vcbn07XG5cbi8va28uZXhwb3J0U3ltYm9sKCdvcHRpb25zJywga28ub3B0aW9ucyk7ICAgLy8gJ29wdGlvbnMnIGlzbid0IG1pbmlmaWVkXG5rby51dGlscyA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gb2JqZWN0Rm9yRWFjaChvYmosIGFjdGlvbikge1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbihwcm9wLCBvYmpbcHJvcF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIGZvcih2YXIgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBpZihzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKG9iaiwgcHJvdG8pIHtcbiAgICAgICAgb2JqLl9fcHJvdG9fXyA9IHByb3RvO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIHZhciBjYW5TZXRQcm90b3R5cGUgPSAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSk7XG4gICAgdmFyIGNhblVzZVN5bWJvbHMgPSAhREVCVUcgJiYgdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJztcblxuICAgIC8vIFJlcHJlc2VudCB0aGUga25vd24gZXZlbnQgdHlwZXMgaW4gYSBjb21wYWN0IHdheSwgdGhlbiBhdCBydW50aW1lIHRyYW5zZm9ybSBpdCBpbnRvIGEgaGFzaCB3aXRoIGV2ZW50IG5hbWUgYXMga2V5IChmb3IgZmFzdCBsb29rdXApXG4gICAgdmFyIGtub3duRXZlbnRzID0ge30sIGtub3duRXZlbnRUeXBlc0J5RXZlbnROYW1lID0ge307XG4gICAgdmFyIGtleUV2ZW50VHlwZU5hbWUgPSAobmF2aWdhdG9yICYmIC9GaXJlZm94XFwvMi9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpID8gJ0tleWJvYXJkRXZlbnQnIDogJ1VJRXZlbnRzJztcbiAgICBrbm93bkV2ZW50c1trZXlFdmVudFR5cGVOYW1lXSA9IFsna2V5dXAnLCAna2V5ZG93bicsICdrZXlwcmVzcyddO1xuICAgIGtub3duRXZlbnRzWydNb3VzZUV2ZW50cyddID0gWydjbGljaycsICdkYmxjbGljaycsICdtb3VzZWRvd24nLCAnbW91c2V1cCcsICdtb3VzZW1vdmUnLCAnbW91c2VvdmVyJywgJ21vdXNlb3V0JywgJ21vdXNlZW50ZXInLCAnbW91c2VsZWF2ZSddO1xuICAgIG9iamVjdEZvckVhY2goa25vd25FdmVudHMsIGZ1bmN0aW9uKGV2ZW50VHlwZSwga25vd25FdmVudHNGb3JUeXBlKSB7XG4gICAgICAgIGlmIChrbm93bkV2ZW50c0ZvclR5cGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGtub3duRXZlbnRzRm9yVHlwZS5sZW5ndGg7IGkgPCBqOyBpKyspXG4gICAgICAgICAgICAgICAga25vd25FdmVudFR5cGVzQnlFdmVudE5hbWVba25vd25FdmVudHNGb3JUeXBlW2ldXSA9IGV2ZW50VHlwZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBldmVudHNUaGF0TXVzdEJlUmVnaXN0ZXJlZFVzaW5nQXR0YWNoRXZlbnQgPSB7ICdwcm9wZXJ0eWNoYW5nZSc6IHRydWUgfTsgLy8gV29ya2Fyb3VuZCBmb3IgYW4gSUU5IGlzc3VlIC0gaHR0cHM6Ly9naXRodWIuY29tL1N0ZXZlU2FuZGVyc29uL2tub2Nrb3V0L2lzc3Vlcy80MDZcblxuICAgIC8vIERldGVjdCBJRSB2ZXJzaW9ucyBmb3IgYnVnIHdvcmthcm91bmRzICh1c2VzIElFIGNvbmRpdGlvbmFscywgbm90IFVBIHN0cmluZywgZm9yIHJvYnVzdG5lc3MpXG4gICAgLy8gTm90ZSB0aGF0LCBzaW5jZSBJRSAxMCBkb2VzIG5vdCBzdXBwb3J0IGNvbmRpdGlvbmFsIGNvbW1lbnRzLCB0aGUgZm9sbG93aW5nIGxvZ2ljIG9ubHkgZGV0ZWN0cyBJRSA8IDEwLlxuICAgIC8vIEN1cnJlbnRseSB0aGlzIGlzIGJ5IGRlc2lnbiwgc2luY2UgSUUgMTArIGJlaGF2ZXMgY29ycmVjdGx5IHdoZW4gdHJlYXRlZCBhcyBhIHN0YW5kYXJkIGJyb3dzZXIuXG4gICAgLy8gSWYgdGhlcmUgaXMgYSBmdXR1cmUgbmVlZCB0byBkZXRlY3Qgc3BlY2lmaWMgdmVyc2lvbnMgb2YgSUUxMCssIHdlIHdpbGwgYW1lbmQgdGhpcy5cbiAgICB2YXIgaWVWZXJzaW9uID0gZG9jdW1lbnQgJiYgKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmVyc2lvbiA9IDMsIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLCBpRWxlbXMgPSBkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2knKTtcblxuICAgICAgICAvLyBLZWVwIGNvbnN0cnVjdGluZyBjb25kaXRpb25hbCBIVE1MIGJsb2NrcyB1bnRpbCB3ZSBoaXQgb25lIHRoYXQgcmVzb2x2ZXMgdG8gYW4gZW1wdHkgZnJhZ21lbnRcbiAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICc8IS0tW2lmIGd0IElFICcgKyAoKyt2ZXJzaW9uKSArICddPjxpPjwvaT48IVtlbmRpZl0tLT4nLFxuICAgICAgICAgICAgaUVsZW1zWzBdXG4gICAgICAgICkge31cbiAgICAgICAgcmV0dXJuIHZlcnNpb24gPiA0ID8gdmVyc2lvbiA6IHVuZGVmaW5lZDtcbiAgICB9KCkpO1xuICAgIHZhciBpc0llNiA9IGllVmVyc2lvbiA9PT0gNixcbiAgICAgICAgaXNJZTcgPSBpZVZlcnNpb24gPT09IDc7XG5cbiAgICBmdW5jdGlvbiBpc0NsaWNrT25DaGVja2FibGVFbGVtZW50KGVsZW1lbnQsIGV2ZW50VHlwZSkge1xuICAgICAgICBpZiAoKGtvLnV0aWxzLnRhZ05hbWVMb3dlcihlbGVtZW50KSAhPT0gXCJpbnB1dFwiKSB8fCAhZWxlbWVudC50eXBlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChldmVudFR5cGUudG9Mb3dlckNhc2UoKSAhPSBcImNsaWNrXCIpIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIGlucHV0VHlwZSA9IGVsZW1lbnQudHlwZTtcbiAgICAgICAgcmV0dXJuIChpbnB1dFR5cGUgPT0gXCJjaGVja2JveFwiKSB8fCAoaW5wdXRUeXBlID09IFwicmFkaW9cIik7XG4gICAgfVxuXG4gICAgLy8gRm9yIGRldGFpbHMgb24gdGhlIHBhdHRlcm4gZm9yIGNoYW5naW5nIG5vZGUgY2xhc3Nlc1xuICAgIC8vIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2tub2Nrb3V0L2tub2Nrb3V0L2lzc3Vlcy8xNTk3XG4gICAgdmFyIGNzc0NsYXNzTmFtZVJlZ2V4ID0gL1xcUysvZztcblxuICAgIGZ1bmN0aW9uIHRvZ2dsZURvbU5vZGVDc3NDbGFzcyhub2RlLCBjbGFzc05hbWVzLCBzaG91bGRIYXZlQ2xhc3MpIHtcbiAgICAgICAgdmFyIGFkZE9yUmVtb3ZlRm47XG4gICAgICAgIGlmIChjbGFzc05hbWVzKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG5vZGUuY2xhc3NMaXN0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGFkZE9yUmVtb3ZlRm4gPSBub2RlLmNsYXNzTGlzdFtzaG91bGRIYXZlQ2xhc3MgPyAnYWRkJyA6ICdyZW1vdmUnXTtcbiAgICAgICAgICAgICAgICBrby51dGlscy5hcnJheUZvckVhY2goY2xhc3NOYW1lcy5tYXRjaChjc3NDbGFzc05hbWVSZWdleCksIGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBhZGRPclJlbW92ZUZuLmNhbGwobm9kZS5jbGFzc0xpc3QsIGNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub2RlLmNsYXNzTmFtZVsnYmFzZVZhbCddID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIC8vIFNWRyB0YWcgLmNsYXNzTmFtZXMgaXMgYW4gU1ZHQW5pbWF0ZWRTdHJpbmcgaW5zdGFuY2VcbiAgICAgICAgICAgICAgICB0b2dnbGVPYmplY3RDbGFzc1Byb3BlcnR5U3RyaW5nKG5vZGUuY2xhc3NOYW1lLCAnYmFzZVZhbCcsIGNsYXNzTmFtZXMsIHNob3VsZEhhdmVDbGFzcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG5vZGUuY2xhc3NOYW1lIG91Z2h0IHRvIGJlIGEgc3RyaW5nLlxuICAgICAgICAgICAgICAgIHRvZ2dsZU9iamVjdENsYXNzUHJvcGVydHlTdHJpbmcobm9kZSwgJ2NsYXNzTmFtZScsIGNsYXNzTmFtZXMsIHNob3VsZEhhdmVDbGFzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVPYmplY3RDbGFzc1Byb3BlcnR5U3RyaW5nKG9iaiwgcHJvcCwgY2xhc3NOYW1lcywgc2hvdWxkSGF2ZUNsYXNzKSB7XG4gICAgICAgIC8vIG9iai9wcm9wIGlzIGVpdGhlciBhIG5vZGUvJ2NsYXNzTmFtZScgb3IgYSBTVkdBbmltYXRlZFN0cmluZy8nYmFzZVZhbCcuXG4gICAgICAgIHZhciBjdXJyZW50Q2xhc3NOYW1lcyA9IG9ialtwcm9wXS5tYXRjaChjc3NDbGFzc05hbWVSZWdleCkgfHwgW107XG4gICAgICAgIGtvLnV0aWxzLmFycmF5Rm9yRWFjaChjbGFzc05hbWVzLm1hdGNoKGNzc0NsYXNzTmFtZVJlZ2V4KSwgZnVuY3Rpb24oY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICBrby51dGlscy5hZGRPclJlbW92ZUl0ZW0oY3VycmVudENsYXNzTmFtZXMsIGNsYXNzTmFtZSwgc2hvdWxkSGF2ZUNsYXNzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIG9ialtwcm9wXSA9IGN1cnJlbnRDbGFzc05hbWVzLmpvaW4oXCIgXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGZpZWxkc0luY2x1ZGVkV2l0aEpzb25Qb3N0OiBbJ2F1dGhlbnRpY2l0eV90b2tlbicsIC9eX19SZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4oXy4qKT8kL10sXG5cbiAgICAgICAgYXJyYXlGb3JFYWNoOiBmdW5jdGlvbiAoYXJyYXksIGFjdGlvbikge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBhcnJheS5sZW5ndGg7IGkgPCBqOyBpKyspXG4gICAgICAgICAgICAgICAgYWN0aW9uKGFycmF5W2ldLCBpKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhcnJheUluZGV4T2Y6IGZ1bmN0aW9uIChhcnJheSwgaXRlbSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYXJyYXksIGl0ZW0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBhcnJheS5sZW5ndGg7IGkgPCBqOyBpKyspXG4gICAgICAgICAgICAgICAgaWYgKGFycmF5W2ldID09PSBpdGVtKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfSxcblxuICAgICAgICBhcnJheUZpcnN0OiBmdW5jdGlvbiAoYXJyYXksIHByZWRpY2F0ZSwgcHJlZGljYXRlT3duZXIpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gYXJyYXkubGVuZ3RoOyBpIDwgajsgaSsrKVxuICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGUuY2FsbChwcmVkaWNhdGVPd25lciwgYXJyYXlbaV0sIGkpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXlbaV07XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcblxuICAgICAgICBhcnJheVJlbW92ZUl0ZW06IGZ1bmN0aW9uIChhcnJheSwgaXRlbVRvUmVtb3ZlKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBrby51dGlscy5hcnJheUluZGV4T2YoYXJyYXksIGl0ZW1Ub1JlbW92ZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgYXJyYXkuc2hpZnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBhcnJheUdldERpc3RpbmN0VmFsdWVzOiBmdW5jdGlvbiAoYXJyYXkpIHtcbiAgICAgICAgICAgIGFycmF5ID0gYXJyYXkgfHwgW107XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGFycmF5Lmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChrby51dGlscy5hcnJheUluZGV4T2YocmVzdWx0LCBhcnJheVtpXSkgPCAwKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChhcnJheVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuXG4gICAgICAgIGFycmF5TWFwOiBmdW5jdGlvbiAoYXJyYXksIG1hcHBpbmcpIHtcbiAgICAgICAgICAgIGFycmF5ID0gYXJyYXkgfHwgW107XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGFycmF5Lmxlbmd0aDsgaSA8IGo7IGkrKylcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChtYXBwaW5nKGFycmF5W2ldLCBpKSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuXG4gICAgICAgIGFycmF5RmlsdGVyOiBmdW5jdGlvbiAoYXJyYXksIHByZWRpY2F0ZSkge1xuICAgICAgICAgICAgYXJyYXkgPSBhcnJheSB8fCBbXTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gYXJyYXkubGVuZ3RoOyBpIDwgajsgaSsrKVxuICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaV0sIGkpKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChhcnJheVtpXSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuXG4gICAgICAgIGFycmF5UHVzaEFsbDogZnVuY3Rpb24gKGFycmF5LCB2YWx1ZXNUb1B1c2gpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZXNUb1B1c2ggaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgICAgICAgICBhcnJheS5wdXNoLmFwcGx5KGFycmF5LCB2YWx1ZXNUb1B1c2gpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gdmFsdWVzVG9QdXNoLmxlbmd0aDsgaSA8IGo7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgYXJyYXkucHVzaCh2YWx1ZXNUb1B1c2hbaV0pO1xuICAgICAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgICAgICB9LFxuXG4gICAgICAgIGFkZE9yUmVtb3ZlSXRlbTogZnVuY3Rpb24oYXJyYXksIHZhbHVlLCBpbmNsdWRlZCkge1xuICAgICAgICAgICAgdmFyIGV4aXN0aW5nRW50cnlJbmRleCA9IGtvLnV0aWxzLmFycmF5SW5kZXhPZihrby51dGlscy5wZWVrT2JzZXJ2YWJsZShhcnJheSksIHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0VudHJ5SW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluY2x1ZGVkKVxuICAgICAgICAgICAgICAgICAgICBhcnJheS5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbmNsdWRlZClcbiAgICAgICAgICAgICAgICAgICAgYXJyYXkuc3BsaWNlKGV4aXN0aW5nRW50cnlJbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2FuU2V0UHJvdG90eXBlOiBjYW5TZXRQcm90b3R5cGUsXG5cbiAgICAgICAgZXh0ZW5kOiBleHRlbmQsXG5cbiAgICAgICAgc2V0UHJvdG90eXBlT2Y6IHNldFByb3RvdHlwZU9mLFxuXG4gICAgICAgIHNldFByb3RvdHlwZU9mT3JFeHRlbmQ6IGNhblNldFByb3RvdHlwZSA/IHNldFByb3RvdHlwZU9mIDogZXh0ZW5kLFxuXG4gICAgICAgIG9iamVjdEZvckVhY2g6IG9iamVjdEZvckVhY2gsXG5cbiAgICAgICAgb2JqZWN0TWFwOiBmdW5jdGlvbihzb3VyY2UsIG1hcHBpbmcpIHtcbiAgICAgICAgICAgIGlmICghc291cmNlKVxuICAgICAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BdID0gbWFwcGluZyhzb3VyY2VbcHJvcF0sIHByb3AsIHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgfSxcblxuICAgICAgICBlbXB0eURvbU5vZGU6IGZ1bmN0aW9uIChkb21Ob2RlKSB7XG4gICAgICAgICAgICB3aGlsZSAoZG9tTm9kZS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAga28ucmVtb3ZlTm9kZShkb21Ob2RlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG1vdmVDbGVhbmVkTm9kZXNUb0NvbnRhaW5lckVsZW1lbnQ6IGZ1bmN0aW9uKG5vZGVzKSB7XG4gICAgICAgICAgICAvLyBFbnN1cmUgaXQncyBhIHJlYWwgYXJyYXksIGFzIHdlJ3JlIGFib3V0IHRvIHJlcGFyZW50IHRoZSBub2RlcyBhbmRcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IHdhbnQgdGhlIHVuZGVybHlpbmcgY29sbGVjdGlvbiB0byBjaGFuZ2Ugd2hpbGUgd2UncmUgZG9pbmcgdGhhdC5cbiAgICAgICAgICAgIHZhciBub2Rlc0FycmF5ID0ga28udXRpbHMubWFrZUFycmF5KG5vZGVzKTtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZURvY3VtZW50ID0gKG5vZGVzQXJyYXlbMF0gJiYgbm9kZXNBcnJheVswXS5vd25lckRvY3VtZW50KSB8fCBkb2N1bWVudDtcblxuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRlbXBsYXRlRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IG5vZGVzQXJyYXkubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGtvLmNsZWFuTm9kZShub2Rlc0FycmF5W2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNsb25lTm9kZXM6IGZ1bmN0aW9uIChub2Rlc0FycmF5LCBzaG91bGRDbGVhbk5vZGVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IG5vZGVzQXJyYXkubGVuZ3RoLCBuZXdOb2Rlc0FycmF5ID0gW107IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2xvbmVkTm9kZSA9IG5vZGVzQXJyYXlbaV0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgIG5ld05vZGVzQXJyYXkucHVzaChzaG91bGRDbGVhbk5vZGVzID8ga28uY2xlYW5Ob2RlKGNsb25lZE5vZGUpIDogY2xvbmVkTm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3Tm9kZXNBcnJheTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXREb21Ob2RlQ2hpbGRyZW46IGZ1bmN0aW9uIChkb21Ob2RlLCBjaGlsZE5vZGVzKSB7XG4gICAgICAgICAgICBrby51dGlscy5lbXB0eURvbU5vZGUoZG9tTm9kZSk7XG4gICAgICAgICAgICBpZiAoY2hpbGROb2Rlcykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBqOyBpKyspXG4gICAgICAgICAgICAgICAgICAgIGRvbU5vZGUuYXBwZW5kQ2hpbGQoY2hpbGROb2Rlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVwbGFjZURvbU5vZGVzOiBmdW5jdGlvbiAobm9kZVRvUmVwbGFjZU9yTm9kZUFycmF5LCBuZXdOb2Rlc0FycmF5KSB7XG4gICAgICAgICAgICB2YXIgbm9kZXNUb1JlcGxhY2VBcnJheSA9IG5vZGVUb1JlcGxhY2VPck5vZGVBcnJheS5ub2RlVHlwZSA/IFtub2RlVG9SZXBsYWNlT3JOb2RlQXJyYXldIDogbm9kZVRvUmVwbGFjZU9yTm9kZUFycmF5O1xuICAgICAgICAgICAgaWYgKG5vZGVzVG9SZXBsYWNlQXJyYXkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBpbnNlcnRpb25Qb2ludCA9IG5vZGVzVG9SZXBsYWNlQXJyYXlbMF07XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IGluc2VydGlvblBvaW50LnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBuZXdOb2Rlc0FycmF5Lmxlbmd0aDsgaSA8IGo7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShuZXdOb2Rlc0FycmF5W2ldLCBpbnNlcnRpb25Qb2ludCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBub2Rlc1RvUmVwbGFjZUFycmF5Lmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBrby5yZW1vdmVOb2RlKG5vZGVzVG9SZXBsYWNlQXJyYXlbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBmaXhVcENvbnRpbnVvdXNOb2RlQXJyYXk6IGZ1bmN0aW9uKGNvbnRpbnVvdXNOb2RlQXJyYXksIHBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIC8vIEJlZm9yZSBhY3Rpbmcgb24gYSBzZXQgb2Ygbm9kZXMgdGhhdCB3ZXJlIHByZXZpb3VzbHkgb3V0cHV0dGVkIGJ5IGEgdGVtcGxhdGUgZnVuY3Rpb24sIHdlIGhhdmUgdG8gcmVjb25jaWxlXG4gICAgICAgICAgICAvLyB0aGVtIGFnYWluc3Qgd2hhdCBpcyBpbiB0aGUgRE9NIHJpZ2h0IG5vdy4gSXQgbWF5IGJlIHRoYXQgc29tZSBvZiB0aGUgbm9kZXMgaGF2ZSBhbHJlYWR5IGJlZW4gcmVtb3ZlZCwgb3IgdGhhdFxuICAgICAgICAgICAgLy8gbmV3IG5vZGVzIG1pZ2h0IGhhdmUgYmVlbiBpbnNlcnRlZCBpbiB0aGUgbWlkZGxlLCBmb3IgZXhhbXBsZSBieSBhIGJpbmRpbmcuIEFsc28sIHRoZXJlIG1heSBwcmV2aW91c2x5IGhhdmUgYmVlblxuICAgICAgICAgICAgLy8gbGVhZGluZyBjb21tZW50IG5vZGVzIChjcmVhdGVkIGJ5IHJld3JpdHRlbiBzdHJpbmctYmFzZWQgdGVtcGxhdGVzKSB0aGF0IGhhdmUgc2luY2UgYmVlbiByZW1vdmVkIGR1cmluZyBiaW5kaW5nLlxuICAgICAgICAgICAgLy8gU28sIHRoaXMgZnVuY3Rpb24gdHJhbnNsYXRlcyB0aGUgb2xkIFwibWFwXCIgb3V0cHV0IGFycmF5IGludG8gaXRzIGJlc3QgZ3Vlc3Mgb2YgdGhlIHNldCBvZiBjdXJyZW50IERPTSBub2Rlcy5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBSdWxlczpcbiAgICAgICAgICAgIC8vICAgW0FdIEFueSBsZWFkaW5nIG5vZGVzIHRoYXQgaGF2ZSBiZWVuIHJlbW92ZWQgc2hvdWxkIGJlIGlnbm9yZWRcbiAgICAgICAgICAgIC8vICAgICAgIFRoZXNlIG1vc3QgbGlrZWx5IGNvcnJlc3BvbmQgdG8gbWVtb2l6YXRpb24gbm9kZXMgdGhhdCB3ZXJlIGFscmVhZHkgcmVtb3ZlZCBkdXJpbmcgYmluZGluZ1xuICAgICAgICAgICAgLy8gICAgICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9rbm9ja291dC9rbm9ja291dC9wdWxsLzQ0MFxuICAgICAgICAgICAgLy8gICBbQl0gQW55IHRyYWlsaW5nIG5vZGVzIHRoYXQgaGF2ZSBiZWVuIHJlbW92ZSBzaG91bGQgYmUgaWdub3JlZFxuICAgICAgICAgICAgLy8gICAgICAgVGhpcyBwcmV2ZW50cyB0aGUgY29kZSBoZXJlIGZyb20gYWRkaW5nIHVucmVsYXRlZCBub2RlcyB0byB0aGUgYXJyYXkgd2hpbGUgcHJvY2Vzc2luZyBydWxlIFtDXVxuICAgICAgICAgICAgLy8gICAgICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9rbm9ja291dC9rbm9ja291dC9wdWxsLzE5MDNcbiAgICAgICAgICAgIC8vICAgW0NdIFdlIHdhbnQgdG8gb3V0cHV0IGEgY29udGludW91cyBzZXJpZXMgb2Ygbm9kZXMuIFNvLCBpZ25vcmUgYW55IG5vZGVzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmVtb3ZlZCxcbiAgICAgICAgICAgIC8vICAgICAgIGFuZCBpbmNsdWRlIGFueSBub2RlcyB0aGF0IGhhdmUgYmVlbiBpbnNlcnRlZCBhbW9uZyB0aGUgcHJldmlvdXMgY29sbGVjdGlvblxuXG4gICAgICAgICAgICBpZiAoY29udGludW91c05vZGVBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgcGFyZW50IG5vZGUgY2FuIGJlIGEgdmlydHVhbCBlbGVtZW50OyBzbyBnZXQgdGhlIHJlYWwgcGFyZW50IG5vZGVcbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlID0gKHBhcmVudE5vZGUubm9kZVR5cGUgPT09IDggJiYgcGFyZW50Tm9kZS5wYXJlbnROb2RlKSB8fCBwYXJlbnROb2RlO1xuXG4gICAgICAgICAgICAgICAgLy8gUnVsZSBbQV1cbiAgICAgICAgICAgICAgICB3aGlsZSAoY29udGludW91c05vZGVBcnJheS5sZW5ndGggJiYgY29udGludW91c05vZGVBcnJheVswXS5wYXJlbnROb2RlICE9PSBwYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51b3VzTm9kZUFycmF5LnNwbGljZSgwLCAxKTtcblxuICAgICAgICAgICAgICAgIC8vIFJ1bGUgW0JdXG4gICAgICAgICAgICAgICAgd2hpbGUgKGNvbnRpbnVvdXNOb2RlQXJyYXkubGVuZ3RoID4gMSAmJiBjb250aW51b3VzTm9kZUFycmF5W2NvbnRpbnVvdXNOb2RlQXJyYXkubGVuZ3RoIC0gMV0ucGFyZW50Tm9kZSAhPT0gcGFyZW50Tm9kZSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludW91c05vZGVBcnJheS5sZW5ndGgtLTtcblxuICAgICAgICAgICAgICAgIC8vIFJ1bGUgW0NdXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRpbnVvdXNOb2RlQXJyYXkubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IGNvbnRpbnVvdXNOb2RlQXJyYXlbMF0sIGxhc3QgPSBjb250aW51b3VzTm9kZUFycmF5W2NvbnRpbnVvdXNOb2RlQXJyYXkubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlcGxhY2Ugd2l0aCB0aGUgYWN0dWFsIG5ldyBjb250aW51b3VzIG5vZGUgc2V0XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVvdXNOb2RlQXJyYXkubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IGxhc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVvdXNOb2RlQXJyYXkucHVzaChjdXJyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVvdXNOb2RlQXJyYXkucHVzaChsYXN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29udGludW91c05vZGVBcnJheTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRPcHRpb25Ob2RlU2VsZWN0aW9uU3RhdGU6IGZ1bmN0aW9uIChvcHRpb25Ob2RlLCBpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAvLyBJRTYgc29tZXRpbWVzIHRocm93cyBcInVua25vd24gZXJyb3JcIiBpZiB5b3UgdHJ5IHRvIHdyaXRlIHRvIC5zZWxlY3RlZCBkaXJlY3RseSwgd2hlcmVhcyBGaXJlZm94IHN0cnVnZ2xlcyB3aXRoIHNldEF0dHJpYnV0ZS4gUGljayBvbmUgYmFzZWQgb24gYnJvd3Nlci5cbiAgICAgICAgICAgIGlmIChpZVZlcnNpb24gPCA3KVxuICAgICAgICAgICAgICAgIG9wdGlvbk5vZGUuc2V0QXR0cmlidXRlKFwic2VsZWN0ZWRcIiwgaXNTZWxlY3RlZCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb3B0aW9uTm9kZS5zZWxlY3RlZCA9IGlzU2VsZWN0ZWQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc3RyaW5nVHJpbTogZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA9PT0gbnVsbCB8fCBzdHJpbmcgPT09IHVuZGVmaW5lZCA/ICcnIDpcbiAgICAgICAgICAgICAgICBzdHJpbmcudHJpbSA/XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZy50cmltKCkgOlxuICAgICAgICAgICAgICAgICAgICBzdHJpbmcudG9TdHJpbmcoKS5yZXBsYWNlKC9eW1xcc1xceGEwXSt8W1xcc1xceGEwXSskL2csICcnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzdHJpbmdTdGFydHNXaXRoOiBmdW5jdGlvbiAoc3RyaW5nLCBzdGFydHNXaXRoKSB7XG4gICAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcgfHwgXCJcIjtcbiAgICAgICAgICAgIGlmIChzdGFydHNXaXRoLmxlbmd0aCA+IHN0cmluZy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5zdWJzdHJpbmcoMCwgc3RhcnRzV2l0aC5sZW5ndGgpID09PSBzdGFydHNXaXRoO1xuICAgICAgICB9LFxuXG4gICAgICAgIGRvbU5vZGVJc0NvbnRhaW5lZEJ5OiBmdW5jdGlvbiAobm9kZSwgY29udGFpbmVkQnlOb2RlKSB7XG4gICAgICAgICAgICBpZiAobm9kZSA9PT0gY29udGFpbmVkQnlOb2RlKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDExKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gRml4ZXMgaXNzdWUgIzExNjIgLSBjYW4ndCB1c2Ugbm9kZS5jb250YWlucyBmb3IgZG9jdW1lbnQgZnJhZ21lbnRzIG9uIElFOFxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lZEJ5Tm9kZS5jb250YWlucylcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGFpbmVkQnlOb2RlLmNvbnRhaW5zKG5vZGUubm9kZVR5cGUgPT09IDMgPyBub2RlLnBhcmVudE5vZGUgOiBub2RlKTtcbiAgICAgICAgICAgIGlmIChjb250YWluZWRCeU5vZGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24pXG4gICAgICAgICAgICAgICAgcmV0dXJuIChjb250YWluZWRCeU5vZGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24obm9kZSkgJiAxNikgPT0gMTY7XG4gICAgICAgICAgICB3aGlsZSAobm9kZSAmJiBub2RlICE9IGNvbnRhaW5lZEJ5Tm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gISFub2RlO1xuICAgICAgICB9LFxuXG4gICAgICAgIGRvbU5vZGVJc0F0dGFjaGVkVG9Eb2N1bWVudDogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBrby51dGlscy5kb21Ob2RlSXNDb250YWluZWRCeShub2RlLCBub2RlLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcbiAgICAgICAgfSxcblxuICAgICAgICBhbnlEb21Ob2RlSXNBdHRhY2hlZFRvRG9jdW1lbnQ6IGZ1bmN0aW9uKG5vZGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gISFrby51dGlscy5hcnJheUZpcnN0KG5vZGVzLCBrby51dGlscy5kb21Ob2RlSXNBdHRhY2hlZFRvRG9jdW1lbnQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRhZ05hbWVMb3dlcjogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAgLy8gRm9yIEhUTUwgZWxlbWVudHMsIHRhZ05hbWUgd2lsbCBhbHdheXMgYmUgdXBwZXIgY2FzZTsgZm9yIFhIVE1MIGVsZW1lbnRzLCBpdCdsbCBiZSBsb3dlciBjYXNlLlxuICAgICAgICAgICAgLy8gUG9zc2libGUgZnV0dXJlIG9wdGltaXphdGlvbjogSWYgd2Uga25vdyBpdCdzIGFuIGVsZW1lbnQgZnJvbSBhbiBYSFRNTCBkb2N1bWVudCAobm90IEhUTUwpLFxuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCB0byBkbyB0aGUgLnRvTG93ZXJDYXNlKCkgYXMgaXQgd2lsbCBhbHdheXMgYmUgbG93ZXIgY2FzZSBhbnl3YXkuXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudCAmJiBlbGVtZW50LnRhZ05hbWUgJiYgZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2F0Y2hGdW5jdGlvbkVycm9yczogZnVuY3Rpb24gKGRlbGVnYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4ga29bJ29uRXJyb3InXSA/IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVsZWdhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGtvWydvbkVycm9yJ10gJiYga29bJ29uRXJyb3InXShlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IDogZGVsZWdhdGU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0VGltZW91dDogZnVuY3Rpb24gKGhhbmRsZXIsIHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGtvLnV0aWxzLmNhdGNoRnVuY3Rpb25FcnJvcnMoaGFuZGxlciksIHRpbWVvdXQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGRlZmVyRXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAga29bJ29uRXJyb3InXSAmJiBrb1snb25FcnJvciddKGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlZ2lzdGVyRXZlbnRIYW5kbGVyOiBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnRUeXBlLCBoYW5kbGVyKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlZEhhbmRsZXIgPSBrby51dGlscy5jYXRjaEZ1bmN0aW9uRXJyb3JzKGhhbmRsZXIpO1xuXG4gICAgICAgICAgICB2YXIgbXVzdFVzZUF0dGFjaEV2ZW50ID0gaWVWZXJzaW9uICYmIGV2ZW50c1RoYXRNdXN0QmVSZWdpc3RlcmVkVXNpbmdBdHRhY2hFdmVudFtldmVudFR5cGVdO1xuICAgICAgICAgICAgaWYgKCFrby5vcHRpb25zWyd1c2VPbmx5TmF0aXZlRXZlbnRzJ10gJiYgIW11c3RVc2VBdHRhY2hFdmVudCAmJiBqUXVlcnlJbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIGpRdWVyeUluc3RhbmNlKGVsZW1lbnQpWydiaW5kJ10oZXZlbnRUeXBlLCB3cmFwcGVkSGFuZGxlcik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFtdXN0VXNlQXR0YWNoRXZlbnQgJiYgdHlwZW9mIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgd3JhcHBlZEhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBlbGVtZW50LmF0dGFjaEV2ZW50ICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXR0YWNoRXZlbnRIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7IHdyYXBwZWRIYW5kbGVyLmNhbGwoZWxlbWVudCwgZXZlbnQpOyB9LFxuICAgICAgICAgICAgICAgICAgICBhdHRhY2hFdmVudE5hbWUgPSBcIm9uXCIgKyBldmVudFR5cGU7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hdHRhY2hFdmVudChhdHRhY2hFdmVudE5hbWUsIGF0dGFjaEV2ZW50SGFuZGxlcik7XG5cbiAgICAgICAgICAgICAgICAvLyBJRSBkb2VzIG5vdCBkaXNwb3NlIGF0dGFjaEV2ZW50IGhhbmRsZXJzIGF1dG9tYXRpY2FsbHkgKHVubGlrZSB3aXRoIGFkZEV2ZW50TGlzdGVuZXIpXG4gICAgICAgICAgICAgICAgLy8gc28gdG8gYXZvaWQgbGVha3MsIHdlIGhhdmUgdG8gcmVtb3ZlIHRoZW0gbWFudWFsbHkuIFNlZSBidWcgIzg1NlxuICAgICAgICAgICAgICAgIGtvLnV0aWxzLmRvbU5vZGVEaXNwb3NhbC5hZGREaXNwb3NlQ2FsbGJhY2soZWxlbWVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZGV0YWNoRXZlbnQoYXR0YWNoRXZlbnROYW1lLCBhdHRhY2hFdmVudEhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgYWRkRXZlbnRMaXN0ZW5lciBvciBhdHRhY2hFdmVudFwiKTtcbiAgICAgICAgfSxcblxuICAgICAgICB0cmlnZ2VyRXZlbnQ6IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudFR5cGUpIHtcbiAgICAgICAgICAgIGlmICghKGVsZW1lbnQgJiYgZWxlbWVudC5ub2RlVHlwZSkpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZWxlbWVudCBtdXN0IGJlIGEgRE9NIG5vZGUgd2hlbiBjYWxsaW5nIHRyaWdnZXJFdmVudFwiKTtcblxuICAgICAgICAgICAgLy8gRm9yIGNsaWNrIGV2ZW50cyBvbiBjaGVja2JveGVzIGFuZCByYWRpbyBidXR0b25zLCBqUXVlcnkgdG9nZ2xlcyB0aGUgZWxlbWVudCBjaGVja2VkIHN0YXRlICphZnRlciogdGhlXG4gICAgICAgICAgICAvLyBldmVudCBoYW5kbGVyIHJ1bnMgaW5zdGVhZCBvZiAqYmVmb3JlKi4gKFRoaXMgd2FzIGZpeGVkIGluIDEuOSBmb3IgY2hlY2tib3hlcyBidXQgbm90IGZvciByYWRpbyBidXR0b25zLilcbiAgICAgICAgICAgIC8vIElFIGRvZXNuJ3QgY2hhbmdlIHRoZSBjaGVja2VkIHN0YXRlIHdoZW4geW91IHRyaWdnZXIgdGhlIGNsaWNrIGV2ZW50IHVzaW5nIFwiZmlyZUV2ZW50XCIuXG4gICAgICAgICAgICAvLyBJbiBib3RoIGNhc2VzLCB3ZSdsbCB1c2UgdGhlIGNsaWNrIG1ldGhvZCBpbnN0ZWFkLlxuICAgICAgICAgICAgdmFyIHVzZUNsaWNrV29ya2Fyb3VuZCA9IGlzQ2xpY2tPbkNoZWNrYWJsZUVsZW1lbnQoZWxlbWVudCwgZXZlbnRUeXBlKTtcblxuICAgICAgICAgICAgaWYgKCFrby5vcHRpb25zWyd1c2VPbmx5TmF0aXZlRXZlbnRzJ10gJiYgalF1ZXJ5SW5zdGFuY2UgJiYgIXVzZUNsaWNrV29ya2Fyb3VuZCkge1xuICAgICAgICAgICAgICAgIGpRdWVyeUluc3RhbmNlKGVsZW1lbnQpWyd0cmlnZ2VyJ10oZXZlbnRUeXBlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50LmNyZWF0ZUV2ZW50ID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5kaXNwYXRjaEV2ZW50ID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnRDYXRlZ29yeSA9IGtub3duRXZlbnRUeXBlc0J5RXZlbnROYW1lW2V2ZW50VHlwZV0gfHwgXCJIVE1MRXZlbnRzXCI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KGV2ZW50Q2F0ZWdvcnkpO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5pbml0RXZlbnQoZXZlbnRUeXBlLCB0cnVlLCB0cnVlLCB3aW5kb3csIDAsIDAsIDAsIDAsIDAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLCBlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3VwcGxpZWQgZWxlbWVudCBkb2Vzbid0IHN1cHBvcnQgZGlzcGF0Y2hFdmVudFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlQ2xpY2tXb3JrYXJvdW5kICYmIGVsZW1lbnQuY2xpY2spIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsaWNrKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbGVtZW50LmZpcmVFdmVudCAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5maXJlRXZlbnQoXCJvblwiICsgZXZlbnRUeXBlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdHJpZ2dlcmluZyBldmVudHNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdW53cmFwT2JzZXJ2YWJsZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4ga28uaXNPYnNlcnZhYmxlKHZhbHVlKSA/IHZhbHVlKCkgOiB2YWx1ZTtcbiAgICAgICAgfSxcblxuICAgICAgICBwZWVrT2JzZXJ2YWJsZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4ga28uaXNPYnNlcnZhYmxlKHZhbHVlKSA/IHZhbHVlLnBlZWsoKSA6IHZhbHVlO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRvZ2dsZURvbU5vZGVDc3NDbGFzczogdG9nZ2xlRG9tTm9kZUNzc0NsYXNzLFxuXG4gICAgICAgIHNldFRleHRDb250ZW50OiBmdW5jdGlvbihlbGVtZW50LCB0ZXh0Q29udGVudCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh0ZXh0Q29udGVudCk7XG4gICAgICAgICAgICBpZiAoKHZhbHVlID09PSBudWxsKSB8fCAodmFsdWUgPT09IHVuZGVmaW5lZCkpXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBcIlwiO1xuXG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRoZXJlIHRvIGJlIGV4YWN0bHkgb25lIGNoaWxkOiBhIHRleHQgbm9kZS5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBjaGlsZHJlbiwgbW9yZSB0aGFuIG9uZSwgb3IgaWYgaXQncyBub3QgYSB0ZXh0IG5vZGUsXG4gICAgICAgICAgICAvLyB3ZSdsbCBjbGVhciBldmVyeXRoaW5nIGFuZCBjcmVhdGUgYSBzaW5nbGUgdGV4dCBub2RlLlxuICAgICAgICAgICAgdmFyIGlubmVyVGV4dE5vZGUgPSBrby52aXJ0dWFsRWxlbWVudHMuZmlyc3RDaGlsZChlbGVtZW50KTtcbiAgICAgICAgICAgIGlmICghaW5uZXJUZXh0Tm9kZSB8fCBpbm5lclRleHROb2RlLm5vZGVUeXBlICE9IDMgfHwga28udmlydHVhbEVsZW1lbnRzLm5leHRTaWJsaW5nKGlubmVyVGV4dE5vZGUpKSB7XG4gICAgICAgICAgICAgICAga28udmlydHVhbEVsZW1lbnRzLnNldERvbU5vZGVDaGlsZHJlbihlbGVtZW50LCBbZWxlbWVudC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZhbHVlKV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbm5lclRleHROb2RlLmRhdGEgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAga28udXRpbHMuZm9yY2VSZWZyZXNoKGVsZW1lbnQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldEVsZW1lbnROYW1lOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lKSB7XG4gICAgICAgICAgICBlbGVtZW50Lm5hbWUgPSBuYW1lO1xuXG4gICAgICAgICAgICAvLyBXb3JrYXJvdW5kIElFIDYvNyBpc3N1ZVxuICAgICAgICAgICAgLy8gLSBodHRwczovL2dpdGh1Yi5jb20vU3RldmVTYW5kZXJzb24va25vY2tvdXQvaXNzdWVzLzE5N1xuICAgICAgICAgICAgLy8gLSBodHRwOi8vd3d3Lm1hdHRzNDExLmNvbS9wb3N0L3NldHRpbmdfdGhlX25hbWVfYXR0cmlidXRlX2luX2llX2RvbS9cbiAgICAgICAgICAgIGlmIChpZVZlcnNpb24gPD0gNykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQubWVyZ2VBdHRyaWJ1dGVzKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCI8aW5wdXQgbmFtZT0nXCIgKyBlbGVtZW50Lm5hbWUgKyBcIicvPlwiKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaChlKSB7fSAvLyBGb3IgSUU5IHdpdGggZG9jIG1vZGUgXCJJRTkgU3RhbmRhcmRzXCIgYW5kIGJyb3dzZXIgbW9kZSBcIklFOSBDb21wYXRpYmlsaXR5IFZpZXdcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGZvcmNlUmVmcmVzaDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgYW4gSUU5IHJlbmRlcmluZyBidWcgLSBodHRwczovL2dpdGh1Yi5jb20vU3RldmVTYW5kZXJzb24va25vY2tvdXQvaXNzdWVzLzIwOVxuICAgICAgICAgICAgaWYgKGllVmVyc2lvbiA+PSA5KSB7XG4gICAgICAgICAgICAgICAgLy8gRm9yIHRleHQgbm9kZXMgYW5kIGNvbW1lbnQgbm9kZXMgKG1vc3QgbGlrZWx5IHZpcnR1YWwgZWxlbWVudHMpLCB3ZSB3aWxsIGhhdmUgdG8gcmVmcmVzaCB0aGUgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBub2RlLm5vZGVUeXBlID09IDEgPyBub2RlIDogbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtLnN0eWxlKVxuICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLnpvb20gPSBlbGVtLnN0eWxlLnpvb207XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZW5zdXJlU2VsZWN0RWxlbWVudElzUmVuZGVyZWRDb3JyZWN0bHk6IGZ1bmN0aW9uKHNlbGVjdEVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIElFOSByZW5kZXJpbmcgYnVnIC0gaXQgZG9lc24ndCByZWxpYWJseSBkaXNwbGF5IGFsbCB0aGUgdGV4dCBpbiBkeW5hbWljYWxseS1hZGRlZCBzZWxlY3QgYm94ZXMgdW5sZXNzIHlvdSBmb3JjZSBpdCB0byByZS1yZW5kZXIgYnkgdXBkYXRpbmcgdGhlIHdpZHRoLlxuICAgICAgICAgICAgLy8gKFNlZSBodHRwczovL2dpdGh1Yi5jb20vU3RldmVTYW5kZXJzb24va25vY2tvdXQvaXNzdWVzLzMxMiwgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81OTA4NDk0L3NlbGVjdC1vbmx5LXNob3dzLWZpcnN0LWNoYXItb2Ytc2VsZWN0ZWQtb3B0aW9uKVxuICAgICAgICAgICAgLy8gQWxzbyBmaXhlcyBJRTcgYW5kIElFOCBidWcgdGhhdCBjYXVzZXMgc2VsZWN0cyB0byBiZSB6ZXJvIHdpZHRoIGlmIGVuY2xvc2VkIGJ5ICdpZicgb3IgJ3dpdGgnLiAoU2VlIGlzc3VlICM4MzkpXG4gICAgICAgICAgICBpZiAoaWVWZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsV2lkdGggPSBzZWxlY3RFbGVtZW50LnN0eWxlLndpZHRoO1xuICAgICAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQuc3R5bGUud2lkdGggPSAwO1xuICAgICAgICAgICAgICAgIHNlbGVjdEVsZW1lbnQuc3R5bGUud2lkdGggPSBvcmlnaW5hbFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHJhbmdlOiBmdW5jdGlvbiAobWluLCBtYXgpIHtcbiAgICAgICAgICAgIG1pbiA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUobWluKTtcbiAgICAgICAgICAgIG1heCA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUobWF4KTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBtaW47IGkgPD0gbWF4OyBpKyspXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuXG4gICAgICAgIG1ha2VBcnJheTogZnVuY3Rpb24oYXJyYXlMaWtlT2JqZWN0KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGFycmF5TGlrZU9iamVjdC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChhcnJheUxpa2VPYmplY3RbaV0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3JlYXRlU3ltYm9sT3JTdHJpbmc6IGZ1bmN0aW9uKGlkZW50aWZpZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBjYW5Vc2VTeW1ib2xzID8gU3ltYm9sKGlkZW50aWZpZXIpIDogaWRlbnRpZmllcjtcbiAgICAgICAgfSxcblxuICAgICAgICBpc0llNiA6IGlzSWU2LFxuICAgICAgICBpc0llNyA6IGlzSWU3LFxuICAgICAgICBpZVZlcnNpb24gOiBpZVZlcnNpb24sXG5cbiAgICAgICAgZ2V0Rm9ybUZpZWxkczogZnVuY3Rpb24oZm9ybSwgZmllbGROYW1lKSB7XG4gICAgICAgICAgICB2YXIgZmllbGRzID0ga28udXRpbHMubWFrZUFycmF5KGZvcm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKSkuY29uY2F0KGtvLnV0aWxzLm1ha2VBcnJheShmb3JtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGV4dGFyZWFcIikpKTtcbiAgICAgICAgICAgIHZhciBpc01hdGNoaW5nRmllbGQgPSAodHlwZW9mIGZpZWxkTmFtZSA9PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uKGZpZWxkKSB7IHJldHVybiBmaWVsZC5uYW1lID09PSBmaWVsZE5hbWUgfVxuICAgICAgICAgICAgICAgIDogZnVuY3Rpb24oZmllbGQpIHsgcmV0dXJuIGZpZWxkTmFtZS50ZXN0KGZpZWxkLm5hbWUpIH07IC8vIFRyZWF0IGZpZWxkTmFtZSBhcyByZWdleCBvciBvYmplY3QgY29udGFpbmluZyBwcmVkaWNhdGVcbiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gZmllbGRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTWF0Y2hpbmdGaWVsZChmaWVsZHNbaV0pKVxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnB1c2goZmllbGRzW2ldKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlcztcbiAgICAgICAgfSxcblxuICAgICAgICBwYXJzZUpzb246IGZ1bmN0aW9uIChqc29uU3RyaW5nKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGpzb25TdHJpbmcgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGpzb25TdHJpbmcgPSBrby51dGlscy5zdHJpbmdUcmltKGpzb25TdHJpbmcpO1xuICAgICAgICAgICAgICAgIGlmIChqc29uU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChKU09OICYmIEpTT04ucGFyc2UpIC8vIFVzZSBuYXRpdmUgcGFyc2luZyB3aGVyZSBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG5ldyBGdW5jdGlvbihcInJldHVybiBcIiArIGpzb25TdHJpbmcpKSgpOyAvLyBGYWxsYmFjayBvbiBsZXNzIHNhZmUgcGFyc2luZyBmb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcblxuICAgICAgICBzdHJpbmdpZnlKc29uOiBmdW5jdGlvbiAoZGF0YSwgcmVwbGFjZXIsIHNwYWNlKSB7ICAgLy8gcmVwbGFjZXIgYW5kIHNwYWNlIGFyZSBvcHRpb25hbFxuICAgICAgICAgICAgaWYgKCFKU09OIHx8ICFKU09OLnN0cmluZ2lmeSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBKU09OLnN0cmluZ2lmeSgpLiBTb21lIGJyb3dzZXJzIChlLmcuLCBJRSA8IDgpIGRvbid0IHN1cHBvcnQgaXQgbmF0aXZlbHksIGJ1dCB5b3UgY2FuIG92ZXJjb21lIHRoaXMgYnkgYWRkaW5nIGEgc2NyaXB0IHJlZmVyZW5jZSB0byBqc29uMi5qcywgZG93bmxvYWRhYmxlIGZyb20gaHR0cDovL3d3dy5qc29uLm9yZy9qc29uMi5qc1wiKTtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGRhdGEpLCByZXBsYWNlciwgc3BhY2UpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHBvc3RKc29uOiBmdW5jdGlvbiAodXJsT3JGb3JtLCBkYXRhLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBvcHRpb25zWydwYXJhbXMnXSB8fCB7fTtcbiAgICAgICAgICAgIHZhciBpbmNsdWRlRmllbGRzID0gb3B0aW9uc1snaW5jbHVkZUZpZWxkcyddIHx8IHRoaXMuZmllbGRzSW5jbHVkZWRXaXRoSnNvblBvc3Q7XG4gICAgICAgICAgICB2YXIgdXJsID0gdXJsT3JGb3JtO1xuXG4gICAgICAgICAgICAvLyBJZiB3ZSB3ZXJlIGdpdmVuIGEgZm9ybSwgdXNlIGl0cyAnYWN0aW9uJyBVUkwgYW5kIHBpY2sgb3V0IGFueSByZXF1ZXN0ZWQgZmllbGQgdmFsdWVzXG4gICAgICAgICAgICBpZigodHlwZW9mIHVybE9yRm9ybSA9PSAnb2JqZWN0JykgJiYgKGtvLnV0aWxzLnRhZ05hbWVMb3dlcih1cmxPckZvcm0pID09PSBcImZvcm1cIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxGb3JtID0gdXJsT3JGb3JtO1xuICAgICAgICAgICAgICAgIHVybCA9IG9yaWdpbmFsRm9ybS5hY3Rpb247XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGluY2x1ZGVGaWVsZHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkcyA9IGtvLnV0aWxzLmdldEZvcm1GaWVsZHMob3JpZ2luYWxGb3JtLCBpbmNsdWRlRmllbGRzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IGZpZWxkcy5sZW5ndGggLSAxOyBqID49IDA7IGotLSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1tmaWVsZHNbal0ubmFtZV0gPSBmaWVsZHNbal0udmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkYXRhID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShkYXRhKTtcbiAgICAgICAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gICAgICAgICAgICBmb3JtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIGZvcm0uYWN0aW9uID0gdXJsO1xuICAgICAgICAgICAgZm9ybS5tZXRob2QgPSBcInBvc3RcIjtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgLy8gU2luY2UgJ2RhdGEnIHRoaXMgaXMgYSBtb2RlbCBvYmplY3QsIHdlIGluY2x1ZGUgYWxsIHByb3BlcnRpZXMgaW5jbHVkaW5nIHRob3NlIGluaGVyaXRlZCBmcm9tIGl0cyBwcm90b3R5cGVcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgICAgICAgICAgaW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICAgICAgaW5wdXQubmFtZSA9IGtleTtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGtvLnV0aWxzLnN0cmluZ2lmeUpzb24oa28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShkYXRhW2tleV0pKTtcbiAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9iamVjdEZvckVhY2gocGFyYW1zLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgIGlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgICAgIGlucHV0Lm5hbWUgPSBrZXk7XG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmb3JtKTtcbiAgICAgICAgICAgIG9wdGlvbnNbJ3N1Ym1pdHRlciddID8gb3B0aW9uc1snc3VibWl0dGVyJ10oZm9ybSkgOiBmb3JtLnN1Ym1pdCgpO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGZvcm0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChmb3JtKTsgfSwgMCk7XG4gICAgICAgIH1cbiAgICB9XG59KCkpO1xuXG5rby5leHBvcnRTeW1ib2woJ3V0aWxzJywga28udXRpbHMpO1xua28uZXhwb3J0U3ltYm9sKCd1dGlscy5hcnJheUZvckVhY2gnLCBrby51dGlscy5hcnJheUZvckVhY2gpO1xua28uZXhwb3J0U3ltYm9sKCd1dGlscy5hcnJheUZpcnN0Jywga28udXRpbHMuYXJyYXlGaXJzdCk7XG5rby5leHBvcnRTeW1ib2woJ3V0aWxzLmFycmF5RmlsdGVyJywga28udXRpbHMuYXJyYXlGaWx0ZXIpO1xua28uZXhwb3J0U3ltYm9sKCd1dGlscy5hcnJheUdldERpc3RpbmN0VmFsdWVzJywga28udXRpbHMuYXJyYXlHZXREaXN0aW5jdFZhbHVlcyk7XG5rby5leHBvcnRTeW1ib2woJ3V0aWxzLmFycmF5SW5kZXhPZicsIGtvLnV0aWxzLmFycmF5SW5kZXhPZik7XG5rby5leHBvcnRTeW1ib2woJ3V0aWxzLmFycmF5TWFwJywga28udXRpbHMuYXJyYXlNYXApO1xua28uZXhwb3J0U3ltYm9sKCd1dGlscy5hcnJheVB1c2hBbGwnLCBrby51dGlscy5hcnJheVB1c2hBbGwpO1xua28uZXhwb3J0U3ltYm9sKCd1dGlscy5hcnJheVJlbW92ZUl0ZW0nLCBrby51dGlscy5hcnJheVJlbW92ZUl0ZW0pO1xua28uZXhwb3J0U3ltYm9sKCd1dGlscy5leHRlbmQnLCBrby51dGlscy5leHRlbmQpO1xua28uZXhwb3J0U3ltYm9sKCd1dGlscy5maWVsZHNJbmNsdWRlZFdpdGhKc29uUG9zdCcsIGtvLnV0aWxzLmZpZWxkc0luY2x1ZGVkV2l0aEpzb25Qb3N0KTtcbmtvLmV4cG9ydFN5bWJvbCgndXRpbHMuZ2V0Rm9ybUZpZWxkcycsIGtvLnV0aWxzLmdldEZvcm1GaWVsZHMpO1xua28uZXhwb3J0U3ltYm9sKCd1dGlscy5wZWVrT2JzZXJ2YWJsZScsIGtvLnV0aWxzLnBlZWtPYnNlcnZhYmxlKTtcbmtvLmV4cG9ydFN5bWJvbCgndXRpbHMucG9zdEpzb24nLCBrby51dGlscy5wb3N0SnNvbik7XG5rby5leHBvcnRTeW1ib2woJ3V0aWxzLnBhcnNlSnNvbicsIGtvLnV0aWxzLnBhcnNlSnNvbik7XG5rby5leHBvcnRTeW1ib2woJ3V0aWxzLnJlZ2lzdGVyRXZlbnRIYW5kbGVyJywga28udXRpbHMucmVnaXN0ZXJFdmVudEhhbmRsZXIpO1xua28uZXhwb3J0U3ltYm9sKCd1dGlscy5zdHJpbmdpZnlKc29uJywga28udXRpbHMuc3RyaW5naWZ5SnNvbik7XG5rby5leHBvcnRTeW1ib2woJ3V0aWxzLnJhbmdlJywga28udXRpbHMucmFuZ2UpO1xua28uZXhwb3J0U3ltYm9sKCd1dGlscy50b2dnbGVEb21Ob2RlQ3NzQ2xhc3MnLCBrby51dGlscy50b2dnbGVEb21Ob2RlQ3NzQ2xhc3MpO1xua28uZXhwb3J0U3ltYm9sKCd1dGlscy50cmlnZ2VyRXZlbnQnLCBrby51dGlscy50cmlnZ2VyRXZlbnQpO1xua28uZXhwb3J0U3ltYm9sKCd1dGlscy51bndyYXBPYnNlcnZhYmxlJywga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSk7XG5rby5leHBvcnRTeW1ib2woJ3V0aWxzLm9iamVjdEZvckVhY2gnLCBrby51dGlscy5vYmplY3RGb3JFYWNoKTtcbmtvLmV4cG9ydFN5bWJvbCgndXRpbHMuYWRkT3JSZW1vdmVJdGVtJywga28udXRpbHMuYWRkT3JSZW1vdmVJdGVtKTtcbmtvLmV4cG9ydFN5bWJvbCgndXRpbHMuc2V0VGV4dENvbnRlbnQnLCBrby51dGlscy5zZXRUZXh0Q29udGVudCk7XG5rby5leHBvcnRTeW1ib2woJ3Vud3JhcCcsIGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUpOyAvLyBDb252ZW5pZW50IHNob3J0aGFuZCwgYmVjYXVzZSB0aGlzIGlzIHVzZWQgc28gY29tbW9ubHlcblxuaWYgKCFGdW5jdGlvbi5wcm90b3R5cGVbJ2JpbmQnXSkge1xuICAgIC8vIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIGlzIGEgc3RhbmRhcmQgcGFydCBvZiBFQ01BU2NyaXB0IDV0aCBFZGl0aW9uIChEZWNlbWJlciAyMDA5LCBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvcHVibGljYXRpb25zL2ZpbGVzL0VDTUEtU1QvRUNNQS0yNjIucGRmKVxuICAgIC8vIEluIGNhc2UgdGhlIGJyb3dzZXIgZG9lc24ndCBpbXBsZW1lbnQgaXQgbmF0aXZlbHksIHByb3ZpZGUgYSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uLiBUaGlzIGltcGxlbWVudGF0aW9uIGlzIGJhc2VkIG9uIHRoZSBvbmUgaW4gcHJvdG90eXBlLmpzXG4gICAgRnVuY3Rpb24ucHJvdG90eXBlWydiaW5kJ10gPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgIHZhciBvcmlnaW5hbEZ1bmN0aW9uID0gdGhpcztcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRnVuY3Rpb24uYXBwbHkob2JqZWN0LCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwYXJ0aWFsQXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gcGFydGlhbEFyZ3Muc2xpY2UoMCk7XG4gICAgICAgICAgICAgICAgYXJncy5wdXNoLmFwcGx5KGFyZ3MsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRnVuY3Rpb24uYXBwbHkob2JqZWN0LCBhcmdzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5rby51dGlscy5kb21EYXRhID0gbmV3IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHVuaXF1ZUlkID0gMDtcbiAgICB2YXIgZGF0YVN0b3JlS2V5RXhwYW5kb1Byb3BlcnR5TmFtZSA9IFwiX19rb19fXCIgKyAobmV3IERhdGUpLmdldFRpbWUoKTtcbiAgICB2YXIgZGF0YVN0b3JlID0ge307XG5cbiAgICBmdW5jdGlvbiBnZXRBbGwobm9kZSwgY3JlYXRlSWZOb3RGb3VuZCkge1xuICAgICAgICB2YXIgZGF0YVN0b3JlS2V5ID0gbm9kZVtkYXRhU3RvcmVLZXlFeHBhbmRvUHJvcGVydHlOYW1lXTtcbiAgICAgICAgdmFyIGhhc0V4aXN0aW5nRGF0YVN0b3JlID0gZGF0YVN0b3JlS2V5ICYmIChkYXRhU3RvcmVLZXkgIT09IFwibnVsbFwiKSAmJiBkYXRhU3RvcmVbZGF0YVN0b3JlS2V5XTtcbiAgICAgICAgaWYgKCFoYXNFeGlzdGluZ0RhdGFTdG9yZSkge1xuICAgICAgICAgICAgaWYgKCFjcmVhdGVJZk5vdEZvdW5kKVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBkYXRhU3RvcmVLZXkgPSBub2RlW2RhdGFTdG9yZUtleUV4cGFuZG9Qcm9wZXJ0eU5hbWVdID0gXCJrb1wiICsgdW5pcXVlSWQrKztcbiAgICAgICAgICAgIGRhdGFTdG9yZVtkYXRhU3RvcmVLZXldID0ge307XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGFTdG9yZVtkYXRhU3RvcmVLZXldO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKG5vZGUsIGtleSkge1xuICAgICAgICAgICAgdmFyIGFsbERhdGFGb3JOb2RlID0gZ2V0QWxsKG5vZGUsIGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiBhbGxEYXRhRm9yTm9kZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogYWxsRGF0YUZvck5vZGVba2V5XTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobm9kZSwga2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgZG9uJ3QgYWN0dWFsbHkgY3JlYXRlIGEgbmV3IGRvbURhdGEga2V5IGlmIHdlIGFyZSBhY3R1YWxseSBkZWxldGluZyBhIHZhbHVlXG4gICAgICAgICAgICAgICAgaWYgKGdldEFsbChub2RlLCBmYWxzZSkgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFsbERhdGFGb3JOb2RlID0gZ2V0QWxsKG5vZGUsIHRydWUpO1xuICAgICAgICAgICAgYWxsRGF0YUZvck5vZGVba2V5XSA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBjbGVhcjogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIHZhciBkYXRhU3RvcmVLZXkgPSBub2RlW2RhdGFTdG9yZUtleUV4cGFuZG9Qcm9wZXJ0eU5hbWVdO1xuICAgICAgICAgICAgaWYgKGRhdGFTdG9yZUtleSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBkYXRhU3RvcmVbZGF0YVN0b3JlS2V5XTtcbiAgICAgICAgICAgICAgICBub2RlW2RhdGFTdG9yZUtleUV4cGFuZG9Qcm9wZXJ0eU5hbWVdID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gRXhwb3NpbmcgXCJkaWQgY2xlYW5cIiBmbGFnIHB1cmVseSBzbyBzcGVjcyBjYW4gaW5mZXIgd2hldGhlciB0aGluZ3MgaGF2ZSBiZWVuIGNsZWFuZWQgdXAgYXMgaW50ZW5kZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcblxuICAgICAgICBuZXh0S2V5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gKHVuaXF1ZUlkKyspICsgZGF0YVN0b3JlS2V5RXhwYW5kb1Byb3BlcnR5TmFtZTtcbiAgICAgICAgfVxuICAgIH07XG59KSgpO1xuXG5rby5leHBvcnRTeW1ib2woJ3V0aWxzLmRvbURhdGEnLCBrby51dGlscy5kb21EYXRhKTtcbmtvLmV4cG9ydFN5bWJvbCgndXRpbHMuZG9tRGF0YS5jbGVhcicsIGtvLnV0aWxzLmRvbURhdGEuY2xlYXIpOyAvLyBFeHBvcnRpbmcgb25seSBzbyBzcGVjcyBjYW4gY2xlYXIgdXAgYWZ0ZXIgdGhlbXNlbHZlcyBmdWxseVxuXG5rby51dGlscy5kb21Ob2RlRGlzcG9zYWwgPSBuZXcgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZG9tRGF0YUtleSA9IGtvLnV0aWxzLmRvbURhdGEubmV4dEtleSgpO1xuICAgIHZhciBjbGVhbmFibGVOb2RlVHlwZXMgPSB7IDE6IHRydWUsIDg6IHRydWUsIDk6IHRydWUgfTsgICAgICAgLy8gRWxlbWVudCwgQ29tbWVudCwgRG9jdW1lbnRcbiAgICB2YXIgY2xlYW5hYmxlTm9kZVR5cGVzV2l0aERlc2NlbmRhbnRzID0geyAxOiB0cnVlLCA5OiB0cnVlIH07IC8vIEVsZW1lbnQsIERvY3VtZW50XG5cbiAgICBmdW5jdGlvbiBnZXREaXNwb3NlQ2FsbGJhY2tzQ29sbGVjdGlvbihub2RlLCBjcmVhdGVJZk5vdEZvdW5kKSB7XG4gICAgICAgIHZhciBhbGxEaXNwb3NlQ2FsbGJhY2tzID0ga28udXRpbHMuZG9tRGF0YS5nZXQobm9kZSwgZG9tRGF0YUtleSk7XG4gICAgICAgIGlmICgoYWxsRGlzcG9zZUNhbGxiYWNrcyA9PT0gdW5kZWZpbmVkKSAmJiBjcmVhdGVJZk5vdEZvdW5kKSB7XG4gICAgICAgICAgICBhbGxEaXNwb3NlQ2FsbGJhY2tzID0gW107XG4gICAgICAgICAgICBrby51dGlscy5kb21EYXRhLnNldChub2RlLCBkb21EYXRhS2V5LCBhbGxEaXNwb3NlQ2FsbGJhY2tzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWxsRGlzcG9zZUNhbGxiYWNrcztcbiAgICB9XG4gICAgZnVuY3Rpb24gZGVzdHJveUNhbGxiYWNrc0NvbGxlY3Rpb24obm9kZSkge1xuICAgICAgICBrby51dGlscy5kb21EYXRhLnNldChub2RlLCBkb21EYXRhS2V5LCB1bmRlZmluZWQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFuU2luZ2xlTm9kZShub2RlKSB7XG4gICAgICAgIC8vIFJ1biBhbGwgdGhlIGRpc3Bvc2UgY2FsbGJhY2tzXG4gICAgICAgIHZhciBjYWxsYmFja3MgPSBnZXREaXNwb3NlQ2FsbGJhY2tzQ29sbGVjdGlvbihub2RlLCBmYWxzZSk7XG4gICAgICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrcyA9IGNhbGxiYWNrcy5zbGljZSgwKTsgLy8gQ2xvbmUsIGFzIHRoZSBhcnJheSBtYXkgYmUgbW9kaWZpZWQgZHVyaW5nIGl0ZXJhdGlvbiAodHlwaWNhbGx5LCBjYWxsYmFja3Mgd2lsbCByZW1vdmUgdGhlbXNlbHZlcylcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrc1tpXShub2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVyYXNlIHRoZSBET00gZGF0YVxuICAgICAgICBrby51dGlscy5kb21EYXRhLmNsZWFyKG5vZGUpO1xuXG4gICAgICAgIC8vIFBlcmZvcm0gY2xlYW51cCBuZWVkZWQgYnkgZXh0ZXJuYWwgbGlicmFyaWVzIChjdXJyZW50bHkgb25seSBqUXVlcnksIGJ1dCBjYW4gYmUgZXh0ZW5kZWQpXG4gICAgICAgIGtvLnV0aWxzLmRvbU5vZGVEaXNwb3NhbFtcImNsZWFuRXh0ZXJuYWxEYXRhXCJdKG5vZGUpO1xuXG4gICAgICAgIC8vIENsZWFyIGFueSBpbW1lZGlhdGUtY2hpbGQgY29tbWVudCBub2RlcywgYXMgdGhlc2Ugd291bGRuJ3QgaGF2ZSBiZWVuIGZvdW5kIGJ5XG4gICAgICAgIC8vIG5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpIGluIGNsZWFuTm9kZSgpIChjb21tZW50IG5vZGVzIGFyZW4ndCBlbGVtZW50cylcbiAgICAgICAgaWYgKGNsZWFuYWJsZU5vZGVUeXBlc1dpdGhEZXNjZW5kYW50c1tub2RlLm5vZGVUeXBlXSlcbiAgICAgICAgICAgIGNsZWFuSW1tZWRpYXRlQ29tbWVudFR5cGVDaGlsZHJlbihub2RlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhbkltbWVkaWF0ZUNvbW1lbnRUeXBlQ2hpbGRyZW4obm9kZVdpdGhDaGlsZHJlbikge1xuICAgICAgICB2YXIgY2hpbGQsIG5leHRDaGlsZCA9IG5vZGVXaXRoQ2hpbGRyZW4uZmlyc3RDaGlsZDtcbiAgICAgICAgd2hpbGUgKGNoaWxkID0gbmV4dENoaWxkKSB7XG4gICAgICAgICAgICBuZXh0Q2hpbGQgPSBjaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSA9PT0gOClcbiAgICAgICAgICAgICAgICBjbGVhblNpbmdsZU5vZGUoY2hpbGQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkRGlzcG9zZUNhbGxiYWNrIDogZnVuY3Rpb24obm9kZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgIGdldERpc3Bvc2VDYWxsYmFja3NDb2xsZWN0aW9uKG5vZGUsIHRydWUpLnB1c2goY2FsbGJhY2spO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZURpc3Bvc2VDYWxsYmFjayA6IGZ1bmN0aW9uKG5vZGUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgY2FsbGJhY2tzQ29sbGVjdGlvbiA9IGdldERpc3Bvc2VDYWxsYmFja3NDb2xsZWN0aW9uKG5vZGUsIGZhbHNlKTtcbiAgICAgICAgICAgIGlmIChjYWxsYmFja3NDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAga28udXRpbHMuYXJyYXlSZW1vdmVJdGVtKGNhbGxiYWNrc0NvbGxlY3Rpb24sIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2tzQ29sbGVjdGlvbi5sZW5ndGggPT0gMClcbiAgICAgICAgICAgICAgICAgICAgZGVzdHJveUNhbGxiYWNrc0NvbGxlY3Rpb24obm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xlYW5Ob2RlIDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgLy8gRmlyc3QgY2xlYW4gdGhpcyBub2RlLCB3aGVyZSBhcHBsaWNhYmxlXG4gICAgICAgICAgICBpZiAoY2xlYW5hYmxlTm9kZVR5cGVzW25vZGUubm9kZVR5cGVdKSB7XG4gICAgICAgICAgICAgICAgY2xlYW5TaW5nbGVOb2RlKG5vZGUpO1xuXG4gICAgICAgICAgICAgICAgLy8gLi4uIHRoZW4gaXRzIGRlc2NlbmRhbnRzLCB3aGVyZSBhcHBsaWNhYmxlXG4gICAgICAgICAgICAgICAgaWYgKGNsZWFuYWJsZU5vZGVUeXBlc1dpdGhEZXNjZW5kYW50c1tub2RlLm5vZGVUeXBlXSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDbG9uZSB0aGUgZGVzY2VuZGFudHMgbGlzdCBpbiBjYXNlIGl0IGNoYW5nZXMgZHVyaW5nIGl0ZXJhdGlvblxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVzY2VuZGFudHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAga28udXRpbHMuYXJyYXlQdXNoQWxsKGRlc2NlbmRhbnRzLCBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gZGVzY2VuZGFudHMubGVuZ3RoOyBpIDwgajsgaSsrKVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW5TaW5nbGVOb2RlKGRlc2NlbmRhbnRzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW1vdmVOb2RlIDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAga28uY2xlYW5Ob2RlKG5vZGUpO1xuICAgICAgICAgICAgaWYgKG5vZGUucGFyZW50Tm9kZSlcbiAgICAgICAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgXCJjbGVhbkV4dGVybmFsRGF0YVwiIDogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgc3VwcG9ydCBmb3IgalF1ZXJ5IGhlcmUgYmVjYXVzZSBpdCdzIHNvIGNvbW1vbmx5IHVzZWQuXG4gICAgICAgICAgICAvLyBNYW55IGpRdWVyeSBwbHVnaW5zIChpbmNsdWRpbmcganF1ZXJ5LnRtcGwpIHN0b3JlIGRhdGEgdXNpbmcgalF1ZXJ5J3MgZXF1aXZhbGVudCBvZiBkb21EYXRhXG4gICAgICAgICAgICAvLyBzbyBub3RpZnkgaXQgdG8gdGVhciBkb3duIGFueSByZXNvdXJjZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBub2RlICYgZGVzY2VuZGFudHMgaGVyZS5cbiAgICAgICAgICAgIGlmIChqUXVlcnlJbnN0YW5jZSAmJiAodHlwZW9mIGpRdWVyeUluc3RhbmNlWydjbGVhbkRhdGEnXSA9PSBcImZ1bmN0aW9uXCIpKVxuICAgICAgICAgICAgICAgIGpRdWVyeUluc3RhbmNlWydjbGVhbkRhdGEnXShbbm9kZV0pO1xuICAgICAgICB9XG4gICAgfTtcbn0pKCk7XG5rby5jbGVhbk5vZGUgPSBrby51dGlscy5kb21Ob2RlRGlzcG9zYWwuY2xlYW5Ob2RlOyAvLyBTaG9ydGhhbmQgbmFtZSBmb3IgY29udmVuaWVuY2VcbmtvLnJlbW92ZU5vZGUgPSBrby51dGlscy5kb21Ob2RlRGlzcG9zYWwucmVtb3ZlTm9kZTsgLy8gU2hvcnRoYW5kIG5hbWUgZm9yIGNvbnZlbmllbmNlXG5rby5leHBvcnRTeW1ib2woJ2NsZWFuTm9kZScsIGtvLmNsZWFuTm9kZSk7XG5rby5leHBvcnRTeW1ib2woJ3JlbW92ZU5vZGUnLCBrby5yZW1vdmVOb2RlKTtcbmtvLmV4cG9ydFN5bWJvbCgndXRpbHMuZG9tTm9kZURpc3Bvc2FsJywga28udXRpbHMuZG9tTm9kZURpc3Bvc2FsKTtcbmtvLmV4cG9ydFN5bWJvbCgndXRpbHMuZG9tTm9kZURpc3Bvc2FsLmFkZERpc3Bvc2VDYWxsYmFjaycsIGtvLnV0aWxzLmRvbU5vZGVEaXNwb3NhbC5hZGREaXNwb3NlQ2FsbGJhY2spO1xua28uZXhwb3J0U3ltYm9sKCd1dGlscy5kb21Ob2RlRGlzcG9zYWwucmVtb3ZlRGlzcG9zZUNhbGxiYWNrJywga28udXRpbHMuZG9tTm9kZURpc3Bvc2FsLnJlbW92ZURpc3Bvc2VDYWxsYmFjayk7XG4oZnVuY3Rpb24gKCkge1xuICAgIHZhciBub25lID0gWzAsIFwiXCIsIFwiXCJdLFxuICAgICAgICB0YWJsZSA9IFsxLCBcIjx0YWJsZT5cIiwgXCI8L3RhYmxlPlwiXSxcbiAgICAgICAgdGJvZHkgPSBbMiwgXCI8dGFibGU+PHRib2R5PlwiLCBcIjwvdGJvZHk+PC90YWJsZT5cIl0sXG4gICAgICAgIHRyID0gWzMsIFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsIFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLFxuICAgICAgICBzZWxlY3QgPSBbMSwgXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsIFwiPC9zZWxlY3Q+XCJdLFxuICAgICAgICBsb29rdXAgPSB7XG4gICAgICAgICAgICAndGhlYWQnOiB0YWJsZSxcbiAgICAgICAgICAgICd0Ym9keSc6IHRhYmxlLFxuICAgICAgICAgICAgJ3Rmb290JzogdGFibGUsXG4gICAgICAgICAgICAndHInOiB0Ym9keSxcbiAgICAgICAgICAgICd0ZCc6IHRyLFxuICAgICAgICAgICAgJ3RoJzogdHIsXG4gICAgICAgICAgICAnb3B0aW9uJzogc2VsZWN0LFxuICAgICAgICAgICAgJ29wdGdyb3VwJzogc2VsZWN0XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gVGhpcyBpcyBuZWVkZWQgZm9yIG9sZCBJRSBpZiB5b3UncmUgKm5vdCogdXNpbmcgZWl0aGVyIGpRdWVyeSBvciBpbm5lclNoaXYuIERvZXNuJ3QgYWZmZWN0IG90aGVyIGNhc2VzLlxuICAgICAgICBtYXlSZXF1aXJlQ3JlYXRlRWxlbWVudEhhY2sgPSBrby51dGlscy5pZVZlcnNpb24gPD0gODtcblxuICAgIGZ1bmN0aW9uIGdldFdyYXAodGFncykge1xuICAgICAgICB2YXIgbSA9IHRhZ3MubWF0Y2goL148KFthLXpdKylbID5dLyk7XG4gICAgICAgIHJldHVybiAobSAmJiBsb29rdXBbbVsxXV0pIHx8IG5vbmU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2ltcGxlSHRtbFBhcnNlKGh0bWwsIGRvY3VtZW50Q29udGV4dCkge1xuICAgICAgICBkb2N1bWVudENvbnRleHQgfHwgKGRvY3VtZW50Q29udGV4dCA9IGRvY3VtZW50KTtcbiAgICAgICAgdmFyIHdpbmRvd0NvbnRleHQgPSBkb2N1bWVudENvbnRleHRbJ3BhcmVudFdpbmRvdyddIHx8IGRvY3VtZW50Q29udGV4dFsnZGVmYXVsdFZpZXcnXSB8fCB3aW5kb3c7XG5cbiAgICAgICAgLy8gQmFzZWQgb24galF1ZXJ5J3MgXCJjbGVhblwiIGZ1bmN0aW9uLCBidXQgb25seSBhY2NvdW50aW5nIGZvciB0YWJsZS1yZWxhdGVkIGVsZW1lbnRzLlxuICAgICAgICAvLyBJZiB5b3UgaGF2ZSByZWZlcmVuY2VkIGpRdWVyeSwgdGhpcyB3b24ndCBiZSB1c2VkIGFueXdheSAtIEtPIHdpbGwgdXNlIGpRdWVyeSdzIFwiY2xlYW5cIiBmdW5jdGlvbiBkaXJlY3RseVxuXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGVyZSdzIHN0aWxsIGFuIGlzc3VlIGluIElFIDwgOSB3aGVyZWJ5IGl0IHdpbGwgZGlzY2FyZCBjb21tZW50IG5vZGVzIHRoYXQgYXJlIHRoZSBmaXJzdCBjaGlsZCBvZlxuICAgICAgICAvLyBhIGRlc2NlbmRhbnQgbm9kZS4gRm9yIGV4YW1wbGU6IFwiPGRpdj48IS0tIG15Y29tbWVudCAtLT5hYmM8L2Rpdj5cIiB3aWxsIGdldCBwYXJzZWQgYXMgXCI8ZGl2PmFiYzwvZGl2PlwiXG4gICAgICAgIC8vIFRoaXMgd29uJ3QgYWZmZWN0IGFueW9uZSB3aG8gaGFzIHJlZmVyZW5jZWQgalF1ZXJ5LCBhbmQgdGhlcmUncyBhbHdheXMgdGhlIHdvcmthcm91bmQgb2YgaW5zZXJ0aW5nIGEgZHVtbXkgbm9kZVxuICAgICAgICAvLyAocG9zc2libHkgYSB0ZXh0IG5vZGUpIGluIGZyb250IG9mIHRoZSBjb21tZW50LiBTbywgS08gZG9lcyBub3QgYXR0ZW1wdCB0byB3b3JrYXJvdW5kIHRoaXMgSUUgaXNzdWUgYXV0b21hdGljYWxseSBhdCBwcmVzZW50LlxuXG4gICAgICAgIC8vIFRyaW0gd2hpdGVzcGFjZSwgb3RoZXJ3aXNlIGluZGV4T2Ygd29uJ3Qgd29yayBhcyBleHBlY3RlZFxuICAgICAgICB2YXIgdGFncyA9IGtvLnV0aWxzLnN0cmluZ1RyaW0oaHRtbCkudG9Mb3dlckNhc2UoKSwgZGl2ID0gZG9jdW1lbnRDb250ZXh0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICAgICAgICB3cmFwID0gZ2V0V3JhcCh0YWdzKSxcbiAgICAgICAgICAgIGRlcHRoID0gd3JhcFswXTtcblxuICAgICAgICAvLyBHbyB0byBodG1sIGFuZCBiYWNrLCB0aGVuIHBlZWwgb2ZmIGV4dHJhIHdyYXBwZXJzXG4gICAgICAgIC8vIE5vdGUgdGhhdCB3ZSBhbHdheXMgcHJlZml4IHdpdGggc29tZSBkdW1teSB0ZXh0LCBiZWNhdXNlIG90aGVyd2lzZSwgSUU8OSB3aWxsIHN0cmlwIG91dCBsZWFkaW5nIGNvbW1lbnQgbm9kZXMgaW4gZGVzY2VuZGFudHMuIFRvdGFsIG1hZG5lc3MuXG4gICAgICAgIHZhciBtYXJrdXAgPSBcImlnbm9yZWQ8ZGl2PlwiICsgd3JhcFsxXSArIGh0bWwgKyB3cmFwWzJdICsgXCI8L2Rpdj5cIjtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3dDb250ZXh0Wydpbm5lclNoaXYnXSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBpbm5lclNoaXYgaXMgZGVwcmVjYXRlZCBpbiBmYXZvdXIgb2YgaHRtbDVzaGl2LiBXZSBzaG91bGQgY29uc2lkZXIgYWRkaW5nXG4gICAgICAgICAgICAvLyBzdXBwb3J0IGZvciBodG1sNXNoaXYgKGV4Y2VwdCBpZiBubyBleHBsaWNpdCBzdXBwb3J0IGlzIG5lZWRlZCwgZS5nLiwgaWYgaHRtbDVzaGl2XG4gICAgICAgICAgICAvLyBzb21laG93IHNoaW1zIHRoZSBuYXRpdmUgQVBJcyBzbyBpdCBqdXN0IHdvcmtzIGFueXdheSlcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZCh3aW5kb3dDb250ZXh0Wydpbm5lclNoaXYnXShtYXJrdXApKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChtYXlSZXF1aXJlQ3JlYXRlRWxlbWVudEhhY2spIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbXktZWxlbWVudCcpIHRyaWNrIHRvIGVuYWJsZSBjdXN0b20gZWxlbWVudHMgaW4gSUU2LThcbiAgICAgICAgICAgICAgICAvLyBvbmx5IHdvcmtzIGlmIHdlIGFzc2lnbiBpbm5lckhUTUwgb24gYW4gZWxlbWVudCBhc3NvY2lhdGVkIHdpdGggdGhhdCBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICBkb2N1bWVudENvbnRleHQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IG1hcmt1cDtcblxuICAgICAgICAgICAgaWYgKG1heVJlcXVpcmVDcmVhdGVFbGVtZW50SGFjaykge1xuICAgICAgICAgICAgICAgIGRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRpdik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNb3ZlIHRvIHRoZSByaWdodCBkZXB0aFxuICAgICAgICB3aGlsZSAoZGVwdGgtLSlcbiAgICAgICAgICAgIGRpdiA9IGRpdi5sYXN0Q2hpbGQ7XG5cbiAgICAgICAgcmV0dXJuIGtvLnV0aWxzLm1ha2VBcnJheShkaXYubGFzdENoaWxkLmNoaWxkTm9kZXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGpRdWVyeUh0bWxQYXJzZShodG1sLCBkb2N1bWVudENvbnRleHQpIHtcbiAgICAgICAgLy8galF1ZXJ5J3MgXCJwYXJzZUhUTUxcIiBmdW5jdGlvbiB3YXMgaW50cm9kdWNlZCBpbiBqUXVlcnkgMS44LjAgYW5kIGlzIGEgZG9jdW1lbnRlZCBwdWJsaWMgQVBJLlxuICAgICAgICBpZiAoalF1ZXJ5SW5zdGFuY2VbJ3BhcnNlSFRNTCddKSB7XG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5SW5zdGFuY2VbJ3BhcnNlSFRNTCddKGh0bWwsIGRvY3VtZW50Q29udGV4dCkgfHwgW107IC8vIEVuc3VyZSB3ZSBhbHdheXMgcmV0dXJuIGFuIGFycmF5IGFuZCBuZXZlciBudWxsXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3IgalF1ZXJ5IDwgMS44LjAsIHdlIGZhbGwgYmFjayBvbiB0aGUgdW5kb2N1bWVudGVkIGludGVybmFsIFwiY2xlYW5cIiBmdW5jdGlvbi5cbiAgICAgICAgICAgIHZhciBlbGVtcyA9IGpRdWVyeUluc3RhbmNlWydjbGVhbiddKFtodG1sXSwgZG9jdW1lbnRDb250ZXh0KTtcblxuICAgICAgICAgICAgLy8gQXMgb2YgalF1ZXJ5IDEuNy4xLCBqUXVlcnkgcGFyc2VzIHRoZSBIVE1MIGJ5IGFwcGVuZGluZyBpdCB0byBzb21lIGR1bW15IHBhcmVudCBub2RlcyBoZWxkIGluIGFuIGluLW1lbW9yeSBkb2N1bWVudCBmcmFnbWVudC5cbiAgICAgICAgICAgIC8vIFVuZm9ydHVuYXRlbHksIGl0IG5ldmVyIGNsZWFycyB0aGUgZHVtbXkgcGFyZW50IG5vZGVzIGZyb20gdGhlIGRvY3VtZW50IGZyYWdtZW50LCBzbyBpdCBsZWFrcyBtZW1vcnkgb3ZlciB0aW1lLlxuICAgICAgICAgICAgLy8gRml4IHRoaXMgYnkgZmluZGluZyB0aGUgdG9wLW1vc3QgZHVtbXkgcGFyZW50IGVsZW1lbnQsIGFuZCBkZXRhY2hpbmcgaXQgZnJvbSBpdHMgb3duZXIgZnJhZ21lbnQuXG4gICAgICAgICAgICBpZiAoZWxlbXMgJiYgZWxlbXNbMF0pIHtcbiAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSB0b3AtbW9zdCBwYXJlbnQgZWxlbWVudCB0aGF0J3MgYSBkaXJlY3QgY2hpbGQgb2YgYSBkb2N1bWVudCBmcmFnbWVudFxuICAgICAgICAgICAgICAgIHZhciBlbGVtID0gZWxlbXNbMF07XG4gICAgICAgICAgICAgICAgd2hpbGUgKGVsZW0ucGFyZW50Tm9kZSAmJiBlbGVtLnBhcmVudE5vZGUubm9kZVR5cGUgIT09IDExIC8qIGkuZS4sIERvY3VtZW50RnJhZ21lbnQgKi8pXG4gICAgICAgICAgICAgICAgICAgIGVsZW0gPSBlbGVtLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgLy8gLi4uIHRoZW4gZGV0YWNoIGl0XG4gICAgICAgICAgICAgICAgaWYgKGVsZW0ucGFyZW50Tm9kZSlcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZWxlbXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBrby51dGlscy5wYXJzZUh0bWxGcmFnbWVudCA9IGZ1bmN0aW9uKGh0bWwsIGRvY3VtZW50Q29udGV4dCkge1xuICAgICAgICByZXR1cm4galF1ZXJ5SW5zdGFuY2UgP1xuICAgICAgICAgICAgalF1ZXJ5SHRtbFBhcnNlKGh0bWwsIGRvY3VtZW50Q29udGV4dCkgOiAgIC8vIEFzIGJlbG93LCBiZW5lZml0IGZyb20galF1ZXJ5J3Mgb3B0aW1pc2F0aW9ucyB3aGVyZSBwb3NzaWJsZVxuICAgICAgICAgICAgc2ltcGxlSHRtbFBhcnNlKGh0bWwsIGRvY3VtZW50Q29udGV4dCk7ICAvLyAuLi4gb3RoZXJ3aXNlLCB0aGlzIHNpbXBsZSBsb2dpYyB3aWxsIGRvIGluIG1vc3QgY29tbW9uIGNhc2VzLlxuICAgIH07XG5cbiAgICBrby51dGlscy5zZXRIdG1sID0gZnVuY3Rpb24obm9kZSwgaHRtbCkge1xuICAgICAgICBrby51dGlscy5lbXB0eURvbU5vZGUobm9kZSk7XG5cbiAgICAgICAgLy8gVGhlcmUncyBubyBsZWdpdGltYXRlIHJlYXNvbiB0byBkaXNwbGF5IGEgc3RyaW5naWZpZWQgb2JzZXJ2YWJsZSB3aXRob3V0IHVud3JhcHBpbmcgaXQsIHNvIHdlJ2xsIHVud3JhcCBpdFxuICAgICAgICBodG1sID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShodG1sKTtcblxuICAgICAgICBpZiAoKGh0bWwgIT09IG51bGwpICYmIChodG1sICE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGh0bWwgIT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwudG9TdHJpbmcoKTtcblxuICAgICAgICAgICAgLy8galF1ZXJ5IGNvbnRhaW5zIGEgbG90IG9mIHNvcGhpc3RpY2F0ZWQgY29kZSB0byBwYXJzZSBhcmJpdHJhcnkgSFRNTCBmcmFnbWVudHMsXG4gICAgICAgICAgICAvLyBmb3IgZXhhbXBsZSA8dHI+IGVsZW1lbnRzIHdoaWNoIGFyZSBub3Qgbm9ybWFsbHkgYWxsb3dlZCB0byBleGlzdCBvbiB0aGVpciBvd24uXG4gICAgICAgICAgICAvLyBJZiB5b3UndmUgcmVmZXJlbmNlZCBqUXVlcnkgd2UnbGwgdXNlIHRoYXQgcmF0aGVyIHRoYW4gZHVwbGljYXRpbmcgaXRzIGNvZGUuXG4gICAgICAgICAgICBpZiAoalF1ZXJ5SW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBqUXVlcnlJbnN0YW5jZShub2RlKVsnaHRtbCddKGh0bWwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyAuLi4gb3RoZXJ3aXNlLCB1c2UgS08ncyBvd24gcGFyc2luZyBsb2dpYy5cbiAgICAgICAgICAgICAgICB2YXIgcGFyc2VkTm9kZXMgPSBrby51dGlscy5wYXJzZUh0bWxGcmFnbWVudChodG1sLCBub2RlLm93bmVyRG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyc2VkTm9kZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQocGFyc2VkTm9kZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn0pKCk7XG5cbmtvLmV4cG9ydFN5bWJvbCgndXRpbHMucGFyc2VIdG1sRnJhZ21lbnQnLCBrby51dGlscy5wYXJzZUh0bWxGcmFnbWVudCk7XG5rby5leHBvcnRTeW1ib2woJ3V0aWxzLnNldEh0bWwnLCBrby51dGlscy5zZXRIdG1sKTtcblxua28ubWVtb2l6YXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBtZW1vcyA9IHt9O1xuXG4gICAgZnVuY3Rpb24gcmFuZG9tTWF4OEhleENoYXJzKCkge1xuICAgICAgICByZXR1cm4gKCgoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMDAwMDApIHwgMCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21JZCgpIHtcbiAgICAgICAgcmV0dXJuIHJhbmRvbU1heDhIZXhDaGFycygpICsgcmFuZG9tTWF4OEhleENoYXJzKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmRNZW1vTm9kZXMocm9vdE5vZGUsIGFwcGVuZFRvQXJyYXkpIHtcbiAgICAgICAgaWYgKCFyb290Tm9kZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHJvb3ROb2RlLm5vZGVUeXBlID09IDgpIHtcbiAgICAgICAgICAgIHZhciBtZW1vSWQgPSBrby5tZW1vaXphdGlvbi5wYXJzZU1lbW9UZXh0KHJvb3ROb2RlLm5vZGVWYWx1ZSk7XG4gICAgICAgICAgICBpZiAobWVtb0lkICE9IG51bGwpXG4gICAgICAgICAgICAgICAgYXBwZW5kVG9BcnJheS5wdXNoKHsgZG9tTm9kZTogcm9vdE5vZGUsIG1lbW9JZDogbWVtb0lkIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHJvb3ROb2RlLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBjaGlsZE5vZGVzID0gcm9vdE5vZGUuY2hpbGROb2RlcywgaiA9IGNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgajsgaSsrKVxuICAgICAgICAgICAgICAgIGZpbmRNZW1vTm9kZXMoY2hpbGROb2Rlc1tpXSwgYXBwZW5kVG9BcnJheSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBtZW1vaXplOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBjYW4gb25seSBwYXNzIGEgZnVuY3Rpb24gdG8ga28ubWVtb2l6YXRpb24ubWVtb2l6ZSgpXCIpO1xuICAgICAgICAgICAgdmFyIG1lbW9JZCA9IGdlbmVyYXRlUmFuZG9tSWQoKTtcbiAgICAgICAgICAgIG1lbW9zW21lbW9JZF0gPSBjYWxsYmFjaztcbiAgICAgICAgICAgIHJldHVybiBcIjwhLS1ba29fbWVtbzpcIiArIG1lbW9JZCArIFwiXS0tPlwiO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVubWVtb2l6ZTogZnVuY3Rpb24gKG1lbW9JZCwgY2FsbGJhY2tQYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IG1lbW9zW21lbW9JZF07XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2sgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGFueSBtZW1vIHdpdGggSUQgXCIgKyBtZW1vSWQgKyBcIi4gUGVyaGFwcyBpdCdzIGFscmVhZHkgYmVlbiB1bm1lbW9pemVkLlwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkobnVsbCwgY2FsbGJhY2tQYXJhbXMgfHwgW10pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7IGRlbGV0ZSBtZW1vc1ttZW1vSWRdOyB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdW5tZW1vaXplRG9tTm9kZUFuZERlc2NlbmRhbnRzOiBmdW5jdGlvbiAoZG9tTm9kZSwgZXh0cmFDYWxsYmFja1BhcmFtc0FycmF5KSB7XG4gICAgICAgICAgICB2YXIgbWVtb3MgPSBbXTtcbiAgICAgICAgICAgIGZpbmRNZW1vTm9kZXMoZG9tTm9kZSwgbWVtb3MpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBtZW1vcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IG1lbW9zW2ldLmRvbU5vZGU7XG4gICAgICAgICAgICAgICAgdmFyIGNvbWJpbmVkUGFyYW1zID0gW25vZGVdO1xuICAgICAgICAgICAgICAgIGlmIChleHRyYUNhbGxiYWNrUGFyYW1zQXJyYXkpXG4gICAgICAgICAgICAgICAgICAgIGtvLnV0aWxzLmFycmF5UHVzaEFsbChjb21iaW5lZFBhcmFtcywgZXh0cmFDYWxsYmFja1BhcmFtc0FycmF5KTtcbiAgICAgICAgICAgICAgICBrby5tZW1vaXphdGlvbi51bm1lbW9pemUobWVtb3NbaV0ubWVtb0lkLCBjb21iaW5lZFBhcmFtcyk7XG4gICAgICAgICAgICAgICAgbm9kZS5ub2RlVmFsdWUgPSBcIlwiOyAvLyBOZXV0ZXIgdGhpcyBub2RlIHNvIHdlIGRvbid0IHRyeSB0byB1bm1lbW9pemUgaXQgYWdhaW5cbiAgICAgICAgICAgICAgICBpZiAobm9kZS5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7IC8vIElmIHBvc3NpYmxlLCBlcmFzZSBpdCB0b3RhbGx5IChub3QgYWx3YXlzIHBvc3NpYmxlIC0gc29tZW9uZSBlbHNlIG1pZ2h0IGp1c3QgaG9sZCBhIHJlZmVyZW5jZSB0byBpdCB0aGVuIGNhbGwgdW5tZW1vaXplRG9tTm9kZUFuZERlc2NlbmRhbnRzIGFnYWluKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHBhcnNlTWVtb1RleHQ6IGZ1bmN0aW9uIChtZW1vVGV4dCkge1xuICAgICAgICAgICAgdmFyIG1hdGNoID0gbWVtb1RleHQubWF0Y2goL15cXFtrb19tZW1vXFw6KC4qPylcXF0kLyk7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xufSkoKTtcblxua28uZXhwb3J0U3ltYm9sKCdtZW1vaXphdGlvbicsIGtvLm1lbW9pemF0aW9uKTtcbmtvLmV4cG9ydFN5bWJvbCgnbWVtb2l6YXRpb24ubWVtb2l6ZScsIGtvLm1lbW9pemF0aW9uLm1lbW9pemUpO1xua28uZXhwb3J0U3ltYm9sKCdtZW1vaXphdGlvbi51bm1lbW9pemUnLCBrby5tZW1vaXphdGlvbi51bm1lbW9pemUpO1xua28uZXhwb3J0U3ltYm9sKCdtZW1vaXphdGlvbi5wYXJzZU1lbW9UZXh0Jywga28ubWVtb2l6YXRpb24ucGFyc2VNZW1vVGV4dCk7XG5rby5leHBvcnRTeW1ib2woJ21lbW9pemF0aW9uLnVubWVtb2l6ZURvbU5vZGVBbmREZXNjZW5kYW50cycsIGtvLm1lbW9pemF0aW9uLnVubWVtb2l6ZURvbU5vZGVBbmREZXNjZW5kYW50cyk7XG5rby50YXNrcyA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNjaGVkdWxlcixcbiAgICAgICAgdGFza1F1ZXVlID0gW10sXG4gICAgICAgIHRhc2tRdWV1ZUxlbmd0aCA9IDAsXG4gICAgICAgIG5leHRIYW5kbGUgPSAxLFxuICAgICAgICBuZXh0SW5kZXhUb1Byb2Nlc3MgPSAwO1xuXG4gICAgaWYgKHdpbmRvd1snTXV0YXRpb25PYnNlcnZlciddKSB7XG4gICAgICAgIC8vIENocm9tZSAyNyssIEZpcmVmb3ggMTQrLCBJRSAxMSssIE9wZXJhIDE1KywgU2FmYXJpIDYuMStcbiAgICAgICAgLy8gRnJvbSBodHRwczovL2dpdGh1Yi5jb20vcGV0a2FhbnRvbm92L2JsdWViaXJkICogQ29weXJpZ2h0IChjKSAyMDE0IFBldGthIEFudG9ub3YgKiBMaWNlbnNlOiBNSVRcbiAgICAgICAgc2NoZWR1bGVyID0gKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBuZXcgTXV0YXRpb25PYnNlcnZlcihjYWxsYmFjaykub2JzZXJ2ZShkaXYsIHthdHRyaWJ1dGVzOiB0cnVlfSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyBkaXYuY2xhc3NMaXN0LnRvZ2dsZShcImZvb1wiKTsgfTtcbiAgICAgICAgfSkoc2NoZWR1bGVkUHJvY2Vzcyk7XG4gICAgfSBlbHNlIGlmIChkb2N1bWVudCAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICAgICAgLy8gSUUgNi0xMFxuICAgICAgICAvLyBGcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9ZdXp1SlMvc2V0SW1tZWRpYXRlICogQ29weXJpZ2h0IChjKSAyMDEyIEJhcm5lc2FuZG5vYmxlLmNvbSwgbGxjLCBEb25hdm9uIFdlc3QsIGFuZCBEb21lbmljIERlbmljb2xhICogTGljZW5zZTogTUlUXG4gICAgICAgIHNjaGVkdWxlciA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzY2hlZHVsZXIgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIDApO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByb2Nlc3NUYXNrcygpIHtcbiAgICAgICAgaWYgKHRhc2tRdWV1ZUxlbmd0aCkge1xuICAgICAgICAgICAgLy8gRWFjaCBtYXJrIHJlcHJlc2VudHMgdGhlIGVuZCBvZiBhIGxvZ2ljYWwgZ3JvdXAgb2YgdGFza3MgYW5kIHRoZSBudW1iZXIgb2YgdGhlc2UgZ3JvdXBzIGlzXG4gICAgICAgICAgICAvLyBsaW1pdGVkIHRvIHByZXZlbnQgdW5jaGVja2VkIHJlY3Vyc2lvbi5cbiAgICAgICAgICAgIHZhciBtYXJrID0gdGFza1F1ZXVlTGVuZ3RoLCBjb3VudE1hcmtzID0gMDtcblxuICAgICAgICAgICAgLy8gbmV4dEluZGV4VG9Qcm9jZXNzIGtlZXBzIHRyYWNrIG9mIHdoZXJlIHdlIGFyZSBpbiB0aGUgcXVldWU7IHByb2Nlc3NUYXNrcyBjYW4gYmUgY2FsbGVkIHJlY3Vyc2l2ZWx5IHdpdGhvdXQgaXNzdWVcbiAgICAgICAgICAgIGZvciAodmFyIHRhc2s7IG5leHRJbmRleFRvUHJvY2VzcyA8IHRhc2tRdWV1ZUxlbmd0aDsgKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhc2sgPSB0YXNrUXVldWVbbmV4dEluZGV4VG9Qcm9jZXNzKytdKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0SW5kZXhUb1Byb2Nlc3MgPiBtYXJrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKytjb3VudE1hcmtzID49IDUwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0SW5kZXhUb1Byb2Nlc3MgPSB0YXNrUXVldWVMZW5ndGg7ICAgLy8gc2tpcCBhbGwgdGFza3MgcmVtYWluaW5nIGluIHRoZSBxdWV1ZSBzaW5jZSBhbnkgb2YgdGhlbSBjb3VsZCBiZSBjYXVzaW5nIHRoZSByZWN1cnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrby51dGlscy5kZWZlckVycm9yKEVycm9yKFwiJ1RvbyBtdWNoIHJlY3Vyc2lvbicgYWZ0ZXIgcHJvY2Vzc2luZyBcIiArIGNvdW50TWFya3MgKyBcIiB0YXNrIGdyb3Vwcy5cIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyayA9IHRhc2tRdWV1ZUxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFzaygpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAga28udXRpbHMuZGVmZXJFcnJvcihleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZWRQcm9jZXNzKCkge1xuICAgICAgICBwcm9jZXNzVGFza3MoKTtcblxuICAgICAgICAvLyBSZXNldCB0aGUgcXVldWVcbiAgICAgICAgbmV4dEluZGV4VG9Qcm9jZXNzID0gdGFza1F1ZXVlTGVuZ3RoID0gdGFza1F1ZXVlLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVUYXNrUHJvY2Vzc2luZygpIHtcbiAgICAgICAga28udGFza3NbJ3NjaGVkdWxlciddKHNjaGVkdWxlZFByb2Nlc3MpO1xuICAgIH1cblxuICAgIHZhciB0YXNrcyA9IHtcbiAgICAgICAgJ3NjaGVkdWxlcic6IHNjaGVkdWxlciwgICAgIC8vIEFsbG93IG92ZXJyaWRpbmcgdGhlIHNjaGVkdWxlclxuXG4gICAgICAgIHNjaGVkdWxlOiBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICAgICAgaWYgKCF0YXNrUXVldWVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzY2hlZHVsZVRhc2tQcm9jZXNzaW5nKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRhc2tRdWV1ZVt0YXNrUXVldWVMZW5ndGgrK10gPSBmdW5jO1xuICAgICAgICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICAgICAgfSxcblxuICAgICAgICBjYW5jZWw6IGZ1bmN0aW9uIChoYW5kbGUpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGhhbmRsZSAtIChuZXh0SGFuZGxlIC0gdGFza1F1ZXVlTGVuZ3RoKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSBuZXh0SW5kZXhUb1Byb2Nlc3MgJiYgaW5kZXggPCB0YXNrUXVldWVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0YXNrUXVldWVbaW5kZXhdID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyBGb3IgdGVzdGluZyBvbmx5OiByZXNldCB0aGUgcXVldWUgYW5kIHJldHVybiB0aGUgcHJldmlvdXMgcXVldWUgbGVuZ3RoXG4gICAgICAgICdyZXNldEZvclRlc3RpbmcnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gdGFza1F1ZXVlTGVuZ3RoIC0gbmV4dEluZGV4VG9Qcm9jZXNzO1xuICAgICAgICAgICAgbmV4dEluZGV4VG9Qcm9jZXNzID0gdGFza1F1ZXVlTGVuZ3RoID0gdGFza1F1ZXVlLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICByZXR1cm4gbGVuZ3RoO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJ1bkVhcmx5OiBwcm9jZXNzVGFza3NcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRhc2tzO1xufSkoKTtcblxua28uZXhwb3J0U3ltYm9sKCd0YXNrcycsIGtvLnRhc2tzKTtcbmtvLmV4cG9ydFN5bWJvbCgndGFza3Muc2NoZWR1bGUnLCBrby50YXNrcy5zY2hlZHVsZSk7XG4vL2tvLmV4cG9ydFN5bWJvbCgndGFza3MuY2FuY2VsJywga28udGFza3MuY2FuY2VsKTsgIFwiY2FuY2VsXCIgaXNuJ3QgbWluaWZpZWRcbmtvLmV4cG9ydFN5bWJvbCgndGFza3MucnVuRWFybHknLCBrby50YXNrcy5ydW5FYXJseSk7XG5rby5leHRlbmRlcnMgPSB7XG4gICAgJ3Rocm90dGxlJzogZnVuY3Rpb24odGFyZ2V0LCB0aW1lb3V0KSB7XG4gICAgICAgIC8vIFRocm90dGxpbmcgbWVhbnMgdHdvIHRoaW5nczpcblxuICAgICAgICAvLyAoMSkgRm9yIGRlcGVuZGVudCBvYnNlcnZhYmxlcywgd2UgdGhyb3R0bGUgKmV2YWx1YXRpb25zKiBzbyB0aGF0LCBubyBtYXR0ZXIgaG93IGZhc3QgaXRzIGRlcGVuZGVuY2llc1xuICAgICAgICAvLyAgICAgbm90aWZ5IHVwZGF0ZXMsIHRoZSB0YXJnZXQgZG9lc24ndCByZS1ldmFsdWF0ZSAoYW5kIGhlbmNlIGRvZXNuJ3Qgbm90aWZ5KSBmYXN0ZXIgdGhhbiBhIGNlcnRhaW4gcmF0ZVxuICAgICAgICB0YXJnZXRbJ3Rocm90dGxlRXZhbHVhdGlvbiddID0gdGltZW91dDtcblxuICAgICAgICAvLyAoMikgRm9yIHdyaXRhYmxlIHRhcmdldHMgKG9ic2VydmFibGVzLCBvciB3cml0YWJsZSBkZXBlbmRlbnQgb2JzZXJ2YWJsZXMpLCB3ZSB0aHJvdHRsZSAqd3JpdGVzKlxuICAgICAgICAvLyAgICAgc28gdGhlIHRhcmdldCBjYW5ub3QgY2hhbmdlIHZhbHVlIHN5bmNocm9ub3VzbHkgb3IgZmFzdGVyIHRoYW4gYSBjZXJ0YWluIHJhdGVcbiAgICAgICAgdmFyIHdyaXRlVGltZW91dEluc3RhbmNlID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGtvLmRlcGVuZGVudE9ic2VydmFibGUoe1xuICAgICAgICAgICAgJ3JlYWQnOiB0YXJnZXQsXG4gICAgICAgICAgICAnd3JpdGUnOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh3cml0ZVRpbWVvdXRJbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgd3JpdGVUaW1lb3V0SW5zdGFuY2UgPSBrby51dGlscy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQodmFsdWUpO1xuICAgICAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgJ3JhdGVMaW1pdCc6IGZ1bmN0aW9uKHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgdGltZW91dCwgbWV0aG9kLCBsaW1pdEZ1bmN0aW9uO1xuXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGltZW91dCA9IG9wdGlvbnM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aW1lb3V0ID0gb3B0aW9uc1sndGltZW91dCddO1xuICAgICAgICAgICAgbWV0aG9kID0gb3B0aW9uc1snbWV0aG9kJ107XG4gICAgICAgIH1cblxuICAgICAgICAvLyByYXRlTGltaXQgc3VwZXJzZWRlcyBkZWZlcnJlZCB1cGRhdGVzXG4gICAgICAgIHRhcmdldC5fZGVmZXJVcGRhdGVzID0gZmFsc2U7XG5cbiAgICAgICAgbGltaXRGdW5jdGlvbiA9IG1ldGhvZCA9PSAnbm90aWZ5V2hlbkNoYW5nZXNTdG9wJyA/ICBkZWJvdW5jZSA6IHRocm90dGxlO1xuICAgICAgICB0YXJnZXQubGltaXQoZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiBsaW1pdEZ1bmN0aW9uKGNhbGxiYWNrLCB0aW1lb3V0KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgICdkZWZlcnJlZCc6IGZ1bmN0aW9uKHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXFwnZGVmZXJyZWRcXCcgZXh0ZW5kZXIgb25seSBhY2NlcHRzIHRoZSB2YWx1ZSBcXCd0cnVlXFwnLCBiZWNhdXNlIGl0IGlzIG5vdCBzdXBwb3J0ZWQgdG8gdHVybiBkZWZlcnJhbCBvZmYgb25jZSBlbmFibGVkLicpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRhcmdldC5fZGVmZXJVcGRhdGVzKSB7XG4gICAgICAgICAgICB0YXJnZXQuX2RlZmVyVXBkYXRlcyA9IHRydWU7XG4gICAgICAgICAgICB0YXJnZXQubGltaXQoZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBrby50YXNrcy5jYW5jZWwoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlID0ga28udGFza3Muc2NoZWR1bGUoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRbJ25vdGlmeVN1YnNjcmliZXJzJ10odW5kZWZpbmVkLCAnZGlydHknKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgJ25vdGlmeSc6IGZ1bmN0aW9uKHRhcmdldCwgbm90aWZ5V2hlbikge1xuICAgICAgICB0YXJnZXRbXCJlcXVhbGl0eUNvbXBhcmVyXCJdID0gbm90aWZ5V2hlbiA9PSBcImFsd2F5c1wiID9cbiAgICAgICAgICAgIG51bGwgOiAgLy8gbnVsbCBlcXVhbGl0eUNvbXBhcmVyIG1lYW5zIHRvIGFsd2F5cyBub3RpZnlcbiAgICAgICAgICAgIHZhbHVlc0FyZVByaW1pdGl2ZUFuZEVxdWFsO1xuICAgIH1cbn07XG5cbnZhciBwcmltaXRpdmVUeXBlcyA9IHsgJ3VuZGVmaW5lZCc6MSwgJ2Jvb2xlYW4nOjEsICdudW1iZXInOjEsICdzdHJpbmcnOjEgfTtcbmZ1bmN0aW9uIHZhbHVlc0FyZVByaW1pdGl2ZUFuZEVxdWFsKGEsIGIpIHtcbiAgICB2YXIgb2xkVmFsdWVJc1ByaW1pdGl2ZSA9IChhID09PSBudWxsKSB8fCAodHlwZW9mKGEpIGluIHByaW1pdGl2ZVR5cGVzKTtcbiAgICByZXR1cm4gb2xkVmFsdWVJc1ByaW1pdGl2ZSA/IChhID09PSBiKSA6IGZhbHNlO1xufVxuXG5mdW5jdGlvbiB0aHJvdHRsZShjYWxsYmFjaywgdGltZW91dCkge1xuICAgIHZhciB0aW1lb3V0SW5zdGFuY2U7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aW1lb3V0SW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHRpbWVvdXRJbnN0YW5jZSA9IGtvLnV0aWxzLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRpbWVvdXRJbnN0YW5jZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBkZWJvdW5jZShjYWxsYmFjaywgdGltZW91dCkge1xuICAgIHZhciB0aW1lb3V0SW5zdGFuY2U7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJbnN0YW5jZSk7XG4gICAgICAgIHRpbWVvdXRJbnN0YW5jZSA9IGtvLnV0aWxzLnNldFRpbWVvdXQoY2FsbGJhY2ssIHRpbWVvdXQpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGFwcGx5RXh0ZW5kZXJzKHJlcXVlc3RlZEV4dGVuZGVycykge1xuICAgIHZhciB0YXJnZXQgPSB0aGlzO1xuICAgIGlmIChyZXF1ZXN0ZWRFeHRlbmRlcnMpIHtcbiAgICAgICAga28udXRpbHMub2JqZWN0Rm9yRWFjaChyZXF1ZXN0ZWRFeHRlbmRlcnMsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBleHRlbmRlckhhbmRsZXIgPSBrby5leHRlbmRlcnNba2V5XTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXh0ZW5kZXJIYW5kbGVyID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBleHRlbmRlckhhbmRsZXIodGFyZ2V0LCB2YWx1ZSkgfHwgdGFyZ2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cblxua28uZXhwb3J0U3ltYm9sKCdleHRlbmRlcnMnLCBrby5leHRlbmRlcnMpO1xuXG5rby5zdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYWxsYmFjaywgZGlzcG9zZUNhbGxiYWNrKSB7XG4gICAgdGhpcy5fdGFyZ2V0ID0gdGFyZ2V0O1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLmRpc3Bvc2VDYWxsYmFjayA9IGRpc3Bvc2VDYWxsYmFjaztcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICBrby5leHBvcnRQcm9wZXJ0eSh0aGlzLCAnZGlzcG9zZScsIHRoaXMuZGlzcG9zZSk7XG59O1xua28uc3Vic2NyaXB0aW9uLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgdGhpcy5kaXNwb3NlQ2FsbGJhY2soKTtcbn07XG5cbmtvLnN1YnNjcmliYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBrby51dGlscy5zZXRQcm90b3R5cGVPZk9yRXh0ZW5kKHRoaXMsIGtvX3N1YnNjcmliYWJsZV9mbik7XG4gICAga29fc3Vic2NyaWJhYmxlX2ZuLmluaXQodGhpcyk7XG59XG5cbnZhciBkZWZhdWx0RXZlbnQgPSBcImNoYW5nZVwiO1xuXG4vLyBNb3ZlZCBvdXQgb2YgXCJsaW1pdFwiIHRvIGF2b2lkIHRoZSBleHRyYSBjbG9zdXJlXG5mdW5jdGlvbiBsaW1pdE5vdGlmeVN1YnNjcmliZXJzKHZhbHVlLCBldmVudCkge1xuICAgIGlmICghZXZlbnQgfHwgZXZlbnQgPT09IGRlZmF1bHRFdmVudCkge1xuICAgICAgICB0aGlzLl9saW1pdENoYW5nZSh2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChldmVudCA9PT0gJ2JlZm9yZUNoYW5nZScpIHtcbiAgICAgICAgdGhpcy5fbGltaXRCZWZvcmVDaGFuZ2UodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX29yaWdOb3RpZnlTdWJzY3JpYmVycyh2YWx1ZSwgZXZlbnQpO1xuICAgIH1cbn1cblxudmFyIGtvX3N1YnNjcmliYWJsZV9mbiA9IHtcbiAgICBpbml0OiBmdW5jdGlvbihpbnN0YW5jZSkge1xuICAgICAgICBpbnN0YW5jZS5fc3Vic2NyaXB0aW9ucyA9IHt9O1xuICAgICAgICBpbnN0YW5jZS5fdmVyc2lvbk51bWJlciA9IDE7XG4gICAgfSxcblxuICAgIHN1YnNjcmliZTogZnVuY3Rpb24gKGNhbGxiYWNrLCBjYWxsYmFja1RhcmdldCwgZXZlbnQpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGV2ZW50ID0gZXZlbnQgfHwgZGVmYXVsdEV2ZW50O1xuICAgICAgICB2YXIgYm91bmRDYWxsYmFjayA9IGNhbGxiYWNrVGFyZ2V0ID8gY2FsbGJhY2suYmluZChjYWxsYmFja1RhcmdldCkgOiBjYWxsYmFjaztcblxuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IGtvLnN1YnNjcmlwdGlvbihzZWxmLCBib3VuZENhbGxiYWNrLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBrby51dGlscy5hcnJheVJlbW92ZUl0ZW0oc2VsZi5fc3Vic2NyaXB0aW9uc1tldmVudF0sIHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICBpZiAoc2VsZi5hZnRlclN1YnNjcmlwdGlvblJlbW92ZSlcbiAgICAgICAgICAgICAgICBzZWxmLmFmdGVyU3Vic2NyaXB0aW9uUmVtb3ZlKGV2ZW50KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHNlbGYuYmVmb3JlU3Vic2NyaXB0aW9uQWRkKVxuICAgICAgICAgICAgc2VsZi5iZWZvcmVTdWJzY3JpcHRpb25BZGQoZXZlbnQpO1xuXG4gICAgICAgIGlmICghc2VsZi5fc3Vic2NyaXB0aW9uc1tldmVudF0pXG4gICAgICAgICAgICBzZWxmLl9zdWJzY3JpcHRpb25zW2V2ZW50XSA9IFtdO1xuICAgICAgICBzZWxmLl9zdWJzY3JpcHRpb25zW2V2ZW50XS5wdXNoKHN1YnNjcmlwdGlvbik7XG5cbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9LFxuXG4gICAgXCJub3RpZnlTdWJzY3JpYmVyc1wiOiBmdW5jdGlvbiAodmFsdWVUb05vdGlmeSwgZXZlbnQpIHtcbiAgICAgICAgZXZlbnQgPSBldmVudCB8fCBkZWZhdWx0RXZlbnQ7XG4gICAgICAgIGlmIChldmVudCA9PT0gZGVmYXVsdEV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZlcnNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYXNTdWJzY3JpcHRpb25zRm9yRXZlbnQoZXZlbnQpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGtvLmRlcGVuZGVuY3lEZXRlY3Rpb24uYmVnaW4oKTsgLy8gQmVnaW4gc3VwcHJlc3NpbmcgZGVwZW5kZW5jeSBkZXRlY3Rpb24gKGJ5IHNldHRpbmcgdGhlIHRvcCBmcmFtZSB0byB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYSA9IHRoaXMuX3N1YnNjcmlwdGlvbnNbZXZlbnRdLnNsaWNlKDApLCBpID0gMCwgc3Vic2NyaXB0aW9uOyBzdWJzY3JpcHRpb24gPSBhW2ldOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSW4gY2FzZSBhIHN1YnNjcmlwdGlvbiB3YXMgZGlzcG9zZWQgZHVyaW5nIHRoZSBhcnJheUZvckVhY2ggY3ljbGUsIGNoZWNrXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciBpc0Rpc3Bvc2VkIG9uIGVhY2ggc3Vic2NyaXB0aW9uIGJlZm9yZSBpbnZva2luZyBpdHMgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWJzY3JpcHRpb24uaXNEaXNwb3NlZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5jYWxsYmFjayh2YWx1ZVRvTm90aWZ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGtvLmRlcGVuZGVuY3lEZXRlY3Rpb24uZW5kKCk7IC8vIEVuZCBzdXBwcmVzc2luZyBkZXBlbmRlbmN5IGRldGVjdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGdldFZlcnNpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZlcnNpb25OdW1iZXI7XG4gICAgfSxcblxuICAgIGhhc0NoYW5nZWQ6IGZ1bmN0aW9uICh2ZXJzaW9uVG9DaGVjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRWZXJzaW9uKCkgIT09IHZlcnNpb25Ub0NoZWNrO1xuICAgIH0sXG5cbiAgICB1cGRhdGVWZXJzaW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICsrdGhpcy5fdmVyc2lvbk51bWJlcjtcbiAgICB9LFxuXG4gICAgbGltaXQ6IGZ1bmN0aW9uKGxpbWl0RnVuY3Rpb24pIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzLCBzZWxmSXNPYnNlcnZhYmxlID0ga28uaXNPYnNlcnZhYmxlKHNlbGYpLFxuICAgICAgICAgICAgaWdub3JlQmVmb3JlQ2hhbmdlLCBwcmV2aW91c1ZhbHVlLCBwZW5kaW5nVmFsdWUsIGJlZm9yZUNoYW5nZSA9ICdiZWZvcmVDaGFuZ2UnO1xuXG4gICAgICAgIGlmICghc2VsZi5fb3JpZ05vdGlmeVN1YnNjcmliZXJzKSB7XG4gICAgICAgICAgICBzZWxmLl9vcmlnTm90aWZ5U3Vic2NyaWJlcnMgPSBzZWxmW1wibm90aWZ5U3Vic2NyaWJlcnNcIl07XG4gICAgICAgICAgICBzZWxmW1wibm90aWZ5U3Vic2NyaWJlcnNcIl0gPSBsaW1pdE5vdGlmeVN1YnNjcmliZXJzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZpbmlzaCA9IGxpbWl0RnVuY3Rpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLl9ub3RpZmljYXRpb25Jc1BlbmRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgLy8gSWYgYW4gb2JzZXJ2YWJsZSBwcm92aWRlZCBhIHJlZmVyZW5jZSB0byBpdHNlbGYsIGFjY2VzcyBpdCB0byBnZXQgdGhlIGxhdGVzdCB2YWx1ZS5cbiAgICAgICAgICAgIC8vIFRoaXMgYWxsb3dzIGNvbXB1dGVkIG9ic2VydmFibGVzIHRvIGRlbGF5IGNhbGN1bGF0aW5nIHRoZWlyIHZhbHVlIHVudGlsIG5lZWRlZC5cbiAgICAgICAgICAgIGlmIChzZWxmSXNPYnNlcnZhYmxlICYmIHBlbmRpbmdWYWx1ZSA9PT0gc2VsZikge1xuICAgICAgICAgICAgICAgIHBlbmRpbmdWYWx1ZSA9IHNlbGYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlnbm9yZUJlZm9yZUNoYW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHNlbGYuaXNEaWZmZXJlbnQocHJldmlvdXNWYWx1ZSwgcGVuZGluZ1ZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHNlbGYuX29yaWdOb3RpZnlTdWJzY3JpYmVycyhwcmV2aW91c1ZhbHVlID0gcGVuZGluZ1ZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2VsZi5fbGltaXRDaGFuZ2UgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgc2VsZi5fbm90aWZpY2F0aW9uSXNQZW5kaW5nID0gaWdub3JlQmVmb3JlQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgIHBlbmRpbmdWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgZmluaXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIHNlbGYuX2xpbWl0QmVmb3JlQ2hhbmdlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghaWdub3JlQmVmb3JlQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHNlbGYuX29yaWdOb3RpZnlTdWJzY3JpYmVycyh2YWx1ZSwgYmVmb3JlQ2hhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgaGFzU3Vic2NyaXB0aW9uc0ZvckV2ZW50OiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uc1tldmVudF0gJiYgdGhpcy5fc3Vic2NyaXB0aW9uc1tldmVudF0ubGVuZ3RoO1xuICAgIH0sXG5cbiAgICBnZXRTdWJzY3JpcHRpb25zQ291bnQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpcHRpb25zW2V2ZW50XSAmJiB0aGlzLl9zdWJzY3JpcHRpb25zW2V2ZW50XS5sZW5ndGggfHwgMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IDA7XG4gICAgICAgICAgICBrby51dGlscy5vYmplY3RGb3JFYWNoKHRoaXMuX3N1YnNjcmlwdGlvbnMsIGZ1bmN0aW9uKGV2ZW50TmFtZSwgc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmIChldmVudE5hbWUgIT09ICdkaXJ0eScpXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsICs9IHN1YnNjcmlwdGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgaXNEaWZmZXJlbnQ6IGZ1bmN0aW9uKG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICByZXR1cm4gIXRoaXNbJ2VxdWFsaXR5Q29tcGFyZXInXSB8fCAhdGhpc1snZXF1YWxpdHlDb21wYXJlciddKG9sZFZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgfSxcblxuICAgIGV4dGVuZDogYXBwbHlFeHRlbmRlcnNcbn07XG5cbmtvLmV4cG9ydFByb3BlcnR5KGtvX3N1YnNjcmliYWJsZV9mbiwgJ3N1YnNjcmliZScsIGtvX3N1YnNjcmliYWJsZV9mbi5zdWJzY3JpYmUpO1xua28uZXhwb3J0UHJvcGVydHkoa29fc3Vic2NyaWJhYmxlX2ZuLCAnZXh0ZW5kJywga29fc3Vic2NyaWJhYmxlX2ZuLmV4dGVuZCk7XG5rby5leHBvcnRQcm9wZXJ0eShrb19zdWJzY3JpYmFibGVfZm4sICdnZXRTdWJzY3JpcHRpb25zQ291bnQnLCBrb19zdWJzY3JpYmFibGVfZm4uZ2V0U3Vic2NyaXB0aW9uc0NvdW50KTtcblxuLy8gRm9yIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBwcm90byBhc3NpZ25tZW50LCB3ZSBvdmVyd3JpdGUgdGhlIHByb3RvdHlwZSBvZiBlYWNoXG4vLyBvYnNlcnZhYmxlIGluc3RhbmNlLiBTaW5jZSBvYnNlcnZhYmxlcyBhcmUgZnVuY3Rpb25zLCB3ZSBuZWVkIEZ1bmN0aW9uLnByb3RvdHlwZVxuLy8gdG8gc3RpbGwgYmUgaW4gdGhlIHByb3RvdHlwZSBjaGFpbi5cbmlmIChrby51dGlscy5jYW5TZXRQcm90b3R5cGUpIHtcbiAgICBrby51dGlscy5zZXRQcm90b3R5cGVPZihrb19zdWJzY3JpYmFibGVfZm4sIEZ1bmN0aW9uLnByb3RvdHlwZSk7XG59XG5cbmtvLnN1YnNjcmliYWJsZVsnZm4nXSA9IGtvX3N1YnNjcmliYWJsZV9mbjtcblxuXG5rby5pc1N1YnNjcmliYWJsZSA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgIHJldHVybiBpbnN0YW5jZSAhPSBudWxsICYmIHR5cGVvZiBpbnN0YW5jZS5zdWJzY3JpYmUgPT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBpbnN0YW5jZVtcIm5vdGlmeVN1YnNjcmliZXJzXCJdID09IFwiZnVuY3Rpb25cIjtcbn07XG5cbmtvLmV4cG9ydFN5bWJvbCgnc3Vic2NyaWJhYmxlJywga28uc3Vic2NyaWJhYmxlKTtcbmtvLmV4cG9ydFN5bWJvbCgnaXNTdWJzY3JpYmFibGUnLCBrby5pc1N1YnNjcmliYWJsZSk7XG5cbmtvLmNvbXB1dGVkQ29udGV4dCA9IGtvLmRlcGVuZGVuY3lEZXRlY3Rpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBvdXRlckZyYW1lcyA9IFtdLFxuICAgICAgICBjdXJyZW50RnJhbWUsXG4gICAgICAgIGxhc3RJZCA9IDA7XG5cbiAgICAvLyBSZXR1cm4gYSB1bmlxdWUgSUQgdGhhdCBjYW4gYmUgYXNzaWduZWQgdG8gYW4gb2JzZXJ2YWJsZSBmb3IgZGVwZW5kZW5jeSB0cmFja2luZy5cbiAgICAvLyBUaGVvcmV0aWNhbGx5LCB5b3UgY291bGQgZXZlbnR1YWxseSBvdmVyZmxvdyB0aGUgbnVtYmVyIHN0b3JhZ2Ugc2l6ZSwgcmVzdWx0aW5nXG4gICAgLy8gaW4gZHVwbGljYXRlIElEcy4gQnV0IGluIEphdmFTY3JpcHQsIHRoZSBsYXJnZXN0IGV4YWN0IGludGVncmFsIHZhbHVlIGlzIDJeNTNcbiAgICAvLyBvciA5LDAwNywxOTksMjU0LDc0MCw5OTIuIElmIHlvdSBjcmVhdGVkIDEsMDAwLDAwMCBJRHMgcGVyIHNlY29uZCwgaXQgd291bGRcbiAgICAvLyB0YWtlIG92ZXIgMjg1IHllYXJzIHRvIHJlYWNoIHRoYXQgbnVtYmVyLlxuICAgIC8vIFJlZmVyZW5jZSBodHRwOi8vYmxvZy52amV1eC5jb20vMjAxMC9qYXZhc2NyaXB0L2phdmFzY3JpcHQtbWF4X2ludC1udW1iZXItbGltaXRzLmh0bWxcbiAgICBmdW5jdGlvbiBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuICsrbGFzdElkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJlZ2luKG9wdGlvbnMpIHtcbiAgICAgICAgb3V0ZXJGcmFtZXMucHVzaChjdXJyZW50RnJhbWUpO1xuICAgICAgICBjdXJyZW50RnJhbWUgPSBvcHRpb25zO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVuZCgpIHtcbiAgICAgICAgY3VycmVudEZyYW1lID0gb3V0ZXJGcmFtZXMucG9wKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYmVnaW46IGJlZ2luLFxuXG4gICAgICAgIGVuZDogZW5kLFxuXG4gICAgICAgIHJlZ2lzdGVyRGVwZW5kZW5jeTogZnVuY3Rpb24gKHN1YnNjcmliYWJsZSkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRGcmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICgha28uaXNTdWJzY3JpYmFibGUoc3Vic2NyaWJhYmxlKSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT25seSBzdWJzY3JpYmFibGUgdGhpbmdzIGNhbiBhY3QgYXMgZGVwZW5kZW5jaWVzXCIpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRGcmFtZS5jYWxsYmFjay5jYWxsKGN1cnJlbnRGcmFtZS5jYWxsYmFja1RhcmdldCwgc3Vic2NyaWJhYmxlLCBzdWJzY3JpYmFibGUuX2lkIHx8IChzdWJzY3JpYmFibGUuX2lkID0gZ2V0SWQoKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGlnbm9yZTogZnVuY3Rpb24gKGNhbGxiYWNrLCBjYWxsYmFja1RhcmdldCwgY2FsbGJhY2tBcmdzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGJlZ2luKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KGNhbGxiYWNrVGFyZ2V0LCBjYWxsYmFja0FyZ3MgfHwgW10pO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBlbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBnZXREZXBlbmRlbmNpZXNDb3VudDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRGcmFtZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudEZyYW1lLmNvbXB1dGVkLmdldERlcGVuZGVuY2llc0NvdW50KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaXNJbml0aWFsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50RnJhbWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRGcmFtZS5pc0luaXRpYWw7XG4gICAgICAgIH1cbiAgICB9O1xufSkoKTtcblxua28uZXhwb3J0U3ltYm9sKCdjb21wdXRlZENvbnRleHQnLCBrby5jb21wdXRlZENvbnRleHQpO1xua28uZXhwb3J0U3ltYm9sKCdjb21wdXRlZENvbnRleHQuZ2V0RGVwZW5kZW5jaWVzQ291bnQnLCBrby5jb21wdXRlZENvbnRleHQuZ2V0RGVwZW5kZW5jaWVzQ291bnQpO1xua28uZXhwb3J0U3ltYm9sKCdjb21wdXRlZENvbnRleHQuaXNJbml0aWFsJywga28uY29tcHV0ZWRDb250ZXh0LmlzSW5pdGlhbCk7XG5cbmtvLmV4cG9ydFN5bWJvbCgnaWdub3JlRGVwZW5kZW5jaWVzJywga28uaWdub3JlRGVwZW5kZW5jaWVzID0ga28uZGVwZW5kZW5jeURldGVjdGlvbi5pZ25vcmUpO1xudmFyIG9ic2VydmFibGVMYXRlc3RWYWx1ZSA9IGtvLnV0aWxzLmNyZWF0ZVN5bWJvbE9yU3RyaW5nKCdfbGF0ZXN0VmFsdWUnKTtcblxua28ub2JzZXJ2YWJsZSA9IGZ1bmN0aW9uIChpbml0aWFsVmFsdWUpIHtcbiAgICBmdW5jdGlvbiBvYnNlcnZhYmxlKCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIFdyaXRlXG5cbiAgICAgICAgICAgIC8vIElnbm9yZSB3cml0ZXMgaWYgdGhlIHZhbHVlIGhhc24ndCBjaGFuZ2VkXG4gICAgICAgICAgICBpZiAob2JzZXJ2YWJsZS5pc0RpZmZlcmVudChvYnNlcnZhYmxlW29ic2VydmFibGVMYXRlc3RWYWx1ZV0sIGFyZ3VtZW50c1swXSkpIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZhYmxlLnZhbHVlV2lsbE11dGF0ZSgpO1xuICAgICAgICAgICAgICAgIG9ic2VydmFibGVbb2JzZXJ2YWJsZUxhdGVzdFZhbHVlXSA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgICAgICBvYnNlcnZhYmxlLnZhbHVlSGFzTXV0YXRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7IC8vIFBlcm1pdHMgY2hhaW5lZCBhc3NpZ25tZW50c1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVhZFxuICAgICAgICAgICAga28uZGVwZW5kZW5jeURldGVjdGlvbi5yZWdpc3RlckRlcGVuZGVuY3kob2JzZXJ2YWJsZSk7IC8vIFRoZSBjYWxsZXIgb25seSBuZWVkcyB0byBiZSBub3RpZmllZCBvZiBjaGFuZ2VzIGlmIHRoZXkgZGlkIGEgXCJyZWFkXCIgb3BlcmF0aW9uXG4gICAgICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZVtvYnNlcnZhYmxlTGF0ZXN0VmFsdWVdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb2JzZXJ2YWJsZVtvYnNlcnZhYmxlTGF0ZXN0VmFsdWVdID0gaW5pdGlhbFZhbHVlO1xuXG4gICAgLy8gSW5oZXJpdCBmcm9tICdzdWJzY3JpYmFibGUnXG4gICAgaWYgKCFrby51dGlscy5jYW5TZXRQcm90b3R5cGUpIHtcbiAgICAgICAgLy8gJ3N1YnNjcmliYWJsZScgd29uJ3QgYmUgb24gdGhlIHByb3RvdHlwZSBjaGFpbiB1bmxlc3Mgd2UgcHV0IGl0IHRoZXJlIGRpcmVjdGx5XG4gICAgICAgIGtvLnV0aWxzLmV4dGVuZChvYnNlcnZhYmxlLCBrby5zdWJzY3JpYmFibGVbJ2ZuJ10pO1xuICAgIH1cbiAgICBrby5zdWJzY3JpYmFibGVbJ2ZuJ10uaW5pdChvYnNlcnZhYmxlKTtcblxuICAgIC8vIEluaGVyaXQgZnJvbSAnb2JzZXJ2YWJsZSdcbiAgICBrby51dGlscy5zZXRQcm90b3R5cGVPZk9yRXh0ZW5kKG9ic2VydmFibGUsIG9ic2VydmFibGVGbik7XG5cbiAgICBpZiAoa28ub3B0aW9uc1snZGVmZXJVcGRhdGVzJ10pIHtcbiAgICAgICAga28uZXh0ZW5kZXJzWydkZWZlcnJlZCddKG9ic2VydmFibGUsIHRydWUpO1xuICAgIH1cblxuICAgIHJldHVybiBvYnNlcnZhYmxlO1xufVxuXG4vLyBEZWZpbmUgcHJvdG90eXBlIGZvciBvYnNlcnZhYmxlc1xudmFyIG9ic2VydmFibGVGbiA9IHtcbiAgICAnZXF1YWxpdHlDb21wYXJlcic6IHZhbHVlc0FyZVByaW1pdGl2ZUFuZEVxdWFsLFxuICAgIHBlZWs6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpc1tvYnNlcnZhYmxlTGF0ZXN0VmFsdWVdOyB9LFxuICAgIHZhbHVlSGFzTXV0YXRlZDogZnVuY3Rpb24gKCkgeyB0aGlzWydub3RpZnlTdWJzY3JpYmVycyddKHRoaXNbb2JzZXJ2YWJsZUxhdGVzdFZhbHVlXSk7IH0sXG4gICAgdmFsdWVXaWxsTXV0YXRlOiBmdW5jdGlvbiAoKSB7IHRoaXNbJ25vdGlmeVN1YnNjcmliZXJzJ10odGhpc1tvYnNlcnZhYmxlTGF0ZXN0VmFsdWVdLCAnYmVmb3JlQ2hhbmdlJyk7IH1cbn07XG5cbi8vIE5vdGUgdGhhdCBmb3IgYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IHByb3RvIGFzc2lnbm1lbnQsIHRoZVxuLy8gaW5oZXJpdGFuY2UgY2hhaW4gaXMgY3JlYXRlZCBtYW51YWxseSBpbiB0aGUga28ub2JzZXJ2YWJsZSBjb25zdHJ1Y3RvclxuaWYgKGtvLnV0aWxzLmNhblNldFByb3RvdHlwZSkge1xuICAgIGtvLnV0aWxzLnNldFByb3RvdHlwZU9mKG9ic2VydmFibGVGbiwga28uc3Vic2NyaWJhYmxlWydmbiddKTtcbn1cblxudmFyIHByb3RvUHJvcGVydHkgPSBrby5vYnNlcnZhYmxlLnByb3RvUHJvcGVydHkgPSAnX19rb19wcm90b19fJztcbm9ic2VydmFibGVGbltwcm90b1Byb3BlcnR5XSA9IGtvLm9ic2VydmFibGU7XG5cbmtvLmhhc1Byb3RvdHlwZSA9IGZ1bmN0aW9uKGluc3RhbmNlLCBwcm90b3R5cGUpIHtcbiAgICBpZiAoKGluc3RhbmNlID09PSBudWxsKSB8fCAoaW5zdGFuY2UgPT09IHVuZGVmaW5lZCkgfHwgKGluc3RhbmNlW3Byb3RvUHJvcGVydHldID09PSB1bmRlZmluZWQpKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGluc3RhbmNlW3Byb3RvUHJvcGVydHldID09PSBwcm90b3R5cGUpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBrby5oYXNQcm90b3R5cGUoaW5zdGFuY2VbcHJvdG9Qcm9wZXJ0eV0sIHByb3RvdHlwZSk7IC8vIFdhbGsgdGhlIHByb3RvdHlwZSBjaGFpblxufTtcblxua28uaXNPYnNlcnZhYmxlID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgcmV0dXJuIGtvLmhhc1Byb3RvdHlwZShpbnN0YW5jZSwga28ub2JzZXJ2YWJsZSk7XG59XG5rby5pc1dyaXRlYWJsZU9ic2VydmFibGUgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgICAvLyBPYnNlcnZhYmxlXG4gICAgaWYgKCh0eXBlb2YgaW5zdGFuY2UgPT0gJ2Z1bmN0aW9uJykgJiYgaW5zdGFuY2VbcHJvdG9Qcm9wZXJ0eV0gPT09IGtvLm9ic2VydmFibGUpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIC8vIFdyaXRlYWJsZSBkZXBlbmRlbnQgb2JzZXJ2YWJsZVxuICAgIGlmICgodHlwZW9mIGluc3RhbmNlID09ICdmdW5jdGlvbicpICYmIChpbnN0YW5jZVtwcm90b1Byb3BlcnR5XSA9PT0ga28uZGVwZW5kZW50T2JzZXJ2YWJsZSkgJiYgKGluc3RhbmNlLmhhc1dyaXRlRnVuY3Rpb24pKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAvLyBBbnl0aGluZyBlbHNlXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5rby5leHBvcnRTeW1ib2woJ29ic2VydmFibGUnLCBrby5vYnNlcnZhYmxlKTtcbmtvLmV4cG9ydFN5bWJvbCgnaXNPYnNlcnZhYmxlJywga28uaXNPYnNlcnZhYmxlKTtcbmtvLmV4cG9ydFN5bWJvbCgnaXNXcml0ZWFibGVPYnNlcnZhYmxlJywga28uaXNXcml0ZWFibGVPYnNlcnZhYmxlKTtcbmtvLmV4cG9ydFN5bWJvbCgnaXNXcml0YWJsZU9ic2VydmFibGUnLCBrby5pc1dyaXRlYWJsZU9ic2VydmFibGUpO1xua28uZXhwb3J0U3ltYm9sKCdvYnNlcnZhYmxlLmZuJywgb2JzZXJ2YWJsZUZuKTtcbmtvLmV4cG9ydFByb3BlcnR5KG9ic2VydmFibGVGbiwgJ3BlZWsnLCBvYnNlcnZhYmxlRm4ucGVlayk7XG5rby5leHBvcnRQcm9wZXJ0eShvYnNlcnZhYmxlRm4sICd2YWx1ZUhhc011dGF0ZWQnLCBvYnNlcnZhYmxlRm4udmFsdWVIYXNNdXRhdGVkKTtcbmtvLmV4cG9ydFByb3BlcnR5KG9ic2VydmFibGVGbiwgJ3ZhbHVlV2lsbE11dGF0ZScsIG9ic2VydmFibGVGbi52YWx1ZVdpbGxNdXRhdGUpO1xua28ub2JzZXJ2YWJsZUFycmF5ID0gZnVuY3Rpb24gKGluaXRpYWxWYWx1ZXMpIHtcbiAgICBpbml0aWFsVmFsdWVzID0gaW5pdGlhbFZhbHVlcyB8fCBbXTtcblxuICAgIGlmICh0eXBlb2YgaW5pdGlhbFZhbHVlcyAhPSAnb2JqZWN0JyB8fCAhKCdsZW5ndGgnIGluIGluaXRpYWxWYWx1ZXMpKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgYXJndW1lbnQgcGFzc2VkIHdoZW4gaW5pdGlhbGl6aW5nIGFuIG9ic2VydmFibGUgYXJyYXkgbXVzdCBiZSBhbiBhcnJheSwgb3IgbnVsbCwgb3IgdW5kZWZpbmVkLlwiKTtcblxuICAgIHZhciByZXN1bHQgPSBrby5vYnNlcnZhYmxlKGluaXRpYWxWYWx1ZXMpO1xuICAgIGtvLnV0aWxzLnNldFByb3RvdHlwZU9mT3JFeHRlbmQocmVzdWx0LCBrby5vYnNlcnZhYmxlQXJyYXlbJ2ZuJ10pO1xuICAgIHJldHVybiByZXN1bHQuZXh0ZW5kKHsndHJhY2tBcnJheUNoYW5nZXMnOnRydWV9KTtcbn07XG5cbmtvLm9ic2VydmFibGVBcnJheVsnZm4nXSA9IHtcbiAgICAncmVtb3ZlJzogZnVuY3Rpb24gKHZhbHVlT3JQcmVkaWNhdGUpIHtcbiAgICAgICAgdmFyIHVuZGVybHlpbmdBcnJheSA9IHRoaXMucGVlaygpO1xuICAgICAgICB2YXIgcmVtb3ZlZFZhbHVlcyA9IFtdO1xuICAgICAgICB2YXIgcHJlZGljYXRlID0gdHlwZW9mIHZhbHVlT3JQcmVkaWNhdGUgPT0gXCJmdW5jdGlvblwiICYmICFrby5pc09ic2VydmFibGUodmFsdWVPclByZWRpY2F0ZSkgPyB2YWx1ZU9yUHJlZGljYXRlIDogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA9PT0gdmFsdWVPclByZWRpY2F0ZTsgfTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bmRlcmx5aW5nQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHVuZGVybHlpbmdBcnJheVtpXTtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlbW92ZWRWYWx1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVXaWxsTXV0YXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlbW92ZWRWYWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgdW5kZXJseWluZ0FycmF5LnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbW92ZWRWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlSGFzTXV0YXRlZCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZW1vdmVkVmFsdWVzO1xuICAgIH0sXG5cbiAgICAncmVtb3ZlQWxsJzogZnVuY3Rpb24gKGFycmF5T2ZWYWx1ZXMpIHtcbiAgICAgICAgLy8gSWYgeW91IHBhc3NlZCB6ZXJvIGFyZ3MsIHdlIHJlbW92ZSBldmVyeXRoaW5nXG4gICAgICAgIGlmIChhcnJheU9mVmFsdWVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciB1bmRlcmx5aW5nQXJyYXkgPSB0aGlzLnBlZWsoKTtcbiAgICAgICAgICAgIHZhciBhbGxWYWx1ZXMgPSB1bmRlcmx5aW5nQXJyYXkuc2xpY2UoMCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlV2lsbE11dGF0ZSgpO1xuICAgICAgICAgICAgdW5kZXJseWluZ0FycmF5LnNwbGljZSgwLCB1bmRlcmx5aW5nQXJyYXkubGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVIYXNNdXRhdGVkKCk7XG4gICAgICAgICAgICByZXR1cm4gYWxsVmFsdWVzO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHlvdSBwYXNzZWQgYW4gYXJnLCB3ZSBpbnRlcnByZXQgaXQgYXMgYW4gYXJyYXkgb2YgZW50cmllcyB0byByZW1vdmVcbiAgICAgICAgaWYgKCFhcnJheU9mVmFsdWVzKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICByZXR1cm4gdGhpc1sncmVtb3ZlJ10oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4ga28udXRpbHMuYXJyYXlJbmRleE9mKGFycmF5T2ZWYWx1ZXMsIHZhbHVlKSA+PSAwO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgJ2Rlc3Ryb3knOiBmdW5jdGlvbiAodmFsdWVPclByZWRpY2F0ZSkge1xuICAgICAgICB2YXIgdW5kZXJseWluZ0FycmF5ID0gdGhpcy5wZWVrKCk7XG4gICAgICAgIHZhciBwcmVkaWNhdGUgPSB0eXBlb2YgdmFsdWVPclByZWRpY2F0ZSA9PSBcImZ1bmN0aW9uXCIgJiYgIWtvLmlzT2JzZXJ2YWJsZSh2YWx1ZU9yUHJlZGljYXRlKSA/IHZhbHVlT3JQcmVkaWNhdGUgOiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlID09PSB2YWx1ZU9yUHJlZGljYXRlOyB9O1xuICAgICAgICB0aGlzLnZhbHVlV2lsbE11dGF0ZSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gdW5kZXJseWluZ0FycmF5Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB1bmRlcmx5aW5nQXJyYXlbaV07XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKHZhbHVlKSlcbiAgICAgICAgICAgICAgICB1bmRlcmx5aW5nQXJyYXlbaV1bXCJfZGVzdHJveVwiXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZUhhc011dGF0ZWQoKTtcbiAgICB9LFxuXG4gICAgJ2Rlc3Ryb3lBbGwnOiBmdW5jdGlvbiAoYXJyYXlPZlZhbHVlcykge1xuICAgICAgICAvLyBJZiB5b3UgcGFzc2VkIHplcm8gYXJncywgd2UgZGVzdHJveSBldmVyeXRoaW5nXG4gICAgICAgIGlmIChhcnJheU9mVmFsdWVzID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gdGhpc1snZGVzdHJveSddKGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZSB9KTtcblxuICAgICAgICAvLyBJZiB5b3UgcGFzc2VkIGFuIGFyZywgd2UgaW50ZXJwcmV0IGl0IGFzIGFuIGFycmF5IG9mIGVudHJpZXMgdG8gZGVzdHJveVxuICAgICAgICBpZiAoIWFycmF5T2ZWYWx1ZXMpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIHJldHVybiB0aGlzWydkZXN0cm95J10oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4ga28udXRpbHMuYXJyYXlJbmRleE9mKGFycmF5T2ZWYWx1ZXMsIHZhbHVlKSA+PSAwO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgJ2luZGV4T2YnOiBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB2YXIgdW5kZXJseWluZ0FycmF5ID0gdGhpcygpO1xuICAgICAgICByZXR1cm4ga28udXRpbHMuYXJyYXlJbmRleE9mKHVuZGVybHlpbmdBcnJheSwgaXRlbSk7XG4gICAgfSxcblxuICAgICdyZXBsYWNlJzogZnVuY3Rpb24ob2xkSXRlbSwgbmV3SXRlbSkge1xuICAgICAgICB2YXIgaW5kZXggPSB0aGlzWydpbmRleE9mJ10ob2xkSXRlbSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlV2lsbE11dGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5wZWVrKClbaW5kZXhdID0gbmV3SXRlbTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVIYXNNdXRhdGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vLyBOb3RlIHRoYXQgZm9yIGJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBwcm90byBhc3NpZ25tZW50LCB0aGVcbi8vIGluaGVyaXRhbmNlIGNoYWluIGlzIGNyZWF0ZWQgbWFudWFsbHkgaW4gdGhlIGtvLm9ic2VydmFibGVBcnJheSBjb25zdHJ1Y3RvclxuaWYgKGtvLnV0aWxzLmNhblNldFByb3RvdHlwZSkge1xuICAgIGtvLnV0aWxzLnNldFByb3RvdHlwZU9mKGtvLm9ic2VydmFibGVBcnJheVsnZm4nXSwga28ub2JzZXJ2YWJsZVsnZm4nXSk7XG59XG5cbi8vIFBvcHVsYXRlIGtvLm9ic2VydmFibGVBcnJheS5mbiB3aXRoIHJlYWQvd3JpdGUgZnVuY3Rpb25zIGZyb20gbmF0aXZlIGFycmF5c1xuLy8gSW1wb3J0YW50OiBEbyBub3QgYWRkIGFueSBhZGRpdGlvbmFsIGZ1bmN0aW9ucyBoZXJlIHRoYXQgbWF5IHJlYXNvbmFibHkgYmUgdXNlZCB0byAqcmVhZCogZGF0YSBmcm9tIHRoZSBhcnJheVxuLy8gYmVjYXVzZSB3ZSdsbCBldmFsIHRoZW0gd2l0aG91dCBjYXVzaW5nIHN1YnNjcmlwdGlvbnMsIHNvIGtvLmNvbXB1dGVkIG91dHB1dCBjb3VsZCBlbmQgdXAgZ2V0dGluZyBzdGFsZVxua28udXRpbHMuYXJyYXlGb3JFYWNoKFtcInBvcFwiLCBcInB1c2hcIiwgXCJyZXZlcnNlXCIsIFwic2hpZnRcIiwgXCJzb3J0XCIsIFwic3BsaWNlXCIsIFwidW5zaGlmdFwiXSwgZnVuY3Rpb24gKG1ldGhvZE5hbWUpIHtcbiAgICBrby5vYnNlcnZhYmxlQXJyYXlbJ2ZuJ11bbWV0aG9kTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFVzZSBcInBlZWtcIiB0byBhdm9pZCBjcmVhdGluZyBhIHN1YnNjcmlwdGlvbiBpbiBhbnkgY29tcHV0ZWQgdGhhdCB3ZSdyZSBleGVjdXRpbmcgaW4gdGhlIGNvbnRleHQgb2ZcbiAgICAgICAgLy8gKGZvciBjb25zaXN0ZW5jeSB3aXRoIG11dGF0aW5nIHJlZ3VsYXIgb2JzZXJ2YWJsZXMpXG4gICAgICAgIHZhciB1bmRlcmx5aW5nQXJyYXkgPSB0aGlzLnBlZWsoKTtcbiAgICAgICAgdGhpcy52YWx1ZVdpbGxNdXRhdGUoKTtcbiAgICAgICAgdGhpcy5jYWNoZURpZmZGb3JLbm93bk9wZXJhdGlvbih1bmRlcmx5aW5nQXJyYXksIG1ldGhvZE5hbWUsIGFyZ3VtZW50cyk7XG4gICAgICAgIHZhciBtZXRob2RDYWxsUmVzdWx0ID0gdW5kZXJseWluZ0FycmF5W21ldGhvZE5hbWVdLmFwcGx5KHVuZGVybHlpbmdBcnJheSwgYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWx1ZUhhc011dGF0ZWQoKTtcbiAgICAgICAgLy8gVGhlIG5hdGl2ZSBzb3J0IGFuZCByZXZlcnNlIG1ldGhvZHMgcmV0dXJuIGEgcmVmZXJlbmNlIHRvIHRoZSBhcnJheSwgYnV0IGl0IG1ha2VzIG1vcmUgc2Vuc2UgdG8gcmV0dXJuIHRoZSBvYnNlcnZhYmxlIGFycmF5IGluc3RlYWQuXG4gICAgICAgIHJldHVybiBtZXRob2RDYWxsUmVzdWx0ID09PSB1bmRlcmx5aW5nQXJyYXkgPyB0aGlzIDogbWV0aG9kQ2FsbFJlc3VsdDtcbiAgICB9O1xufSk7XG5cbi8vIFBvcHVsYXRlIGtvLm9ic2VydmFibGVBcnJheS5mbiB3aXRoIHJlYWQtb25seSBmdW5jdGlvbnMgZnJvbSBuYXRpdmUgYXJyYXlzXG5rby51dGlscy5hcnJheUZvckVhY2goW1wic2xpY2VcIl0sIGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XG4gICAga28ub2JzZXJ2YWJsZUFycmF5WydmbiddW21ldGhvZE5hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdW5kZXJseWluZ0FycmF5ID0gdGhpcygpO1xuICAgICAgICByZXR1cm4gdW5kZXJseWluZ0FycmF5W21ldGhvZE5hbWVdLmFwcGx5KHVuZGVybHlpbmdBcnJheSwgYXJndW1lbnRzKTtcbiAgICB9O1xufSk7XG5cbmtvLmV4cG9ydFN5bWJvbCgnb2JzZXJ2YWJsZUFycmF5Jywga28ub2JzZXJ2YWJsZUFycmF5KTtcbnZhciBhcnJheUNoYW5nZUV2ZW50TmFtZSA9ICdhcnJheUNoYW5nZSc7XG5rby5leHRlbmRlcnNbJ3RyYWNrQXJyYXlDaGFuZ2VzJ10gPSBmdW5jdGlvbih0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICAvLyBVc2UgdGhlIHByb3ZpZGVkIG9wdGlvbnMtLWVhY2ggY2FsbCB0byB0cmFja0FycmF5Q2hhbmdlcyBvdmVyd3JpdGVzIHRoZSBwcmV2aW91c2x5IHNldCBvcHRpb25zXG4gICAgdGFyZ2V0LmNvbXBhcmVBcnJheU9wdGlvbnMgPSB7fTtcbiAgICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucyA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGtvLnV0aWxzLmV4dGVuZCh0YXJnZXQuY29tcGFyZUFycmF5T3B0aW9ucywgb3B0aW9ucyk7XG4gICAgfVxuICAgIHRhcmdldC5jb21wYXJlQXJyYXlPcHRpb25zWydzcGFyc2UnXSA9IHRydWU7XG5cbiAgICAvLyBPbmx5IG1vZGlmeSB0aGUgdGFyZ2V0IG9ic2VydmFibGUgb25jZVxuICAgIGlmICh0YXJnZXQuY2FjaGVEaWZmRm9yS25vd25PcGVyYXRpb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdHJhY2tpbmdDaGFuZ2VzID0gZmFsc2UsXG4gICAgICAgIGNhY2hlZERpZmYgPSBudWxsLFxuICAgICAgICBhcnJheUNoYW5nZVN1YnNjcmlwdGlvbixcbiAgICAgICAgcGVuZGluZ05vdGlmaWNhdGlvbnMgPSAwLFxuICAgICAgICB1bmRlcmx5aW5nQmVmb3JlU3Vic2NyaXB0aW9uQWRkRnVuY3Rpb24gPSB0YXJnZXQuYmVmb3JlU3Vic2NyaXB0aW9uQWRkLFxuICAgICAgICB1bmRlcmx5aW5nQWZ0ZXJTdWJzY3JpcHRpb25SZW1vdmVGdW5jdGlvbiA9IHRhcmdldC5hZnRlclN1YnNjcmlwdGlvblJlbW92ZTtcblxuICAgIC8vIFdhdGNoIFwic3Vic2NyaWJlXCIgY2FsbHMsIGFuZCBmb3IgYXJyYXkgY2hhbmdlIGV2ZW50cywgZW5zdXJlIGNoYW5nZSB0cmFja2luZyBpcyBlbmFibGVkXG4gICAgdGFyZ2V0LmJlZm9yZVN1YnNjcmlwdGlvbkFkZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAodW5kZXJseWluZ0JlZm9yZVN1YnNjcmlwdGlvbkFkZEZ1bmN0aW9uKVxuICAgICAgICAgICAgdW5kZXJseWluZ0JlZm9yZVN1YnNjcmlwdGlvbkFkZEZ1bmN0aW9uLmNhbGwodGFyZ2V0LCBldmVudCk7XG4gICAgICAgIGlmIChldmVudCA9PT0gYXJyYXlDaGFuZ2VFdmVudE5hbWUpIHtcbiAgICAgICAgICAgIHRyYWNrQ2hhbmdlcygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBXYXRjaCBcImRpc3Bvc2VcIiBjYWxscywgYW5kIGZvciBhcnJheSBjaGFuZ2UgZXZlbnRzLCBlbnN1cmUgY2hhbmdlIHRyYWNraW5nIGlzIGRpc2FibGVkIHdoZW4gYWxsIGFyZSBkaXNwb3NlZFxuICAgIHRhcmdldC5hZnRlclN1YnNjcmlwdGlvblJlbW92ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAodW5kZXJseWluZ0FmdGVyU3Vic2NyaXB0aW9uUmVtb3ZlRnVuY3Rpb24pXG4gICAgICAgICAgICB1bmRlcmx5aW5nQWZ0ZXJTdWJzY3JpcHRpb25SZW1vdmVGdW5jdGlvbi5jYWxsKHRhcmdldCwgZXZlbnQpO1xuICAgICAgICBpZiAoZXZlbnQgPT09IGFycmF5Q2hhbmdlRXZlbnROYW1lICYmICF0YXJnZXQuaGFzU3Vic2NyaXB0aW9uc0ZvckV2ZW50KGFycmF5Q2hhbmdlRXZlbnROYW1lKSkge1xuICAgICAgICAgICAgYXJyYXlDaGFuZ2VTdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgICAgICAgICAgdHJhY2tpbmdDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gdHJhY2tDaGFuZ2VzKCkge1xuICAgICAgICAvLyBDYWxsaW5nICd0cmFja0NoYW5nZXMnIG11bHRpcGxlIHRpbWVzIGlzIHRoZSBzYW1lIGFzIGNhbGxpbmcgaXQgb25jZVxuICAgICAgICBpZiAodHJhY2tpbmdDaGFuZ2VzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cmFja2luZ0NoYW5nZXMgPSB0cnVlO1xuXG4gICAgICAgIC8vIEludGVyY2VwdCBcIm5vdGlmeVN1YnNjcmliZXJzXCIgdG8gdHJhY2sgaG93IG1hbnkgdGltZXMgaXQgd2FzIGNhbGxlZC5cbiAgICAgICAgdmFyIHVuZGVybHlpbmdOb3RpZnlTdWJzY3JpYmVyc0Z1bmN0aW9uID0gdGFyZ2V0Wydub3RpZnlTdWJzY3JpYmVycyddO1xuICAgICAgICB0YXJnZXRbJ25vdGlmeVN1YnNjcmliZXJzJ10gPSBmdW5jdGlvbih2YWx1ZVRvTm90aWZ5LCBldmVudCkge1xuICAgICAgICAgICAgaWYgKCFldmVudCB8fCBldmVudCA9PT0gZGVmYXVsdEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgKytwZW5kaW5nTm90aWZpY2F0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmRlcmx5aW5nTm90aWZ5U3Vic2NyaWJlcnNGdW5jdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEVhY2ggdGltZSB0aGUgYXJyYXkgY2hhbmdlcyB2YWx1ZSwgY2FwdHVyZSBhIGNsb25lIHNvIHRoYXQgb24gdGhlIG5leHRcbiAgICAgICAgLy8gY2hhbmdlIGl0J3MgcG9zc2libGUgdG8gcHJvZHVjZSBhIGRpZmZcbiAgICAgICAgdmFyIHByZXZpb3VzQ29udGVudHMgPSBbXS5jb25jYXQodGFyZ2V0LnBlZWsoKSB8fCBbXSk7XG4gICAgICAgIGNhY2hlZERpZmYgPSBudWxsO1xuICAgICAgICBhcnJheUNoYW5nZVN1YnNjcmlwdGlvbiA9IHRhcmdldC5zdWJzY3JpYmUoZnVuY3Rpb24oY3VycmVudENvbnRlbnRzKSB7XG4gICAgICAgICAgICAvLyBNYWtlIGEgY29weSBvZiB0aGUgY3VycmVudCBjb250ZW50cyBhbmQgZW5zdXJlIGl0J3MgYW4gYXJyYXlcbiAgICAgICAgICAgIGN1cnJlbnRDb250ZW50cyA9IFtdLmNvbmNhdChjdXJyZW50Q29udGVudHMgfHwgW10pO1xuXG4gICAgICAgICAgICAvLyBDb21wdXRlIHRoZSBkaWZmIGFuZCBpc3N1ZSBub3RpZmljYXRpb25zLCBidXQgb25seSBpZiBzb21lb25lIGlzIGxpc3RlbmluZ1xuICAgICAgICAgICAgaWYgKHRhcmdldC5oYXNTdWJzY3JpcHRpb25zRm9yRXZlbnQoYXJyYXlDaGFuZ2VFdmVudE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoYW5nZXMgPSBnZXRDaGFuZ2VzKHByZXZpb3VzQ29udGVudHMsIGN1cnJlbnRDb250ZW50cyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEVsaW1pbmF0ZSByZWZlcmVuY2VzIHRvIHRoZSBvbGQsIHJlbW92ZWQgaXRlbXMsIHNvIHRoZXkgY2FuIGJlIEdDZWRcbiAgICAgICAgICAgIHByZXZpb3VzQ29udGVudHMgPSBjdXJyZW50Q29udGVudHM7XG4gICAgICAgICAgICBjYWNoZWREaWZmID0gbnVsbDtcbiAgICAgICAgICAgIHBlbmRpbmdOb3RpZmljYXRpb25zID0gMDtcblxuICAgICAgICAgICAgaWYgKGNoYW5nZXMgJiYgY2hhbmdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbJ25vdGlmeVN1YnNjcmliZXJzJ10oY2hhbmdlcywgYXJyYXlDaGFuZ2VFdmVudE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDaGFuZ2VzKHByZXZpb3VzQ29udGVudHMsIGN1cnJlbnRDb250ZW50cykge1xuICAgICAgICAvLyBXZSB0cnkgdG8gcmUtdXNlIGNhY2hlZCBkaWZmcy5cbiAgICAgICAgLy8gVGhlIHNjZW5hcmlvcyB3aGVyZSBwZW5kaW5nTm90aWZpY2F0aW9ucyA+IDEgYXJlIHdoZW4gdXNpbmcgcmF0ZS1saW1pdGluZyBvciB0aGUgRGVmZXJyZWQgVXBkYXRlc1xuICAgICAgICAvLyBwbHVnaW4sIHdoaWNoIHdpdGhvdXQgdGhpcyBjaGVjayB3b3VsZCBub3QgYmUgY29tcGF0aWJsZSB3aXRoIGFycmF5Q2hhbmdlIG5vdGlmaWNhdGlvbnMuIE5vcm1hbGx5LFxuICAgICAgICAvLyBub3RpZmljYXRpb25zIGFyZSBpc3N1ZWQgaW1tZWRpYXRlbHkgc28gd2Ugd291bGRuJ3QgYmUgcXVldWVpbmcgdXAgbW9yZSB0aGFuIG9uZS5cbiAgICAgICAgaWYgKCFjYWNoZWREaWZmIHx8IHBlbmRpbmdOb3RpZmljYXRpb25zID4gMSkge1xuICAgICAgICAgICAgY2FjaGVkRGlmZiA9IGtvLnV0aWxzLmNvbXBhcmVBcnJheXMocHJldmlvdXNDb250ZW50cywgY3VycmVudENvbnRlbnRzLCB0YXJnZXQuY29tcGFyZUFycmF5T3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2FjaGVkRGlmZjtcbiAgICB9XG5cbiAgICB0YXJnZXQuY2FjaGVEaWZmRm9yS25vd25PcGVyYXRpb24gPSBmdW5jdGlvbihyYXdBcnJheSwgb3BlcmF0aW9uTmFtZSwgYXJncykge1xuICAgICAgICAvLyBPbmx5IHJ1biBpZiB3ZSdyZSBjdXJyZW50bHkgdHJhY2tpbmcgY2hhbmdlcyBmb3IgdGhpcyBvYnNlcnZhYmxlIGFycmF5XG4gICAgICAgIC8vIGFuZCB0aGVyZSBhcmVuJ3QgYW55IHBlbmRpbmcgZGVmZXJyZWQgbm90aWZpY2F0aW9ucy5cbiAgICAgICAgaWYgKCF0cmFja2luZ0NoYW5nZXMgfHwgcGVuZGluZ05vdGlmaWNhdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGlmZiA9IFtdLFxuICAgICAgICAgICAgYXJyYXlMZW5ndGggPSByYXdBcnJheS5sZW5ndGgsXG4gICAgICAgICAgICBhcmdzTGVuZ3RoID0gYXJncy5sZW5ndGgsXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xuXG4gICAgICAgIGZ1bmN0aW9uIHB1c2hEaWZmKHN0YXR1cywgdmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gZGlmZltkaWZmLmxlbmd0aF0gPSB7ICdzdGF0dXMnOiBzdGF0dXMsICd2YWx1ZSc6IHZhbHVlLCAnaW5kZXgnOiBpbmRleCB9O1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAob3BlcmF0aW9uTmFtZSkge1xuICAgICAgICAgICAgY2FzZSAncHVzaCc6XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gYXJyYXlMZW5ndGg7XG4gICAgICAgICAgICBjYXNlICd1bnNoaWZ0JzpcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgYXJnc0xlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICBwdXNoRGlmZignYWRkZWQnLCBhcmdzW2luZGV4XSwgb2Zmc2V0ICsgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAncG9wJzpcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBhcnJheUxlbmd0aCAtIDE7XG4gICAgICAgICAgICBjYXNlICdzaGlmdCc6XG4gICAgICAgICAgICAgICAgaWYgKGFycmF5TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHB1c2hEaWZmKCdkZWxldGVkJywgcmF3QXJyYXlbb2Zmc2V0XSwgb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3NwbGljZSc6XG4gICAgICAgICAgICAgICAgLy8gTmVnYXRpdmUgc3RhcnQgaW5kZXggbWVhbnMgJ2Zyb20gZW5kIG9mIGFycmF5Jy4gQWZ0ZXIgdGhhdCB3ZSBjbGFtcCB0byBbMC4uLmFycmF5TGVuZ3RoXS5cbiAgICAgICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvc3BsaWNlXG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSBNYXRoLm1pbihNYXRoLm1heCgwLCBhcmdzWzBdIDwgMCA/IGFycmF5TGVuZ3RoICsgYXJnc1swXSA6IGFyZ3NbMF0pLCBhcnJheUxlbmd0aCksXG4gICAgICAgICAgICAgICAgICAgIGVuZERlbGV0ZUluZGV4ID0gYXJnc0xlbmd0aCA9PT0gMSA/IGFycmF5TGVuZ3RoIDogTWF0aC5taW4oc3RhcnRJbmRleCArIChhcmdzWzFdIHx8IDApLCBhcnJheUxlbmd0aCksXG4gICAgICAgICAgICAgICAgICAgIGVuZEFkZEluZGV4ID0gc3RhcnRJbmRleCArIGFyZ3NMZW5ndGggLSAyLFxuICAgICAgICAgICAgICAgICAgICBlbmRJbmRleCA9IE1hdGgubWF4KGVuZERlbGV0ZUluZGV4LCBlbmRBZGRJbmRleCksXG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9ucyA9IFtdLCBkZWxldGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IHN0YXJ0SW5kZXgsIGFyZ3NJbmRleCA9IDI7IGluZGV4IDwgZW5kSW5kZXg7ICsraW5kZXgsICsrYXJnc0luZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IGVuZERlbGV0ZUluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRpb25zLnB1c2gocHVzaERpZmYoJ2RlbGV0ZWQnLCByYXdBcnJheVtpbmRleF0sIGluZGV4KSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IGVuZEFkZEluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25zLnB1c2gocHVzaERpZmYoJ2FkZGVkJywgYXJnc1thcmdzSW5kZXhdLCBpbmRleCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBrby51dGlscy5maW5kTW92ZXNJbkFycmF5Q29tcGFyaXNvbihkZWxldGlvbnMsIGFkZGl0aW9ucyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNhY2hlZERpZmYgPSBkaWZmO1xuICAgIH07XG59O1xudmFyIGNvbXB1dGVkU3RhdGUgPSBrby51dGlscy5jcmVhdGVTeW1ib2xPclN0cmluZygnX3N0YXRlJyk7XG5cbmtvLmNvbXB1dGVkID0ga28uZGVwZW5kZW50T2JzZXJ2YWJsZSA9IGZ1bmN0aW9uIChldmFsdWF0b3JGdW5jdGlvbk9yT3B0aW9ucywgZXZhbHVhdG9yRnVuY3Rpb25UYXJnZXQsIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIGV2YWx1YXRvckZ1bmN0aW9uT3JPcHRpb25zID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIC8vIFNpbmdsZS1wYXJhbWV0ZXIgc3ludGF4IC0gZXZlcnl0aGluZyBpcyBvbiB0aGlzIFwib3B0aW9uc1wiIHBhcmFtXG4gICAgICAgIG9wdGlvbnMgPSBldmFsdWF0b3JGdW5jdGlvbk9yT3B0aW9ucztcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBNdWx0aS1wYXJhbWV0ZXIgc3ludGF4IC0gY29uc3RydWN0IHRoZSBvcHRpb25zIGFjY29yZGluZyB0byB0aGUgcGFyYW1zIHBhc3NlZFxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgaWYgKGV2YWx1YXRvckZ1bmN0aW9uT3JPcHRpb25zKSB7XG4gICAgICAgICAgICBvcHRpb25zW1wicmVhZFwiXSA9IGV2YWx1YXRvckZ1bmN0aW9uT3JPcHRpb25zO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0aW9uc1tcInJlYWRcIl0gIT0gXCJmdW5jdGlvblwiKVxuICAgICAgICB0aHJvdyBFcnJvcihcIlBhc3MgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBrby5jb21wdXRlZFwiKTtcblxuICAgIHZhciB3cml0ZUZ1bmN0aW9uID0gb3B0aW9uc1tcIndyaXRlXCJdO1xuICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgbGF0ZXN0VmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgaXNTdGFsZTogdHJ1ZSxcbiAgICAgICAgaXNCZWluZ0V2YWx1YXRlZDogZmFsc2UsXG4gICAgICAgIHN1cHByZXNzRGlzcG9zYWxVbnRpbERpc3Bvc2VXaGVuUmV0dXJuc0ZhbHNlOiBmYWxzZSxcbiAgICAgICAgaXNEaXNwb3NlZDogZmFsc2UsXG4gICAgICAgIHB1cmU6IGZhbHNlLFxuICAgICAgICBpc1NsZWVwaW5nOiBmYWxzZSxcbiAgICAgICAgcmVhZEZ1bmN0aW9uOiBvcHRpb25zW1wicmVhZFwiXSxcbiAgICAgICAgZXZhbHVhdG9yRnVuY3Rpb25UYXJnZXQ6IGV2YWx1YXRvckZ1bmN0aW9uVGFyZ2V0IHx8IG9wdGlvbnNbXCJvd25lclwiXSxcbiAgICAgICAgZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkOiBvcHRpb25zW1wiZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkXCJdIHx8IG9wdGlvbnMuZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkIHx8IG51bGwsXG4gICAgICAgIGRpc3Bvc2VXaGVuOiBvcHRpb25zW1wiZGlzcG9zZVdoZW5cIl0gfHwgb3B0aW9ucy5kaXNwb3NlV2hlbixcbiAgICAgICAgZG9tTm9kZURpc3Bvc2FsQ2FsbGJhY2s6IG51bGwsXG4gICAgICAgIGRlcGVuZGVuY3lUcmFja2luZzoge30sXG4gICAgICAgIGRlcGVuZGVuY2llc0NvdW50OiAwLFxuICAgICAgICBldmFsdWF0aW9uVGltZW91dEluc3RhbmNlOiBudWxsXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGNvbXB1dGVkT2JzZXJ2YWJsZSgpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdyaXRlRnVuY3Rpb24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIC8vIFdyaXRpbmcgYSB2YWx1ZVxuICAgICAgICAgICAgICAgIHdyaXRlRnVuY3Rpb24uYXBwbHkoc3RhdGUuZXZhbHVhdG9yRnVuY3Rpb25UYXJnZXQsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCB3cml0ZSBhIHZhbHVlIHRvIGEga28uY29tcHV0ZWQgdW5sZXNzIHlvdSBzcGVjaWZ5IGEgJ3dyaXRlJyBvcHRpb24uIElmIHlvdSB3aXNoIHRvIHJlYWQgdGhlIGN1cnJlbnQgdmFsdWUsIGRvbid0IHBhc3MgYW55IHBhcmFtZXRlcnMuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7IC8vIFBlcm1pdHMgY2hhaW5lZCBhc3NpZ25tZW50c1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVhZGluZyB0aGUgdmFsdWVcbiAgICAgICAgICAgIGtvLmRlcGVuZGVuY3lEZXRlY3Rpb24ucmVnaXN0ZXJEZXBlbmRlbmN5KGNvbXB1dGVkT2JzZXJ2YWJsZSk7XG4gICAgICAgICAgICBpZiAoc3RhdGUuaXNTdGFsZSB8fCAoc3RhdGUuaXNTbGVlcGluZyAmJiBjb21wdXRlZE9ic2VydmFibGUuaGF2ZURlcGVuZGVuY2llc0NoYW5nZWQoKSkpIHtcbiAgICAgICAgICAgICAgICBjb21wdXRlZE9ic2VydmFibGUuZXZhbHVhdGVJbW1lZGlhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS5sYXRlc3RWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXB1dGVkT2JzZXJ2YWJsZVtjb21wdXRlZFN0YXRlXSA9IHN0YXRlO1xuICAgIGNvbXB1dGVkT2JzZXJ2YWJsZS5oYXNXcml0ZUZ1bmN0aW9uID0gdHlwZW9mIHdyaXRlRnVuY3Rpb24gPT09IFwiZnVuY3Rpb25cIjtcblxuICAgIC8vIEluaGVyaXQgZnJvbSAnc3Vic2NyaWJhYmxlJ1xuICAgIGlmICgha28udXRpbHMuY2FuU2V0UHJvdG90eXBlKSB7XG4gICAgICAgIC8vICdzdWJzY3JpYmFibGUnIHdvbid0IGJlIG9uIHRoZSBwcm90b3R5cGUgY2hhaW4gdW5sZXNzIHdlIHB1dCBpdCB0aGVyZSBkaXJlY3RseVxuICAgICAgICBrby51dGlscy5leHRlbmQoY29tcHV0ZWRPYnNlcnZhYmxlLCBrby5zdWJzY3JpYmFibGVbJ2ZuJ10pO1xuICAgIH1cbiAgICBrby5zdWJzY3JpYmFibGVbJ2ZuJ10uaW5pdChjb21wdXRlZE9ic2VydmFibGUpO1xuXG4gICAgLy8gSW5oZXJpdCBmcm9tICdjb21wdXRlZCdcbiAgICBrby51dGlscy5zZXRQcm90b3R5cGVPZk9yRXh0ZW5kKGNvbXB1dGVkT2JzZXJ2YWJsZSwgY29tcHV0ZWRGbik7XG5cbiAgICBpZiAob3B0aW9uc1sncHVyZSddKSB7XG4gICAgICAgIHN0YXRlLnB1cmUgPSB0cnVlO1xuICAgICAgICBzdGF0ZS5pc1NsZWVwaW5nID0gdHJ1ZTsgICAgIC8vIFN0YXJ0cyBvZmYgc2xlZXBpbmc7IHdpbGwgYXdha2Ugb24gdGhlIGZpcnN0IHN1YnNjcmlwdGlvblxuICAgICAgICBrby51dGlscy5leHRlbmQoY29tcHV0ZWRPYnNlcnZhYmxlLCBwdXJlQ29tcHV0ZWRPdmVycmlkZXMpO1xuICAgIH0gZWxzZSBpZiAob3B0aW9uc1snZGVmZXJFdmFsdWF0aW9uJ10pIHtcbiAgICAgICAga28udXRpbHMuZXh0ZW5kKGNvbXB1dGVkT2JzZXJ2YWJsZSwgZGVmZXJFdmFsdWF0aW9uT3ZlcnJpZGVzKTtcbiAgICB9XG5cbiAgICBpZiAoa28ub3B0aW9uc1snZGVmZXJVcGRhdGVzJ10pIHtcbiAgICAgICAga28uZXh0ZW5kZXJzWydkZWZlcnJlZCddKGNvbXB1dGVkT2JzZXJ2YWJsZSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgaWYgKERFQlVHKSB7XG4gICAgICAgIC8vICMxNzMxIC0gQWlkIGRlYnVnZ2luZyBieSBleHBvc2luZyB0aGUgY29tcHV0ZWQncyBvcHRpb25zXG4gICAgICAgIGNvbXB1dGVkT2JzZXJ2YWJsZVtcIl9vcHRpb25zXCJdID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICBpZiAoc3RhdGUuZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkKSB7XG4gICAgICAgIC8vIFNpbmNlIHRoaXMgY29tcHV0ZWQgaXMgYXNzb2NpYXRlZCB3aXRoIGEgRE9NIG5vZGUsIGFuZCB3ZSBkb24ndCB3YW50IHRvIGRpc3Bvc2UgdGhlIGNvbXB1dGVkXG4gICAgICAgIC8vIHVudGlsIHRoZSBET00gbm9kZSBpcyAqcmVtb3ZlZCogZnJvbSB0aGUgZG9jdW1lbnQgKGFzIG9wcG9zZWQgdG8gbmV2ZXIgaGF2aW5nIGJlZW4gaW4gdGhlIGRvY3VtZW50KSxcbiAgICAgICAgLy8gd2UnbGwgcHJldmVudCBkaXNwb3NhbCB1bnRpbCBcImRpc3Bvc2VXaGVuXCIgZmlyc3QgcmV0dXJucyBmYWxzZS5cbiAgICAgICAgc3RhdGUuc3VwcHJlc3NEaXNwb3NhbFVudGlsRGlzcG9zZVdoZW5SZXR1cm5zRmFsc2UgPSB0cnVlO1xuXG4gICAgICAgIC8vIGRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZDogdHJ1ZSBjYW4gYmUgdXNlZCB0byBvcHQgaW50byB0aGUgXCJvbmx5IGRpc3Bvc2UgYWZ0ZXIgZmlyc3QgZmFsc2UgcmVzdWx0XCJcbiAgICAgICAgLy8gYmVoYXZpb3VyIGV2ZW4gaWYgdGhlcmUncyBubyBzcGVjaWZpYyBub2RlIHRvIHdhdGNoLiBJbiB0aGF0IGNhc2UsIGNsZWFyIHRoZSBvcHRpb24gc28gd2UgZG9uJ3QgdHJ5XG4gICAgICAgIC8vIHRvIHdhdGNoIGZvciBhIG5vbi1ub2RlJ3MgZGlzcG9zYWwuIFRoaXMgdGVjaG5pcXVlIGlzIGludGVuZGVkIGZvciBLTydzIGludGVybmFsIHVzZSBvbmx5IGFuZCBzaG91bGRuJ3RcbiAgICAgICAgLy8gYmUgZG9jdW1lbnRlZCBvciB1c2VkIGJ5IGFwcGxpY2F0aW9uIGNvZGUsIGFzIGl0J3MgbGlrZWx5IHRvIGNoYW5nZSBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIEtPLlxuICAgICAgICBpZiAoIXN0YXRlLmRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZC5ub2RlVHlwZSkge1xuICAgICAgICAgICAgc3RhdGUuZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEV2YWx1YXRlLCB1bmxlc3Mgc2xlZXBpbmcgb3IgZGVmZXJFdmFsdWF0aW9uIGlzIHRydWVcbiAgICBpZiAoIXN0YXRlLmlzU2xlZXBpbmcgJiYgIW9wdGlvbnNbJ2RlZmVyRXZhbHVhdGlvbiddKSB7XG4gICAgICAgIGNvbXB1dGVkT2JzZXJ2YWJsZS5ldmFsdWF0ZUltbWVkaWF0ZSgpO1xuICAgIH1cblxuICAgIC8vIEF0dGFjaCBhIERPTSBub2RlIGRpc3Bvc2FsIGNhbGxiYWNrIHNvIHRoYXQgdGhlIGNvbXB1dGVkIHdpbGwgYmUgcHJvYWN0aXZlbHkgZGlzcG9zZWQgYXMgc29vbiBhcyB0aGUgbm9kZSBpc1xuICAgIC8vIHJlbW92ZWQgdXNpbmcga28ucmVtb3ZlTm9kZS4gQnV0IHNraXAgaWYgaXNBY3RpdmUgaXMgZmFsc2UgKHRoZXJlIHdpbGwgbmV2ZXIgYmUgYW55IGRlcGVuZGVuY2llcyB0byBkaXNwb3NlKS5cbiAgICBpZiAoc3RhdGUuZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkICYmIGNvbXB1dGVkT2JzZXJ2YWJsZS5pc0FjdGl2ZSgpKSB7XG4gICAgICAgIGtvLnV0aWxzLmRvbU5vZGVEaXNwb3NhbC5hZGREaXNwb3NlQ2FsbGJhY2soc3RhdGUuZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkLCBzdGF0ZS5kb21Ob2RlRGlzcG9zYWxDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbXB1dGVkT2JzZXJ2YWJsZS5kaXNwb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBjb21wdXRlZE9ic2VydmFibGU7XG59O1xuXG4vLyBVdGlsaXR5IGZ1bmN0aW9uIHRoYXQgZGlzcG9zZXMgYSBnaXZlbiBkZXBlbmRlbmN5VHJhY2tpbmcgZW50cnlcbmZ1bmN0aW9uIGNvbXB1dGVkRGlzcG9zZURlcGVuZGVuY3lDYWxsYmFjayhpZCwgZW50cnlUb0Rpc3Bvc2UpIHtcbiAgICBpZiAoZW50cnlUb0Rpc3Bvc2UgIT09IG51bGwgJiYgZW50cnlUb0Rpc3Bvc2UuZGlzcG9zZSkge1xuICAgICAgICBlbnRyeVRvRGlzcG9zZS5kaXNwb3NlKCk7XG4gICAgfVxufVxuXG4vLyBUaGlzIGZ1bmN0aW9uIGdldHMgY2FsbGVkIGVhY2ggdGltZSBhIGRlcGVuZGVuY3kgaXMgZGV0ZWN0ZWQgd2hpbGUgZXZhbHVhdGluZyBhIGNvbXB1dGVkLlxuLy8gSXQncyBmYWN0b3JlZCBvdXQgYXMgYSBzaGFyZWQgZnVuY3Rpb24gdG8gYXZvaWQgY3JlYXRpbmcgdW5uZWNlc3NhcnkgZnVuY3Rpb24gaW5zdGFuY2VzIGR1cmluZyBldmFsdWF0aW9uLlxuZnVuY3Rpb24gY29tcHV0ZWRCZWdpbkRlcGVuZGVuY3lEZXRlY3Rpb25DYWxsYmFjayhzdWJzY3JpYmFibGUsIGlkKSB7XG4gICAgdmFyIGNvbXB1dGVkT2JzZXJ2YWJsZSA9IHRoaXMuY29tcHV0ZWRPYnNlcnZhYmxlLFxuICAgICAgICBzdGF0ZSA9IGNvbXB1dGVkT2JzZXJ2YWJsZVtjb21wdXRlZFN0YXRlXTtcbiAgICBpZiAoIXN0YXRlLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzcG9zYWxDb3VudCAmJiB0aGlzLmRpc3Bvc2FsQ2FuZGlkYXRlc1tpZF0pIHtcbiAgICAgICAgICAgIC8vIERvbid0IHdhbnQgdG8gZGlzcG9zZSB0aGlzIHN1YnNjcmlwdGlvbiwgYXMgaXQncyBzdGlsbCBiZWluZyB1c2VkXG4gICAgICAgICAgICBjb21wdXRlZE9ic2VydmFibGUuYWRkRGVwZW5kZW5jeVRyYWNraW5nKGlkLCBzdWJzY3JpYmFibGUsIHRoaXMuZGlzcG9zYWxDYW5kaWRhdGVzW2lkXSk7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2FsQ2FuZGlkYXRlc1tpZF0gPSBudWxsOyAvLyBObyBuZWVkIHRvIGFjdHVhbGx5IGRlbGV0ZSB0aGUgcHJvcGVydHkgLSBkaXNwb3NhbENhbmRpZGF0ZXMgaXMgYSB0cmFuc2llbnQgb2JqZWN0IGFueXdheVxuICAgICAgICAgICAgLS10aGlzLmRpc3Bvc2FsQ291bnQ7XG4gICAgICAgIH0gZWxzZSBpZiAoIXN0YXRlLmRlcGVuZGVuY3lUcmFja2luZ1tpZF0pIHtcbiAgICAgICAgICAgIC8vIEJyYW5kIG5ldyBzdWJzY3JpcHRpb24gLSBhZGQgaXRcbiAgICAgICAgICAgIGNvbXB1dGVkT2JzZXJ2YWJsZS5hZGREZXBlbmRlbmN5VHJhY2tpbmcoaWQsIHN1YnNjcmliYWJsZSwgc3RhdGUuaXNTbGVlcGluZyA/IHsgX3RhcmdldDogc3Vic2NyaWJhYmxlIH0gOiBjb21wdXRlZE9ic2VydmFibGUuc3Vic2NyaWJlVG9EZXBlbmRlbmN5KHN1YnNjcmliYWJsZSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgY29tcHV0ZWRGbiA9IHtcbiAgICBcImVxdWFsaXR5Q29tcGFyZXJcIjogdmFsdWVzQXJlUHJpbWl0aXZlQW5kRXF1YWwsXG4gICAgZ2V0RGVwZW5kZW5jaWVzQ291bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbY29tcHV0ZWRTdGF0ZV0uZGVwZW5kZW5jaWVzQ291bnQ7XG4gICAgfSxcbiAgICBhZGREZXBlbmRlbmN5VHJhY2tpbmc6IGZ1bmN0aW9uIChpZCwgdGFyZ2V0LCB0cmFja2luZ09iaikge1xuICAgICAgICBpZiAodGhpc1tjb21wdXRlZFN0YXRlXS5wdXJlICYmIHRhcmdldCA9PT0gdGhpcykge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJBICdwdXJlJyBjb21wdXRlZCBtdXN0IG5vdCBiZSBjYWxsZWQgcmVjdXJzaXZlbHlcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzW2NvbXB1dGVkU3RhdGVdLmRlcGVuZGVuY3lUcmFja2luZ1tpZF0gPSB0cmFja2luZ09iajtcbiAgICAgICAgdHJhY2tpbmdPYmouX29yZGVyID0gdGhpc1tjb21wdXRlZFN0YXRlXS5kZXBlbmRlbmNpZXNDb3VudCsrO1xuICAgICAgICB0cmFja2luZ09iai5fdmVyc2lvbiA9IHRhcmdldC5nZXRWZXJzaW9uKCk7XG4gICAgfSxcbiAgICBoYXZlRGVwZW5kZW5jaWVzQ2hhbmdlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaWQsIGRlcGVuZGVuY3ksIGRlcGVuZGVuY3lUcmFja2luZyA9IHRoaXNbY29tcHV0ZWRTdGF0ZV0uZGVwZW5kZW5jeVRyYWNraW5nO1xuICAgICAgICBmb3IgKGlkIGluIGRlcGVuZGVuY3lUcmFja2luZykge1xuICAgICAgICAgICAgaWYgKGRlcGVuZGVuY3lUcmFja2luZy5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmN5ID0gZGVwZW5kZW5jeVRyYWNraW5nW2lkXTtcbiAgICAgICAgICAgICAgICBpZiAoZGVwZW5kZW5jeS5fdGFyZ2V0Lmhhc0NoYW5nZWQoZGVwZW5kZW5jeS5fdmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBtYXJrRGlydHk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gUHJvY2VzcyBcImRpcnR5XCIgZXZlbnRzIGlmIHdlIGNhbiBoYW5kbGUgZGVsYXllZCBub3RpZmljYXRpb25zXG4gICAgICAgIGlmICh0aGlzLl9ldmFsRGVsYXllZCAmJiAhdGhpc1tjb21wdXRlZFN0YXRlXS5pc0JlaW5nRXZhbHVhdGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9ldmFsRGVsYXllZCgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBpc0FjdGl2ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpc1tjb21wdXRlZFN0YXRlXS5pc1N0YWxlIHx8IHRoaXNbY29tcHV0ZWRTdGF0ZV0uZGVwZW5kZW5jaWVzQ291bnQgPiAwO1xuICAgIH0sXG4gICAgcmVzcG9uZFRvQ2hhbmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIElnbm9yZSBcImNoYW5nZVwiIGV2ZW50cyBpZiB3ZSd2ZSBhbHJlYWR5IHNjaGVkdWxlZCBhIGRlbGF5ZWQgbm90aWZpY2F0aW9uXG4gICAgICAgIGlmICghdGhpcy5fbm90aWZpY2F0aW9uSXNQZW5kaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmV2YWx1YXRlUG9zc2libHlBc3luYygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzdWJzY3JpYmVUb0RlcGVuZGVuY3k6IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgaWYgKHRhcmdldC5fZGVmZXJVcGRhdGVzICYmICF0aGlzW2NvbXB1dGVkU3RhdGVdLmRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZCkge1xuICAgICAgICAgICAgdmFyIGRpcnR5U3ViID0gdGFyZ2V0LnN1YnNjcmliZSh0aGlzLm1hcmtEaXJ0eSwgdGhpcywgJ2RpcnR5JyksXG4gICAgICAgICAgICAgICAgY2hhbmdlU3ViID0gdGFyZ2V0LnN1YnNjcmliZSh0aGlzLnJlc3BvbmRUb0NoYW5nZSwgdGhpcyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIF90YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgICAgICAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpcnR5U3ViLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlU3ViLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5zdWJzY3JpYmUodGhpcy5ldmFsdWF0ZVBvc3NpYmx5QXN5bmMsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBldmFsdWF0ZVBvc3NpYmx5QXN5bmM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbXB1dGVkT2JzZXJ2YWJsZSA9IHRoaXMsXG4gICAgICAgICAgICB0aHJvdHRsZUV2YWx1YXRpb25UaW1lb3V0ID0gY29tcHV0ZWRPYnNlcnZhYmxlWyd0aHJvdHRsZUV2YWx1YXRpb24nXTtcbiAgICAgICAgaWYgKHRocm90dGxlRXZhbHVhdGlvblRpbWVvdXQgJiYgdGhyb3R0bGVFdmFsdWF0aW9uVGltZW91dCA+PSAwKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpc1tjb21wdXRlZFN0YXRlXS5ldmFsdWF0aW9uVGltZW91dEluc3RhbmNlKTtcbiAgICAgICAgICAgIHRoaXNbY29tcHV0ZWRTdGF0ZV0uZXZhbHVhdGlvblRpbWVvdXRJbnN0YW5jZSA9IGtvLnV0aWxzLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbXB1dGVkT2JzZXJ2YWJsZS5ldmFsdWF0ZUltbWVkaWF0ZSh0cnVlIC8qbm90aWZ5Q2hhbmdlKi8pO1xuICAgICAgICAgICAgfSwgdGhyb3R0bGVFdmFsdWF0aW9uVGltZW91dCk7XG4gICAgICAgIH0gZWxzZSBpZiAoY29tcHV0ZWRPYnNlcnZhYmxlLl9ldmFsRGVsYXllZCkge1xuICAgICAgICAgICAgY29tcHV0ZWRPYnNlcnZhYmxlLl9ldmFsRGVsYXllZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29tcHV0ZWRPYnNlcnZhYmxlLmV2YWx1YXRlSW1tZWRpYXRlKHRydWUgLypub3RpZnlDaGFuZ2UqLyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGV2YWx1YXRlSW1tZWRpYXRlOiBmdW5jdGlvbiAobm90aWZ5Q2hhbmdlKSB7XG4gICAgICAgIHZhciBjb21wdXRlZE9ic2VydmFibGUgPSB0aGlzLFxuICAgICAgICAgICAgc3RhdGUgPSBjb21wdXRlZE9ic2VydmFibGVbY29tcHV0ZWRTdGF0ZV0sXG4gICAgICAgICAgICBkaXNwb3NlV2hlbiA9IHN0YXRlLmRpc3Bvc2VXaGVuO1xuXG4gICAgICAgIGlmIChzdGF0ZS5pc0JlaW5nRXZhbHVhdGVkKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgZXZhbHVhdGlvbiBvZiBhIGtvLmNvbXB1dGVkIGNhdXNlcyBzaWRlIGVmZmVjdHMsIGl0J3MgcG9zc2libGUgdGhhdCBpdCB3aWxsIHRyaWdnZXIgaXRzIG93biByZS1ldmFsdWF0aW9uLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBub3QgZGVzaXJhYmxlIChpdCdzIGhhcmQgZm9yIGEgZGV2ZWxvcGVyIHRvIHJlYWxpc2UgYSBjaGFpbiBvZiBkZXBlbmRlbmNpZXMgbWlnaHQgY2F1c2UgdGhpcywgYW5kIHRoZXkgYWxtb3N0XG4gICAgICAgICAgICAvLyBjZXJ0YWlubHkgZGlkbid0IGludGVuZCBpbmZpbml0ZSByZS1ldmFsdWF0aW9ucykuIFNvLCBmb3IgcHJlZGljdGFiaWxpdHksIHdlIHNpbXBseSBwcmV2ZW50IGtvLmNvbXB1dGVkcyBmcm9tIGNhdXNpbmdcbiAgICAgICAgICAgIC8vIHRoZWlyIG93biByZS1ldmFsdWF0aW9uLiBGdXJ0aGVyIGRpc2N1c3Npb24gYXQgaHR0cHM6Ly9naXRodWIuY29tL1N0ZXZlU2FuZGVyc29uL2tub2Nrb3V0L3B1bGwvMzg3XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEbyBub3QgZXZhbHVhdGUgKGFuZCBwb3NzaWJseSBjYXB0dXJlIG5ldyBkZXBlbmRlbmNpZXMpIGlmIGRpc3Bvc2VkXG4gICAgICAgIGlmIChzdGF0ZS5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3RhdGUuZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkICYmICFrby51dGlscy5kb21Ob2RlSXNBdHRhY2hlZFRvRG9jdW1lbnQoc3RhdGUuZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkKSB8fCBkaXNwb3NlV2hlbiAmJiBkaXNwb3NlV2hlbigpKSB7XG4gICAgICAgICAgICAvLyBTZWUgY29tbWVudCBhYm92ZSBhYm91dCBzdXBwcmVzc0Rpc3Bvc2FsVW50aWxEaXNwb3NlV2hlblJldHVybnNGYWxzZVxuICAgICAgICAgICAgaWYgKCFzdGF0ZS5zdXBwcmVzc0Rpc3Bvc2FsVW50aWxEaXNwb3NlV2hlblJldHVybnNGYWxzZSkge1xuICAgICAgICAgICAgICAgIGNvbXB1dGVkT2JzZXJ2YWJsZS5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSXQganVzdCBkaWQgcmV0dXJuIGZhbHNlLCBzbyB3ZSBjYW4gc3RvcCBzdXBwcmVzc2luZyBub3dcbiAgICAgICAgICAgIHN0YXRlLnN1cHByZXNzRGlzcG9zYWxVbnRpbERpc3Bvc2VXaGVuUmV0dXJuc0ZhbHNlID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZS5pc0JlaW5nRXZhbHVhdGVkID0gdHJ1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuZXZhbHVhdGVJbW1lZGlhdGVfQ2FsbFJlYWRXaXRoRGVwZW5kZW5jeURldGVjdGlvbihub3RpZnlDaGFuZ2UpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgc3RhdGUuaXNCZWluZ0V2YWx1YXRlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzdGF0ZS5kZXBlbmRlbmNpZXNDb3VudCkge1xuICAgICAgICAgICAgY29tcHV0ZWRPYnNlcnZhYmxlLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZXZhbHVhdGVJbW1lZGlhdGVfQ2FsbFJlYWRXaXRoRGVwZW5kZW5jeURldGVjdGlvbjogZnVuY3Rpb24gKG5vdGlmeUNoYW5nZSkge1xuICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHJlYWxseSBqdXN0IHBhcnQgb2YgdGhlIGV2YWx1YXRlSW1tZWRpYXRlIGxvZ2ljLiBZb3Ugd291bGQgbmV2ZXIgY2FsbCBpdCBmcm9tIGFueXdoZXJlIGVsc2UuXG4gICAgICAgIC8vIEZhY3RvcmluZyBpdCBvdXQgaW50byBhIHNlcGFyYXRlIGZ1bmN0aW9uIG1lYW5zIGl0IGNhbiBiZSBpbmRlcGVuZGVudCBvZiB0aGUgdHJ5L2NhdGNoIGJsb2NrIGluIGV2YWx1YXRlSW1tZWRpYXRlLFxuICAgICAgICAvLyB3aGljaCBjb250cmlidXRlcyB0byBzYXZpbmcgYWJvdXQgNDAlIG9mZiB0aGUgQ1BVIG92ZXJoZWFkIG9mIGNvbXB1dGVkIGV2YWx1YXRpb24gKG9uIFY4IGF0IGxlYXN0KS5cblxuICAgICAgICB2YXIgY29tcHV0ZWRPYnNlcnZhYmxlID0gdGhpcyxcbiAgICAgICAgICAgIHN0YXRlID0gY29tcHV0ZWRPYnNlcnZhYmxlW2NvbXB1dGVkU3RhdGVdO1xuXG4gICAgICAgIC8vIEluaXRpYWxseSwgd2UgYXNzdW1lIHRoYXQgbm9uZSBvZiB0aGUgc3Vic2NyaXB0aW9ucyBhcmUgc3RpbGwgYmVpbmcgdXNlZCAoaS5lLiwgYWxsIGFyZSBjYW5kaWRhdGVzIGZvciBkaXNwb3NhbCkuXG4gICAgICAgIC8vIFRoZW4sIGR1cmluZyBldmFsdWF0aW9uLCB3ZSBjcm9zcyBvZmYgYW55IHRoYXQgYXJlIGluIGZhY3Qgc3RpbGwgYmVpbmcgdXNlZC5cbiAgICAgICAgdmFyIGlzSW5pdGlhbCA9IHN0YXRlLnB1cmUgPyB1bmRlZmluZWQgOiAhc3RhdGUuZGVwZW5kZW5jaWVzQ291bnQsICAgLy8gSWYgd2UncmUgZXZhbHVhdGluZyB3aGVuIHRoZXJlIGFyZSBubyBwcmV2aW91cyBkZXBlbmRlbmNpZXMsIGl0IG11c3QgYmUgdGhlIGZpcnN0IHRpbWVcbiAgICAgICAgICAgIGRlcGVuZGVuY3lEZXRlY3Rpb25Db250ZXh0ID0ge1xuICAgICAgICAgICAgICAgIGNvbXB1dGVkT2JzZXJ2YWJsZTogY29tcHV0ZWRPYnNlcnZhYmxlLFxuICAgICAgICAgICAgICAgIGRpc3Bvc2FsQ2FuZGlkYXRlczogc3RhdGUuZGVwZW5kZW5jeVRyYWNraW5nLFxuICAgICAgICAgICAgICAgIGRpc3Bvc2FsQ291bnQ6IHN0YXRlLmRlcGVuZGVuY2llc0NvdW50XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIGtvLmRlcGVuZGVuY3lEZXRlY3Rpb24uYmVnaW4oe1xuICAgICAgICAgICAgY2FsbGJhY2tUYXJnZXQ6IGRlcGVuZGVuY3lEZXRlY3Rpb25Db250ZXh0LFxuICAgICAgICAgICAgY2FsbGJhY2s6IGNvbXB1dGVkQmVnaW5EZXBlbmRlbmN5RGV0ZWN0aW9uQ2FsbGJhY2ssXG4gICAgICAgICAgICBjb21wdXRlZDogY29tcHV0ZWRPYnNlcnZhYmxlLFxuICAgICAgICAgICAgaXNJbml0aWFsOiBpc0luaXRpYWxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc3RhdGUuZGVwZW5kZW5jeVRyYWNraW5nID0ge307XG4gICAgICAgIHN0YXRlLmRlcGVuZGVuY2llc0NvdW50ID0gMDtcblxuICAgICAgICB2YXIgbmV3VmFsdWUgPSB0aGlzLmV2YWx1YXRlSW1tZWRpYXRlX0NhbGxSZWFkVGhlbkVuZERlcGVuZGVuY3lEZXRlY3Rpb24oc3RhdGUsIGRlcGVuZGVuY3lEZXRlY3Rpb25Db250ZXh0KTtcblxuICAgICAgICBpZiAoY29tcHV0ZWRPYnNlcnZhYmxlLmlzRGlmZmVyZW50KHN0YXRlLmxhdGVzdFZhbHVlLCBuZXdWYWx1ZSkpIHtcbiAgICAgICAgICAgIGlmICghc3RhdGUuaXNTbGVlcGluZykge1xuICAgICAgICAgICAgICAgIGNvbXB1dGVkT2JzZXJ2YWJsZVtcIm5vdGlmeVN1YnNjcmliZXJzXCJdKHN0YXRlLmxhdGVzdFZhbHVlLCBcImJlZm9yZUNoYW5nZVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RhdGUubGF0ZXN0VmFsdWUgPSBuZXdWYWx1ZTtcblxuICAgICAgICAgICAgaWYgKHN0YXRlLmlzU2xlZXBpbmcpIHtcbiAgICAgICAgICAgICAgICBjb21wdXRlZE9ic2VydmFibGUudXBkYXRlVmVyc2lvbigpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChub3RpZnlDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICBjb21wdXRlZE9ic2VydmFibGVbXCJub3RpZnlTdWJzY3JpYmVyc1wiXShzdGF0ZS5sYXRlc3RWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNJbml0aWFsKSB7XG4gICAgICAgICAgICBjb21wdXRlZE9ic2VydmFibGVbXCJub3RpZnlTdWJzY3JpYmVyc1wiXShzdGF0ZS5sYXRlc3RWYWx1ZSwgXCJhd2FrZVwiKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZXZhbHVhdGVJbW1lZGlhdGVfQ2FsbFJlYWRUaGVuRW5kRGVwZW5kZW5jeURldGVjdGlvbjogZnVuY3Rpb24gKHN0YXRlLCBkZXBlbmRlbmN5RGV0ZWN0aW9uQ29udGV4dCkge1xuICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHJlYWxseSBwYXJ0IG9mIHRoZSBldmFsdWF0ZUltbWVkaWF0ZV9DYWxsUmVhZFdpdGhEZXBlbmRlbmN5RGV0ZWN0aW9uIGxvZ2ljLlxuICAgICAgICAvLyBZb3UnZCBuZXZlciBjYWxsIGl0IGZyb20gYW55d2hlcmUgZWxzZS4gRmFjdG9yaW5nIGl0IG91dCBtZWFucyB0aGF0IGV2YWx1YXRlSW1tZWRpYXRlX0NhbGxSZWFkV2l0aERlcGVuZGVuY3lEZXRlY3Rpb25cbiAgICAgICAgLy8gY2FuIGJlIGluZGVwZW5kZW50IG9mIHRyeS9maW5hbGx5IGJsb2Nrcywgd2hpY2ggY29udHJpYnV0ZXMgdG8gc2F2aW5nIGFib3V0IDQwJSBvZmYgdGhlIENQVVxuICAgICAgICAvLyBvdmVyaGVhZCBvZiBjb21wdXRlZCBldmFsdWF0aW9uIChvbiBWOCBhdCBsZWFzdCkuXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciByZWFkRnVuY3Rpb24gPSBzdGF0ZS5yZWFkRnVuY3Rpb247XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuZXZhbHVhdG9yRnVuY3Rpb25UYXJnZXQgPyByZWFkRnVuY3Rpb24uY2FsbChzdGF0ZS5ldmFsdWF0b3JGdW5jdGlvblRhcmdldCkgOiByZWFkRnVuY3Rpb24oKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGtvLmRlcGVuZGVuY3lEZXRlY3Rpb24uZW5kKCk7XG5cbiAgICAgICAgICAgIC8vIEZvciBlYWNoIHN1YnNjcmlwdGlvbiBubyBsb25nZXIgYmVpbmcgdXNlZCwgcmVtb3ZlIGl0IGZyb20gdGhlIGFjdGl2ZSBzdWJzY3JpcHRpb25zIGxpc3QgYW5kIGRpc3Bvc2UgaXRcbiAgICAgICAgICAgIGlmIChkZXBlbmRlbmN5RGV0ZWN0aW9uQ29udGV4dC5kaXNwb3NhbENvdW50ICYmICFzdGF0ZS5pc1NsZWVwaW5nKSB7XG4gICAgICAgICAgICAgICAga28udXRpbHMub2JqZWN0Rm9yRWFjaChkZXBlbmRlbmN5RGV0ZWN0aW9uQ29udGV4dC5kaXNwb3NhbENhbmRpZGF0ZXMsIGNvbXB1dGVkRGlzcG9zZURlcGVuZGVuY3lDYWxsYmFjayk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0YXRlLmlzU3RhbGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcGVlazogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBQZWVrIHdvbid0IHJlLWV2YWx1YXRlLCBleGNlcHQgd2hpbGUgdGhlIGNvbXB1dGVkIGlzIHNsZWVwaW5nIG9yIHRvIGdldCB0aGUgaW5pdGlhbCB2YWx1ZSB3aGVuIFwiZGVmZXJFdmFsdWF0aW9uXCIgaXMgc2V0LlxuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzW2NvbXB1dGVkU3RhdGVdO1xuICAgICAgICBpZiAoKHN0YXRlLmlzU3RhbGUgJiYgIXN0YXRlLmRlcGVuZGVuY2llc0NvdW50KSB8fCAoc3RhdGUuaXNTbGVlcGluZyAmJiB0aGlzLmhhdmVEZXBlbmRlbmNpZXNDaGFuZ2VkKCkpKSB7XG4gICAgICAgICAgICB0aGlzLmV2YWx1YXRlSW1tZWRpYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRlLmxhdGVzdFZhbHVlO1xuICAgIH0sXG4gICAgbGltaXQ6IGZ1bmN0aW9uIChsaW1pdEZ1bmN0aW9uKSB7XG4gICAgICAgIC8vIE92ZXJyaWRlIHRoZSBsaW1pdCBmdW5jdGlvbiB3aXRoIG9uZSB0aGF0IGRlbGF5cyBldmFsdWF0aW9uIGFzIHdlbGxcbiAgICAgICAga28uc3Vic2NyaWJhYmxlWydmbiddLmxpbWl0LmNhbGwodGhpcywgbGltaXRGdW5jdGlvbik7XG4gICAgICAgIHRoaXMuX2V2YWxEZWxheWVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5fbGltaXRCZWZvcmVDaGFuZ2UodGhpc1tjb21wdXRlZFN0YXRlXS5sYXRlc3RWYWx1ZSk7XG5cbiAgICAgICAgICAgIHRoaXNbY29tcHV0ZWRTdGF0ZV0uaXNTdGFsZSA9IHRydWU7IC8vIE1hcmsgYXMgZGlydHlcblxuICAgICAgICAgICAgLy8gUGFzcyB0aGUgb2JzZXJ2YWJsZSB0byB0aGUgXCJsaW1pdFwiIGNvZGUsIHdoaWNoIHdpbGwgYWNjZXNzIGl0IHdoZW5cbiAgICAgICAgICAgIC8vIGl0J3MgdGltZSB0byBkbyB0aGUgbm90aWZpY2F0aW9uLlxuICAgICAgICAgICAgdGhpcy5fbGltaXRDaGFuZ2UodGhpcyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpc1tjb21wdXRlZFN0YXRlXTtcbiAgICAgICAgaWYgKCFzdGF0ZS5pc1NsZWVwaW5nICYmIHN0YXRlLmRlcGVuZGVuY3lUcmFja2luZykge1xuICAgICAgICAgICAga28udXRpbHMub2JqZWN0Rm9yRWFjaChzdGF0ZS5kZXBlbmRlbmN5VHJhY2tpbmcsIGZ1bmN0aW9uIChpZCwgZGVwZW5kZW5jeSkge1xuICAgICAgICAgICAgICAgIGlmIChkZXBlbmRlbmN5LmRpc3Bvc2UpXG4gICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY3kuZGlzcG9zZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLmRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZCAmJiBzdGF0ZS5kb21Ob2RlRGlzcG9zYWxDYWxsYmFjaykge1xuICAgICAgICAgICAga28udXRpbHMuZG9tTm9kZURpc3Bvc2FsLnJlbW92ZURpc3Bvc2VDYWxsYmFjayhzdGF0ZS5kaXNwb3NlV2hlbk5vZGVJc1JlbW92ZWQsIHN0YXRlLmRvbU5vZGVEaXNwb3NhbENhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5kZXBlbmRlbmN5VHJhY2tpbmcgPSBudWxsO1xuICAgICAgICBzdGF0ZS5kZXBlbmRlbmNpZXNDb3VudCA9IDA7XG4gICAgICAgIHN0YXRlLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICBzdGF0ZS5pc1N0YWxlID0gZmFsc2U7XG4gICAgICAgIHN0YXRlLmlzU2xlZXBpbmcgPSBmYWxzZTtcbiAgICAgICAgc3RhdGUuZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkID0gbnVsbDtcbiAgICB9XG59O1xuXG52YXIgcHVyZUNvbXB1dGVkT3ZlcnJpZGVzID0ge1xuICAgIGJlZm9yZVN1YnNjcmlwdGlvbkFkZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIElmIGFzbGVlcCwgd2FrZSB1cCB0aGUgY29tcHV0ZWQgYnkgc3Vic2NyaWJpbmcgdG8gYW55IGRlcGVuZGVuY2llcy5cbiAgICAgICAgdmFyIGNvbXB1dGVkT2JzZXJ2YWJsZSA9IHRoaXMsXG4gICAgICAgICAgICBzdGF0ZSA9IGNvbXB1dGVkT2JzZXJ2YWJsZVtjb21wdXRlZFN0YXRlXTtcbiAgICAgICAgaWYgKCFzdGF0ZS5pc0Rpc3Bvc2VkICYmIHN0YXRlLmlzU2xlZXBpbmcgJiYgZXZlbnQgPT0gJ2NoYW5nZScpIHtcbiAgICAgICAgICAgIHN0YXRlLmlzU2xlZXBpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5pc1N0YWxlIHx8IGNvbXB1dGVkT2JzZXJ2YWJsZS5oYXZlRGVwZW5kZW5jaWVzQ2hhbmdlZCgpKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUuZGVwZW5kZW5jeVRyYWNraW5nID0gbnVsbDtcbiAgICAgICAgICAgICAgICBzdGF0ZS5kZXBlbmRlbmNpZXNDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgc3RhdGUuaXNTdGFsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29tcHV0ZWRPYnNlcnZhYmxlLmV2YWx1YXRlSW1tZWRpYXRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEZpcnN0IHB1dCB0aGUgZGVwZW5kZW5jaWVzIGluIG9yZGVyXG4gICAgICAgICAgICAgICAgdmFyIGRlcGVuZGVjaWVzT3JkZXIgPSBbXTtcbiAgICAgICAgICAgICAgICBrby51dGlscy5vYmplY3RGb3JFYWNoKHN0YXRlLmRlcGVuZGVuY3lUcmFja2luZywgZnVuY3Rpb24gKGlkLCBkZXBlbmRlbmN5KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcGVuZGVjaWVzT3JkZXJbZGVwZW5kZW5jeS5fb3JkZXJdID0gaWQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gTmV4dCwgc3Vic2NyaWJlIHRvIGVhY2ggb25lXG4gICAgICAgICAgICAgICAga28udXRpbHMuYXJyYXlGb3JFYWNoKGRlcGVuZGVjaWVzT3JkZXIsIGZ1bmN0aW9uIChpZCwgb3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlcGVuZGVuY3kgPSBzdGF0ZS5kZXBlbmRlbmN5VHJhY2tpbmdbaWRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gY29tcHV0ZWRPYnNlcnZhYmxlLnN1YnNjcmliZVRvRGVwZW5kZW5jeShkZXBlbmRlbmN5Ll90YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24uX29yZGVyID0gb3JkZXI7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5fdmVyc2lvbiA9IGRlcGVuZGVuY3kuX3ZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmRlcGVuZGVuY3lUcmFja2luZ1tpZF0gPSBzdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXN0YXRlLmlzRGlzcG9zZWQpIHsgICAgIC8vIHRlc3Qgc2luY2UgZXZhbHVhdGluZyBjb3VsZCB0cmlnZ2VyIGRpc3Bvc2FsXG4gICAgICAgICAgICAgICAgY29tcHV0ZWRPYnNlcnZhYmxlW1wibm90aWZ5U3Vic2NyaWJlcnNcIl0oc3RhdGUubGF0ZXN0VmFsdWUsIFwiYXdha2VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGFmdGVyU3Vic2NyaXB0aW9uUmVtb3ZlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpc1tjb21wdXRlZFN0YXRlXTtcbiAgICAgICAgaWYgKCFzdGF0ZS5pc0Rpc3Bvc2VkICYmIGV2ZW50ID09ICdjaGFuZ2UnICYmICF0aGlzLmhhc1N1YnNjcmlwdGlvbnNGb3JFdmVudCgnY2hhbmdlJykpIHtcbiAgICAgICAgICAgIGtvLnV0aWxzLm9iamVjdEZvckVhY2goc3RhdGUuZGVwZW5kZW5jeVRyYWNraW5nLCBmdW5jdGlvbiAoaWQsIGRlcGVuZGVuY3kpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVwZW5kZW5jeS5kaXNwb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmRlcGVuZGVuY3lUcmFja2luZ1tpZF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGFyZ2V0OiBkZXBlbmRlbmN5Ll90YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBfb3JkZXI6IGRlcGVuZGVuY3kuX29yZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3ZlcnNpb246IGRlcGVuZGVuY3kuX3ZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZGVwZW5kZW5jeS5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdGF0ZS5pc1NsZWVwaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXNbXCJub3RpZnlTdWJzY3JpYmVyc1wiXSh1bmRlZmluZWQsIFwiYXNsZWVwXCIpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXRWZXJzaW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIEJlY2F1c2UgYSBwdXJlIGNvbXB1dGVkIGlzIG5vdCBhdXRvbWF0aWNhbGx5IHVwZGF0ZWQgd2hpbGUgaXQgaXMgc2xlZXBpbmcsIHdlIGNhbid0XG4gICAgICAgIC8vIHNpbXBseSByZXR1cm4gdGhlIHZlcnNpb24gbnVtYmVyLiBJbnN0ZWFkLCB3ZSBjaGVjayBpZiBhbnkgb2YgdGhlIGRlcGVuZGVuY2llcyBoYXZlXG4gICAgICAgIC8vIGNoYW5nZWQgYW5kIGNvbmRpdGlvbmFsbHkgcmUtZXZhbHVhdGUgdGhlIGNvbXB1dGVkIG9ic2VydmFibGUuXG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXNbY29tcHV0ZWRTdGF0ZV07XG4gICAgICAgIGlmIChzdGF0ZS5pc1NsZWVwaW5nICYmIChzdGF0ZS5pc1N0YWxlIHx8IHRoaXMuaGF2ZURlcGVuZGVuY2llc0NoYW5nZWQoKSkpIHtcbiAgICAgICAgICAgIHRoaXMuZXZhbHVhdGVJbW1lZGlhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga28uc3Vic2NyaWJhYmxlWydmbiddLmdldFZlcnNpb24uY2FsbCh0aGlzKTtcbiAgICB9XG59O1xuXG52YXIgZGVmZXJFdmFsdWF0aW9uT3ZlcnJpZGVzID0ge1xuICAgIGJlZm9yZVN1YnNjcmlwdGlvbkFkZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIFRoaXMgd2lsbCBmb3JjZSBhIGNvbXB1dGVkIHdpdGggZGVmZXJFdmFsdWF0aW9uIHRvIGV2YWx1YXRlIHdoZW4gdGhlIGZpcnN0IHN1YnNjcmlwdGlvbiBpcyByZWdpc3RlcmVkLlxuICAgICAgICBpZiAoZXZlbnQgPT0gJ2NoYW5nZScgfHwgZXZlbnQgPT0gJ2JlZm9yZUNoYW5nZScpIHtcbiAgICAgICAgICAgIHRoaXMucGVlaygpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLy8gTm90ZSB0aGF0IGZvciBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgcHJvdG8gYXNzaWdubWVudCwgdGhlXG4vLyBpbmhlcml0YW5jZSBjaGFpbiBpcyBjcmVhdGVkIG1hbnVhbGx5IGluIHRoZSBrby5jb21wdXRlZCBjb25zdHJ1Y3RvclxuaWYgKGtvLnV0aWxzLmNhblNldFByb3RvdHlwZSkge1xuICAgIGtvLnV0aWxzLnNldFByb3RvdHlwZU9mKGNvbXB1dGVkRm4sIGtvLnN1YnNjcmliYWJsZVsnZm4nXSk7XG59XG5cbi8vIFNldCB0aGUgcHJvdG8gY2hhaW4gdmFsdWVzIGZvciBrby5oYXNQcm90b3R5cGVcbnZhciBwcm90b1Byb3AgPSBrby5vYnNlcnZhYmxlLnByb3RvUHJvcGVydHk7IC8vID09IFwiX19rb19wcm90b19fXCJcbmtvLmNvbXB1dGVkW3Byb3RvUHJvcF0gPSBrby5vYnNlcnZhYmxlO1xuY29tcHV0ZWRGbltwcm90b1Byb3BdID0ga28uY29tcHV0ZWQ7XG5cbmtvLmlzQ29tcHV0ZWQgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgICByZXR1cm4ga28uaGFzUHJvdG90eXBlKGluc3RhbmNlLCBrby5jb21wdXRlZCk7XG59O1xuXG5rby5pc1B1cmVDb21wdXRlZCA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgIHJldHVybiBrby5oYXNQcm90b3R5cGUoaW5zdGFuY2UsIGtvLmNvbXB1dGVkKVxuICAgICAgICAmJiBpbnN0YW5jZVtjb21wdXRlZFN0YXRlXSAmJiBpbnN0YW5jZVtjb21wdXRlZFN0YXRlXS5wdXJlO1xufTtcblxua28uZXhwb3J0U3ltYm9sKCdjb21wdXRlZCcsIGtvLmNvbXB1dGVkKTtcbmtvLmV4cG9ydFN5bWJvbCgnZGVwZW5kZW50T2JzZXJ2YWJsZScsIGtvLmNvbXB1dGVkKTsgICAgLy8gZXhwb3J0IGtvLmRlcGVuZGVudE9ic2VydmFibGUgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5ICgxLngpXG5rby5leHBvcnRTeW1ib2woJ2lzQ29tcHV0ZWQnLCBrby5pc0NvbXB1dGVkKTtcbmtvLmV4cG9ydFN5bWJvbCgnaXNQdXJlQ29tcHV0ZWQnLCBrby5pc1B1cmVDb21wdXRlZCk7XG5rby5leHBvcnRTeW1ib2woJ2NvbXB1dGVkLmZuJywgY29tcHV0ZWRGbik7XG5rby5leHBvcnRQcm9wZXJ0eShjb21wdXRlZEZuLCAncGVlaycsIGNvbXB1dGVkRm4ucGVlayk7XG5rby5leHBvcnRQcm9wZXJ0eShjb21wdXRlZEZuLCAnZGlzcG9zZScsIGNvbXB1dGVkRm4uZGlzcG9zZSk7XG5rby5leHBvcnRQcm9wZXJ0eShjb21wdXRlZEZuLCAnaXNBY3RpdmUnLCBjb21wdXRlZEZuLmlzQWN0aXZlKTtcbmtvLmV4cG9ydFByb3BlcnR5KGNvbXB1dGVkRm4sICdnZXREZXBlbmRlbmNpZXNDb3VudCcsIGNvbXB1dGVkRm4uZ2V0RGVwZW5kZW5jaWVzQ291bnQpO1xuXG5rby5wdXJlQ29tcHV0ZWQgPSBmdW5jdGlvbiAoZXZhbHVhdG9yRnVuY3Rpb25Pck9wdGlvbnMsIGV2YWx1YXRvckZ1bmN0aW9uVGFyZ2V0KSB7XG4gICAgaWYgKHR5cGVvZiBldmFsdWF0b3JGdW5jdGlvbk9yT3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4ga28uY29tcHV0ZWQoZXZhbHVhdG9yRnVuY3Rpb25Pck9wdGlvbnMsIGV2YWx1YXRvckZ1bmN0aW9uVGFyZ2V0LCB7J3B1cmUnOnRydWV9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBldmFsdWF0b3JGdW5jdGlvbk9yT3B0aW9ucyA9IGtvLnV0aWxzLmV4dGVuZCh7fSwgZXZhbHVhdG9yRnVuY3Rpb25Pck9wdGlvbnMpOyAgIC8vIG1ha2UgYSBjb3B5IG9mIHRoZSBwYXJhbWV0ZXIgb2JqZWN0XG4gICAgICAgIGV2YWx1YXRvckZ1bmN0aW9uT3JPcHRpb25zWydwdXJlJ10gPSB0cnVlO1xuICAgICAgICByZXR1cm4ga28uY29tcHV0ZWQoZXZhbHVhdG9yRnVuY3Rpb25Pck9wdGlvbnMsIGV2YWx1YXRvckZ1bmN0aW9uVGFyZ2V0KTtcbiAgICB9XG59XG5rby5leHBvcnRTeW1ib2woJ3B1cmVDb21wdXRlZCcsIGtvLnB1cmVDb21wdXRlZCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICB2YXIgbWF4TmVzdGVkT2JzZXJ2YWJsZURlcHRoID0gMTA7IC8vIEVzY2FwZSB0aGUgKHVubGlrZWx5KSBwYXRoYWxvZ2ljYWwgY2FzZSB3aGVyZSBhbiBvYnNlcnZhYmxlJ3MgY3VycmVudCB2YWx1ZSBpcyBpdHNlbGYgKG9yIHNpbWlsYXIgcmVmZXJlbmNlIGN5Y2xlKVxuXG4gICAga28udG9KUyA9IGZ1bmN0aW9uKHJvb3RPYmplY3QpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIldoZW4gY2FsbGluZyBrby50b0pTLCBwYXNzIHRoZSBvYmplY3QgeW91IHdhbnQgdG8gY29udmVydC5cIik7XG5cbiAgICAgICAgLy8gV2UganVzdCB1bndyYXAgZXZlcnl0aGluZyBhdCBldmVyeSBsZXZlbCBpbiB0aGUgb2JqZWN0IGdyYXBoXG4gICAgICAgIHJldHVybiBtYXBKc09iamVjdEdyYXBoKHJvb3RPYmplY3QsIGZ1bmN0aW9uKHZhbHVlVG9NYXApIHtcbiAgICAgICAgICAgIC8vIExvb3AgYmVjYXVzZSBhbiBvYnNlcnZhYmxlJ3MgdmFsdWUgbWlnaHQgaW4gdHVybiBiZSBhbm90aGVyIG9ic2VydmFibGUgd3JhcHBlclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGtvLmlzT2JzZXJ2YWJsZSh2YWx1ZVRvTWFwKSAmJiAoaSA8IG1heE5lc3RlZE9ic2VydmFibGVEZXB0aCk7IGkrKylcbiAgICAgICAgICAgICAgICB2YWx1ZVRvTWFwID0gdmFsdWVUb01hcCgpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlVG9NYXA7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBrby50b0pTT04gPSBmdW5jdGlvbihyb290T2JqZWN0LCByZXBsYWNlciwgc3BhY2UpIHsgICAgIC8vIHJlcGxhY2VyIGFuZCBzcGFjZSBhcmUgb3B0aW9uYWxcbiAgICAgICAgdmFyIHBsYWluSmF2YVNjcmlwdE9iamVjdCA9IGtvLnRvSlMocm9vdE9iamVjdCk7XG4gICAgICAgIHJldHVybiBrby51dGlscy5zdHJpbmdpZnlKc29uKHBsYWluSmF2YVNjcmlwdE9iamVjdCwgcmVwbGFjZXIsIHNwYWNlKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gbWFwSnNPYmplY3RHcmFwaChyb290T2JqZWN0LCBtYXBJbnB1dENhbGxiYWNrLCB2aXNpdGVkT2JqZWN0cykge1xuICAgICAgICB2aXNpdGVkT2JqZWN0cyA9IHZpc2l0ZWRPYmplY3RzIHx8IG5ldyBvYmplY3RMb29rdXAoKTtcblxuICAgICAgICByb290T2JqZWN0ID0gbWFwSW5wdXRDYWxsYmFjayhyb290T2JqZWN0KTtcbiAgICAgICAgdmFyIGNhbkhhdmVQcm9wZXJ0aWVzID0gKHR5cGVvZiByb290T2JqZWN0ID09IFwib2JqZWN0XCIpICYmIChyb290T2JqZWN0ICE9PSBudWxsKSAmJiAocm9vdE9iamVjdCAhPT0gdW5kZWZpbmVkKSAmJiAoIShyb290T2JqZWN0IGluc3RhbmNlb2YgUmVnRXhwKSkgJiYgKCEocm9vdE9iamVjdCBpbnN0YW5jZW9mIERhdGUpKSAmJiAoIShyb290T2JqZWN0IGluc3RhbmNlb2YgU3RyaW5nKSkgJiYgKCEocm9vdE9iamVjdCBpbnN0YW5jZW9mIE51bWJlcikpICYmICghKHJvb3RPYmplY3QgaW5zdGFuY2VvZiBCb29sZWFuKSk7XG4gICAgICAgIGlmICghY2FuSGF2ZVByb3BlcnRpZXMpXG4gICAgICAgICAgICByZXR1cm4gcm9vdE9iamVjdDtcblxuICAgICAgICB2YXIgb3V0cHV0UHJvcGVydGllcyA9IHJvb3RPYmplY3QgaW5zdGFuY2VvZiBBcnJheSA/IFtdIDoge307XG4gICAgICAgIHZpc2l0ZWRPYmplY3RzLnNhdmUocm9vdE9iamVjdCwgb3V0cHV0UHJvcGVydGllcyk7XG5cbiAgICAgICAgdmlzaXRQcm9wZXJ0aWVzT3JBcnJheUVudHJpZXMocm9vdE9iamVjdCwgZnVuY3Rpb24oaW5kZXhlcikge1xuICAgICAgICAgICAgdmFyIHByb3BlcnR5VmFsdWUgPSBtYXBJbnB1dENhbGxiYWNrKHJvb3RPYmplY3RbaW5kZXhlcl0pO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiBwcm9wZXJ0eVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgICAgICAgICBvdXRwdXRQcm9wZXJ0aWVzW2luZGV4ZXJdID0gcHJvcGVydHlWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzbHlNYXBwZWRWYWx1ZSA9IHZpc2l0ZWRPYmplY3RzLmdldChwcm9wZXJ0eVZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0UHJvcGVydGllc1tpbmRleGVyXSA9IChwcmV2aW91c2x5TWFwcGVkVmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcHJldmlvdXNseU1hcHBlZFZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG1hcEpzT2JqZWN0R3JhcGgocHJvcGVydHlWYWx1ZSwgbWFwSW5wdXRDYWxsYmFjaywgdmlzaXRlZE9iamVjdHMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG91dHB1dFByb3BlcnRpZXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmlzaXRQcm9wZXJ0aWVzT3JBcnJheUVudHJpZXMocm9vdE9iamVjdCwgdmlzaXRvckNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChyb290T2JqZWN0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm9vdE9iamVjdC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICB2aXNpdG9yQ2FsbGJhY2soaSk7XG5cbiAgICAgICAgICAgIC8vIEZvciBhcnJheXMsIGFsc28gcmVzcGVjdCB0b0pTT04gcHJvcGVydHkgZm9yIGN1c3RvbSBtYXBwaW5ncyAoZml4ZXMgIzI3OClcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygcm9vdE9iamVjdFsndG9KU09OJ10gPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICB2aXNpdG9yQ2FsbGJhY2soJ3RvSlNPTicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgcHJvcGVydHlOYW1lIGluIHJvb3RPYmplY3QpIHtcbiAgICAgICAgICAgICAgICB2aXNpdG9yQ2FsbGJhY2socHJvcGVydHlOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBvYmplY3RMb29rdXAoKSB7XG4gICAgICAgIHRoaXMua2V5cyA9IFtdO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IFtdO1xuICAgIH07XG5cbiAgICBvYmplY3RMb29rdXAucHJvdG90eXBlID0ge1xuICAgICAgICBjb25zdHJ1Y3Rvcjogb2JqZWN0TG9va3VwLFxuICAgICAgICBzYXZlOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZXhpc3RpbmdJbmRleCA9IGtvLnV0aWxzLmFycmF5SW5kZXhPZih0aGlzLmtleXMsIGtleSk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdJbmRleCA+PSAwKVxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzW2V4aXN0aW5nSW5kZXhdID0gdmFsdWU7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgdmFyIGV4aXN0aW5nSW5kZXggPSBrby51dGlscy5hcnJheUluZGV4T2YodGhpcy5rZXlzLCBrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIChleGlzdGluZ0luZGV4ID49IDApID8gdGhpcy52YWx1ZXNbZXhpc3RpbmdJbmRleF0gOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9O1xufSkoKTtcblxua28uZXhwb3J0U3ltYm9sKCd0b0pTJywga28udG9KUyk7XG5rby5leHBvcnRTeW1ib2woJ3RvSlNPTicsIGtvLnRvSlNPTik7XG4oZnVuY3Rpb24gKCkge1xuICAgIHZhciBoYXNEb21EYXRhRXhwYW5kb1Byb3BlcnR5ID0gJ19fa29fX2hhc0RvbURhdGFPcHRpb25WYWx1ZV9fJztcblxuICAgIC8vIE5vcm1hbGx5LCBTRUxFQ1QgZWxlbWVudHMgYW5kIHRoZWlyIE9QVElPTnMgY2FuIG9ubHkgdGFrZSB2YWx1ZSBvZiB0eXBlICdzdHJpbmcnIChiZWNhdXNlIHRoZSB2YWx1ZXNcbiAgICAvLyBhcmUgc3RvcmVkIG9uIERPTSBhdHRyaWJ1dGVzKS4ga28uc2VsZWN0RXh0ZW5zaW9ucyBwcm92aWRlcyBhIHdheSBmb3IgU0VMRUNUcy9PUFRJT05zIHRvIGhhdmUgdmFsdWVzXG4gICAgLy8gdGhhdCBhcmUgYXJiaXRyYXJ5IG9iamVjdHMuIFRoaXMgaXMgdmVyeSBjb252ZW5pZW50IHdoZW4gaW1wbGVtZW50aW5nIHRoaW5ncyBsaWtlIGNhc2NhZGluZyBkcm9wZG93bnMuXG4gICAga28uc2VsZWN0RXh0ZW5zaW9ucyA9IHtcbiAgICAgICAgcmVhZFZhbHVlIDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAgc3dpdGNoIChrby51dGlscy50YWdOYW1lTG93ZXIoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdvcHRpb24nOlxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFtoYXNEb21EYXRhRXhwYW5kb1Byb3BlcnR5XSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrby51dGlscy5kb21EYXRhLmdldChlbGVtZW50LCBrby5iaW5kaW5nSGFuZGxlcnMub3B0aW9ucy5vcHRpb25WYWx1ZURvbURhdGFLZXkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga28udXRpbHMuaWVWZXJzaW9uIDw9IDdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKGVsZW1lbnQuZ2V0QXR0cmlidXRlTm9kZSgndmFsdWUnKSAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZU5vZGUoJ3ZhbHVlJykuc3BlY2lmaWVkID8gZWxlbWVudC52YWx1ZSA6IGVsZW1lbnQudGV4dClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgICAgICBjYXNlICdzZWxlY3QnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5zZWxlY3RlZEluZGV4ID49IDAgPyBrby5zZWxlY3RFeHRlbnNpb25zLnJlYWRWYWx1ZShlbGVtZW50Lm9wdGlvbnNbZWxlbWVudC5zZWxlY3RlZEluZGV4XSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgd3JpdGVWYWx1ZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWUsIGFsbG93VW5zZXQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoa28udXRpbHMudGFnTmFtZUxvd2VyKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnb3B0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKHR5cGVvZiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtvLnV0aWxzLmRvbURhdGEuc2V0KGVsZW1lbnQsIGtvLmJpbmRpbmdIYW5kbGVycy5vcHRpb25zLm9wdGlvblZhbHVlRG9tRGF0YUtleSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzRG9tRGF0YUV4cGFuZG9Qcm9wZXJ0eSBpbiBlbGVtZW50KSB7IC8vIElFIDw9IDggdGhyb3dzIGVycm9ycyBpZiB5b3UgZGVsZXRlIG5vbi1leGlzdGVudCBwcm9wZXJ0aWVzIGZyb20gYSBET00gbm9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZWxlbWVudFtoYXNEb21EYXRhRXhwYW5kb1Byb3BlcnR5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSBhcmJpdHJhcnkgb2JqZWN0IHVzaW5nIERvbURhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrby51dGlscy5kb21EYXRhLnNldChlbGVtZW50LCBrby5iaW5kaW5nSGFuZGxlcnMub3B0aW9ucy5vcHRpb25WYWx1ZURvbURhdGFLZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50W2hhc0RvbURhdGFFeHBhbmRvUHJvcGVydHldID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgdHJlYXRtZW50IG9mIG51bWJlcnMgaXMganVzdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS4gS08gMS4yLjEgd3JvdGUgbnVtZXJpY2FsIHZhbHVlcyB0byBlbGVtZW50LnZhbHVlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgPyB2YWx1ZSA6IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcIlwiIHx8IHZhbHVlID09PSBudWxsKSAgICAgICAvLyBBIGJsYW5rIHN0cmluZyBvciBudWxsIHZhbHVlIHdpbGwgc2VsZWN0IHRoZSBjYXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IC0xO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbiA9IGVsZW1lbnQub3B0aW9ucy5sZW5ndGgsIG9wdGlvblZhbHVlOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25WYWx1ZSA9IGtvLnNlbGVjdEV4dGVuc2lvbnMucmVhZFZhbHVlKGVsZW1lbnQub3B0aW9uc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmNsdWRlIHNwZWNpYWwgY2hlY2sgdG8gaGFuZGxlIHNlbGVjdGluZyBhIGNhcHRpb24gd2l0aCBhIGJsYW5rIHN0cmluZyB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvblZhbHVlID09IHZhbHVlIHx8IChvcHRpb25WYWx1ZSA9PSBcIlwiICYmIHZhbHVlID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYWxsb3dVbnNldCB8fCBzZWxlY3Rpb24gPj0gMCB8fCAodmFsdWUgPT09IHVuZGVmaW5lZCAmJiBlbGVtZW50LnNpemUgPiAxKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZWxlY3RlZEluZGV4ID0gc2VsZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgPT09IG51bGwpIHx8ICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59KSgpO1xuXG5rby5leHBvcnRTeW1ib2woJ3NlbGVjdEV4dGVuc2lvbnMnLCBrby5zZWxlY3RFeHRlbnNpb25zKTtcbmtvLmV4cG9ydFN5bWJvbCgnc2VsZWN0RXh0ZW5zaW9ucy5yZWFkVmFsdWUnLCBrby5zZWxlY3RFeHRlbnNpb25zLnJlYWRWYWx1ZSk7XG5rby5leHBvcnRTeW1ib2woJ3NlbGVjdEV4dGVuc2lvbnMud3JpdGVWYWx1ZScsIGtvLnNlbGVjdEV4dGVuc2lvbnMud3JpdGVWYWx1ZSk7XG5rby5leHByZXNzaW9uUmV3cml0aW5nID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgamF2YVNjcmlwdFJlc2VydmVkV29yZHMgPSBbXCJ0cnVlXCIsIFwiZmFsc2VcIiwgXCJudWxsXCIsIFwidW5kZWZpbmVkXCJdO1xuXG4gICAgLy8gTWF0Y2hlcyBzb21ldGhpbmcgdGhhdCBjYW4gYmUgYXNzaWduZWQgdG8tLWVpdGhlciBhbiBpc29sYXRlZCBpZGVudGlmaWVyIG9yIHNvbWV0aGluZyBlbmRpbmcgd2l0aCBhIHByb3BlcnR5IGFjY2Vzc29yXG4gICAgLy8gVGhpcyBpcyBkZXNpZ25lZCB0byBiZSBzaW1wbGUgYW5kIGF2b2lkIGZhbHNlIG5lZ2F0aXZlcywgYnV0IGNvdWxkIHByb2R1Y2UgZmFsc2UgcG9zaXRpdmVzIChlLmcuLCBhK2IuYykuXG4gICAgLy8gVGhpcyBhbHNvIHdpbGwgbm90IHByb3Blcmx5IGhhbmRsZSBuZXN0ZWQgYnJhY2tldHMgKGUuZy4sIG9iajFbb2JqMlsncHJvcCddXTsgc2VlICM5MTEpLlxuICAgIHZhciBqYXZhU2NyaXB0QXNzaWdubWVudFRhcmdldCA9IC9eKD86WyRfYS16XVskXFx3XSp8KC4rKShcXC5cXHMqWyRfYS16XVskXFx3XSp8XFxbLitcXF0pKSQvaTtcblxuICAgIGZ1bmN0aW9uIGdldFdyaXRlYWJsZVZhbHVlKGV4cHJlc3Npb24pIHtcbiAgICAgICAgaWYgKGtvLnV0aWxzLmFycmF5SW5kZXhPZihqYXZhU2NyaXB0UmVzZXJ2ZWRXb3JkcywgZXhwcmVzc2lvbikgPj0gMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIG1hdGNoID0gZXhwcmVzc2lvbi5tYXRjaChqYXZhU2NyaXB0QXNzaWdubWVudFRhcmdldCk7XG4gICAgICAgIHJldHVybiBtYXRjaCA9PT0gbnVsbCA/IGZhbHNlIDogbWF0Y2hbMV0gPyAoJ09iamVjdCgnICsgbWF0Y2hbMV0gKyAnKScgKyBtYXRjaFsyXSkgOiBleHByZXNzaW9uO1xuICAgIH1cblxuICAgIC8vIFRoZSBmb2xsb3dpbmcgcmVndWxhciBleHByZXNzaW9ucyB3aWxsIGJlIHVzZWQgdG8gc3BsaXQgYW4gb2JqZWN0LWxpdGVyYWwgc3RyaW5nIGludG8gdG9rZW5zXG5cbiAgICAgICAgLy8gVGhlc2UgdHdvIG1hdGNoIHN0cmluZ3MsIGVpdGhlciB3aXRoIGRvdWJsZSBxdW90ZXMgb3Igc2luZ2xlIHF1b3Rlc1xuICAgIHZhciBzdHJpbmdEb3VibGUgPSAnXCIoPzpbXlwiXFxcXFxcXFxdfFxcXFxcXFxcLikqXCInLFxuICAgICAgICBzdHJpbmdTaW5nbGUgPSBcIicoPzpbXidcXFxcXFxcXF18XFxcXFxcXFwuKSonXCIsXG4gICAgICAgIC8vIE1hdGNoZXMgYSByZWd1bGFyIGV4cHJlc3Npb24gKHRleHQgZW5jbG9zZWQgYnkgc2xhc2hlcyksIGJ1dCB3aWxsIGFsc28gbWF0Y2ggc2V0cyBvZiBkaXZpc2lvbnNcbiAgICAgICAgLy8gYXMgYSByZWd1bGFyIGV4cHJlc3Npb24gKHRoaXMgaXMgaGFuZGxlZCBieSB0aGUgcGFyc2luZyBsb29wIGJlbG93KS5cbiAgICAgICAgc3RyaW5nUmVnZXhwID0gJy8oPzpbXi9cXFxcXFxcXF18XFxcXFxcXFwuKSovXFx3KicsXG4gICAgICAgIC8vIFRoZXNlIGNoYXJhY3RlcnMgaGF2ZSBzcGVjaWFsIG1lYW5pbmcgdG8gdGhlIHBhcnNlciBhbmQgbXVzdCBub3QgYXBwZWFyIGluIHRoZSBtaWRkbGUgb2YgYVxuICAgICAgICAvLyB0b2tlbiwgZXhjZXB0IGFzIHBhcnQgb2YgYSBzdHJpbmcuXG4gICAgICAgIHNwZWNpYWxzID0gJyxcIlxcJ3t9KCkvOltcXFxcXScsXG4gICAgICAgIC8vIE1hdGNoIHRleHQgKGF0IGxlYXN0IHR3byBjaGFyYWN0ZXJzKSB0aGF0IGRvZXMgbm90IGNvbnRhaW4gYW55IG9mIHRoZSBhYm92ZSBzcGVjaWFsIGNoYXJhY3RlcnMsXG4gICAgICAgIC8vIGFsdGhvdWdoIHNvbWUgb2YgdGhlIHNwZWNpYWwgY2hhcmFjdGVycyBhcmUgYWxsb3dlZCB0byBzdGFydCBpdCAoYWxsIGJ1dCB0aGUgY29sb24gYW5kIGNvbW1hKS5cbiAgICAgICAgLy8gVGhlIHRleHQgY2FuIGNvbnRhaW4gc3BhY2VzLCBidXQgbGVhZGluZyBvciB0cmFpbGluZyBzcGFjZXMgYXJlIHNraXBwZWQuXG4gICAgICAgIGV2ZXJ5VGhpbmdFbHNlID0gJ1teXFxcXHM6LC9dW14nICsgc3BlY2lhbHMgKyAnXSpbXlxcXFxzJyArIHNwZWNpYWxzICsgJ10nLFxuICAgICAgICAvLyBNYXRjaCBhbnkgbm9uLXNwYWNlIGNoYXJhY3RlciBub3QgbWF0Y2hlZCBhbHJlYWR5LiBUaGlzIHdpbGwgbWF0Y2ggY29sb25zIGFuZCBjb21tYXMsIHNpbmNlIHRoZXkncmVcbiAgICAgICAgLy8gbm90IG1hdGNoZWQgYnkgXCJldmVyeVRoaW5nRWxzZVwiLCBidXQgd2lsbCBhbHNvIG1hdGNoIGFueSBvdGhlciBzaW5nbGUgY2hhcmFjdGVyIHRoYXQgd2Fzbid0IGFscmVhZHlcbiAgICAgICAgLy8gbWF0Y2hlZCAoZm9yIGV4YW1wbGU6IGluIFwiYTogMSwgYjogMlwiLCBlYWNoIG9mIHRoZSBub24tc3BhY2UgY2hhcmFjdGVycyB3aWxsIGJlIG1hdGNoZWQgYnkgb25lTm90U3BhY2UpLlxuICAgICAgICBvbmVOb3RTcGFjZSA9ICdbXlxcXFxzXScsXG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBhY3R1YWwgcmVndWxhciBleHByZXNzaW9uIGJ5IG9yLWluZyB0aGUgYWJvdmUgc3RyaW5ncy4gVGhlIG9yZGVyIGlzIGltcG9ydGFudC5cbiAgICAgICAgYmluZGluZ1Rva2VuID0gUmVnRXhwKHN0cmluZ0RvdWJsZSArICd8JyArIHN0cmluZ1NpbmdsZSArICd8JyArIHN0cmluZ1JlZ2V4cCArICd8JyArIGV2ZXJ5VGhpbmdFbHNlICsgJ3wnICsgb25lTm90U3BhY2UsICdnJyksXG5cbiAgICAgICAgLy8gTWF0Y2ggZW5kIG9mIHByZXZpb3VzIHRva2VuIHRvIGRldGVybWluZSB3aGV0aGVyIGEgc2xhc2ggaXMgYSBkaXZpc2lvbiBvciByZWdleC5cbiAgICAgICAgZGl2aXNpb25Mb29rQmVoaW5kID0gL1tcXF0pXCInQS1aYS16MC05XyRdKyQvLFxuICAgICAgICBrZXl3b3JkUmVnZXhMb29rQmVoaW5kID0geydpbic6MSwncmV0dXJuJzoxLCd0eXBlb2YnOjF9O1xuXG4gICAgZnVuY3Rpb24gcGFyc2VPYmplY3RMaXRlcmFsKG9iamVjdExpdGVyYWxTdHJpbmcpIHtcbiAgICAgICAgLy8gVHJpbSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzcGFjZXMgZnJvbSB0aGUgc3RyaW5nXG4gICAgICAgIHZhciBzdHIgPSBrby51dGlscy5zdHJpbmdUcmltKG9iamVjdExpdGVyYWxTdHJpbmcpO1xuXG4gICAgICAgIC8vIFRyaW0gYnJhY2VzICd7JyBzdXJyb3VuZGluZyB0aGUgd2hvbGUgb2JqZWN0IGxpdGVyYWxcbiAgICAgICAgaWYgKHN0ci5jaGFyQ29kZUF0KDApID09PSAxMjMpIHN0ciA9IHN0ci5zbGljZSgxLCAtMSk7XG5cbiAgICAgICAgLy8gU3BsaXQgaW50byB0b2tlbnNcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdLCB0b2tzID0gc3RyLm1hdGNoKGJpbmRpbmdUb2tlbiksIGtleSwgdmFsdWVzID0gW10sIGRlcHRoID0gMDtcblxuICAgICAgICBpZiAodG9rcykge1xuICAgICAgICAgICAgLy8gQXBwZW5kIGEgY29tbWEgc28gdGhhdCB3ZSBkb24ndCBuZWVkIGEgc2VwYXJhdGUgY29kZSBibG9jayB0byBkZWFsIHdpdGggdGhlIGxhc3QgaXRlbVxuICAgICAgICAgICAgdG9rcy5wdXNoKCcsJyk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCB0b2s7IHRvayA9IHRva3NbaV07ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBjID0gdG9rLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICAgICAgLy8gQSBjb21tYSBzaWduYWxzIHRoZSBlbmQgb2YgYSBrZXkvdmFsdWUgcGFpciBpZiBkZXB0aCBpcyB6ZXJvXG4gICAgICAgICAgICAgICAgaWYgKGMgPT09IDQ0KSB7IC8vIFwiLFwiXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXB0aCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCgoa2V5ICYmIHZhbHVlcy5sZW5ndGgpID8ge2tleToga2V5LCB2YWx1ZTogdmFsdWVzLmpvaW4oJycpfSA6IHsndW5rbm93bic6IGtleSB8fCB2YWx1ZXMuam9pbignJyl9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IGRlcHRoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTaW1wbHkgc2tpcCB0aGUgY29sb24gdGhhdCBzZXBhcmF0ZXMgdGhlIG5hbWUgYW5kIHZhbHVlXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjID09PSA1OCkgeyAvLyBcIjpcIlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRlcHRoICYmICFrZXkgJiYgdmFsdWVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gdmFsdWVzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBBIHNldCBvZiBzbGFzaGVzIGlzIGluaXRpYWxseSBtYXRjaGVkIGFzIGEgcmVndWxhciBleHByZXNzaW9uLCBidXQgY291bGQgYmUgZGl2aXNpb25cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09IDQ3ICYmIGkgJiYgdG9rLmxlbmd0aCA+IDEpIHsgIC8vIFwiL1wiXG4gICAgICAgICAgICAgICAgICAgIC8vIExvb2sgYXQgdGhlIGVuZCBvZiB0aGUgcHJldmlvdXMgdG9rZW4gdG8gZGV0ZXJtaW5lIGlmIHRoZSBzbGFzaCBpcyBhY3R1YWxseSBkaXZpc2lvblxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSB0b2tzW2ktMV0ubWF0Y2goZGl2aXNpb25Mb29rQmVoaW5kKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoICYmICFrZXl3b3JkUmVnZXhMb29rQmVoaW5kW21hdGNoWzBdXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHNsYXNoIGlzIGFjdHVhbGx5IGEgZGl2aXNpb24gcHVuY3R1YXRvcjsgcmUtcGFyc2UgdGhlIHJlbWFpbmRlciBvZiB0aGUgc3RyaW5nIChub3QgaW5jbHVkaW5nIHRoZSBzbGFzaClcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IHN0ci5zdWJzdHIoc3RyLmluZGV4T2YodG9rKSArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9rcyA9IHN0ci5tYXRjaChiaW5kaW5nVG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9rcy5wdXNoKCcsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb250aW51ZSB3aXRoIGp1c3QgdGhlIHNsYXNoXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2sgPSAnLyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJbmNyZW1lbnQgZGVwdGggZm9yIHBhcmVudGhlc2VzLCBicmFjZXMsIGFuZCBicmFja2V0cyBzbyB0aGF0IGludGVyaW9yIGNvbW1hcyBhcmUgaWdub3JlZFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gNDAgfHwgYyA9PT0gMTIzIHx8IGMgPT09IDkxKSB7IC8vICcoJywgJ3snLCAnWydcbiAgICAgICAgICAgICAgICAgICAgKytkZXB0aDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09IDQxIHx8IGMgPT09IDEyNSB8fCBjID09PSA5MykgeyAvLyAnKScsICd9JywgJ10nXG4gICAgICAgICAgICAgICAgICAgIC0tZGVwdGg7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGtleSB3aWxsIGJlIHRoZSBmaXJzdCB0b2tlbjsgaWYgaXQncyBhIHN0cmluZywgdHJpbSB0aGUgcXVvdGVzXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgha2V5ICYmICF2YWx1ZXMubGVuZ3RoICYmIChjID09PSAzNCB8fCBjID09PSAzOSkpIHsgLy8gJ1wiJywgXCInXCJcbiAgICAgICAgICAgICAgICAgICAgdG9rID0gdG9rLnNsaWNlKDEsIC0xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFsdWVzLnB1c2godG9rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8vIFR3by13YXkgYmluZGluZ3MgaW5jbHVkZSBhIHdyaXRlIGZ1bmN0aW9uIHRoYXQgYWxsb3cgdGhlIGhhbmRsZXIgdG8gdXBkYXRlIHRoZSB2YWx1ZSBldmVuIGlmIGl0J3Mgbm90IGFuIG9ic2VydmFibGUuXG4gICAgdmFyIHR3b1dheUJpbmRpbmdzID0ge307XG5cbiAgICBmdW5jdGlvbiBwcmVQcm9jZXNzQmluZGluZ3MoYmluZGluZ3NTdHJpbmdPcktleVZhbHVlQXJyYXksIGJpbmRpbmdPcHRpb25zKSB7XG4gICAgICAgIGJpbmRpbmdPcHRpb25zID0gYmluZGluZ09wdGlvbnMgfHwge307XG5cbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0tleVZhbHVlKGtleSwgdmFsKSB7XG4gICAgICAgICAgICB2YXIgd3JpdGFibGVWYWw7XG4gICAgICAgICAgICBmdW5jdGlvbiBjYWxsUHJlcHJvY2Vzc0hvb2sob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChvYmogJiYgb2JqWydwcmVwcm9jZXNzJ10pID8gKHZhbCA9IG9ialsncHJlcHJvY2VzcyddKHZhbCwga2V5LCBwcm9jZXNzS2V5VmFsdWUpKSA6IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWJpbmRpbmdQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNhbGxQcmVwcm9jZXNzSG9vayhrb1snZ2V0QmluZGluZ0hhbmRsZXInXShrZXkpKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR3b1dheUJpbmRpbmdzW2tleV0gJiYgKHdyaXRhYmxlVmFsID0gZ2V0V3JpdGVhYmxlVmFsdWUodmFsKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRm9yIHR3by13YXkgYmluZGluZ3MsIHByb3ZpZGUgYSB3cml0ZSBtZXRob2QgaW4gY2FzZSB0aGUgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgLy8gaXNuJ3QgYSB3cml0YWJsZSBvYnNlcnZhYmxlLlxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eUFjY2Vzc29yUmVzdWx0U3RyaW5ncy5wdXNoKFwiJ1wiICsga2V5ICsgXCInOmZ1bmN0aW9uKF96KXtcIiArIHdyaXRhYmxlVmFsICsgXCI9X3p9XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFZhbHVlcyBhcmUgd3JhcHBlZCBpbiBhIGZ1bmN0aW9uIHNvIHRoYXQgZWFjaCB2YWx1ZSBjYW4gYmUgYWNjZXNzZWQgaW5kZXBlbmRlbnRseVxuICAgICAgICAgICAgaWYgKG1ha2VWYWx1ZUFjY2Vzc29ycykge1xuICAgICAgICAgICAgICAgIHZhbCA9ICdmdW5jdGlvbigpe3JldHVybiAnICsgdmFsICsgJyB9JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdFN0cmluZ3MucHVzaChcIidcIiArIGtleSArIFwiJzpcIiArIHZhbCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzdWx0U3RyaW5ncyA9IFtdLFxuICAgICAgICAgICAgcHJvcGVydHlBY2Nlc3NvclJlc3VsdFN0cmluZ3MgPSBbXSxcbiAgICAgICAgICAgIG1ha2VWYWx1ZUFjY2Vzc29ycyA9IGJpbmRpbmdPcHRpb25zWyd2YWx1ZUFjY2Vzc29ycyddLFxuICAgICAgICAgICAgYmluZGluZ1BhcmFtcyA9IGJpbmRpbmdPcHRpb25zWydiaW5kaW5nUGFyYW1zJ10sXG4gICAgICAgICAgICBrZXlWYWx1ZUFycmF5ID0gdHlwZW9mIGJpbmRpbmdzU3RyaW5nT3JLZXlWYWx1ZUFycmF5ID09PSBcInN0cmluZ1wiID9cbiAgICAgICAgICAgICAgICBwYXJzZU9iamVjdExpdGVyYWwoYmluZGluZ3NTdHJpbmdPcktleVZhbHVlQXJyYXkpIDogYmluZGluZ3NTdHJpbmdPcktleVZhbHVlQXJyYXk7XG5cbiAgICAgICAga28udXRpbHMuYXJyYXlGb3JFYWNoKGtleVZhbHVlQXJyYXksIGZ1bmN0aW9uKGtleVZhbHVlKSB7XG4gICAgICAgICAgICBwcm9jZXNzS2V5VmFsdWUoa2V5VmFsdWUua2V5IHx8IGtleVZhbHVlWyd1bmtub3duJ10sIGtleVZhbHVlLnZhbHVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHByb3BlcnR5QWNjZXNzb3JSZXN1bHRTdHJpbmdzLmxlbmd0aClcbiAgICAgICAgICAgIHByb2Nlc3NLZXlWYWx1ZSgnX2tvX3Byb3BlcnR5X3dyaXRlcnMnLCBcIntcIiArIHByb3BlcnR5QWNjZXNzb3JSZXN1bHRTdHJpbmdzLmpvaW4oXCIsXCIpICsgXCIgfVwiKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0U3RyaW5ncy5qb2luKFwiLFwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBiaW5kaW5nUmV3cml0ZVZhbGlkYXRvcnM6IFtdLFxuXG4gICAgICAgIHR3b1dheUJpbmRpbmdzOiB0d29XYXlCaW5kaW5ncyxcblxuICAgICAgICBwYXJzZU9iamVjdExpdGVyYWw6IHBhcnNlT2JqZWN0TGl0ZXJhbCxcblxuICAgICAgICBwcmVQcm9jZXNzQmluZGluZ3M6IHByZVByb2Nlc3NCaW5kaW5ncyxcblxuICAgICAgICBrZXlWYWx1ZUFycmF5Q29udGFpbnNLZXk6IGZ1bmN0aW9uKGtleVZhbHVlQXJyYXksIGtleSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlWYWx1ZUFycmF5Lmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIGlmIChrZXlWYWx1ZUFycmF5W2ldWydrZXknXSA9PSBrZXkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIEludGVybmFsLCBwcml2YXRlIEtPIHV0aWxpdHkgZm9yIHVwZGF0aW5nIG1vZGVsIHByb3BlcnRpZXMgZnJvbSB3aXRoaW4gYmluZGluZ3NcbiAgICAgICAgLy8gcHJvcGVydHk6ICAgICAgICAgICAgSWYgdGhlIHByb3BlcnR5IGJlaW5nIHVwZGF0ZWQgaXMgKG9yIG1pZ2h0IGJlKSBhbiBvYnNlcnZhYmxlLCBwYXNzIGl0IGhlcmVcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgSWYgaXQgdHVybnMgb3V0IHRvIGJlIGEgd3JpdGFibGUgb2JzZXJ2YWJsZSwgaXQgd2lsbCBiZSB3cml0dGVuIHRvIGRpcmVjdGx5XG4gICAgICAgIC8vIGFsbEJpbmRpbmdzOiAgICAgICAgIEFuIG9iamVjdCB3aXRoIGEgZ2V0IG1ldGhvZCB0byByZXRyaWV2ZSBiaW5kaW5ncyBpbiB0aGUgY3VycmVudCBleGVjdXRpb24gY29udGV4dC5cbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgVGhpcyB3aWxsIGJlIHNlYXJjaGVkIGZvciBhICdfa29fcHJvcGVydHlfd3JpdGVycycgcHJvcGVydHkgaW4gY2FzZSB5b3UncmUgd3JpdGluZyB0byBhIG5vbi1vYnNlcnZhYmxlXG4gICAgICAgIC8vIGtleTogICAgICAgICAgICAgICAgIFRoZSBrZXkgaWRlbnRpZnlpbmcgdGhlIHByb3BlcnR5IHRvIGJlIHdyaXR0ZW4uIEV4YW1wbGU6IGZvciB7IGhhc0ZvY3VzOiBteVZhbHVlIH0sIHdyaXRlIHRvICdteVZhbHVlJyBieSBzcGVjaWZ5aW5nIHRoZSBrZXkgJ2hhc0ZvY3VzJ1xuICAgICAgICAvLyB2YWx1ZTogICAgICAgICAgICAgICBUaGUgdmFsdWUgdG8gYmUgd3JpdHRlblxuICAgICAgICAvLyBjaGVja0lmRGlmZmVyZW50OiAgICBJZiB0cnVlLCBhbmQgaWYgdGhlIHByb3BlcnR5IGJlaW5nIHdyaXR0ZW4gaXMgYSB3cml0YWJsZSBvYnNlcnZhYmxlLCB0aGUgdmFsdWUgd2lsbCBvbmx5IGJlIHdyaXR0ZW4gaWZcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgaXQgaXMgIT09IGV4aXN0aW5nIHZhbHVlIG9uIHRoYXQgd3JpdGFibGUgb2JzZXJ2YWJsZVxuICAgICAgICB3cml0ZVZhbHVlVG9Qcm9wZXJ0eTogZnVuY3Rpb24ocHJvcGVydHksIGFsbEJpbmRpbmdzLCBrZXksIHZhbHVlLCBjaGVja0lmRGlmZmVyZW50KSB7XG4gICAgICAgICAgICBpZiAoIXByb3BlcnR5IHx8ICFrby5pc09ic2VydmFibGUocHJvcGVydHkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3BXcml0ZXJzID0gYWxsQmluZGluZ3MuZ2V0KCdfa29fcHJvcGVydHlfd3JpdGVycycpO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wV3JpdGVycyAmJiBwcm9wV3JpdGVyc1trZXldKVxuICAgICAgICAgICAgICAgICAgICBwcm9wV3JpdGVyc1trZXldKHZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoa28uaXNXcml0ZWFibGVPYnNlcnZhYmxlKHByb3BlcnR5KSAmJiAoIWNoZWNrSWZEaWZmZXJlbnQgfHwgcHJvcGVydHkucGVlaygpICE9PSB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufSkoKTtcblxua28uZXhwb3J0U3ltYm9sKCdleHByZXNzaW9uUmV3cml0aW5nJywga28uZXhwcmVzc2lvblJld3JpdGluZyk7XG5rby5leHBvcnRTeW1ib2woJ2V4cHJlc3Npb25SZXdyaXRpbmcuYmluZGluZ1Jld3JpdGVWYWxpZGF0b3JzJywga28uZXhwcmVzc2lvblJld3JpdGluZy5iaW5kaW5nUmV3cml0ZVZhbGlkYXRvcnMpO1xua28uZXhwb3J0U3ltYm9sKCdleHByZXNzaW9uUmV3cml0aW5nLnBhcnNlT2JqZWN0TGl0ZXJhbCcsIGtvLmV4cHJlc3Npb25SZXdyaXRpbmcucGFyc2VPYmplY3RMaXRlcmFsKTtcbmtvLmV4cG9ydFN5bWJvbCgnZXhwcmVzc2lvblJld3JpdGluZy5wcmVQcm9jZXNzQmluZGluZ3MnLCBrby5leHByZXNzaW9uUmV3cml0aW5nLnByZVByb2Nlc3NCaW5kaW5ncyk7XG5cbi8vIE1ha2luZyBiaW5kaW5ncyBleHBsaWNpdGx5IGRlY2xhcmUgdGhlbXNlbHZlcyBhcyBcInR3byB3YXlcIiBpc24ndCBpZGVhbCBpbiB0aGUgbG9uZyB0ZXJtIChpdCB3b3VsZCBiZSBiZXR0ZXIgaWZcbi8vIGFsbCBiaW5kaW5ncyBjb3VsZCB1c2UgYW4gb2ZmaWNpYWwgJ3Byb3BlcnR5IHdyaXRlcicgQVBJIHdpdGhvdXQgbmVlZGluZyB0byBkZWNsYXJlIHRoYXQgdGhleSBtaWdodCkuIEhvd2V2ZXIsXG4vLyBzaW5jZSB0aGlzIGlzIG5vdCwgYW5kIGhhcyBuZXZlciBiZWVuLCBhIHB1YmxpYyBBUEkgKF9rb19wcm9wZXJ0eV93cml0ZXJzIHdhcyBuZXZlciBkb2N1bWVudGVkKSwgaXQncyBhY2NlcHRhYmxlXG4vLyBhcyBhbiBpbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBkZXRhaWwgaW4gdGhlIHNob3J0IHRlcm0uXG4vLyBGb3IgdGhvc2UgZGV2ZWxvcGVycyB3aG8gcmVseSBvbiBfa29fcHJvcGVydHlfd3JpdGVycyBpbiB0aGVpciBjdXN0b20gYmluZGluZ3MsIHdlIGV4cG9zZSBfdHdvV2F5QmluZGluZ3MgYXMgYW5cbi8vIHVuZG9jdW1lbnRlZCBmZWF0dXJlIHRoYXQgbWFrZXMgaXQgcmVsYXRpdmVseSBlYXN5IHRvIHVwZ3JhZGUgdG8gS08gMy4wLiBIb3dldmVyLCB0aGlzIGlzIHN0aWxsIG5vdCBhbiBvZmZpY2lhbFxuLy8gcHVibGljIEFQSSwgYW5kIHdlIHJlc2VydmUgdGhlIHJpZ2h0IHRvIHJlbW92ZSBpdCBhdCBhbnkgdGltZSBpZiB3ZSBjcmVhdGUgYSByZWFsIHB1YmxpYyBwcm9wZXJ0eSB3cml0ZXJzIEFQSS5cbmtvLmV4cG9ydFN5bWJvbCgnZXhwcmVzc2lvblJld3JpdGluZy5fdHdvV2F5QmluZGluZ3MnLCBrby5leHByZXNzaW9uUmV3cml0aW5nLnR3b1dheUJpbmRpbmdzKTtcblxuLy8gRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIGRlZmluZSB0aGUgZm9sbG93aW5nIGFsaWFzZXMuIChQcmV2aW91c2x5LCB0aGVzZSBmdW5jdGlvbiBuYW1lcyB3ZXJlIG1pc2xlYWRpbmcgYmVjYXVzZVxuLy8gdGhleSByZWZlcnJlZCB0byBKU09OIHNwZWNpZmljYWxseSwgZXZlbiB0aG91Z2ggdGhleSBhY3R1YWxseSB3b3JrIHdpdGggYXJiaXRyYXJ5IEphdmFTY3JpcHQgb2JqZWN0IGxpdGVyYWwgZXhwcmVzc2lvbnMuKVxua28uZXhwb3J0U3ltYm9sKCdqc29uRXhwcmVzc2lvblJld3JpdGluZycsIGtvLmV4cHJlc3Npb25SZXdyaXRpbmcpO1xua28uZXhwb3J0U3ltYm9sKCdqc29uRXhwcmVzc2lvblJld3JpdGluZy5pbnNlcnRQcm9wZXJ0eUFjY2Vzc29yc0ludG9Kc29uJywga28uZXhwcmVzc2lvblJld3JpdGluZy5wcmVQcm9jZXNzQmluZGluZ3MpO1xuKGZ1bmN0aW9uKCkge1xuICAgIC8vIFwiVmlydHVhbCBlbGVtZW50c1wiIGlzIGFuIGFic3RyYWN0aW9uIG9uIHRvcCBvZiB0aGUgdXN1YWwgRE9NIEFQSSB3aGljaCB1bmRlcnN0YW5kcyB0aGUgbm90aW9uIHRoYXQgY29tbWVudCBub2Rlc1xuICAgIC8vIG1heSBiZSB1c2VkIHRvIHJlcHJlc2VudCBoaWVyYXJjaHkgKGluIGFkZGl0aW9uIHRvIHRoZSBET00ncyBuYXR1cmFsIGhpZXJhcmNoeSkuXG4gICAgLy8gSWYgeW91IGNhbGwgdGhlIERPTS1tYW5pcHVsYXRpbmcgZnVuY3Rpb25zIG9uIGtvLnZpcnR1YWxFbGVtZW50cywgeW91IHdpbGwgYmUgYWJsZSB0byByZWFkIGFuZCB3cml0ZSB0aGUgc3RhdGVcbiAgICAvLyBvZiB0aGF0IHZpcnR1YWwgaGllcmFyY2h5XG4gICAgLy9cbiAgICAvLyBUaGUgcG9pbnQgb2YgYWxsIHRoaXMgaXMgdG8gc3VwcG9ydCBjb250YWluZXJsZXNzIHRlbXBsYXRlcyAoZS5nLiwgPCEtLSBrbyBmb3JlYWNoOnNvbWVDb2xsZWN0aW9uIC0tPmJsYWg8IS0tIC9rbyAtLT4pXG4gICAgLy8gd2l0aG91dCBoYXZpbmcgdG8gc2NhdHRlciBzcGVjaWFsIGNhc2VzIGFsbCBvdmVyIHRoZSBiaW5kaW5nIGFuZCB0ZW1wbGF0aW5nIGNvZGUuXG5cbiAgICAvLyBJRSA5IGNhbm5vdCByZWxpYWJseSByZWFkIHRoZSBcIm5vZGVWYWx1ZVwiIHByb3BlcnR5IG9mIGEgY29tbWVudCBub2RlIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL1N0ZXZlU2FuZGVyc29uL2tub2Nrb3V0L2lzc3Vlcy8xODYpXG4gICAgLy8gYnV0IGl0IGRvZXMgZ2l2ZSB0aGVtIGEgbm9uc3RhbmRhcmQgYWx0ZXJuYXRpdmUgcHJvcGVydHkgY2FsbGVkIFwidGV4dFwiIHRoYXQgaXQgY2FuIHJlYWQgcmVsaWFibHkuIE90aGVyIGJyb3dzZXJzIGRvbid0IGhhdmUgdGhhdCBwcm9wZXJ0eS5cbiAgICAvLyBTbywgdXNlIG5vZGUudGV4dCB3aGVyZSBhdmFpbGFibGUsIGFuZCBub2RlLm5vZGVWYWx1ZSBlbHNld2hlcmVcbiAgICB2YXIgY29tbWVudE5vZGVzSGF2ZVRleHRQcm9wZXJ0eSA9IGRvY3VtZW50ICYmIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoXCJ0ZXN0XCIpLnRleHQgPT09IFwiPCEtLXRlc3QtLT5cIjtcblxuICAgIHZhciBzdGFydENvbW1lbnRSZWdleCA9IGNvbW1lbnROb2Rlc0hhdmVUZXh0UHJvcGVydHkgPyAvXjwhLS1cXHMqa28oPzpcXHMrKFtcXHNcXFNdKykpP1xccyotLT4kLyA6IC9eXFxzKmtvKD86XFxzKyhbXFxzXFxTXSspKT9cXHMqJC87XG4gICAgdmFyIGVuZENvbW1lbnRSZWdleCA9ICAgY29tbWVudE5vZGVzSGF2ZVRleHRQcm9wZXJ0eSA/IC9ePCEtLVxccypcXC9rb1xccyotLT4kLyA6IC9eXFxzKlxcL2tvXFxzKiQvO1xuICAgIHZhciBodG1sVGFnc1dpdGhPcHRpb25hbGx5Q2xvc2luZ0NoaWxkcmVuID0geyAndWwnOiB0cnVlLCAnb2wnOiB0cnVlIH07XG5cbiAgICBmdW5jdGlvbiBpc1N0YXJ0Q29tbWVudChub2RlKSB7XG4gICAgICAgIHJldHVybiAobm9kZS5ub2RlVHlwZSA9PSA4KSAmJiBzdGFydENvbW1lbnRSZWdleC50ZXN0KGNvbW1lbnROb2Rlc0hhdmVUZXh0UHJvcGVydHkgPyBub2RlLnRleHQgOiBub2RlLm5vZGVWYWx1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNFbmRDb21tZW50KG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIChub2RlLm5vZGVUeXBlID09IDgpICYmIGVuZENvbW1lbnRSZWdleC50ZXN0KGNvbW1lbnROb2Rlc0hhdmVUZXh0UHJvcGVydHkgPyBub2RlLnRleHQgOiBub2RlLm5vZGVWYWx1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VmlydHVhbENoaWxkcmVuKHN0YXJ0Q29tbWVudCwgYWxsb3dVbmJhbGFuY2VkKSB7XG4gICAgICAgIHZhciBjdXJyZW50Tm9kZSA9IHN0YXJ0Q29tbWVudDtcbiAgICAgICAgdmFyIGRlcHRoID0gMTtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gW107XG4gICAgICAgIHdoaWxlIChjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgICAgICBpZiAoaXNFbmRDb21tZW50KGN1cnJlbnROb2RlKSkge1xuICAgICAgICAgICAgICAgIGRlcHRoLS07XG4gICAgICAgICAgICAgICAgaWYgKGRlcHRoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGRyZW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goY3VycmVudE5vZGUpO1xuXG4gICAgICAgICAgICBpZiAoaXNTdGFydENvbW1lbnQoY3VycmVudE5vZGUpKVxuICAgICAgICAgICAgICAgIGRlcHRoKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhbGxvd1VuYmFsYW5jZWQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBjbG9zaW5nIGNvbW1lbnQgdGFnIHRvIG1hdGNoOiBcIiArIHN0YXJ0Q29tbWVudC5ub2RlVmFsdWUpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRNYXRjaGluZ0VuZENvbW1lbnQoc3RhcnRDb21tZW50LCBhbGxvd1VuYmFsYW5jZWQpIHtcbiAgICAgICAgdmFyIGFsbFZpcnR1YWxDaGlsZHJlbiA9IGdldFZpcnR1YWxDaGlsZHJlbihzdGFydENvbW1lbnQsIGFsbG93VW5iYWxhbmNlZCk7XG4gICAgICAgIGlmIChhbGxWaXJ0dWFsQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmIChhbGxWaXJ0dWFsQ2hpbGRyZW4ubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gYWxsVmlydHVhbENoaWxkcmVuW2FsbFZpcnR1YWxDaGlsZHJlbi5sZW5ndGggLSAxXS5uZXh0U2libGluZztcbiAgICAgICAgICAgIHJldHVybiBzdGFydENvbW1lbnQubmV4dFNpYmxpbmc7XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIE11c3QgaGF2ZSBubyBtYXRjaGluZyBlbmQgY29tbWVudCwgYW5kIGFsbG93VW5iYWxhbmNlZCBpcyB0cnVlXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VW5iYWxhbmNlZENoaWxkVGFncyhub2RlKSB7XG4gICAgICAgIC8vIGUuZy4sIGZyb20gPGRpdj5PSzwvZGl2PjwhLS0ga28gYmxhaCAtLT48c3Bhbj5Bbm90aGVyPC9zcGFuPiwgcmV0dXJuczogPCEtLSBrbyBibGFoIC0tPjxzcGFuPkFub3RoZXI8L3NwYW4+XG4gICAgICAgIC8vICAgICAgIGZyb20gPGRpdj5PSzwvZGl2PjwhLS0gL2tvIC0tPjwhLS0gL2tvIC0tPiwgICAgICAgICAgICAgcmV0dXJuczogPCEtLSAva28gLS0+PCEtLSAva28gLS0+XG4gICAgICAgIHZhciBjaGlsZE5vZGUgPSBub2RlLmZpcnN0Q2hpbGQsIGNhcHR1cmVSZW1haW5pbmcgPSBudWxsO1xuICAgICAgICBpZiAoY2hpbGROb2RlKSB7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKGNhcHR1cmVSZW1haW5pbmcpICAgICAgICAgICAgICAgICAgIC8vIFdlIGFscmVhZHkgaGl0IGFuIHVuYmFsYW5jZWQgbm9kZSBhbmQgYXJlIG5vdyBqdXN0IHNjb29waW5nIHVwIGFsbCBzdWJzZXF1ZW50IG5vZGVzXG4gICAgICAgICAgICAgICAgICAgIGNhcHR1cmVSZW1haW5pbmcucHVzaChjaGlsZE5vZGUpO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzU3RhcnRDb21tZW50KGNoaWxkTm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoaW5nRW5kQ29tbWVudCA9IGdldE1hdGNoaW5nRW5kQ29tbWVudChjaGlsZE5vZGUsIC8qIGFsbG93VW5iYWxhbmNlZDogKi8gdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGluZ0VuZENvbW1lbnQpICAgICAgICAgICAgIC8vIEl0J3MgYSBiYWxhbmNlZCB0YWcsIHNvIHNraXAgaW1tZWRpYXRlbHkgdG8gdGhlIGVuZCBvZiB0aGlzIHZpcnR1YWwgc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZE5vZGUgPSBtYXRjaGluZ0VuZENvbW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVSZW1haW5pbmcgPSBbY2hpbGROb2RlXTsgLy8gSXQncyB1bmJhbGFuY2VkLCBzbyBzdGFydCBjYXB0dXJpbmcgZnJvbSB0aGlzIHBvaW50XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0VuZENvbW1lbnQoY2hpbGROb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXB0dXJlUmVtYWluaW5nID0gW2NoaWxkTm9kZV07ICAgICAvLyBJdCdzIHVuYmFsYW5jZWQgKGlmIGl0IHdhc24ndCwgd2UnZCBoYXZlIHNraXBwZWQgb3ZlciBpdCBhbHJlYWR5KSwgc28gc3RhcnQgY2FwdHVyaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAoY2hpbGROb2RlID0gY2hpbGROb2RlLm5leHRTaWJsaW5nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FwdHVyZVJlbWFpbmluZztcbiAgICB9XG5cbiAgICBrby52aXJ0dWFsRWxlbWVudHMgPSB7XG4gICAgICAgIGFsbG93ZWRCaW5kaW5nczoge30sXG5cbiAgICAgICAgY2hpbGROb2RlczogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIGlzU3RhcnRDb21tZW50KG5vZGUpID8gZ2V0VmlydHVhbENoaWxkcmVuKG5vZGUpIDogbm9kZS5jaGlsZE5vZGVzO1xuICAgICAgICB9LFxuXG4gICAgICAgIGVtcHR5Tm9kZTogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgaWYgKCFpc1N0YXJ0Q29tbWVudChub2RlKSlcbiAgICAgICAgICAgICAgICBrby51dGlscy5lbXB0eURvbU5vZGUobm9kZSk7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgdmlydHVhbENoaWxkcmVuID0ga28udmlydHVhbEVsZW1lbnRzLmNoaWxkTm9kZXMobm9kZSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSB2aXJ0dWFsQ2hpbGRyZW4ubGVuZ3RoOyBpIDwgajsgaSsrKVxuICAgICAgICAgICAgICAgICAgICBrby5yZW1vdmVOb2RlKHZpcnR1YWxDaGlsZHJlbltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0RG9tTm9kZUNoaWxkcmVuOiBmdW5jdGlvbihub2RlLCBjaGlsZE5vZGVzKSB7XG4gICAgICAgICAgICBpZiAoIWlzU3RhcnRDb21tZW50KG5vZGUpKVxuICAgICAgICAgICAgICAgIGtvLnV0aWxzLnNldERvbU5vZGVDaGlsZHJlbihub2RlLCBjaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGtvLnZpcnR1YWxFbGVtZW50cy5lbXB0eU5vZGUobm9kZSk7XG4gICAgICAgICAgICAgICAgdmFyIGVuZENvbW1lbnROb2RlID0gbm9kZS5uZXh0U2libGluZzsgLy8gTXVzdCBiZSB0aGUgbmV4dCBzaWJsaW5nLCBhcyB3ZSBqdXN0IGVtcHRpZWQgdGhlIGNoaWxkcmVuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBjaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGo7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgZW5kQ29tbWVudE5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY2hpbGROb2Rlc1tpXSwgZW5kQ29tbWVudE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHByZXBlbmQ6IGZ1bmN0aW9uKGNvbnRhaW5lck5vZGUsIG5vZGVUb1ByZXBlbmQpIHtcbiAgICAgICAgICAgIGlmICghaXNTdGFydENvbW1lbnQoY29udGFpbmVyTm9kZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyTm9kZS5maXJzdENoaWxkKVxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJOb2RlLmluc2VydEJlZm9yZShub2RlVG9QcmVwZW5kLCBjb250YWluZXJOb2RlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyTm9kZS5hcHBlbmRDaGlsZChub2RlVG9QcmVwZW5kKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU3RhcnQgY29tbWVudHMgbXVzdCBhbHdheXMgaGF2ZSBhIHBhcmVudCBhbmQgYXQgbGVhc3Qgb25lIGZvbGxvd2luZyBzaWJsaW5nICh0aGUgZW5kIGNvbW1lbnQpXG4gICAgICAgICAgICAgICAgY29udGFpbmVyTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlVG9QcmVwZW5kLCBjb250YWluZXJOb2RlLm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBpbnNlcnRBZnRlcjogZnVuY3Rpb24oY29udGFpbmVyTm9kZSwgbm9kZVRvSW5zZXJ0LCBpbnNlcnRBZnRlck5vZGUpIHtcbiAgICAgICAgICAgIGlmICghaW5zZXJ0QWZ0ZXJOb2RlKSB7XG4gICAgICAgICAgICAgICAga28udmlydHVhbEVsZW1lbnRzLnByZXBlbmQoY29udGFpbmVyTm9kZSwgbm9kZVRvSW5zZXJ0KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzU3RhcnRDb21tZW50KGNvbnRhaW5lck5vZGUpKSB7XG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IGFmdGVyIGluc2VydGlvbiBwb2ludFxuICAgICAgICAgICAgICAgIGlmIChpbnNlcnRBZnRlck5vZGUubmV4dFNpYmxpbmcpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lck5vZGUuaW5zZXJ0QmVmb3JlKG5vZGVUb0luc2VydCwgaW5zZXJ0QWZ0ZXJOb2RlLm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lck5vZGUuYXBwZW5kQ2hpbGQobm9kZVRvSW5zZXJ0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hpbGRyZW4gb2Ygc3RhcnQgY29tbWVudHMgbXVzdCBhbHdheXMgaGF2ZSBhIHBhcmVudCBhbmQgYXQgbGVhc3Qgb25lIGZvbGxvd2luZyBzaWJsaW5nICh0aGUgZW5kIGNvbW1lbnQpXG4gICAgICAgICAgICAgICAgY29udGFpbmVyTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlVG9JbnNlcnQsIGluc2VydEFmdGVyTm9kZS5uZXh0U2libGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZmlyc3RDaGlsZDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgaWYgKCFpc1N0YXJ0Q29tbWVudChub2RlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5maXJzdENoaWxkO1xuICAgICAgICAgICAgaWYgKCFub2RlLm5leHRTaWJsaW5nIHx8IGlzRW5kQ29tbWVudChub2RlLm5leHRTaWJsaW5nKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICB9LFxuXG4gICAgICAgIG5leHRTaWJsaW5nOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgICBpZiAoaXNTdGFydENvbW1lbnQobm9kZSkpXG4gICAgICAgICAgICAgICAgbm9kZSA9IGdldE1hdGNoaW5nRW5kQ29tbWVudChub2RlKTtcbiAgICAgICAgICAgIGlmIChub2RlLm5leHRTaWJsaW5nICYmIGlzRW5kQ29tbWVudChub2RlLm5leHRTaWJsaW5nKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhhc0JpbmRpbmdWYWx1ZTogaXNTdGFydENvbW1lbnQsXG5cbiAgICAgICAgdmlydHVhbE5vZGVCaW5kaW5nVmFsdWU6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgIHZhciByZWdleE1hdGNoID0gKGNvbW1lbnROb2Rlc0hhdmVUZXh0UHJvcGVydHkgPyBub2RlLnRleHQgOiBub2RlLm5vZGVWYWx1ZSkubWF0Y2goc3RhcnRDb21tZW50UmVnZXgpO1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2V4TWF0Y2ggPyByZWdleE1hdGNoWzFdIDogbnVsbDtcbiAgICAgICAgfSxcblxuICAgICAgICBub3JtYWxpc2VWaXJ0dWFsRWxlbWVudERvbVN0cnVjdHVyZTogZnVuY3Rpb24oZWxlbWVudFZlcmlmaWVkKSB7XG4gICAgICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBodHRwczovL2dpdGh1Yi5jb20vU3RldmVTYW5kZXJzb24va25vY2tvdXQvaXNzdWVzLzE1NVxuICAgICAgICAgICAgLy8gKElFIDw9IDggb3IgSUUgOSBxdWlya3MgbW9kZSBwYXJzZXMgeW91ciBIVE1MIHdlaXJkbHksIHRyZWF0aW5nIGNsb3NpbmcgPC9saT4gdGFncyBhcyBpZiB0aGV5IGRvbid0IGV4aXN0LCB0aGVyZWJ5IG1vdmluZyBjb21tZW50IG5vZGVzXG4gICAgICAgICAgICAvLyB0aGF0IGFyZSBkaXJlY3QgZGVzY2VuZGFudHMgb2YgPHVsPiBpbnRvIHRoZSBwcmVjZWRpbmcgPGxpPilcbiAgICAgICAgICAgIGlmICghaHRtbFRhZ3NXaXRoT3B0aW9uYWxseUNsb3NpbmdDaGlsZHJlbltrby51dGlscy50YWdOYW1lTG93ZXIoZWxlbWVudFZlcmlmaWVkKV0pXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAvLyBTY2FuIGltbWVkaWF0ZSBjaGlsZHJlbiB0byBzZWUgaWYgdGhleSBjb250YWluIHVuYmFsYW5jZWQgY29tbWVudCB0YWdzLiBJZiB0aGV5IGRvLCB0aG9zZSBjb21tZW50IHRhZ3NcbiAgICAgICAgICAgIC8vIG11c3QgYmUgaW50ZW5kZWQgdG8gYXBwZWFyICphZnRlciogdGhhdCBjaGlsZCwgc28gbW92ZSB0aGVtIHRoZXJlLlxuICAgICAgICAgICAgdmFyIGNoaWxkTm9kZSA9IGVsZW1lbnRWZXJpZmllZC5maXJzdENoaWxkO1xuICAgICAgICAgICAgaWYgKGNoaWxkTm9kZSkge1xuICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkTm9kZS5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVuYmFsYW5jZWRUYWdzID0gZ2V0VW5iYWxhbmNlZENoaWxkVGFncyhjaGlsZE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVuYmFsYW5jZWRUYWdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRml4IHVwIHRoZSBET00gYnkgbW92aW5nIHRoZSB1bmJhbGFuY2VkIHRhZ3MgdG8gd2hlcmUgdGhleSBtb3N0IGxpa2VseSB3ZXJlIGludGVuZGVkIHRvIGJlIHBsYWNlZCAtICphZnRlciogdGhlIGNoaWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVUb0luc2VydEJlZm9yZSA9IGNoaWxkTm9kZS5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVuYmFsYW5jZWRUYWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlVG9JbnNlcnRCZWZvcmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50VmVyaWZpZWQuaW5zZXJ0QmVmb3JlKHVuYmFsYW5jZWRUYWdzW2ldLCBub2RlVG9JbnNlcnRCZWZvcmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50VmVyaWZpZWQuYXBwZW5kQ2hpbGQodW5iYWxhbmNlZFRhZ3NbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gd2hpbGUgKGNoaWxkTm9kZSA9IGNoaWxkTm9kZS5uZXh0U2libGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufSkoKTtcbmtvLmV4cG9ydFN5bWJvbCgndmlydHVhbEVsZW1lbnRzJywga28udmlydHVhbEVsZW1lbnRzKTtcbmtvLmV4cG9ydFN5bWJvbCgndmlydHVhbEVsZW1lbnRzLmFsbG93ZWRCaW5kaW5ncycsIGtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3MpO1xua28uZXhwb3J0U3ltYm9sKCd2aXJ0dWFsRWxlbWVudHMuZW1wdHlOb2RlJywga28udmlydHVhbEVsZW1lbnRzLmVtcHR5Tm9kZSk7XG4vL2tvLmV4cG9ydFN5bWJvbCgndmlydHVhbEVsZW1lbnRzLmZpcnN0Q2hpbGQnLCBrby52aXJ0dWFsRWxlbWVudHMuZmlyc3RDaGlsZCk7ICAgICAvLyBmaXJzdENoaWxkIGlzIG5vdCBtaW5pZmllZFxua28uZXhwb3J0U3ltYm9sKCd2aXJ0dWFsRWxlbWVudHMuaW5zZXJ0QWZ0ZXInLCBrby52aXJ0dWFsRWxlbWVudHMuaW5zZXJ0QWZ0ZXIpO1xuLy9rby5leHBvcnRTeW1ib2woJ3ZpcnR1YWxFbGVtZW50cy5uZXh0U2libGluZycsIGtvLnZpcnR1YWxFbGVtZW50cy5uZXh0U2libGluZyk7ICAgLy8gbmV4dFNpYmxpbmcgaXMgbm90IG1pbmlmaWVkXG5rby5leHBvcnRTeW1ib2woJ3ZpcnR1YWxFbGVtZW50cy5wcmVwZW5kJywga28udmlydHVhbEVsZW1lbnRzLnByZXBlbmQpO1xua28uZXhwb3J0U3ltYm9sKCd2aXJ0dWFsRWxlbWVudHMuc2V0RG9tTm9kZUNoaWxkcmVuJywga28udmlydHVhbEVsZW1lbnRzLnNldERvbU5vZGVDaGlsZHJlbik7XG4oZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRlZmF1bHRCaW5kaW5nQXR0cmlidXRlTmFtZSA9IFwiZGF0YS1iaW5kXCI7XG5cbiAgICBrby5iaW5kaW5nUHJvdmlkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5iaW5kaW5nQ2FjaGUgPSB7fTtcbiAgICB9O1xuXG4gICAga28udXRpbHMuZXh0ZW5kKGtvLmJpbmRpbmdQcm92aWRlci5wcm90b3R5cGUsIHtcbiAgICAgICAgJ25vZGVIYXNCaW5kaW5ncyc6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAobm9kZS5ub2RlVHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMTogLy8gRWxlbWVudFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUoZGVmYXVsdEJpbmRpbmdBdHRyaWJ1dGVOYW1lKSAhPSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCBrby5jb21wb25lbnRzWydnZXRDb21wb25lbnROYW1lRm9yTm9kZSddKG5vZGUpO1xuICAgICAgICAgICAgICAgIGNhc2UgODogLy8gQ29tbWVudCBub2RlXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBrby52aXJ0dWFsRWxlbWVudHMuaGFzQmluZGluZ1ZhbHVlKG5vZGUpO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAnZ2V0QmluZGluZ3MnOiBmdW5jdGlvbihub2RlLCBiaW5kaW5nQ29udGV4dCkge1xuICAgICAgICAgICAgdmFyIGJpbmRpbmdzU3RyaW5nID0gdGhpc1snZ2V0QmluZGluZ3NTdHJpbmcnXShub2RlLCBiaW5kaW5nQ29udGV4dCksXG4gICAgICAgICAgICAgICAgcGFyc2VkQmluZGluZ3MgPSBiaW5kaW5nc1N0cmluZyA/IHRoaXNbJ3BhcnNlQmluZGluZ3NTdHJpbmcnXShiaW5kaW5nc1N0cmluZywgYmluZGluZ0NvbnRleHQsIG5vZGUpIDogbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBrby5jb21wb25lbnRzLmFkZEJpbmRpbmdzRm9yQ3VzdG9tRWxlbWVudChwYXJzZWRCaW5kaW5ncywgbm9kZSwgYmluZGluZ0NvbnRleHQsIC8qIHZhbHVlQWNjZXNzb3JzICovIGZhbHNlKTtcbiAgICAgICAgfSxcblxuICAgICAgICAnZ2V0QmluZGluZ0FjY2Vzc29ycyc6IGZ1bmN0aW9uKG5vZGUsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgICAgICAgICB2YXIgYmluZGluZ3NTdHJpbmcgPSB0aGlzWydnZXRCaW5kaW5nc1N0cmluZyddKG5vZGUsIGJpbmRpbmdDb250ZXh0KSxcbiAgICAgICAgICAgICAgICBwYXJzZWRCaW5kaW5ncyA9IGJpbmRpbmdzU3RyaW5nID8gdGhpc1sncGFyc2VCaW5kaW5nc1N0cmluZyddKGJpbmRpbmdzU3RyaW5nLCBiaW5kaW5nQ29udGV4dCwgbm9kZSwgeyAndmFsdWVBY2Nlc3NvcnMnOiB0cnVlIH0pIDogbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBrby5jb21wb25lbnRzLmFkZEJpbmRpbmdzRm9yQ3VzdG9tRWxlbWVudChwYXJzZWRCaW5kaW5ncywgbm9kZSwgYmluZGluZ0NvbnRleHQsIC8qIHZhbHVlQWNjZXNzb3JzICovIHRydWUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb24gaXMgb25seSB1c2VkIGludGVybmFsbHkgYnkgdGhpcyBkZWZhdWx0IHByb3ZpZGVyLlxuICAgICAgICAvLyBJdCdzIG5vdCBwYXJ0IG9mIHRoZSBpbnRlcmZhY2UgZGVmaW5pdGlvbiBmb3IgYSBnZW5lcmFsIGJpbmRpbmcgcHJvdmlkZXIuXG4gICAgICAgICdnZXRCaW5kaW5nc1N0cmluZyc6IGZ1bmN0aW9uKG5vZGUsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKG5vZGUubm9kZVR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBub2RlLmdldEF0dHJpYnV0ZShkZWZhdWx0QmluZGluZ0F0dHJpYnV0ZU5hbWUpOyAgIC8vIEVsZW1lbnRcbiAgICAgICAgICAgICAgICBjYXNlIDg6IHJldHVybiBrby52aXJ0dWFsRWxlbWVudHMudmlydHVhbE5vZGVCaW5kaW5nVmFsdWUobm9kZSk7IC8vIENvbW1lbnQgbm9kZVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb24gaXMgb25seSB1c2VkIGludGVybmFsbHkgYnkgdGhpcyBkZWZhdWx0IHByb3ZpZGVyLlxuICAgICAgICAvLyBJdCdzIG5vdCBwYXJ0IG9mIHRoZSBpbnRlcmZhY2UgZGVmaW5pdGlvbiBmb3IgYSBnZW5lcmFsIGJpbmRpbmcgcHJvdmlkZXIuXG4gICAgICAgICdwYXJzZUJpbmRpbmdzU3RyaW5nJzogZnVuY3Rpb24oYmluZGluZ3NTdHJpbmcsIGJpbmRpbmdDb250ZXh0LCBub2RlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBiaW5kaW5nRnVuY3Rpb24gPSBjcmVhdGVCaW5kaW5nc1N0cmluZ0V2YWx1YXRvclZpYUNhY2hlKGJpbmRpbmdzU3RyaW5nLCB0aGlzLmJpbmRpbmdDYWNoZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJpbmRpbmdGdW5jdGlvbihiaW5kaW5nQ29udGV4dCwgbm9kZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIGV4Lm1lc3NhZ2UgPSBcIlVuYWJsZSB0byBwYXJzZSBiaW5kaW5ncy5cXG5CaW5kaW5ncyB2YWx1ZTogXCIgKyBiaW5kaW5nc1N0cmluZyArIFwiXFxuTWVzc2FnZTogXCIgKyBleC5tZXNzYWdlO1xuICAgICAgICAgICAgICAgIHRocm93IGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBrby5iaW5kaW5nUHJvdmlkZXJbJ2luc3RhbmNlJ10gPSBuZXcga28uYmluZGluZ1Byb3ZpZGVyKCk7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVCaW5kaW5nc1N0cmluZ0V2YWx1YXRvclZpYUNhY2hlKGJpbmRpbmdzU3RyaW5nLCBjYWNoZSwgb3B0aW9ucykge1xuICAgICAgICB2YXIgY2FjaGVLZXkgPSBiaW5kaW5nc1N0cmluZyArIChvcHRpb25zICYmIG9wdGlvbnNbJ3ZhbHVlQWNjZXNzb3JzJ10gfHwgJycpO1xuICAgICAgICByZXR1cm4gY2FjaGVbY2FjaGVLZXldXG4gICAgICAgICAgICB8fCAoY2FjaGVbY2FjaGVLZXldID0gY3JlYXRlQmluZGluZ3NTdHJpbmdFdmFsdWF0b3IoYmluZGluZ3NTdHJpbmcsIG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVCaW5kaW5nc1N0cmluZ0V2YWx1YXRvcihiaW5kaW5nc1N0cmluZywgb3B0aW9ucykge1xuICAgICAgICAvLyBCdWlsZCB0aGUgc291cmNlIGZvciBhIGZ1bmN0aW9uIHRoYXQgZXZhbHVhdGVzIFwiZXhwcmVzc2lvblwiXG4gICAgICAgIC8vIEZvciBlYWNoIHNjb3BlIHZhcmlhYmxlLCBhZGQgYW4gZXh0cmEgbGV2ZWwgb2YgXCJ3aXRoXCIgbmVzdGluZ1xuICAgICAgICAvLyBFeGFtcGxlIHJlc3VsdDogd2l0aChzYzEpIHsgd2l0aChzYzApIHsgcmV0dXJuIChleHByZXNzaW9uKSB9IH1cbiAgICAgICAgdmFyIHJld3JpdHRlbkJpbmRpbmdzID0ga28uZXhwcmVzc2lvblJld3JpdGluZy5wcmVQcm9jZXNzQmluZGluZ3MoYmluZGluZ3NTdHJpbmcsIG9wdGlvbnMpLFxuICAgICAgICAgICAgZnVuY3Rpb25Cb2R5ID0gXCJ3aXRoKCRjb250ZXh0KXt3aXRoKCRkYXRhfHx7fSl7cmV0dXJue1wiICsgcmV3cml0dGVuQmluZGluZ3MgKyBcIn19fVwiO1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwiJGNvbnRleHRcIiwgXCIkZWxlbWVudFwiLCBmdW5jdGlvbkJvZHkpO1xuICAgIH1cbn0pKCk7XG5cbmtvLmV4cG9ydFN5bWJvbCgnYmluZGluZ1Byb3ZpZGVyJywga28uYmluZGluZ1Byb3ZpZGVyKTtcbihmdW5jdGlvbiAoKSB7XG4gICAga28uYmluZGluZ0hhbmRsZXJzID0ge307XG5cbiAgICAvLyBUaGUgZm9sbG93aW5nIGVsZW1lbnQgdHlwZXMgd2lsbCBub3QgYmUgcmVjdXJzZWQgaW50byBkdXJpbmcgYmluZGluZy5cbiAgICB2YXIgYmluZGluZ0RvZXNOb3RSZWN1cnNlSW50b0VsZW1lbnRUeXBlcyA9IHtcbiAgICAgICAgLy8gRG9uJ3Qgd2FudCBiaW5kaW5ncyB0aGF0IG9wZXJhdGUgb24gdGV4dCBub2RlcyB0byBtdXRhdGUgPHNjcmlwdD4gYW5kIDx0ZXh0YXJlYT4gY29udGVudHMsXG4gICAgICAgIC8vIGJlY2F1c2UgaXQncyB1bmV4cGVjdGVkIGFuZCBhIHBvdGVudGlhbCBYU1MgaXNzdWUuXG4gICAgICAgIC8vIEFsc28gYmluZGluZ3Mgc2hvdWxkIG5vdCBvcGVyYXRlIG9uIDx0ZW1wbGF0ZT4gZWxlbWVudHMgc2luY2UgdGhpcyBicmVha3MgaW4gSW50ZXJuZXQgRXhwbG9yZXJcbiAgICAgICAgLy8gYW5kIGJlY2F1c2Ugc3VjaCBlbGVtZW50cycgY29udGVudHMgYXJlIGFsd2F5cyBpbnRlbmRlZCB0byBiZSBib3VuZCBpbiBhIGRpZmZlcmVudCBjb250ZXh0XG4gICAgICAgIC8vIGZyb20gd2hlcmUgdGhleSBhcHBlYXIgaW4gdGhlIGRvY3VtZW50LlxuICAgICAgICAnc2NyaXB0JzogdHJ1ZSxcbiAgICAgICAgJ3RleHRhcmVhJzogdHJ1ZSxcbiAgICAgICAgJ3RlbXBsYXRlJzogdHJ1ZVxuICAgIH07XG5cbiAgICAvLyBVc2UgYW4gb3ZlcnJpZGFibGUgbWV0aG9kIGZvciByZXRyaWV2aW5nIGJpbmRpbmcgaGFuZGxlcnMgc28gdGhhdCBhIHBsdWdpbnMgbWF5IHN1cHBvcnQgZHluYW1pY2FsbHkgY3JlYXRlZCBoYW5kbGVyc1xuICAgIGtvWydnZXRCaW5kaW5nSGFuZGxlciddID0gZnVuY3Rpb24oYmluZGluZ0tleSkge1xuICAgICAgICByZXR1cm4ga28uYmluZGluZ0hhbmRsZXJzW2JpbmRpbmdLZXldO1xuICAgIH07XG5cbiAgICAvLyBUaGUga28uYmluZGluZ0NvbnRleHQgY29uc3RydWN0b3IgaXMgb25seSBjYWxsZWQgZGlyZWN0bHkgdG8gY3JlYXRlIHRoZSByb290IGNvbnRleHQuIEZvciBjaGlsZFxuICAgIC8vIGNvbnRleHRzLCB1c2UgYmluZGluZ0NvbnRleHQuY3JlYXRlQ2hpbGRDb250ZXh0IG9yIGJpbmRpbmdDb250ZXh0LmV4dGVuZC5cbiAgICBrby5iaW5kaW5nQ29udGV4dCA9IGZ1bmN0aW9uKGRhdGFJdGVtT3JBY2Nlc3NvciwgcGFyZW50Q29udGV4dCwgZGF0YUl0ZW1BbGlhcywgZXh0ZW5kQ2FsbGJhY2spIHtcblxuICAgICAgICAvLyBUaGUgYmluZGluZyBjb250ZXh0IG9iamVjdCBpbmNsdWRlcyBzdGF0aWMgcHJvcGVydGllcyBmb3IgdGhlIGN1cnJlbnQsIHBhcmVudCwgYW5kIHJvb3QgdmlldyBtb2RlbHMuXG4gICAgICAgIC8vIElmIGEgdmlldyBtb2RlbCBpcyBhY3R1YWxseSBzdG9yZWQgaW4gYW4gb2JzZXJ2YWJsZSwgdGhlIGNvcnJlc3BvbmRpbmcgYmluZGluZyBjb250ZXh0IG9iamVjdCwgYW5kXG4gICAgICAgIC8vIGFueSBjaGlsZCBjb250ZXh0cywgbXVzdCBiZSB1cGRhdGVkIHdoZW4gdGhlIHZpZXcgbW9kZWwgaXMgY2hhbmdlZC5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ29udGV4dCgpIHtcbiAgICAgICAgICAgIC8vIE1vc3Qgb2YgdGhlIHRpbWUsIHRoZSBjb250ZXh0IHdpbGwgZGlyZWN0bHkgZ2V0IGEgdmlldyBtb2RlbCBvYmplY3QsIGJ1dCBpZiBhIGZ1bmN0aW9uIGlzIGdpdmVuLFxuICAgICAgICAgICAgLy8gd2UgY2FsbCB0aGUgZnVuY3Rpb24gdG8gcmV0cmlldmUgdGhlIHZpZXcgbW9kZWwuIElmIHRoZSBmdW5jdGlvbiBhY2Nlc3NlcyBhbnkgb2JzZXJ2YWJsZXMgb3IgcmV0dXJuc1xuICAgICAgICAgICAgLy8gYW4gb2JzZXJ2YWJsZSwgdGhlIGRlcGVuZGVuY3kgaXMgdHJhY2tlZCwgYW5kIHRob3NlIG9ic2VydmFibGVzIGNhbiBsYXRlciBjYXVzZSB0aGUgYmluZGluZ1xuICAgICAgICAgICAgLy8gY29udGV4dCB0byBiZSB1cGRhdGVkLlxuICAgICAgICAgICAgdmFyIGRhdGFJdGVtT3JPYnNlcnZhYmxlID0gaXNGdW5jID8gZGF0YUl0ZW1PckFjY2Vzc29yKCkgOiBkYXRhSXRlbU9yQWNjZXNzb3IsXG4gICAgICAgICAgICAgICAgZGF0YUl0ZW0gPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGRhdGFJdGVtT3JPYnNlcnZhYmxlKTtcblxuICAgICAgICAgICAgaWYgKHBhcmVudENvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIGEgXCJwYXJlbnRcIiBjb250ZXh0IGlzIGdpdmVuLCByZWdpc3RlciBhIGRlcGVuZGVuY3kgb24gdGhlIHBhcmVudCBjb250ZXh0LiBUaHVzIHdoZW5ldmVyIHRoZVxuICAgICAgICAgICAgICAgIC8vIHBhcmVudCBjb250ZXh0IGlzIHVwZGF0ZWQsIHRoaXMgY29udGV4dCB3aWxsIGFsc28gYmUgdXBkYXRlZC5cbiAgICAgICAgICAgICAgICBpZiAocGFyZW50Q29udGV4dC5fc3Vic2NyaWJhYmxlKVxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRDb250ZXh0Ll9zdWJzY3JpYmFibGUoKTtcblxuICAgICAgICAgICAgICAgIC8vIENvcHkgJHJvb3QgYW5kIGFueSBjdXN0b20gcHJvcGVydGllcyBmcm9tIHRoZSBwYXJlbnQgY29udGV4dFxuICAgICAgICAgICAgICAgIGtvLnV0aWxzLmV4dGVuZChzZWxmLCBwYXJlbnRDb250ZXh0KTtcblxuICAgICAgICAgICAgICAgIC8vIEJlY2F1c2UgdGhlIGFib3ZlIGNvcHkgb3ZlcndyaXRlcyBvdXIgb3duIHByb3BlcnRpZXMsIHdlIG5lZWQgdG8gcmVzZXQgdGhlbS5cbiAgICAgICAgICAgICAgICAvLyBEdXJpbmcgdGhlIGZpcnN0IGV4ZWN1dGlvbiwgXCJzdWJzY3JpYmFibGVcIiBpc24ndCBzZXQsIHNvIGRvbid0IGJvdGhlciBkb2luZyB0aGUgdXBkYXRlIHRoZW4uXG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmliYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9zdWJzY3JpYmFibGUgPSBzdWJzY3JpYmFibGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmWyckcGFyZW50cyddID0gW107XG4gICAgICAgICAgICAgICAgc2VsZlsnJHJvb3QnXSA9IGRhdGFJdGVtO1xuXG4gICAgICAgICAgICAgICAgLy8gRXhwb3J0ICdrbycgaW4gdGhlIGJpbmRpbmcgY29udGV4dCBzbyBpdCB3aWxsIGJlIGF2YWlsYWJsZSBpbiBiaW5kaW5ncyBhbmQgdGVtcGxhdGVzXG4gICAgICAgICAgICAgICAgLy8gZXZlbiBpZiAna28nIGlzbid0IGV4cG9ydGVkIGFzIGEgZ2xvYmFsLCBzdWNoIGFzIHdoZW4gdXNpbmcgYW4gQU1EIGxvYWRlci5cbiAgICAgICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL1N0ZXZlU2FuZGVyc29uL2tub2Nrb3V0L2lzc3Vlcy80OTBcbiAgICAgICAgICAgICAgICBzZWxmWydrbyddID0ga287XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmWyckcmF3RGF0YSddID0gZGF0YUl0ZW1Pck9ic2VydmFibGU7XG4gICAgICAgICAgICBzZWxmWyckZGF0YSddID0gZGF0YUl0ZW07XG4gICAgICAgICAgICBpZiAoZGF0YUl0ZW1BbGlhcylcbiAgICAgICAgICAgICAgICBzZWxmW2RhdGFJdGVtQWxpYXNdID0gZGF0YUl0ZW07XG5cbiAgICAgICAgICAgIC8vIFRoZSBleHRlbmRDYWxsYmFjayBmdW5jdGlvbiBpcyBwcm92aWRlZCB3aGVuIGNyZWF0aW5nIGEgY2hpbGQgY29udGV4dCBvciBleHRlbmRpbmcgYSBjb250ZXh0LlxuICAgICAgICAgICAgLy8gSXQgaGFuZGxlcyB0aGUgc3BlY2lmaWMgYWN0aW9ucyBuZWVkZWQgdG8gZmluaXNoIHNldHRpbmcgdXAgdGhlIGJpbmRpbmcgY29udGV4dC4gQWN0aW9ucyBpbiB0aGlzXG4gICAgICAgICAgICAvLyBmdW5jdGlvbiBjb3VsZCBhbHNvIGFkZCBkZXBlbmRlbmNpZXMgdG8gdGhpcyBiaW5kaW5nIGNvbnRleHQuXG4gICAgICAgICAgICBpZiAoZXh0ZW5kQ2FsbGJhY2spXG4gICAgICAgICAgICAgICAgZXh0ZW5kQ2FsbGJhY2soc2VsZiwgcGFyZW50Q29udGV4dCwgZGF0YUl0ZW0pO1xuXG4gICAgICAgICAgICByZXR1cm4gc2VsZlsnJGRhdGEnXTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBkaXNwb3NlV2hlbigpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlcyAmJiAha28udXRpbHMuYW55RG9tTm9kZUlzQXR0YWNoZWRUb0RvY3VtZW50KG5vZGVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgIGlzRnVuYyA9IHR5cGVvZihkYXRhSXRlbU9yQWNjZXNzb3IpID09IFwiZnVuY3Rpb25cIiAmJiAha28uaXNPYnNlcnZhYmxlKGRhdGFJdGVtT3JBY2Nlc3NvciksXG4gICAgICAgICAgICBub2RlcyxcbiAgICAgICAgICAgIHN1YnNjcmliYWJsZSA9IGtvLmRlcGVuZGVudE9ic2VydmFibGUodXBkYXRlQ29udGV4dCwgbnVsbCwgeyBkaXNwb3NlV2hlbjogZGlzcG9zZVdoZW4sIGRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZDogdHJ1ZSB9KTtcblxuICAgICAgICAvLyBBdCB0aGlzIHBvaW50LCB0aGUgYmluZGluZyBjb250ZXh0IGhhcyBiZWVuIGluaXRpYWxpemVkLCBhbmQgdGhlIFwic3Vic2NyaWJhYmxlXCIgY29tcHV0ZWQgb2JzZXJ2YWJsZSBpc1xuICAgICAgICAvLyBzdWJzY3JpYmVkIHRvIGFueSBvYnNlcnZhYmxlcyB0aGF0IHdlcmUgYWNjZXNzZWQgaW4gdGhlIHByb2Nlc3MuIElmIHRoZXJlIGlzIG5vdGhpbmcgdG8gdHJhY2ssIHRoZVxuICAgICAgICAvLyBjb21wdXRlZCB3aWxsIGJlIGluYWN0aXZlLCBhbmQgd2UgY2FuIHNhZmVseSB0aHJvdyBpdCBhd2F5LiBJZiBpdCdzIGFjdGl2ZSwgdGhlIGNvbXB1dGVkIGlzIHN0b3JlZCBpblxuICAgICAgICAvLyB0aGUgY29udGV4dCBvYmplY3QuXG4gICAgICAgIGlmIChzdWJzY3JpYmFibGUuaXNBY3RpdmUoKSkge1xuICAgICAgICAgICAgc2VsZi5fc3Vic2NyaWJhYmxlID0gc3Vic2NyaWJhYmxlO1xuXG4gICAgICAgICAgICAvLyBBbHdheXMgbm90aWZ5IGJlY2F1c2UgZXZlbiBpZiB0aGUgbW9kZWwgKCRkYXRhKSBoYXNuJ3QgY2hhbmdlZCwgb3RoZXIgY29udGV4dCBwcm9wZXJ0aWVzIG1pZ2h0IGhhdmUgY2hhbmdlZFxuICAgICAgICAgICAgc3Vic2NyaWJhYmxlWydlcXVhbGl0eUNvbXBhcmVyJ10gPSBudWxsO1xuXG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGJlIGFibGUgdG8gZGlzcG9zZSBvZiB0aGlzIGNvbXB1dGVkIG9ic2VydmFibGUgd2hlbiBpdCdzIG5vIGxvbmdlciBuZWVkZWQuIFRoaXMgd291bGQgYmVcbiAgICAgICAgICAgIC8vIGVhc3kgaWYgd2UgaGFkIGEgc2luZ2xlIG5vZGUgdG8gd2F0Y2gsIGJ1dCBiaW5kaW5nIGNvbnRleHRzIGNhbiBiZSB1c2VkIGJ5IG1hbnkgZGlmZmVyZW50IG5vZGVzLCBhbmRcbiAgICAgICAgICAgIC8vIHdlIGNhbm5vdCBhc3N1bWUgdGhhdCB0aG9zZSBub2RlcyBoYXZlIGFueSByZWxhdGlvbiB0byBlYWNoIG90aGVyLiBTbyBpbnN0ZWFkIHdlIHRyYWNrIGFueSBub2RlIHRoYXRcbiAgICAgICAgICAgIC8vIHRoZSBjb250ZXh0IGlzIGF0dGFjaGVkIHRvLCBhbmQgZGlzcG9zZSB0aGUgY29tcHV0ZWQgd2hlbiBhbGwgb2YgdGhvc2Ugbm9kZXMgaGF2ZSBiZWVuIGNsZWFuZWQuXG5cbiAgICAgICAgICAgIC8vIEFkZCBwcm9wZXJ0aWVzIHRvICpzdWJzY3JpYmFibGUqIGluc3RlYWQgb2YgKnNlbGYqIGJlY2F1c2UgYW55IHByb3BlcnRpZXMgYWRkZWQgdG8gKnNlbGYqIG1heSBiZSBvdmVyd3JpdHRlbiBvbiB1cGRhdGVzXG4gICAgICAgICAgICBub2RlcyA9IFtdO1xuICAgICAgICAgICAgc3Vic2NyaWJhYmxlLl9hZGROb2RlID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAga28udXRpbHMuZG9tTm9kZURpc3Bvc2FsLmFkZERpc3Bvc2VDYWxsYmFjayhub2RlLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGtvLnV0aWxzLmFycmF5UmVtb3ZlSXRlbShub2Rlcywgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbm9kZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmFibGUuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fc3Vic2NyaWJhYmxlID0gc3Vic2NyaWJhYmxlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRXh0ZW5kIHRoZSBiaW5kaW5nIGNvbnRleHQgaGllcmFyY2h5IHdpdGggYSBuZXcgdmlldyBtb2RlbCBvYmplY3QuIElmIHRoZSBwYXJlbnQgY29udGV4dCBpcyB3YXRjaGluZ1xuICAgIC8vIGFueSBvYnNlcnZhYmxlcywgdGhlIG5ldyBjaGlsZCBjb250ZXh0IHdpbGwgYXV0b21hdGljYWxseSBnZXQgYSBkZXBlbmRlbmN5IG9uIHRoZSBwYXJlbnQgY29udGV4dC5cbiAgICAvLyBCdXQgdGhpcyBkb2VzIG5vdCBtZWFuIHRoYXQgdGhlICRkYXRhIHZhbHVlIG9mIHRoZSBjaGlsZCBjb250ZXh0IHdpbGwgYWxzbyBnZXQgdXBkYXRlZC4gSWYgdGhlIGNoaWxkXG4gICAgLy8gdmlldyBtb2RlbCBhbHNvIGRlcGVuZHMgb24gdGhlIHBhcmVudCB2aWV3IG1vZGVsLCB5b3UgbXVzdCBwcm92aWRlIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBjb3JyZWN0XG4gICAgLy8gdmlldyBtb2RlbCBvbiBlYWNoIHVwZGF0ZS5cbiAgICBrby5iaW5kaW5nQ29udGV4dC5wcm90b3R5cGVbJ2NyZWF0ZUNoaWxkQ29udGV4dCddID0gZnVuY3Rpb24gKGRhdGFJdGVtT3JBY2Nlc3NvciwgZGF0YUl0ZW1BbGlhcywgZXh0ZW5kQ2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBrby5iaW5kaW5nQ29udGV4dChkYXRhSXRlbU9yQWNjZXNzb3IsIHRoaXMsIGRhdGFJdGVtQWxpYXMsIGZ1bmN0aW9uKHNlbGYsIHBhcmVudENvbnRleHQpIHtcbiAgICAgICAgICAgIC8vIEV4dGVuZCB0aGUgY29udGV4dCBoaWVyYXJjaHkgYnkgc2V0dGluZyB0aGUgYXBwcm9wcmlhdGUgcG9pbnRlcnNcbiAgICAgICAgICAgIHNlbGZbJyRwYXJlbnRDb250ZXh0J10gPSBwYXJlbnRDb250ZXh0O1xuICAgICAgICAgICAgc2VsZlsnJHBhcmVudCddID0gcGFyZW50Q29udGV4dFsnJGRhdGEnXTtcbiAgICAgICAgICAgIHNlbGZbJyRwYXJlbnRzJ10gPSAocGFyZW50Q29udGV4dFsnJHBhcmVudHMnXSB8fCBbXSkuc2xpY2UoMCk7XG4gICAgICAgICAgICBzZWxmWyckcGFyZW50cyddLnVuc2hpZnQoc2VsZlsnJHBhcmVudCddKTtcbiAgICAgICAgICAgIGlmIChleHRlbmRDYWxsYmFjaylcbiAgICAgICAgICAgICAgICBleHRlbmRDYWxsYmFjayhzZWxmKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIEV4dGVuZCB0aGUgYmluZGluZyBjb250ZXh0IHdpdGggbmV3IGN1c3RvbSBwcm9wZXJ0aWVzLiBUaGlzIGRvZXNuJ3QgY2hhbmdlIHRoZSBjb250ZXh0IGhpZXJhcmNoeS5cbiAgICAvLyBTaW1pbGFybHkgdG8gXCJjaGlsZFwiIGNvbnRleHRzLCBwcm92aWRlIGEgZnVuY3Rpb24gaGVyZSB0byBtYWtlIHN1cmUgdGhhdCB0aGUgY29ycmVjdCB2YWx1ZXMgYXJlIHNldFxuICAgIC8vIHdoZW4gYW4gb2JzZXJ2YWJsZSB2aWV3IG1vZGVsIGlzIHVwZGF0ZWQuXG4gICAga28uYmluZGluZ0NvbnRleHQucHJvdG90eXBlWydleHRlbmQnXSA9IGZ1bmN0aW9uKHByb3BlcnRpZXMpIHtcbiAgICAgICAgLy8gSWYgdGhlIHBhcmVudCBjb250ZXh0IHJlZmVyZW5jZXMgYW4gb2JzZXJ2YWJsZSB2aWV3IG1vZGVsLCBcIl9zdWJzY3JpYmFibGVcIiB3aWxsIGFsd2F5cyBiZSB0aGVcbiAgICAgICAgLy8gbGF0ZXN0IHZpZXcgbW9kZWwgb2JqZWN0LiBJZiBub3QsIFwiX3N1YnNjcmliYWJsZVwiIGlzbid0IHNldCwgYW5kIHdlIGNhbiB1c2UgdGhlIHN0YXRpYyBcIiRkYXRhXCIgdmFsdWUuXG4gICAgICAgIHJldHVybiBuZXcga28uYmluZGluZ0NvbnRleHQodGhpcy5fc3Vic2NyaWJhYmxlIHx8IHRoaXNbJyRkYXRhJ10sIHRoaXMsIG51bGwsIGZ1bmN0aW9uKHNlbGYsIHBhcmVudENvbnRleHQpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgXCJjaGlsZFwiIGNvbnRleHQgZG9lc24ndCBkaXJlY3RseSB0cmFjayBhIHBhcmVudCBvYnNlcnZhYmxlIHZpZXcgbW9kZWwsXG4gICAgICAgICAgICAvLyBzbyB3ZSBuZWVkIHRvIG1hbnVhbGx5IHNldCB0aGUgJHJhd0RhdGEgdmFsdWUgdG8gbWF0Y2ggdGhlIHBhcmVudC5cbiAgICAgICAgICAgIHNlbGZbJyRyYXdEYXRhJ10gPSBwYXJlbnRDb250ZXh0WyckcmF3RGF0YSddO1xuICAgICAgICAgICAga28udXRpbHMuZXh0ZW5kKHNlbGYsIHR5cGVvZihwcm9wZXJ0aWVzKSA9PSBcImZ1bmN0aW9uXCIgPyBwcm9wZXJ0aWVzKCkgOiBwcm9wZXJ0aWVzKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIFJldHVybnMgdGhlIHZhbHVlQWNjZXNvciBmdW5jdGlvbiBmb3IgYSBiaW5kaW5nIHZhbHVlXG4gICAgZnVuY3Rpb24gbWFrZVZhbHVlQWNjZXNzb3IodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFJldHVybnMgdGhlIHZhbHVlIG9mIGEgdmFsdWVBY2Nlc3NvciBmdW5jdGlvblxuICAgIGZ1bmN0aW9uIGV2YWx1YXRlVmFsdWVBY2Nlc3Nvcih2YWx1ZUFjY2Vzc29yKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZUFjY2Vzc29yKCk7XG4gICAgfVxuXG4gICAgLy8gR2l2ZW4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYmluZGluZ3MsIGNyZWF0ZSBhbmQgcmV0dXJuIGEgbmV3IG9iamVjdCB0aGF0IGNvbnRhaW5zXG4gICAgLy8gYmluZGluZyB2YWx1ZS1hY2Nlc3NvcnMgZnVuY3Rpb25zLiBFYWNoIGFjY2Vzc29yIGZ1bmN0aW9uIGNhbGxzIHRoZSBvcmlnaW5hbCBmdW5jdGlvblxuICAgIC8vIHNvIHRoYXQgaXQgYWx3YXlzIGdldHMgdGhlIGxhdGVzdCB2YWx1ZSBhbmQgYWxsIGRlcGVuZGVuY2llcyBhcmUgY2FwdHVyZWQuIFRoaXMgaXMgdXNlZFxuICAgIC8vIGJ5IGtvLmFwcGx5QmluZGluZ3NUb05vZGUgYW5kIGdldEJpbmRpbmdzQW5kTWFrZUFjY2Vzc29ycy5cbiAgICBmdW5jdGlvbiBtYWtlQWNjZXNzb3JzRnJvbUZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBrby51dGlscy5vYmplY3RNYXAoa28uZGVwZW5kZW5jeURldGVjdGlvbi5pZ25vcmUoY2FsbGJhY2spLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKClba2V5XTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEdpdmVuIGEgYmluZGluZ3MgZnVuY3Rpb24gb3Igb2JqZWN0LCBjcmVhdGUgYW5kIHJldHVybiBhIG5ldyBvYmplY3QgdGhhdCBjb250YWluc1xuICAgIC8vIGJpbmRpbmcgdmFsdWUtYWNjZXNzb3JzIGZ1bmN0aW9ucy4gVGhpcyBpcyB1c2VkIGJ5IGtvLmFwcGx5QmluZGluZ3NUb05vZGUuXG4gICAgZnVuY3Rpb24gbWFrZUJpbmRpbmdBY2Nlc3NvcnMoYmluZGluZ3MsIGNvbnRleHQsIG5vZGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiaW5kaW5ncyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VBY2Nlc3NvcnNGcm9tRnVuY3Rpb24oYmluZGluZ3MuYmluZChudWxsLCBjb250ZXh0LCBub2RlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ga28udXRpbHMub2JqZWN0TWFwKGJpbmRpbmdzLCBtYWtlVmFsdWVBY2Nlc3Nvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgaWYgdGhlIGJpbmRpbmcgcHJvdmlkZXIgZG9lc24ndCBpbmNsdWRlIGEgZ2V0QmluZGluZ0FjY2Vzc29ycyBmdW5jdGlvbi5cbiAgICAvLyBJdCBtdXN0IGJlIGNhbGxlZCB3aXRoICd0aGlzJyBzZXQgdG8gdGhlIHByb3ZpZGVyIGluc3RhbmNlLlxuICAgIGZ1bmN0aW9uIGdldEJpbmRpbmdzQW5kTWFrZUFjY2Vzc29ycyhub2RlLCBjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBtYWtlQWNjZXNzb3JzRnJvbUZ1bmN0aW9uKHRoaXNbJ2dldEJpbmRpbmdzJ10uYmluZCh0aGlzLCBub2RlLCBjb250ZXh0KSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmFsaWRhdGVUaGF0QmluZGluZ0lzQWxsb3dlZEZvclZpcnR1YWxFbGVtZW50cyhiaW5kaW5nTmFtZSkge1xuICAgICAgICB2YXIgdmFsaWRhdG9yID0ga28udmlydHVhbEVsZW1lbnRzLmFsbG93ZWRCaW5kaW5nc1tiaW5kaW5nTmFtZV07XG4gICAgICAgIGlmICghdmFsaWRhdG9yKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGJpbmRpbmcgJ1wiICsgYmluZGluZ05hbWUgKyBcIicgY2Fubm90IGJlIHVzZWQgd2l0aCB2aXJ0dWFsIGVsZW1lbnRzXCIpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXBwbHlCaW5kaW5nc1RvRGVzY2VuZGFudHNJbnRlcm5hbCAoYmluZGluZ0NvbnRleHQsIGVsZW1lbnRPclZpcnR1YWxFbGVtZW50LCBiaW5kaW5nQ29udGV4dHNNYXlEaWZmZXJGcm9tRG9tUGFyZW50RWxlbWVudCkge1xuICAgICAgICB2YXIgY3VycmVudENoaWxkLFxuICAgICAgICAgICAgbmV4dEluUXVldWUgPSBrby52aXJ0dWFsRWxlbWVudHMuZmlyc3RDaGlsZChlbGVtZW50T3JWaXJ0dWFsRWxlbWVudCksXG4gICAgICAgICAgICBwcm92aWRlciA9IGtvLmJpbmRpbmdQcm92aWRlclsnaW5zdGFuY2UnXSxcbiAgICAgICAgICAgIHByZXByb2Nlc3NOb2RlID0gcHJvdmlkZXJbJ3ByZXByb2Nlc3NOb2RlJ107XG5cbiAgICAgICAgLy8gUHJlcHJvY2Vzc2luZyBhbGxvd3MgYSBiaW5kaW5nIHByb3ZpZGVyIHRvIG11dGF0ZSBhIG5vZGUgYmVmb3JlIGJpbmRpbmdzIGFyZSBhcHBsaWVkIHRvIGl0LiBGb3IgZXhhbXBsZSBpdCdzXG4gICAgICAgIC8vIHBvc3NpYmxlIHRvIGluc2VydCBuZXcgc2libGluZ3MgYWZ0ZXIgaXQsIGFuZC9vciByZXBsYWNlIHRoZSBub2RlIHdpdGggYSBkaWZmZXJlbnQgb25lLiBUaGlzIGNhbiBiZSB1c2VkIHRvXG4gICAgICAgIC8vIGltcGxlbWVudCBjdXN0b20gYmluZGluZyBzeW50YXhlcywgc3VjaCBhcyB7eyB2YWx1ZSB9fSBmb3Igc3RyaW5nIGludGVycG9sYXRpb24sIG9yIGN1c3RvbSBlbGVtZW50IHR5cGVzIHRoYXRcbiAgICAgICAgLy8gdHJpZ2dlciBpbnNlcnRpb24gb2YgPHRlbXBsYXRlPiBjb250ZW50cyBhdCB0aGF0IHBvaW50IGluIHRoZSBkb2N1bWVudC5cbiAgICAgICAgaWYgKHByZXByb2Nlc3NOb2RlKSB7XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudENoaWxkID0gbmV4dEluUXVldWUpIHtcbiAgICAgICAgICAgICAgICBuZXh0SW5RdWV1ZSA9IGtvLnZpcnR1YWxFbGVtZW50cy5uZXh0U2libGluZyhjdXJyZW50Q2hpbGQpO1xuICAgICAgICAgICAgICAgIHByZXByb2Nlc3NOb2RlLmNhbGwocHJvdmlkZXIsIGN1cnJlbnRDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXNldCBuZXh0SW5RdWV1ZSBmb3IgdGhlIG5leHQgbG9vcFxuICAgICAgICAgICAgbmV4dEluUXVldWUgPSBrby52aXJ0dWFsRWxlbWVudHMuZmlyc3RDaGlsZChlbGVtZW50T3JWaXJ0dWFsRWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAoY3VycmVudENoaWxkID0gbmV4dEluUXVldWUpIHtcbiAgICAgICAgICAgIC8vIEtlZXAgYSByZWNvcmQgb2YgdGhlIG5leHQgY2hpbGQgKmJlZm9yZSogYXBwbHlpbmcgYmluZGluZ3MsIGluIGNhc2UgdGhlIGJpbmRpbmcgcmVtb3ZlcyB0aGUgY3VycmVudCBjaGlsZCBmcm9tIGl0cyBwb3NpdGlvblxuICAgICAgICAgICAgbmV4dEluUXVldWUgPSBrby52aXJ0dWFsRWxlbWVudHMubmV4dFNpYmxpbmcoY3VycmVudENoaWxkKTtcbiAgICAgICAgICAgIGFwcGx5QmluZGluZ3NUb05vZGVBbmREZXNjZW5kYW50c0ludGVybmFsKGJpbmRpbmdDb250ZXh0LCBjdXJyZW50Q2hpbGQsIGJpbmRpbmdDb250ZXh0c01heURpZmZlckZyb21Eb21QYXJlbnRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFwcGx5QmluZGluZ3NUb05vZGVBbmREZXNjZW5kYW50c0ludGVybmFsIChiaW5kaW5nQ29udGV4dCwgbm9kZVZlcmlmaWVkLCBiaW5kaW5nQ29udGV4dE1heURpZmZlckZyb21Eb21QYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIHZhciBzaG91bGRCaW5kRGVzY2VuZGFudHMgPSB0cnVlO1xuXG4gICAgICAgIC8vIFBlcmYgb3B0aW1pc2F0aW9uOiBBcHBseSBiaW5kaW5ncyBvbmx5IGlmLi4uXG4gICAgICAgIC8vICgxKSBXZSBuZWVkIHRvIHN0b3JlIHRoZSBiaW5kaW5nIGNvbnRleHQgb24gdGhpcyBub2RlIChiZWNhdXNlIGl0IG1heSBkaWZmZXIgZnJvbSB0aGUgRE9NIHBhcmVudCBub2RlJ3MgYmluZGluZyBjb250ZXh0KVxuICAgICAgICAvLyAgICAgTm90ZSB0aGF0IHdlIGNhbid0IHN0b3JlIGJpbmRpbmcgY29udGV4dHMgb24gbm9uLWVsZW1lbnRzIChlLmcuLCB0ZXh0IG5vZGVzKSwgYXMgSUUgZG9lc24ndCBhbGxvdyBleHBhbmRvIHByb3BlcnRpZXMgZm9yIHRob3NlXG4gICAgICAgIC8vICgyKSBJdCBtaWdodCBoYXZlIGJpbmRpbmdzIChlLmcuLCBpdCBoYXMgYSBkYXRhLWJpbmQgYXR0cmlidXRlLCBvciBpdCdzIGEgbWFya2VyIGZvciBhIGNvbnRhaW5lcmxlc3MgdGVtcGxhdGUpXG4gICAgICAgIHZhciBpc0VsZW1lbnQgPSAobm9kZVZlcmlmaWVkLm5vZGVUeXBlID09PSAxKTtcbiAgICAgICAgaWYgKGlzRWxlbWVudCkgLy8gV29ya2Fyb3VuZCBJRSA8PSA4IEhUTUwgcGFyc2luZyB3ZWlyZG5lc3NcbiAgICAgICAgICAgIGtvLnZpcnR1YWxFbGVtZW50cy5ub3JtYWxpc2VWaXJ0dWFsRWxlbWVudERvbVN0cnVjdHVyZShub2RlVmVyaWZpZWQpO1xuXG4gICAgICAgIHZhciBzaG91bGRBcHBseUJpbmRpbmdzID0gKGlzRWxlbWVudCAmJiBiaW5kaW5nQ29udGV4dE1heURpZmZlckZyb21Eb21QYXJlbnRFbGVtZW50KSAgICAgICAgICAgICAvLyBDYXNlICgxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IGtvLmJpbmRpbmdQcm92aWRlclsnaW5zdGFuY2UnXVsnbm9kZUhhc0JpbmRpbmdzJ10obm9kZVZlcmlmaWVkKTsgICAgICAgLy8gQ2FzZSAoMilcbiAgICAgICAgaWYgKHNob3VsZEFwcGx5QmluZGluZ3MpXG4gICAgICAgICAgICBzaG91bGRCaW5kRGVzY2VuZGFudHMgPSBhcHBseUJpbmRpbmdzVG9Ob2RlSW50ZXJuYWwobm9kZVZlcmlmaWVkLCBudWxsLCBiaW5kaW5nQ29udGV4dCwgYmluZGluZ0NvbnRleHRNYXlEaWZmZXJGcm9tRG9tUGFyZW50RWxlbWVudClbJ3Nob3VsZEJpbmREZXNjZW5kYW50cyddO1xuXG4gICAgICAgIGlmIChzaG91bGRCaW5kRGVzY2VuZGFudHMgJiYgIWJpbmRpbmdEb2VzTm90UmVjdXJzZUludG9FbGVtZW50VHlwZXNba28udXRpbHMudGFnTmFtZUxvd2VyKG5vZGVWZXJpZmllZCldKSB7XG4gICAgICAgICAgICAvLyBXZSdyZSByZWN1cnNpbmcgYXV0b21hdGljYWxseSBpbnRvIChyZWFsIG9yIHZpcnR1YWwpIGNoaWxkIG5vZGVzIHdpdGhvdXQgY2hhbmdpbmcgYmluZGluZyBjb250ZXh0cy4gU28sXG4gICAgICAgICAgICAvLyAgKiBGb3IgY2hpbGRyZW4gb2YgYSAqcmVhbCogZWxlbWVudCwgdGhlIGJpbmRpbmcgY29udGV4dCBpcyBjZXJ0YWlubHkgdGhlIHNhbWUgYXMgb24gdGhlaXIgRE9NIC5wYXJlbnROb2RlLFxuICAgICAgICAgICAgLy8gICAgaGVuY2UgYmluZGluZ0NvbnRleHRzTWF5RGlmZmVyRnJvbURvbVBhcmVudEVsZW1lbnQgaXMgZmFsc2VcbiAgICAgICAgICAgIC8vICAqIEZvciBjaGlsZHJlbiBvZiBhICp2aXJ0dWFsKiBlbGVtZW50LCB3ZSBjYW4ndCBiZSBzdXJlLiBFdmFsdWF0aW5nIC5wYXJlbnROb2RlIG9uIHRob3NlIGNoaWxkcmVuIG1heVxuICAgICAgICAgICAgLy8gICAgc2tpcCBvdmVyIGFueSBudW1iZXIgb2YgaW50ZXJtZWRpYXRlIHZpcnR1YWwgZWxlbWVudHMsIGFueSBvZiB3aGljaCBtaWdodCBkZWZpbmUgYSBjdXN0b20gYmluZGluZyBjb250ZXh0LFxuICAgICAgICAgICAgLy8gICAgaGVuY2UgYmluZGluZ0NvbnRleHRzTWF5RGlmZmVyRnJvbURvbVBhcmVudEVsZW1lbnQgaXMgdHJ1ZVxuICAgICAgICAgICAgYXBwbHlCaW5kaW5nc1RvRGVzY2VuZGFudHNJbnRlcm5hbChiaW5kaW5nQ29udGV4dCwgbm9kZVZlcmlmaWVkLCAvKiBiaW5kaW5nQ29udGV4dHNNYXlEaWZmZXJGcm9tRG9tUGFyZW50RWxlbWVudDogKi8gIWlzRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgYm91bmRFbGVtZW50RG9tRGF0YUtleSA9IGtvLnV0aWxzLmRvbURhdGEubmV4dEtleSgpO1xuXG5cbiAgICBmdW5jdGlvbiB0b3BvbG9naWNhbFNvcnRCaW5kaW5ncyhiaW5kaW5ncykge1xuICAgICAgICAvLyBEZXB0aC1maXJzdCBzb3J0XG4gICAgICAgIHZhciByZXN1bHQgPSBbXSwgICAgICAgICAgICAgICAgLy8gVGhlIGxpc3Qgb2Yga2V5L2hhbmRsZXIgcGFpcnMgdGhhdCB3ZSB3aWxsIHJldHVyblxuICAgICAgICAgICAgYmluZGluZ3NDb25zaWRlcmVkID0ge30sICAgIC8vIEEgdGVtcG9yYXJ5IHJlY29yZCBvZiB3aGljaCBiaW5kaW5ncyBhcmUgYWxyZWFkeSBpbiAncmVzdWx0J1xuICAgICAgICAgICAgY3ljbGljRGVwZW5kZW5jeVN0YWNrID0gW107IC8vIEtlZXBzIHRyYWNrIG9mIGEgZGVwdGgtc2VhcmNoIHNvIHRoYXQsIGlmIHRoZXJlJ3MgYSBjeWNsZSwgd2Uga25vdyB3aGljaCBiaW5kaW5ncyBjYXVzZWQgaXRcbiAgICAgICAga28udXRpbHMub2JqZWN0Rm9yRWFjaChiaW5kaW5ncywgZnVuY3Rpb24gcHVzaEJpbmRpbmcoYmluZGluZ0tleSkge1xuICAgICAgICAgICAgaWYgKCFiaW5kaW5nc0NvbnNpZGVyZWRbYmluZGluZ0tleV0pIHtcbiAgICAgICAgICAgICAgICB2YXIgYmluZGluZyA9IGtvWydnZXRCaW5kaW5nSGFuZGxlciddKGJpbmRpbmdLZXkpO1xuICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGFkZCBkZXBlbmRlbmNpZXMgKGlmIGFueSkgb2YgdGhlIGN1cnJlbnQgYmluZGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmluZGluZ1snYWZ0ZXInXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3ljbGljRGVwZW5kZW5jeVN0YWNrLnB1c2goYmluZGluZ0tleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBrby51dGlscy5hcnJheUZvckVhY2goYmluZGluZ1snYWZ0ZXInXSwgZnVuY3Rpb24oYmluZGluZ0RlcGVuZGVuY3lLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmluZGluZ3NbYmluZGluZ0RlcGVuZGVuY3lLZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrby51dGlscy5hcnJheUluZGV4T2YoY3ljbGljRGVwZW5kZW5jeVN0YWNrLCBiaW5kaW5nRGVwZW5kZW5jeUtleSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIkNhbm5vdCBjb21iaW5lIHRoZSBmb2xsb3dpbmcgYmluZGluZ3MsIGJlY2F1c2UgdGhleSBoYXZlIGEgY3ljbGljIGRlcGVuZGVuY3k6IFwiICsgY3ljbGljRGVwZW5kZW5jeVN0YWNrLmpvaW4oXCIsIFwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXNoQmluZGluZyhiaW5kaW5nRGVwZW5kZW5jeUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN5Y2xpY0RlcGVuZGVuY3lTdGFjay5sZW5ndGgtLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBOZXh0IGFkZCB0aGUgY3VycmVudCBiaW5kaW5nXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsga2V5OiBiaW5kaW5nS2V5LCBoYW5kbGVyOiBiaW5kaW5nIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBiaW5kaW5nc0NvbnNpZGVyZWRbYmluZGluZ0tleV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFwcGx5QmluZGluZ3NUb05vZGVJbnRlcm5hbChub2RlLCBzb3VyY2VCaW5kaW5ncywgYmluZGluZ0NvbnRleHQsIGJpbmRpbmdDb250ZXh0TWF5RGlmZmVyRnJvbURvbVBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgLy8gUHJldmVudCBtdWx0aXBsZSBhcHBseUJpbmRpbmdzIGNhbGxzIGZvciB0aGUgc2FtZSBub2RlLCBleGNlcHQgd2hlbiBhIGJpbmRpbmcgdmFsdWUgaXMgc3BlY2lmaWVkXG4gICAgICAgIHZhciBhbHJlYWR5Qm91bmQgPSBrby51dGlscy5kb21EYXRhLmdldChub2RlLCBib3VuZEVsZW1lbnREb21EYXRhS2V5KTtcbiAgICAgICAgaWYgKCFzb3VyY2VCaW5kaW5ncykge1xuICAgICAgICAgICAgaWYgKGFscmVhZHlCb3VuZCkge1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiWW91IGNhbm5vdCBhcHBseSBiaW5kaW5ncyBtdWx0aXBsZSB0aW1lcyB0byB0aGUgc2FtZSBlbGVtZW50LlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGtvLnV0aWxzLmRvbURhdGEuc2V0KG5vZGUsIGJvdW5kRWxlbWVudERvbURhdGFLZXksIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT3B0aW1pemF0aW9uOiBEb24ndCBzdG9yZSB0aGUgYmluZGluZyBjb250ZXh0IG9uIHRoaXMgbm9kZSBpZiBpdCdzIGRlZmluaXRlbHkgdGhlIHNhbWUgYXMgb24gbm9kZS5wYXJlbnROb2RlLCBiZWNhdXNlXG4gICAgICAgIC8vIHdlIGNhbiBlYXNpbHkgcmVjb3ZlciBpdCBqdXN0IGJ5IHNjYW5uaW5nIHVwIHRoZSBub2RlJ3MgYW5jZXN0b3JzIGluIHRoZSBET01cbiAgICAgICAgLy8gKG5vdGU6IGhlcmUsIHBhcmVudCBub2RlIG1lYW5zIFwicmVhbCBET00gcGFyZW50XCIgbm90IFwidmlydHVhbCBwYXJlbnRcIiwgYXMgdGhlcmUncyBubyBPKDEpIHdheSB0byBmaW5kIHRoZSB2aXJ0dWFsIHBhcmVudClcbiAgICAgICAgaWYgKCFhbHJlYWR5Qm91bmQgJiYgYmluZGluZ0NvbnRleHRNYXlEaWZmZXJGcm9tRG9tUGFyZW50RWxlbWVudClcbiAgICAgICAgICAgIGtvLnN0b3JlZEJpbmRpbmdDb250ZXh0Rm9yTm9kZShub2RlLCBiaW5kaW5nQ29udGV4dCk7XG5cbiAgICAgICAgLy8gVXNlIGJpbmRpbmdzIGlmIGdpdmVuLCBvdGhlcndpc2UgZmFsbCBiYWNrIG9uIGFza2luZyB0aGUgYmluZGluZ3MgcHJvdmlkZXIgdG8gZ2l2ZSB1cyBzb21lIGJpbmRpbmdzXG4gICAgICAgIHZhciBiaW5kaW5ncztcbiAgICAgICAgaWYgKHNvdXJjZUJpbmRpbmdzICYmIHR5cGVvZiBzb3VyY2VCaW5kaW5ncyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYmluZGluZ3MgPSBzb3VyY2VCaW5kaW5ncztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwcm92aWRlciA9IGtvLmJpbmRpbmdQcm92aWRlclsnaW5zdGFuY2UnXSxcbiAgICAgICAgICAgICAgICBnZXRCaW5kaW5ncyA9IHByb3ZpZGVyWydnZXRCaW5kaW5nQWNjZXNzb3JzJ10gfHwgZ2V0QmluZGluZ3NBbmRNYWtlQWNjZXNzb3JzO1xuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGJpbmRpbmcgZnJvbSB0aGUgcHJvdmlkZXIgd2l0aGluIGEgY29tcHV0ZWQgb2JzZXJ2YWJsZSBzbyB0aGF0IHdlIGNhbiB1cGRhdGUgdGhlIGJpbmRpbmdzIHdoZW5ldmVyXG4gICAgICAgICAgICAvLyB0aGUgYmluZGluZyBjb250ZXh0IGlzIHVwZGF0ZWQgb3IgaWYgdGhlIGJpbmRpbmcgcHJvdmlkZXIgYWNjZXNzZXMgb2JzZXJ2YWJsZXMuXG4gICAgICAgICAgICB2YXIgYmluZGluZ3NVcGRhdGVyID0ga28uZGVwZW5kZW50T2JzZXJ2YWJsZShcbiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgYmluZGluZ3MgPSBzb3VyY2VCaW5kaW5ncyA/IHNvdXJjZUJpbmRpbmdzKGJpbmRpbmdDb250ZXh0LCBub2RlKSA6IGdldEJpbmRpbmdzLmNhbGwocHJvdmlkZXIsIG5vZGUsIGJpbmRpbmdDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVnaXN0ZXIgYSBkZXBlbmRlbmN5IG9uIHRoZSBiaW5kaW5nIGNvbnRleHQgdG8gc3VwcG9ydCBvYnNlcnZhYmxlIHZpZXcgbW9kZWxzLlxuICAgICAgICAgICAgICAgICAgICBpZiAoYmluZGluZ3MgJiYgYmluZGluZ0NvbnRleHQuX3N1YnNjcmliYWJsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpbmRpbmdDb250ZXh0Ll9zdWJzY3JpYmFibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJpbmRpbmdzO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbnVsbCwgeyBkaXNwb3NlV2hlbk5vZGVJc1JlbW92ZWQ6IG5vZGUgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKCFiaW5kaW5ncyB8fCAhYmluZGluZ3NVcGRhdGVyLmlzQWN0aXZlKCkpXG4gICAgICAgICAgICAgICAgYmluZGluZ3NVcGRhdGVyID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBiaW5kaW5nSGFuZGxlclRoYXRDb250cm9sc0Rlc2NlbmRhbnRCaW5kaW5ncztcbiAgICAgICAgaWYgKGJpbmRpbmdzKSB7XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHZhbHVlIGFjY2Vzc29yIGZvciBhIGdpdmVuIGJpbmRpbmcuIFdoZW4gYmluZGluZ3MgYXJlIHN0YXRpYyAod29uJ3QgYmUgdXBkYXRlZCBiZWNhdXNlIG9mIGEgYmluZGluZ1xuICAgICAgICAgICAgLy8gY29udGV4dCB1cGRhdGUpLCBqdXN0IHJldHVybiB0aGUgdmFsdWUgYWNjZXNzb3IgZnJvbSB0aGUgYmluZGluZy4gT3RoZXJ3aXNlLCByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IGFsd2F5cyBnZXRzXG4gICAgICAgICAgICAvLyB0aGUgbGF0ZXN0IGJpbmRpbmcgdmFsdWUgYW5kIHJlZ2lzdGVycyBhIGRlcGVuZGVuY3kgb24gdGhlIGJpbmRpbmcgdXBkYXRlci5cbiAgICAgICAgICAgIHZhciBnZXRWYWx1ZUFjY2Vzc29yID0gYmluZGluZ3NVcGRhdGVyXG4gICAgICAgICAgICAgICAgPyBmdW5jdGlvbihiaW5kaW5nS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBldmFsdWF0ZVZhbHVlQWNjZXNzb3IoYmluZGluZ3NVcGRhdGVyKClbYmluZGluZ0tleV0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gOiBmdW5jdGlvbihiaW5kaW5nS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiaW5kaW5nc1tiaW5kaW5nS2V5XTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBVc2Ugb2YgYWxsQmluZGluZ3MgYXMgYSBmdW5jdGlvbiBpcyBtYWludGFpbmVkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSwgYnV0IGl0cyB1c2UgaXMgZGVwcmVjYXRlZFxuICAgICAgICAgICAgZnVuY3Rpb24gYWxsQmluZGluZ3MoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGtvLnV0aWxzLm9iamVjdE1hcChiaW5kaW5nc1VwZGF0ZXIgPyBiaW5kaW5nc1VwZGF0ZXIoKSA6IGJpbmRpbmdzLCBldmFsdWF0ZVZhbHVlQWNjZXNzb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBpcyB0aGUgMy54IGFsbEJpbmRpbmdzIEFQSVxuICAgICAgICAgICAgYWxsQmluZGluZ3NbJ2dldCddID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJpbmRpbmdzW2tleV0gJiYgZXZhbHVhdGVWYWx1ZUFjY2Vzc29yKGdldFZhbHVlQWNjZXNzb3Ioa2V5KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYWxsQmluZGluZ3NbJ2hhcyddID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleSBpbiBiaW5kaW5ncztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIEZpcnN0IHB1dCB0aGUgYmluZGluZ3MgaW50byB0aGUgcmlnaHQgb3JkZXJcbiAgICAgICAgICAgIHZhciBvcmRlcmVkQmluZGluZ3MgPSB0b3BvbG9naWNhbFNvcnRCaW5kaW5ncyhiaW5kaW5ncyk7XG5cbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIHNvcnRlZCBiaW5kaW5ncywgY2FsbGluZyBpbml0IGFuZCB1cGRhdGUgZm9yIGVhY2hcbiAgICAgICAgICAgIGtvLnV0aWxzLmFycmF5Rm9yRWFjaChvcmRlcmVkQmluZGluZ3MsIGZ1bmN0aW9uKGJpbmRpbmdLZXlBbmRIYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRvcG9sb2dpY2FsU29ydEJpbmRpbmdzIGhhcyBhbHJlYWR5IGZpbHRlcmVkIG91dCBhbnkgbm9uZXhpc3RlbnQgYmluZGluZyBoYW5kbGVycyxcbiAgICAgICAgICAgICAgICAvLyBzbyBiaW5kaW5nS2V5QW5kSGFuZGxlci5oYW5kbGVyIHdpbGwgYWx3YXlzIGJlIG5vbm51bGwuXG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZXJJbml0Rm4gPSBiaW5kaW5nS2V5QW5kSGFuZGxlci5oYW5kbGVyW1wiaW5pdFwiXSxcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlclVwZGF0ZUZuID0gYmluZGluZ0tleUFuZEhhbmRsZXIuaGFuZGxlcltcInVwZGF0ZVwiXSxcbiAgICAgICAgICAgICAgICAgICAgYmluZGluZ0tleSA9IGJpbmRpbmdLZXlBbmRIYW5kbGVyLmtleTtcblxuICAgICAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSA4KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlVGhhdEJpbmRpbmdJc0FsbG93ZWRGb3JWaXJ0dWFsRWxlbWVudHMoYmluZGluZ0tleSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUnVuIGluaXQsIGlnbm9yaW5nIGFueSBkZXBlbmRlbmNpZXNcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGVySW5pdEZuID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAga28uZGVwZW5kZW5jeURldGVjdGlvbi5pZ25vcmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluaXRSZXN1bHQgPSBoYW5kbGVySW5pdEZuKG5vZGUsIGdldFZhbHVlQWNjZXNzb3IoYmluZGluZ0tleSksIGFsbEJpbmRpbmdzLCBiaW5kaW5nQ29udGV4dFsnJGRhdGEnXSwgYmluZGluZ0NvbnRleHQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBiaW5kaW5nIGhhbmRsZXIgY2xhaW1zIHRvIGNvbnRyb2wgZGVzY2VuZGFudCBiaW5kaW5ncywgbWFrZSBhIG5vdGUgb2YgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbml0UmVzdWx0ICYmIGluaXRSZXN1bHRbJ2NvbnRyb2xzRGVzY2VuZGFudEJpbmRpbmdzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpbmRpbmdIYW5kbGVyVGhhdENvbnRyb2xzRGVzY2VuZGFudEJpbmRpbmdzICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdWx0aXBsZSBiaW5kaW5ncyAoXCIgKyBiaW5kaW5nSGFuZGxlclRoYXRDb250cm9sc0Rlc2NlbmRhbnRCaW5kaW5ncyArIFwiIGFuZCBcIiArIGJpbmRpbmdLZXkgKyBcIikgYXJlIHRyeWluZyB0byBjb250cm9sIGRlc2NlbmRhbnQgYmluZGluZ3Mgb2YgdGhlIHNhbWUgZWxlbWVudC4gWW91IGNhbm5vdCB1c2UgdGhlc2UgYmluZGluZ3MgdG9nZXRoZXIgb24gdGhlIHNhbWUgZWxlbWVudC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpbmRpbmdIYW5kbGVyVGhhdENvbnRyb2xzRGVzY2VuZGFudEJpbmRpbmdzID0gYmluZGluZ0tleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJ1biB1cGRhdGUgaW4gaXRzIG93biBjb21wdXRlZCB3cmFwcGVyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaGFuZGxlclVwZGF0ZUZuID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAga28uZGVwZW5kZW50T2JzZXJ2YWJsZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlclVwZGF0ZUZuKG5vZGUsIGdldFZhbHVlQWNjZXNzb3IoYmluZGluZ0tleSksIGFsbEJpbmRpbmdzLCBiaW5kaW5nQ29udGV4dFsnJGRhdGEnXSwgYmluZGluZ0NvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZDogbm9kZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZXgubWVzc2FnZSA9IFwiVW5hYmxlIHRvIHByb2Nlc3MgYmluZGluZyBcXFwiXCIgKyBiaW5kaW5nS2V5ICsgXCI6IFwiICsgYmluZGluZ3NbYmluZGluZ0tleV0gKyBcIlxcXCJcXG5NZXNzYWdlOiBcIiArIGV4Lm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICdzaG91bGRCaW5kRGVzY2VuZGFudHMnOiBiaW5kaW5nSGFuZGxlclRoYXRDb250cm9sc0Rlc2NlbmRhbnRCaW5kaW5ncyA9PT0gdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIHZhciBzdG9yZWRCaW5kaW5nQ29udGV4dERvbURhdGFLZXkgPSBrby51dGlscy5kb21EYXRhLm5leHRLZXkoKTtcbiAgICBrby5zdG9yZWRCaW5kaW5nQ29udGV4dEZvck5vZGUgPSBmdW5jdGlvbiAobm9kZSwgYmluZGluZ0NvbnRleHQpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMikge1xuICAgICAgICAgICAga28udXRpbHMuZG9tRGF0YS5zZXQobm9kZSwgc3RvcmVkQmluZGluZ0NvbnRleHREb21EYXRhS2V5LCBiaW5kaW5nQ29udGV4dCk7XG4gICAgICAgICAgICBpZiAoYmluZGluZ0NvbnRleHQuX3N1YnNjcmliYWJsZSlcbiAgICAgICAgICAgICAgICBiaW5kaW5nQ29udGV4dC5fc3Vic2NyaWJhYmxlLl9hZGROb2RlKG5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGtvLnV0aWxzLmRvbURhdGEuZ2V0KG5vZGUsIHN0b3JlZEJpbmRpbmdDb250ZXh0RG9tRGF0YUtleSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRCaW5kaW5nQ29udGV4dCh2aWV3TW9kZWxPckJpbmRpbmdDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiB2aWV3TW9kZWxPckJpbmRpbmdDb250ZXh0ICYmICh2aWV3TW9kZWxPckJpbmRpbmdDb250ZXh0IGluc3RhbmNlb2Yga28uYmluZGluZ0NvbnRleHQpXG4gICAgICAgICAgICA/IHZpZXdNb2RlbE9yQmluZGluZ0NvbnRleHRcbiAgICAgICAgICAgIDogbmV3IGtvLmJpbmRpbmdDb250ZXh0KHZpZXdNb2RlbE9yQmluZGluZ0NvbnRleHQpO1xuICAgIH1cblxuICAgIGtvLmFwcGx5QmluZGluZ0FjY2Vzc29yc1RvTm9kZSA9IGZ1bmN0aW9uIChub2RlLCBiaW5kaW5ncywgdmlld01vZGVsT3JCaW5kaW5nQ29udGV4dCkge1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSkgLy8gSWYgaXQncyBhbiBlbGVtZW50LCB3b3JrYXJvdW5kIElFIDw9IDggSFRNTCBwYXJzaW5nIHdlaXJkbmVzc1xuICAgICAgICAgICAga28udmlydHVhbEVsZW1lbnRzLm5vcm1hbGlzZVZpcnR1YWxFbGVtZW50RG9tU3RydWN0dXJlKG5vZGUpO1xuICAgICAgICByZXR1cm4gYXBwbHlCaW5kaW5nc1RvTm9kZUludGVybmFsKG5vZGUsIGJpbmRpbmdzLCBnZXRCaW5kaW5nQ29udGV4dCh2aWV3TW9kZWxPckJpbmRpbmdDb250ZXh0KSwgdHJ1ZSk7XG4gICAgfTtcblxuICAgIGtvLmFwcGx5QmluZGluZ3NUb05vZGUgPSBmdW5jdGlvbiAobm9kZSwgYmluZGluZ3MsIHZpZXdNb2RlbE9yQmluZGluZ0NvbnRleHQpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSBnZXRCaW5kaW5nQ29udGV4dCh2aWV3TW9kZWxPckJpbmRpbmdDb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIGtvLmFwcGx5QmluZGluZ0FjY2Vzc29yc1RvTm9kZShub2RlLCBtYWtlQmluZGluZ0FjY2Vzc29ycyhiaW5kaW5ncywgY29udGV4dCwgbm9kZSksIGNvbnRleHQpO1xuICAgIH07XG5cbiAgICBrby5hcHBseUJpbmRpbmdzVG9EZXNjZW5kYW50cyA9IGZ1bmN0aW9uKHZpZXdNb2RlbE9yQmluZGluZ0NvbnRleHQsIHJvb3ROb2RlKSB7XG4gICAgICAgIGlmIChyb290Tm9kZS5ub2RlVHlwZSA9PT0gMSB8fCByb290Tm9kZS5ub2RlVHlwZSA9PT0gOClcbiAgICAgICAgICAgIGFwcGx5QmluZGluZ3NUb0Rlc2NlbmRhbnRzSW50ZXJuYWwoZ2V0QmluZGluZ0NvbnRleHQodmlld01vZGVsT3JCaW5kaW5nQ29udGV4dCksIHJvb3ROb2RlLCB0cnVlKTtcbiAgICB9O1xuXG4gICAga28uYXBwbHlCaW5kaW5ncyA9IGZ1bmN0aW9uICh2aWV3TW9kZWxPckJpbmRpbmdDb250ZXh0LCByb290Tm9kZSkge1xuICAgICAgICAvLyBJZiBqUXVlcnkgaXMgbG9hZGVkIGFmdGVyIEtub2Nrb3V0LCB3ZSB3b24ndCBpbml0aWFsbHkgaGF2ZSBhY2Nlc3MgdG8gaXQuIFNvIHNhdmUgaXQgaGVyZS5cbiAgICAgICAgaWYgKCFqUXVlcnlJbnN0YW5jZSAmJiB3aW5kb3dbJ2pRdWVyeSddKSB7XG4gICAgICAgICAgICBqUXVlcnlJbnN0YW5jZSA9IHdpbmRvd1snalF1ZXJ5J107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocm9vdE5vZGUgJiYgKHJvb3ROb2RlLm5vZGVUeXBlICE9PSAxKSAmJiAocm9vdE5vZGUubm9kZVR5cGUgIT09IDgpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwia28uYXBwbHlCaW5kaW5nczogZmlyc3QgcGFyYW1ldGVyIHNob3VsZCBiZSB5b3VyIHZpZXcgbW9kZWw7IHNlY29uZCBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgRE9NIG5vZGVcIik7XG4gICAgICAgIHJvb3ROb2RlID0gcm9vdE5vZGUgfHwgd2luZG93LmRvY3VtZW50LmJvZHk7IC8vIE1ha2UgXCJyb290Tm9kZVwiIHBhcmFtZXRlciBvcHRpb25hbFxuXG4gICAgICAgIGFwcGx5QmluZGluZ3NUb05vZGVBbmREZXNjZW5kYW50c0ludGVybmFsKGdldEJpbmRpbmdDb250ZXh0KHZpZXdNb2RlbE9yQmluZGluZ0NvbnRleHQpLCByb290Tm9kZSwgdHJ1ZSk7XG4gICAgfTtcblxuICAgIC8vIFJldHJpZXZpbmcgYmluZGluZyBjb250ZXh0IGZyb20gYXJiaXRyYXJ5IG5vZGVzXG4gICAga28uY29udGV4dEZvciA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgLy8gV2UgY2FuIG9ubHkgZG8gc29tZXRoaW5nIG1lYW5pbmdmdWwgZm9yIGVsZW1lbnRzIGFuZCBjb21tZW50IG5vZGVzIChpbiBwYXJ0aWN1bGFyLCBub3QgdGV4dCBub2RlcywgYXMgSUUgY2FuJ3Qgc3RvcmUgZG9tZGF0YSBmb3IgdGhlbSlcbiAgICAgICAgc3dpdGNoIChub2RlLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBrby5zdG9yZWRCaW5kaW5nQ29udGV4dEZvck5vZGUobm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRleHQpIHJldHVybiBjb250ZXh0O1xuICAgICAgICAgICAgICAgIGlmIChub2RlLnBhcmVudE5vZGUpIHJldHVybiBrby5jb250ZXh0Rm9yKG5vZGUucGFyZW50Tm9kZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIGtvLmRhdGFGb3IgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0ga28uY29udGV4dEZvcihub2RlKTtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyBjb250ZXh0WyckZGF0YSddIDogdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICBrby5leHBvcnRTeW1ib2woJ2JpbmRpbmdIYW5kbGVycycsIGtvLmJpbmRpbmdIYW5kbGVycyk7XG4gICAga28uZXhwb3J0U3ltYm9sKCdhcHBseUJpbmRpbmdzJywga28uYXBwbHlCaW5kaW5ncyk7XG4gICAga28uZXhwb3J0U3ltYm9sKCdhcHBseUJpbmRpbmdzVG9EZXNjZW5kYW50cycsIGtvLmFwcGx5QmluZGluZ3NUb0Rlc2NlbmRhbnRzKTtcbiAgICBrby5leHBvcnRTeW1ib2woJ2FwcGx5QmluZGluZ0FjY2Vzc29yc1RvTm9kZScsIGtvLmFwcGx5QmluZGluZ0FjY2Vzc29yc1RvTm9kZSk7XG4gICAga28uZXhwb3J0U3ltYm9sKCdhcHBseUJpbmRpbmdzVG9Ob2RlJywga28uYXBwbHlCaW5kaW5nc1RvTm9kZSk7XG4gICAga28uZXhwb3J0U3ltYm9sKCdjb250ZXh0Rm9yJywga28uY29udGV4dEZvcik7XG4gICAga28uZXhwb3J0U3ltYm9sKCdkYXRhRm9yJywga28uZGF0YUZvcik7XG59KSgpO1xuKGZ1bmN0aW9uKHVuZGVmaW5lZCkge1xuICAgIHZhciBsb2FkaW5nU3Vic2NyaWJhYmxlc0NhY2hlID0ge30sIC8vIFRyYWNrcyBjb21wb25lbnQgbG9hZHMgdGhhdCBhcmUgY3VycmVudGx5IGluIGZsaWdodFxuICAgICAgICBsb2FkZWREZWZpbml0aW9uc0NhY2hlID0ge307ICAgIC8vIFRyYWNrcyBjb21wb25lbnQgbG9hZHMgdGhhdCBoYXZlIGFscmVhZHkgY29tcGxldGVkXG5cbiAgICBrby5jb21wb25lbnRzID0ge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKGNvbXBvbmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgY2FjaGVkRGVmaW5pdGlvbiA9IGdldE9iamVjdE93blByb3BlcnR5KGxvYWRlZERlZmluaXRpb25zQ2FjaGUsIGNvbXBvbmVudE5hbWUpO1xuICAgICAgICAgICAgaWYgKGNhY2hlZERlZmluaXRpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBJdCdzIGFscmVhZHkgbG9hZGVkIGFuZCBjYWNoZWQuIFJldXNlIHRoZSBzYW1lIGRlZmluaXRpb24gb2JqZWN0LlxuICAgICAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBmb3IgQVBJIGNvbnNpc3RlbmN5LCBldmVuIGNhY2hlIGhpdHMgY29tcGxldGUgYXN5bmNocm9ub3VzbHkgYnkgZGVmYXVsdC5cbiAgICAgICAgICAgICAgICAvLyBZb3UgY2FuIGJ5cGFzcyB0aGlzIGJ5IHB1dHRpbmcgc3luY2hyb25vdXM6dHJ1ZSBvbiB5b3VyIGNvbXBvbmVudCBjb25maWcuXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZERlZmluaXRpb24uaXNTeW5jaHJvbm91c0NvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICBrby5kZXBlbmRlbmN5RGV0ZWN0aW9uLmlnbm9yZShmdW5jdGlvbigpIHsgLy8gU2VlIGNvbW1lbnQgaW4gbG9hZGVyUmVnaXN0cnlCZWhhdmlvcnMuanMgZm9yIHJlYXNvbmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soY2FjaGVkRGVmaW5pdGlvbi5kZWZpbml0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAga28udGFza3Muc2NoZWR1bGUoZnVuY3Rpb24oKSB7IGNhbGxiYWNrKGNhY2hlZERlZmluaXRpb24uZGVmaW5pdGlvbik7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSm9pbiB0aGUgbG9hZGluZyBwcm9jZXNzIHRoYXQgaXMgYWxyZWFkeSB1bmRlcndheSwgb3Igc3RhcnQgYSBuZXcgb25lLlxuICAgICAgICAgICAgICAgIGxvYWRDb21wb25lbnRBbmROb3RpZnkoY29tcG9uZW50TmFtZSwgY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGNsZWFyQ2FjaGVkRGVmaW5pdGlvbjogZnVuY3Rpb24oY29tcG9uZW50TmFtZSkge1xuICAgICAgICAgICAgZGVsZXRlIGxvYWRlZERlZmluaXRpb25zQ2FjaGVbY29tcG9uZW50TmFtZV07XG4gICAgICAgIH0sXG5cbiAgICAgICAgX2dldEZpcnN0UmVzdWx0RnJvbUxvYWRlcnM6IGdldEZpcnN0UmVzdWx0RnJvbUxvYWRlcnNcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZ2V0T2JqZWN0T3duUHJvcGVydHkob2JqLCBwcm9wTmFtZSkge1xuICAgICAgICByZXR1cm4gb2JqLmhhc093blByb3BlcnR5KHByb3BOYW1lKSA/IG9ialtwcm9wTmFtZV0gOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZENvbXBvbmVudEFuZE5vdGlmeShjb21wb25lbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgc3Vic2NyaWJhYmxlID0gZ2V0T2JqZWN0T3duUHJvcGVydHkobG9hZGluZ1N1YnNjcmliYWJsZXNDYWNoZSwgY29tcG9uZW50TmFtZSksXG4gICAgICAgICAgICBjb21wbGV0ZWRBc3luYztcbiAgICAgICAgaWYgKCFzdWJzY3JpYmFibGUpIHtcbiAgICAgICAgICAgIC8vIEl0J3Mgbm90IHN0YXJ0ZWQgbG9hZGluZyB5ZXQuIFN0YXJ0IGxvYWRpbmcsIGFuZCB3aGVuIGl0J3MgZG9uZSwgbW92ZSBpdCB0byBsb2FkZWREZWZpbml0aW9uc0NhY2hlLlxuICAgICAgICAgICAgc3Vic2NyaWJhYmxlID0gbG9hZGluZ1N1YnNjcmliYWJsZXNDYWNoZVtjb21wb25lbnROYW1lXSA9IG5ldyBrby5zdWJzY3JpYmFibGUoKTtcbiAgICAgICAgICAgIHN1YnNjcmliYWJsZS5zdWJzY3JpYmUoY2FsbGJhY2spO1xuXG4gICAgICAgICAgICBiZWdpbkxvYWRpbmdDb21wb25lbnQoY29tcG9uZW50TmFtZSwgZnVuY3Rpb24oZGVmaW5pdGlvbiwgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzU3luY2hyb25vdXNDb21wb25lbnQgPSAhIShjb25maWcgJiYgY29uZmlnWydzeW5jaHJvbm91cyddKTtcbiAgICAgICAgICAgICAgICBsb2FkZWREZWZpbml0aW9uc0NhY2hlW2NvbXBvbmVudE5hbWVdID0geyBkZWZpbml0aW9uOiBkZWZpbml0aW9uLCBpc1N5bmNocm9ub3VzQ29tcG9uZW50OiBpc1N5bmNocm9ub3VzQ29tcG9uZW50IH07XG4gICAgICAgICAgICAgICAgZGVsZXRlIGxvYWRpbmdTdWJzY3JpYmFibGVzQ2FjaGVbY29tcG9uZW50TmFtZV07XG5cbiAgICAgICAgICAgICAgICAvLyBGb3IgQVBJIGNvbnNpc3RlbmN5LCBhbGwgbG9hZHMgY29tcGxldGUgYXN5bmNocm9ub3VzbHkuIEhvd2V2ZXIgd2Ugd2FudCB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIGFkZGluZyBhbiBleHRyYSB0YXNrIHNjaGVkdWxlIGlmIGl0J3MgdW5uZWNlc3NhcnkgKGkuZS4sIHRoZSBjb21wbGV0aW9uIGlzIGFscmVhZHlcbiAgICAgICAgICAgICAgICAvLyBhc3luYykuXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBZb3UgY2FuIGJ5cGFzcyB0aGUgJ2Fsd2F5cyBhc3luY2hyb25vdXMnIGZlYXR1cmUgYnkgcHV0dGluZyB0aGUgc3luY2hyb25vdXM6dHJ1ZVxuICAgICAgICAgICAgICAgIC8vIGZsYWcgb24geW91ciBjb21wb25lbnQgY29uZmlndXJhdGlvbiB3aGVuIHlvdSByZWdpc3RlciBpdC5cbiAgICAgICAgICAgICAgICBpZiAoY29tcGxldGVkQXN5bmMgfHwgaXNTeW5jaHJvbm91c0NvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgbm90aWZ5U3Vic2NyaWJlcnMgaWdub3JlcyBhbnkgZGVwZW5kZW5jaWVzIHJlYWQgd2l0aGluIHRoZSBjYWxsYmFjay5cbiAgICAgICAgICAgICAgICAgICAgLy8gU2VlIGNvbW1lbnQgaW4gbG9hZGVyUmVnaXN0cnlCZWhhdmlvcnMuanMgZm9yIHJlYXNvbmluZ1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmFibGVbJ25vdGlmeVN1YnNjcmliZXJzJ10oZGVmaW5pdGlvbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAga28udGFza3Muc2NoZWR1bGUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmFibGVbJ25vdGlmeVN1YnNjcmliZXJzJ10oZGVmaW5pdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29tcGxldGVkQXN5bmMgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3Vic2NyaWJhYmxlLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBiZWdpbkxvYWRpbmdDb21wb25lbnQoY29tcG9uZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgZ2V0Rmlyc3RSZXN1bHRGcm9tTG9hZGVycygnZ2V0Q29uZmlnJywgW2NvbXBvbmVudE5hbWVdLCBmdW5jdGlvbihjb25maWcpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgY29uZmlnLCBzbyBub3cgbG9hZCBpdHMgZGVmaW5pdGlvblxuICAgICAgICAgICAgICAgIGdldEZpcnN0UmVzdWx0RnJvbUxvYWRlcnMoJ2xvYWRDb21wb25lbnQnLCBbY29tcG9uZW50TmFtZSwgY29uZmlnXSwgZnVuY3Rpb24oZGVmaW5pdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhkZWZpbml0aW9uLCBjb25maWcpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgY29tcG9uZW50IGhhcyBubyBjb25maWcgLSBpdCdzIHVua25vd24gdG8gYWxsIHRoZSBsb2FkZXJzLlxuICAgICAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIGlzIG5vdCBhbiBlcnJvciAoZS5nLiwgYSBtb2R1bGUgbG9hZGluZyBlcnJvcikgLSB0aGF0IHdvdWxkIGFib3J0IHRoZVxuICAgICAgICAgICAgICAgIC8vIHByb2Nlc3MgYW5kIHRoaXMgY2FsbGJhY2sgd291bGQgbm90IHJ1bi4gRm9yIHRoaXMgY2FsbGJhY2sgdG8gcnVuLCBhbGwgbG9hZGVycyBtdXN0XG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBjb25maXJtZWQgdGhleSBkb24ndCBrbm93IGFib3V0IHRoaXMgY29tcG9uZW50LlxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRGaXJzdFJlc3VsdEZyb21Mb2FkZXJzKG1ldGhvZE5hbWUsIGFyZ3NFeGNlcHRDYWxsYmFjaywgY2FsbGJhY2ssIGNhbmRpZGF0ZUxvYWRlcnMpIHtcbiAgICAgICAgLy8gT24gdGhlIGZpcnN0IGNhbGwgaW4gdGhlIHN0YWNrLCBzdGFydCB3aXRoIHRoZSBmdWxsIHNldCBvZiBsb2FkZXJzXG4gICAgICAgIGlmICghY2FuZGlkYXRlTG9hZGVycykge1xuICAgICAgICAgICAgY2FuZGlkYXRlTG9hZGVycyA9IGtvLmNvbXBvbmVudHNbJ2xvYWRlcnMnXS5zbGljZSgwKTsgLy8gVXNlIGEgY29weSwgYmVjYXVzZSB3ZSdsbCBiZSBtdXRhdGluZyB0aGlzIGFycmF5XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcnkgdGhlIG5leHQgY2FuZGlkYXRlXG4gICAgICAgIHZhciBjdXJyZW50Q2FuZGlkYXRlTG9hZGVyID0gY2FuZGlkYXRlTG9hZGVycy5zaGlmdCgpO1xuICAgICAgICBpZiAoY3VycmVudENhbmRpZGF0ZUxvYWRlcikge1xuICAgICAgICAgICAgdmFyIG1ldGhvZEluc3RhbmNlID0gY3VycmVudENhbmRpZGF0ZUxvYWRlclttZXRob2ROYW1lXTtcbiAgICAgICAgICAgIGlmIChtZXRob2RJbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHZhciB3YXNBYm9ydGVkID0gZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHN5bmNocm9ub3VzUmV0dXJuVmFsdWUgPSBtZXRob2RJbnN0YW5jZS5hcHBseShjdXJyZW50Q2FuZGlkYXRlTG9hZGVyLCBhcmdzRXhjZXB0Q2FsbGJhY2suY29uY2F0KGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhc0Fib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjYW5kaWRhdGUgcmV0dXJuZWQgYSB2YWx1ZS4gVXNlIGl0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeSB0aGUgbmV4dCBjYW5kaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRGaXJzdFJlc3VsdEZyb21Mb2FkZXJzKG1ldGhvZE5hbWUsIGFyZ3NFeGNlcHRDYWxsYmFjaywgY2FsbGJhY2ssIGNhbmRpZGF0ZUxvYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDdXJyZW50bHksIGxvYWRlcnMgbWF5IG5vdCByZXR1cm4gYW55dGhpbmcgc3luY2hyb25vdXNseS4gVGhpcyBsZWF2ZXMgb3BlbiB0aGUgcG9zc2liaWxpdHlcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdlJ2xsIGV4dGVuZCB0aGUgQVBJIHRvIHN1cHBvcnQgc3luY2hyb25vdXMgcmV0dXJuIHZhbHVlcyBpbiB0aGUgZnV0dXJlLiBJdCB3b24ndCBiZVxuICAgICAgICAgICAgICAgIC8vIGEgYnJlYWtpbmcgY2hhbmdlLCBiZWNhdXNlIGN1cnJlbnRseSBubyBsb2FkZXIgaXMgYWxsb3dlZCB0byByZXR1cm4gYW55dGhpbmcgZXhjZXB0IHVuZGVmaW5lZC5cbiAgICAgICAgICAgICAgICBpZiAoc3luY2hyb25vdXNSZXR1cm5WYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhc0Fib3J0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIE1ldGhvZCB0byBzdXBwcmVzcyBleGNlcHRpb25zIHdpbGwgcmVtYWluIHVuZG9jdW1lbnRlZC4gVGhpcyBpcyBvbmx5IHRvIGtlZXBcbiAgICAgICAgICAgICAgICAgICAgLy8gS08ncyBzcGVjcyBydW5uaW5nIHRpZGlseSwgc2luY2Ugd2UgY2FuIG9ic2VydmUgdGhlIGxvYWRpbmcgZ290IGFib3J0ZWQgd2l0aG91dFxuICAgICAgICAgICAgICAgICAgICAvLyBoYXZpbmcgZXhjZXB0aW9ucyBjbHV0dGVyaW5nIHVwIHRoZSBjb25zb2xlIHRvby5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50Q2FuZGlkYXRlTG9hZGVyWydzdXBwcmVzc0xvYWRlckV4Y2VwdGlvbnMnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb21wb25lbnQgbG9hZGVycyBtdXN0IHN1cHBseSB2YWx1ZXMgYnkgaW52b2tpbmcgdGhlIGNhbGxiYWNrLCBub3QgYnkgcmV0dXJuaW5nIHZhbHVlcyBzeW5jaHJvbm91c2x5LicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNhbmRpZGF0ZSBkb2Vzbid0IGhhdmUgdGhlIHJlbGV2YW50IGhhbmRsZXIuIFN5bmNocm9ub3VzbHkgbW92ZSBvbiB0byB0aGUgbmV4dCBvbmUuXG4gICAgICAgICAgICAgICAgZ2V0Rmlyc3RSZXN1bHRGcm9tTG9hZGVycyhtZXRob2ROYW1lLCBhcmdzRXhjZXB0Q2FsbGJhY2ssIGNhbGxiYWNrLCBjYW5kaWRhdGVMb2FkZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIGNhbmRpZGF0ZXMgcmV0dXJuZWQgYSB2YWx1ZVxuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZWZlcmVuY2UgdGhlIGxvYWRlcnMgdmlhIHN0cmluZyBuYW1lIHNvIGl0J3MgcG9zc2libGUgZm9yIGRldmVsb3BlcnNcbiAgICAvLyB0byByZXBsYWNlIHRoZSB3aG9sZSBhcnJheSBieSBhc3NpZ25pbmcgdG8ga28uY29tcG9uZW50cy5sb2FkZXJzXG4gICAga28uY29tcG9uZW50c1snbG9hZGVycyddID0gW107XG5cbiAgICBrby5leHBvcnRTeW1ib2woJ2NvbXBvbmVudHMnLCBrby5jb21wb25lbnRzKTtcbiAgICBrby5leHBvcnRTeW1ib2woJ2NvbXBvbmVudHMuZ2V0Jywga28uY29tcG9uZW50cy5nZXQpO1xuICAgIGtvLmV4cG9ydFN5bWJvbCgnY29tcG9uZW50cy5jbGVhckNhY2hlZERlZmluaXRpb24nLCBrby5jb21wb25lbnRzLmNsZWFyQ2FjaGVkRGVmaW5pdGlvbik7XG59KSgpO1xuKGZ1bmN0aW9uKHVuZGVmaW5lZCkge1xuXG4gICAgLy8gVGhlIGRlZmF1bHQgbG9hZGVyIGlzIHJlc3BvbnNpYmxlIGZvciB0d28gdGhpbmdzOlxuICAgIC8vIDEuIE1haW50YWluaW5nIHRoZSBkZWZhdWx0IGluLW1lbW9yeSByZWdpc3RyeSBvZiBjb21wb25lbnQgY29uZmlndXJhdGlvbiBvYmplY3RzXG4gICAgLy8gICAgKGkuZS4sIHRoZSB0aGluZyB5b3UncmUgd3JpdGluZyB0byB3aGVuIHlvdSBjYWxsIGtvLmNvbXBvbmVudHMucmVnaXN0ZXIoc29tZU5hbWUsIC4uLikpXG4gICAgLy8gMi4gQW5zd2VyaW5nIHJlcXVlc3RzIGZvciBjb21wb25lbnRzIGJ5IGZldGNoaW5nIGNvbmZpZ3VyYXRpb24gb2JqZWN0c1xuICAgIC8vICAgIGZyb20gdGhhdCBkZWZhdWx0IGluLW1lbW9yeSByZWdpc3RyeSBhbmQgcmVzb2x2aW5nIHRoZW0gaW50byBzdGFuZGFyZFxuICAgIC8vICAgIGNvbXBvbmVudCBkZWZpbml0aW9uIG9iamVjdHMgKG9mIHRoZSBmb3JtIHsgY3JlYXRlVmlld01vZGVsOiAuLi4sIHRlbXBsYXRlOiAuLi4gfSlcbiAgICAvLyBDdXN0b20gbG9hZGVycyBtYXkgb3ZlcnJpZGUgZWl0aGVyIG9mIHRoZXNlIGZhY2lsaXRpZXMsIGkuZS4sXG4gICAgLy8gMS4gVG8gc3VwcGx5IGNvbmZpZ3VyYXRpb24gb2JqZWN0cyBmcm9tIHNvbWUgb3RoZXIgc291cmNlIChlLmcuLCBjb252ZW50aW9ucylcbiAgICAvLyAyLiBPciwgdG8gcmVzb2x2ZSBjb25maWd1cmF0aW9uIG9iamVjdHMgYnkgbG9hZGluZyB2aWV3bW9kZWxzL3RlbXBsYXRlcyB2aWEgYXJiaXRyYXJ5IGxvZ2ljLlxuXG4gICAgdmFyIGRlZmF1bHRDb25maWdSZWdpc3RyeSA9IHt9O1xuXG4gICAga28uY29tcG9uZW50cy5yZWdpc3RlciA9IGZ1bmN0aW9uKGNvbXBvbmVudE5hbWUsIGNvbmZpZykge1xuICAgICAgICBpZiAoIWNvbmZpZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbmZpZ3VyYXRpb24gZm9yICcgKyBjb21wb25lbnROYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChrby5jb21wb25lbnRzLmlzUmVnaXN0ZXJlZChjb21wb25lbnROYW1lKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb21wb25lbnQgJyArIGNvbXBvbmVudE5hbWUgKyAnIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVmYXVsdENvbmZpZ1JlZ2lzdHJ5W2NvbXBvbmVudE5hbWVdID0gY29uZmlnO1xuICAgIH07XG5cbiAgICBrby5jb21wb25lbnRzLmlzUmVnaXN0ZXJlZCA9IGZ1bmN0aW9uKGNvbXBvbmVudE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRDb25maWdSZWdpc3RyeS5oYXNPd25Qcm9wZXJ0eShjb21wb25lbnROYW1lKTtcbiAgICB9O1xuXG4gICAga28uY29tcG9uZW50cy51bnJlZ2lzdGVyID0gZnVuY3Rpb24oY29tcG9uZW50TmFtZSkge1xuICAgICAgICBkZWxldGUgZGVmYXVsdENvbmZpZ1JlZ2lzdHJ5W2NvbXBvbmVudE5hbWVdO1xuICAgICAgICBrby5jb21wb25lbnRzLmNsZWFyQ2FjaGVkRGVmaW5pdGlvbihjb21wb25lbnROYW1lKTtcbiAgICB9O1xuXG4gICAga28uY29tcG9uZW50cy5kZWZhdWx0TG9hZGVyID0ge1xuICAgICAgICAnZ2V0Q29uZmlnJzogZnVuY3Rpb24oY29tcG9uZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBkZWZhdWx0Q29uZmlnUmVnaXN0cnkuaGFzT3duUHJvcGVydHkoY29tcG9uZW50TmFtZSlcbiAgICAgICAgICAgICAgICA/IGRlZmF1bHRDb25maWdSZWdpc3RyeVtjb21wb25lbnROYW1lXVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIGNhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ2xvYWRDb21wb25lbnQnOiBmdW5jdGlvbihjb21wb25lbnROYW1lLCBjb25maWcsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3JDYWxsYmFjayA9IG1ha2VFcnJvckNhbGxiYWNrKGNvbXBvbmVudE5hbWUpO1xuICAgICAgICAgICAgcG9zc2libHlHZXRDb25maWdGcm9tQW1kKGVycm9yQ2FsbGJhY2ssIGNvbmZpZywgZnVuY3Rpb24obG9hZGVkQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZUNvbmZpZyhjb21wb25lbnROYW1lLCBlcnJvckNhbGxiYWNrLCBsb2FkZWRDb25maWcsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgICdsb2FkVGVtcGxhdGUnOiBmdW5jdGlvbihjb21wb25lbnROYW1lLCB0ZW1wbGF0ZUNvbmZpZywgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJlc29sdmVUZW1wbGF0ZShtYWtlRXJyb3JDYWxsYmFjayhjb21wb25lbnROYW1lKSwgdGVtcGxhdGVDb25maWcsIGNhbGxiYWNrKTtcbiAgICAgICAgfSxcblxuICAgICAgICAnbG9hZFZpZXdNb2RlbCc6IGZ1bmN0aW9uKGNvbXBvbmVudE5hbWUsIHZpZXdNb2RlbENvbmZpZywgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJlc29sdmVWaWV3TW9kZWwobWFrZUVycm9yQ2FsbGJhY2soY29tcG9uZW50TmFtZSksIHZpZXdNb2RlbENvbmZpZywgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBjcmVhdGVWaWV3TW9kZWxLZXkgPSAnY3JlYXRlVmlld01vZGVsJztcblxuICAgIC8vIFRha2VzIGEgY29uZmlnIG9iamVjdCBvZiB0aGUgZm9ybSB7IHRlbXBsYXRlOiAuLi4sIHZpZXdNb2RlbDogLi4uIH0sIGFuZCBhc3luY2hyb25vdXNseSBjb252ZXJ0IGl0XG4gICAgLy8gaW50byB0aGUgc3RhbmRhcmQgY29tcG9uZW50IGRlZmluaXRpb24gZm9ybWF0OlxuICAgIC8vICAgIHsgdGVtcGxhdGU6IDxBcnJheU9mRG9tTm9kZXM+LCBjcmVhdGVWaWV3TW9kZWw6IGZ1bmN0aW9uKHBhcmFtcywgY29tcG9uZW50SW5mbykgeyAuLi4gfSB9LlxuICAgIC8vIFNpbmNlIGJvdGggdGVtcGxhdGUgYW5kIHZpZXdNb2RlbCBtYXkgbmVlZCB0byBiZSByZXNvbHZlZCBhc3luY2hyb25vdXNseSwgYm90aCB0YXNrcyBhcmUgcGVyZm9ybWVkXG4gICAgLy8gaW4gcGFyYWxsZWwsIGFuZCB0aGUgcmVzdWx0cyBqb2luZWQgd2hlbiBib3RoIGFyZSByZWFkeS4gV2UgZG9uJ3QgZGVwZW5kIG9uIGFueSBwcm9taXNlcyBpbmZyYXN0cnVjdHVyZSxcbiAgICAvLyBzbyB0aGlzIGlzIGltcGxlbWVudGVkIG1hbnVhbGx5IGJlbG93LlxuICAgIGZ1bmN0aW9uIHJlc29sdmVDb25maWcoY29tcG9uZW50TmFtZSwgZXJyb3JDYWxsYmFjaywgY29uZmlnLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge30sXG4gICAgICAgICAgICBtYWtlQ2FsbEJhY2tXaGVuWmVybyA9IDIsXG4gICAgICAgICAgICB0cnlJc3N1ZUNhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKC0tbWFrZUNhbGxCYWNrV2hlblplcm8gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGVDb25maWcgPSBjb25maWdbJ3RlbXBsYXRlJ10sXG4gICAgICAgICAgICB2aWV3TW9kZWxDb25maWcgPSBjb25maWdbJ3ZpZXdNb2RlbCddO1xuXG4gICAgICAgIGlmICh0ZW1wbGF0ZUNvbmZpZykge1xuICAgICAgICAgICAgcG9zc2libHlHZXRDb25maWdGcm9tQW1kKGVycm9yQ2FsbGJhY2ssIHRlbXBsYXRlQ29uZmlnLCBmdW5jdGlvbihsb2FkZWRDb25maWcpIHtcbiAgICAgICAgICAgICAgICBrby5jb21wb25lbnRzLl9nZXRGaXJzdFJlc3VsdEZyb21Mb2FkZXJzKCdsb2FkVGVtcGxhdGUnLCBbY29tcG9uZW50TmFtZSwgbG9hZGVkQ29uZmlnXSwgZnVuY3Rpb24ocmVzb2x2ZWRUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbJ3RlbXBsYXRlJ10gPSByZXNvbHZlZFRlbXBsYXRlO1xuICAgICAgICAgICAgICAgICAgICB0cnlJc3N1ZUNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyeUlzc3VlQ2FsbGJhY2soKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2aWV3TW9kZWxDb25maWcpIHtcbiAgICAgICAgICAgIHBvc3NpYmx5R2V0Q29uZmlnRnJvbUFtZChlcnJvckNhbGxiYWNrLCB2aWV3TW9kZWxDb25maWcsIGZ1bmN0aW9uKGxvYWRlZENvbmZpZykge1xuICAgICAgICAgICAgICAgIGtvLmNvbXBvbmVudHMuX2dldEZpcnN0UmVzdWx0RnJvbUxvYWRlcnMoJ2xvYWRWaWV3TW9kZWwnLCBbY29tcG9uZW50TmFtZSwgbG9hZGVkQ29uZmlnXSwgZnVuY3Rpb24ocmVzb2x2ZWRWaWV3TW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2NyZWF0ZVZpZXdNb2RlbEtleV0gPSByZXNvbHZlZFZpZXdNb2RlbDtcbiAgICAgICAgICAgICAgICAgICAgdHJ5SXNzdWVDYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cnlJc3N1ZUNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlVGVtcGxhdGUoZXJyb3JDYWxsYmFjaywgdGVtcGxhdGVDb25maWcsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGVtcGxhdGVDb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyBNYXJrdXAgLSBwYXJzZSBpdFxuICAgICAgICAgICAgY2FsbGJhY2soa28udXRpbHMucGFyc2VIdG1sRnJhZ21lbnQodGVtcGxhdGVDb25maWcpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0ZW1wbGF0ZUNvbmZpZyBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAvLyBBc3N1bWUgYWxyZWFkeSBhbiBhcnJheSBvZiBET00gbm9kZXMgLSBwYXNzIHRocm91Z2ggdW5jaGFuZ2VkXG4gICAgICAgICAgICBjYWxsYmFjayh0ZW1wbGF0ZUNvbmZpZyk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNEb2N1bWVudEZyYWdtZW50KHRlbXBsYXRlQ29uZmlnKSkge1xuICAgICAgICAgICAgLy8gRG9jdW1lbnQgZnJhZ21lbnQgLSB1c2UgaXRzIGNoaWxkIG5vZGVzXG4gICAgICAgICAgICBjYWxsYmFjayhrby51dGlscy5tYWtlQXJyYXkodGVtcGxhdGVDb25maWcuY2hpbGROb2RlcykpO1xuICAgICAgICB9IGVsc2UgaWYgKHRlbXBsYXRlQ29uZmlnWydlbGVtZW50J10pIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGVtcGxhdGVDb25maWdbJ2VsZW1lbnQnXTtcbiAgICAgICAgICAgIGlmIChpc0RvbUVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAvLyBFbGVtZW50IGluc3RhbmNlIC0gY29weSBpdHMgY2hpbGQgbm9kZXNcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhjbG9uZU5vZGVzRnJvbVRlbXBsYXRlU291cmNlRWxlbWVudChlbGVtZW50KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbGVtZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIC8vIEVsZW1lbnQgSUQgLSBmaW5kIGl0LCB0aGVuIGNvcHkgaXRzIGNoaWxkIG5vZGVzXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1JbnN0YW5jZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtSW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soY2xvbmVOb2Rlc0Zyb21UZW1wbGF0ZVNvdXJjZUVsZW1lbnQoZWxlbUluc3RhbmNlKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjaygnQ2Fubm90IGZpbmQgZWxlbWVudCB3aXRoIElEICcgKyBlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVycm9yQ2FsbGJhY2soJ1Vua25vd24gZWxlbWVudCB0eXBlOiAnICsgZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlcnJvckNhbGxiYWNrKCdVbmtub3duIHRlbXBsYXRlIHZhbHVlOiAnICsgdGVtcGxhdGVDb25maWcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZVZpZXdNb2RlbChlcnJvckNhbGxiYWNrLCB2aWV3TW9kZWxDb25maWcsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygdmlld01vZGVsQ29uZmlnID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBDb25zdHJ1Y3RvciAtIGNvbnZlcnQgdG8gc3RhbmRhcmQgZmFjdG9yeSBmdW5jdGlvbiBmb3JtYXRcbiAgICAgICAgICAgIC8vIEJ5IGRlc2lnbiwgdGhpcyBkb2VzICpub3QqIHN1cHBseSBjb21wb25lbnRJbmZvIHRvIHRoZSBjb25zdHJ1Y3RvciwgYXMgdGhlIGludGVudCBpcyB0aGF0XG4gICAgICAgICAgICAvLyBjb21wb25lbnRJbmZvIGNvbnRhaW5zIG5vbi12aWV3bW9kZWwgZGF0YSAoZS5nLiwgdGhlIGNvbXBvbmVudCdzIGVsZW1lbnQpIHRoYXQgc2hvdWxkIG9ubHlcbiAgICAgICAgICAgIC8vIGJlIHVzZWQgaW4gZmFjdG9yeSBmdW5jdGlvbnMsIG5vdCB2aWV3bW9kZWwgY29uc3RydWN0b3JzLlxuICAgICAgICAgICAgY2FsbGJhY2soZnVuY3Rpb24gKHBhcmFtcyAvKiwgY29tcG9uZW50SW5mbyAqLykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdmlld01vZGVsQ29uZmlnKHBhcmFtcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygdmlld01vZGVsQ29uZmlnW2NyZWF0ZVZpZXdNb2RlbEtleV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIEFscmVhZHkgYSBmYWN0b3J5IGZ1bmN0aW9uIC0gdXNlIGl0IGFzLWlzXG4gICAgICAgICAgICBjYWxsYmFjayh2aWV3TW9kZWxDb25maWdbY3JlYXRlVmlld01vZGVsS2V5XSk7XG4gICAgICAgIH0gZWxzZSBpZiAoJ2luc3RhbmNlJyBpbiB2aWV3TW9kZWxDb25maWcpIHtcbiAgICAgICAgICAgIC8vIEZpeGVkIG9iamVjdCBpbnN0YW5jZSAtIHByb21vdGUgdG8gY3JlYXRlVmlld01vZGVsIGZvcm1hdCBmb3IgQVBJIGNvbnNpc3RlbmN5XG4gICAgICAgICAgICB2YXIgZml4ZWRJbnN0YW5jZSA9IHZpZXdNb2RlbENvbmZpZ1snaW5zdGFuY2UnXTtcbiAgICAgICAgICAgIGNhbGxiYWNrKGZ1bmN0aW9uIChwYXJhbXMsIGNvbXBvbmVudEluZm8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZml4ZWRJbnN0YW5jZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKCd2aWV3TW9kZWwnIGluIHZpZXdNb2RlbENvbmZpZykge1xuICAgICAgICAgICAgLy8gUmVzb2x2ZWQgQU1EIG1vZHVsZSB3aG9zZSB2YWx1ZSBpcyBvZiB0aGUgZm9ybSB7IHZpZXdNb2RlbDogLi4uIH1cbiAgICAgICAgICAgIHJlc29sdmVWaWV3TW9kZWwoZXJyb3JDYWxsYmFjaywgdmlld01vZGVsQ29uZmlnWyd2aWV3TW9kZWwnXSwgY2FsbGJhY2spO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXJyb3JDYWxsYmFjaygnVW5rbm93biB2aWV3TW9kZWwgdmFsdWU6ICcgKyB2aWV3TW9kZWxDb25maWcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvbmVOb2Rlc0Zyb21UZW1wbGF0ZVNvdXJjZUVsZW1lbnQoZWxlbUluc3RhbmNlKSB7XG4gICAgICAgIHN3aXRjaCAoa28udXRpbHMudGFnTmFtZUxvd2VyKGVsZW1JbnN0YW5jZSkpIHtcbiAgICAgICAgICAgIGNhc2UgJ3NjcmlwdCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGtvLnV0aWxzLnBhcnNlSHRtbEZyYWdtZW50KGVsZW1JbnN0YW5jZS50ZXh0KTtcbiAgICAgICAgICAgIGNhc2UgJ3RleHRhcmVhJzpcbiAgICAgICAgICAgICAgICByZXR1cm4ga28udXRpbHMucGFyc2VIdG1sRnJhZ21lbnQoZWxlbUluc3RhbmNlLnZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgJ3RlbXBsYXRlJzpcbiAgICAgICAgICAgICAgICAvLyBGb3IgYnJvd3NlcnMgd2l0aCBwcm9wZXIgPHRlbXBsYXRlPiBlbGVtZW50IHN1cHBvcnQgKGkuZS4sIHdoZXJlIHRoZSAuY29udGVudCBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgIC8vIGdpdmVzIGEgZG9jdW1lbnQgZnJhZ21lbnQpLCB1c2UgdGhhdCBkb2N1bWVudCBmcmFnbWVudC5cbiAgICAgICAgICAgICAgICBpZiAoaXNEb2N1bWVudEZyYWdtZW50KGVsZW1JbnN0YW5jZS5jb250ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga28udXRpbHMuY2xvbmVOb2RlcyhlbGVtSW5zdGFuY2UuY29udGVudC5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZWd1bGFyIGVsZW1lbnRzIHN1Y2ggYXMgPGRpdj4sIGFuZCA8dGVtcGxhdGU+IGVsZW1lbnRzIG9uIG9sZCBicm93c2VycyB0aGF0IGRvbid0IHJlYWxseVxuICAgICAgICAvLyB1bmRlcnN0YW5kIDx0ZW1wbGF0ZT4gYW5kIGp1c3QgdHJlYXQgaXQgYXMgYSByZWd1bGFyIGNvbnRhaW5lclxuICAgICAgICByZXR1cm4ga28udXRpbHMuY2xvbmVOb2RlcyhlbGVtSW5zdGFuY2UuY2hpbGROb2Rlcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNEb21FbGVtZW50KG9iaikge1xuICAgICAgICBpZiAod2luZG93WydIVE1MRWxlbWVudCddKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqICYmIG9iai50YWdOYW1lICYmIG9iai5ub2RlVHlwZSA9PT0gMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzRG9jdW1lbnRGcmFnbWVudChvYmopIHtcbiAgICAgICAgaWYgKHdpbmRvd1snRG9jdW1lbnRGcmFnbWVudCddKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBvYmogJiYgb2JqLm5vZGVUeXBlID09PSAxMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBvc3NpYmx5R2V0Q29uZmlnRnJvbUFtZChlcnJvckNhbGxiYWNrLCBjb25maWcsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnWydyZXF1aXJlJ10gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyBUaGUgY29uZmlnIGlzIHRoZSB2YWx1ZSBvZiBhbiBBTUQgbW9kdWxlXG4gICAgICAgICAgICBpZiAoYW1kUmVxdWlyZSB8fCB3aW5kb3dbJ3JlcXVpcmUnXSkge1xuICAgICAgICAgICAgICAgIChhbWRSZXF1aXJlIHx8IHdpbmRvd1sncmVxdWlyZSddKShbY29uZmlnWydyZXF1aXJlJ11dLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVycm9yQ2FsbGJhY2soJ1VzZXMgcmVxdWlyZSwgYnV0IG5vIEFNRCBsb2FkZXIgaXMgcHJlc2VudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2soY29uZmlnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VFcnJvckNhbGxiYWNrKGNvbXBvbmVudE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbXBvbmVudCBcXCcnICsgY29tcG9uZW50TmFtZSArICdcXCc6ICcgKyBtZXNzYWdlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBrby5leHBvcnRTeW1ib2woJ2NvbXBvbmVudHMucmVnaXN0ZXInLCBrby5jb21wb25lbnRzLnJlZ2lzdGVyKTtcbiAgICBrby5leHBvcnRTeW1ib2woJ2NvbXBvbmVudHMuaXNSZWdpc3RlcmVkJywga28uY29tcG9uZW50cy5pc1JlZ2lzdGVyZWQpO1xuICAgIGtvLmV4cG9ydFN5bWJvbCgnY29tcG9uZW50cy51bnJlZ2lzdGVyJywga28uY29tcG9uZW50cy51bnJlZ2lzdGVyKTtcblxuICAgIC8vIEV4cG9zZSB0aGUgZGVmYXVsdCBsb2FkZXIgc28gdGhhdCBkZXZlbG9wZXJzIGNhbiBkaXJlY3RseSBhc2sgaXQgZm9yIGNvbmZpZ3VyYXRpb25cbiAgICAvLyBvciB0byByZXNvbHZlIGNvbmZpZ3VyYXRpb25cbiAgICBrby5leHBvcnRTeW1ib2woJ2NvbXBvbmVudHMuZGVmYXVsdExvYWRlcicsIGtvLmNvbXBvbmVudHMuZGVmYXVsdExvYWRlcik7XG5cbiAgICAvLyBCeSBkZWZhdWx0LCB0aGUgZGVmYXVsdCBsb2FkZXIgaXMgdGhlIG9ubHkgcmVnaXN0ZXJlZCBjb21wb25lbnQgbG9hZGVyXG4gICAga28uY29tcG9uZW50c1snbG9hZGVycyddLnB1c2goa28uY29tcG9uZW50cy5kZWZhdWx0TG9hZGVyKTtcblxuICAgIC8vIFByaXZhdGVseSBleHBvc2UgdGhlIHVuZGVybHlpbmcgY29uZmlnIHJlZ2lzdHJ5IGZvciB1c2UgaW4gb2xkLUlFIHNoaW1cbiAgICBrby5jb21wb25lbnRzLl9hbGxSZWdpc3RlcmVkQ29tcG9uZW50cyA9IGRlZmF1bHRDb25maWdSZWdpc3RyeTtcbn0pKCk7XG4oZnVuY3Rpb24gKHVuZGVmaW5lZCkge1xuICAgIC8vIE92ZXJyaWRhYmxlIEFQSSBmb3IgZGV0ZXJtaW5pbmcgd2hpY2ggY29tcG9uZW50IG5hbWUgYXBwbGllcyB0byBhIGdpdmVuIG5vZGUuIEJ5IG92ZXJyaWRpbmcgdGhpcyxcbiAgICAvLyB5b3UgY2FuIGZvciBleGFtcGxlIG1hcCBzcGVjaWZpYyB0YWdOYW1lcyB0byBjb21wb25lbnRzIHRoYXQgYXJlIG5vdCBwcmVyZWdpc3RlcmVkLlxuICAgIGtvLmNvbXBvbmVudHNbJ2dldENvbXBvbmVudE5hbWVGb3JOb2RlJ10gPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHZhciB0YWdOYW1lTG93ZXIgPSBrby51dGlscy50YWdOYW1lTG93ZXIobm9kZSk7XG4gICAgICAgIGlmIChrby5jb21wb25lbnRzLmlzUmVnaXN0ZXJlZCh0YWdOYW1lTG93ZXIpKSB7XG4gICAgICAgICAgICAvLyBUcnkgdG8gZGV0ZXJtaW5lIHRoYXQgdGhpcyBub2RlIGNhbiBiZSBjb25zaWRlcmVkIGEgKmN1c3RvbSogZWxlbWVudDsgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9rbm9ja291dC9rbm9ja291dC9pc3N1ZXMvMTYwM1xuICAgICAgICAgICAgaWYgKHRhZ05hbWVMb3dlci5pbmRleE9mKCctJykgIT0gLTEgfHwgKCcnICsgbm9kZSkgPT0gXCJbb2JqZWN0IEhUTUxVbmtub3duRWxlbWVudF1cIiB8fCAoa28udXRpbHMuaWVWZXJzaW9uIDw9IDggJiYgbm9kZS50YWdOYW1lID09PSB0YWdOYW1lTG93ZXIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhZ05hbWVMb3dlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBrby5jb21wb25lbnRzLmFkZEJpbmRpbmdzRm9yQ3VzdG9tRWxlbWVudCA9IGZ1bmN0aW9uKGFsbEJpbmRpbmdzLCBub2RlLCBiaW5kaW5nQ29udGV4dCwgdmFsdWVBY2Nlc3NvcnMpIHtcbiAgICAgICAgLy8gRGV0ZXJtaW5lIGlmIGl0J3MgcmVhbGx5IGEgY3VzdG9tIGVsZW1lbnQgbWF0Y2hpbmcgYSBjb21wb25lbnRcbiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgIHZhciBjb21wb25lbnROYW1lID0ga28uY29tcG9uZW50c1snZ2V0Q29tcG9uZW50TmFtZUZvck5vZGUnXShub2RlKTtcbiAgICAgICAgICAgIGlmIChjb21wb25lbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgLy8gSXQgZG9lcyByZXByZXNlbnQgYSBjb21wb25lbnQsIHNvIGFkZCBhIGNvbXBvbmVudCBiaW5kaW5nIGZvciBpdFxuICAgICAgICAgICAgICAgIGFsbEJpbmRpbmdzID0gYWxsQmluZGluZ3MgfHwge307XG5cbiAgICAgICAgICAgICAgICBpZiAoYWxsQmluZGluZ3NbJ2NvbXBvbmVudCddKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF2b2lkIHNpbGVudGx5IG92ZXJ3cml0aW5nIHNvbWUgb3RoZXIgJ2NvbXBvbmVudCcgYmluZGluZyB0aGF0IG1heSBhbHJlYWR5IGJlIG9uIHRoZSBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHVzZSB0aGUgXCJjb21wb25lbnRcIiBiaW5kaW5nIG9uIGEgY3VzdG9tIGVsZW1lbnQgbWF0Y2hpbmcgYSBjb21wb25lbnQnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50QmluZGluZ1ZhbHVlID0geyAnbmFtZSc6IGNvbXBvbmVudE5hbWUsICdwYXJhbXMnOiBnZXRDb21wb25lbnRQYXJhbXNGcm9tQ3VzdG9tRWxlbWVudChub2RlLCBiaW5kaW5nQ29udGV4dCkgfTtcblxuICAgICAgICAgICAgICAgIGFsbEJpbmRpbmdzWydjb21wb25lbnQnXSA9IHZhbHVlQWNjZXNzb3JzXG4gICAgICAgICAgICAgICAgICAgID8gZnVuY3Rpb24oKSB7IHJldHVybiBjb21wb25lbnRCaW5kaW5nVmFsdWU7IH1cbiAgICAgICAgICAgICAgICAgICAgOiBjb21wb25lbnRCaW5kaW5nVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWxsQmluZGluZ3M7XG4gICAgfVxuXG4gICAgdmFyIG5hdGl2ZUJpbmRpbmdQcm92aWRlckluc3RhbmNlID0gbmV3IGtvLmJpbmRpbmdQcm92aWRlcigpO1xuXG4gICAgZnVuY3Rpb24gZ2V0Q29tcG9uZW50UGFyYW1zRnJvbUN1c3RvbUVsZW1lbnQoZWxlbSwgYmluZGluZ0NvbnRleHQpIHtcbiAgICAgICAgdmFyIHBhcmFtc0F0dHJpYnV0ZSA9IGVsZW0uZ2V0QXR0cmlidXRlKCdwYXJhbXMnKTtcblxuICAgICAgICBpZiAocGFyYW1zQXR0cmlidXRlKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gbmF0aXZlQmluZGluZ1Byb3ZpZGVySW5zdGFuY2VbJ3BhcnNlQmluZGluZ3NTdHJpbmcnXShwYXJhbXNBdHRyaWJ1dGUsIGJpbmRpbmdDb250ZXh0LCBlbGVtLCB7ICd2YWx1ZUFjY2Vzc29ycyc6IHRydWUsICdiaW5kaW5nUGFyYW1zJzogdHJ1ZSB9KSxcbiAgICAgICAgICAgICAgICByYXdQYXJhbUNvbXB1dGVkVmFsdWVzID0ga28udXRpbHMub2JqZWN0TWFwKHBhcmFtcywgZnVuY3Rpb24ocGFyYW1WYWx1ZSwgcGFyYW1OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBrby5jb21wdXRlZChwYXJhbVZhbHVlLCBudWxsLCB7IGRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZDogZWxlbSB9KTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBrby51dGlscy5vYmplY3RNYXAocmF3UGFyYW1Db21wdXRlZFZhbHVlcywgZnVuY3Rpb24ocGFyYW1WYWx1ZUNvbXB1dGVkLCBwYXJhbU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtVmFsdWUgPSBwYXJhbVZhbHVlQ29tcHV0ZWQucGVlaygpO1xuICAgICAgICAgICAgICAgICAgICAvLyBEb2VzIHRoZSBldmFsdWF0aW9uIG9mIHRoZSBwYXJhbWV0ZXIgdmFsdWUgdW53cmFwIGFueSBvYnNlcnZhYmxlcz9cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJhbVZhbHVlQ29tcHV0ZWQuaXNBY3RpdmUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gaXQgZG9lc24ndCwgc28gdGhlcmUncyBubyBuZWVkIGZvciBhbnkgY29tcHV0ZWQgd3JhcHBlci4gSnVzdCBwYXNzIHRocm91Z2ggdGhlIHN1cHBsaWVkIHZhbHVlIGRpcmVjdGx5LlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhhbXBsZTogXCJzb21lVmFsOiBmaXJzdE5hbWUsIGFnZTogMTIzXCIgKHdoZXRoZXIgb3Igbm90IGZpcnN0TmFtZSBpcyBhbiBvYnNlcnZhYmxlL2NvbXB1dGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBZZXMgaXQgZG9lcy4gU3VwcGx5IGEgY29tcHV0ZWQgcHJvcGVydHkgdGhhdCB1bndyYXBzIGJvdGggdGhlIG91dGVyIChiaW5kaW5nIGV4cHJlc3Npb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXZlbCBvZiBvYnNlcnZhYmlsaXR5LCBhbmQgYW55IGlubmVyIChyZXN1bHRpbmcgbW9kZWwgdmFsdWUpIGxldmVsIG9mIG9ic2VydmFiaWxpdHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIG1lYW5zIHRoZSBjb21wb25lbnQgZG9lc24ndCBoYXZlIHRvIHdvcnJ5IGFib3V0IG11bHRpcGxlIHVud3JhcHBpbmcuIElmIHRoZSB2YWx1ZSBpcyBhXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3cml0YWJsZSBvYnNlcnZhYmxlLCB0aGUgY29tcHV0ZWQgd2lsbCBhbHNvIGJlIHdyaXRhYmxlIGFuZCBwYXNzIHRoZSB2YWx1ZSBvbiB0byB0aGUgb2JzZXJ2YWJsZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrby5jb21wdXRlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3JlYWQnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUocGFyYW1WYWx1ZUNvbXB1dGVkKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dyaXRlJzoga28uaXNXcml0ZWFibGVPYnNlcnZhYmxlKHBhcmFtVmFsdWUpICYmIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtVmFsdWVDb21wdXRlZCgpKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZDogZWxlbVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gR2l2ZSBhY2Nlc3MgdG8gdGhlIHJhdyBjb21wdXRlZHMsIGFzIGxvbmcgYXMgdGhhdCB3b3VsZG4ndCBvdmVyd3JpdGUgYW55IGN1c3RvbSBwYXJhbSBhbHNvIGNhbGxlZCAnJHJhdydcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgaW4gY2FzZSB0aGUgZGV2ZWxvcGVyIHdhbnRzIHRvIHJlYWN0IHRvIG91dGVyIChiaW5kaW5nKSBvYnNlcnZhYmlsaXR5IHNlcGFyYXRlbHkgZnJvbSBpbm5lclxuICAgICAgICAgICAgLy8gKG1vZGVsIHZhbHVlKSBvYnNlcnZhYmlsaXR5LCBvciBpbiBjYXNlIHRoZSBtb2RlbCB2YWx1ZSBvYnNlcnZhYmxlIGhhcyBzdWJvYnNlcnZhYmxlcy5cbiAgICAgICAgICAgIGlmICghcmVzdWx0Lmhhc093blByb3BlcnR5KCckcmF3JykpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbJyRyYXcnXSA9IHJhd1BhcmFtQ29tcHV0ZWRWYWx1ZXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3IgY29uc2lzdGVuY3ksIGFic2VuY2Ugb2YgYSBcInBhcmFtc1wiIGF0dHJpYnV0ZSBpcyB0cmVhdGVkIHRoZSBzYW1lIGFzIHRoZSBwcmVzZW5jZSBvZlxuICAgICAgICAgICAgLy8gYW55IGVtcHR5IG9uZS4gT3RoZXJ3aXNlIGNvbXBvbmVudCB2aWV3bW9kZWxzIG5lZWQgc3BlY2lhbCBjb2RlIHRvIGNoZWNrIHdoZXRoZXIgb3Igbm90XG4gICAgICAgICAgICAvLyAncGFyYW1zJyBvciAncGFyYW1zLiRyYXcnIGlzIG51bGwvdW5kZWZpbmVkIGJlZm9yZSByZWFkaW5nIHN1YnByb3BlcnRpZXMsIHdoaWNoIGlzIGFubm95aW5nLlxuICAgICAgICAgICAgcmV0dXJuIHsgJyRyYXcnOiB7fSB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBDb21wYXRpYmlsaXR5IGNvZGUgZm9yIG9sZGVyIChwcmUtSFRNTDUpIElFIGJyb3dzZXJzXG5cbiAgICBpZiAoa28udXRpbHMuaWVWZXJzaW9uIDwgOSkge1xuICAgICAgICAvLyBXaGVuZXZlciB5b3UgcHJlcmVnaXN0ZXIgYSBjb21wb25lbnQsIGVuYWJsZSBpdCBhcyBhIGN1c3RvbSBlbGVtZW50IGluIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gICAgICAgIGtvLmNvbXBvbmVudHNbJ3JlZ2lzdGVyJ10gPSAoZnVuY3Rpb24ob3JpZ2luYWxGdW5jdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNvbXBvbmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudE5hbWUpOyAvLyBBbGxvd3MgSUU8OSB0byBwYXJzZSBtYXJrdXAgY29udGFpbmluZyB0aGUgY3VzdG9tIGVsZW1lbnRcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxGdW5jdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KShrby5jb21wb25lbnRzWydyZWdpc3RlciddKTtcblxuICAgICAgICAvLyBXaGVuZXZlciB5b3UgY3JlYXRlIGEgZG9jdW1lbnQgZnJhZ21lbnQsIGVuYWJsZSBhbGwgcHJlcmVnaXN0ZXJlZCBjb21wb25lbnQgbmFtZXMgYXMgY3VzdG9tIGVsZW1lbnRzXG4gICAgICAgIC8vIFRoaXMgaXMgbmVlZGVkIHRvIG1ha2UgaW5uZXJTaGl2L2pRdWVyeSBIVE1MIHBhcnNpbmcgY29ycmVjdGx5IGhhbmRsZSB0aGUgY3VzdG9tIGVsZW1lbnRzXG4gICAgICAgIGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQgPSAoZnVuY3Rpb24ob3JpZ2luYWxGdW5jdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdEb2NGcmFnID0gb3JpZ2luYWxGdW5jdGlvbigpLFxuICAgICAgICAgICAgICAgICAgICBhbGxDb21wb25lbnRzID0ga28uY29tcG9uZW50cy5fYWxsUmVnaXN0ZXJlZENvbXBvbmVudHM7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY29tcG9uZW50TmFtZSBpbiBhbGxDb21wb25lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbGxDb21wb25lbnRzLmhhc093blByb3BlcnR5KGNvbXBvbmVudE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdEb2NGcmFnLmNyZWF0ZUVsZW1lbnQoY29tcG9uZW50TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld0RvY0ZyYWc7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KShkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KTtcbiAgICB9XG59KSgpOyhmdW5jdGlvbih1bmRlZmluZWQpIHtcblxuICAgIHZhciBjb21wb25lbnRMb2FkaW5nT3BlcmF0aW9uVW5pcXVlSWQgPSAwO1xuXG4gICAga28uYmluZGluZ0hhbmRsZXJzWydjb21wb25lbnQnXSA9IHtcbiAgICAgICAgJ2luaXQnOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBpZ25vcmVkMSwgaWdub3JlZDIsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudFZpZXdNb2RlbCxcbiAgICAgICAgICAgICAgICBjdXJyZW50TG9hZGluZ09wZXJhdGlvbklkLFxuICAgICAgICAgICAgICAgIGRpc3Bvc2VBc3NvY2lhdGVkQ29tcG9uZW50Vmlld01vZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFZpZXdNb2RlbERpc3Bvc2UgPSBjdXJyZW50Vmlld01vZGVsICYmIGN1cnJlbnRWaWV3TW9kZWxbJ2Rpc3Bvc2UnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXJyZW50Vmlld01vZGVsRGlzcG9zZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZpZXdNb2RlbERpc3Bvc2UuY2FsbChjdXJyZW50Vmlld01vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Vmlld01vZGVsID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gQW55IGluLWZsaWdodCBsb2FkaW5nIG9wZXJhdGlvbiBpcyBubyBsb25nZXIgcmVsZXZhbnQsIHNvIG1ha2Ugc3VyZSB3ZSBpZ25vcmUgaXRzIGNvbXBsZXRpb25cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudExvYWRpbmdPcGVyYXRpb25JZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcmlnaW5hbENoaWxkTm9kZXMgPSBrby51dGlscy5tYWtlQXJyYXkoa28udmlydHVhbEVsZW1lbnRzLmNoaWxkTm9kZXMoZWxlbWVudCkpO1xuXG4gICAgICAgICAgICBrby51dGlscy5kb21Ob2RlRGlzcG9zYWwuYWRkRGlzcG9zZUNhbGxiYWNrKGVsZW1lbnQsIGRpc3Bvc2VBc3NvY2lhdGVkQ29tcG9uZW50Vmlld01vZGVsKTtcblxuICAgICAgICAgICAga28uY29tcHV0ZWQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKSxcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50TmFtZSwgY29tcG9uZW50UGFyYW1zO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50TmFtZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudE5hbWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlWyduYW1lJ10pO1xuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRQYXJhbXMgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlWydwYXJhbXMnXSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFjb21wb25lbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY29tcG9uZW50IG5hbWUgc3BlY2lmaWVkJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGxvYWRpbmdPcGVyYXRpb25JZCA9IGN1cnJlbnRMb2FkaW5nT3BlcmF0aW9uSWQgPSArK2NvbXBvbmVudExvYWRpbmdPcGVyYXRpb25VbmlxdWVJZDtcbiAgICAgICAgICAgICAgICBrby5jb21wb25lbnRzLmdldChjb21wb25lbnROYW1lLCBmdW5jdGlvbihjb21wb25lbnREZWZpbml0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgbm90IHRoZSBjdXJyZW50IGxvYWQgb3BlcmF0aW9uIGZvciB0aGlzIGVsZW1lbnQsIGlnbm9yZSBpdC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRMb2FkaW5nT3BlcmF0aW9uSWQgIT09IGxvYWRpbmdPcGVyYXRpb25JZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgcHJldmlvdXMgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgZGlzcG9zZUFzc29jaWF0ZWRDb21wb25lbnRWaWV3TW9kZWwoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJbnN0YW50aWF0ZSBhbmQgYmluZCBuZXcgY29tcG9uZW50LiBJbXBsaWNpdGx5IHRoaXMgY2xlYW5zIGFueSBvbGQgRE9NIG5vZGVzLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudERlZmluaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBjb21wb25lbnQgXFwnJyArIGNvbXBvbmVudE5hbWUgKyAnXFwnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2xvbmVUZW1wbGF0ZUludG9FbGVtZW50KGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudERlZmluaXRpb24sIGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50Vmlld01vZGVsID0gY3JlYXRlVmlld01vZGVsKGNvbXBvbmVudERlZmluaXRpb24sIGVsZW1lbnQsIG9yaWdpbmFsQ2hpbGROb2RlcywgY29tcG9uZW50UGFyYW1zKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkQmluZGluZ0NvbnRleHQgPSBiaW5kaW5nQ29udGV4dFsnY3JlYXRlQ2hpbGRDb250ZXh0J10oY29tcG9uZW50Vmlld01vZGVsLCAvKiBkYXRhSXRlbUFsaWFzICovIHVuZGVmaW5lZCwgZnVuY3Rpb24oY3R4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4WyckY29tcG9uZW50J10gPSBjb21wb25lbnRWaWV3TW9kZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4WyckY29tcG9uZW50VGVtcGxhdGVOb2RlcyddID0gb3JpZ2luYWxDaGlsZE5vZGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWaWV3TW9kZWwgPSBjb21wb25lbnRWaWV3TW9kZWw7XG4gICAgICAgICAgICAgICAgICAgIGtvLmFwcGx5QmluZGluZ3NUb0Rlc2NlbmRhbnRzKGNoaWxkQmluZGluZ0NvbnRleHQsIGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgbnVsbCwgeyBkaXNwb3NlV2hlbk5vZGVJc1JlbW92ZWQ6IGVsZW1lbnQgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7ICdjb250cm9sc0Rlc2NlbmRhbnRCaW5kaW5ncyc6IHRydWUgfTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBrby52aXJ0dWFsRWxlbWVudHMuYWxsb3dlZEJpbmRpbmdzWydjb21wb25lbnQnXSA9IHRydWU7XG5cbiAgICBmdW5jdGlvbiBjbG9uZVRlbXBsYXRlSW50b0VsZW1lbnQoY29tcG9uZW50TmFtZSwgY29tcG9uZW50RGVmaW5pdGlvbiwgZWxlbWVudCkge1xuICAgICAgICB2YXIgdGVtcGxhdGUgPSBjb21wb25lbnREZWZpbml0aW9uWyd0ZW1wbGF0ZSddO1xuICAgICAgICBpZiAoIXRlbXBsYXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbXBvbmVudCBcXCcnICsgY29tcG9uZW50TmFtZSArICdcXCcgaGFzIG5vIHRlbXBsYXRlJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY2xvbmVkTm9kZXNBcnJheSA9IGtvLnV0aWxzLmNsb25lTm9kZXModGVtcGxhdGUpO1xuICAgICAgICBrby52aXJ0dWFsRWxlbWVudHMuc2V0RG9tTm9kZUNoaWxkcmVuKGVsZW1lbnQsIGNsb25lZE5vZGVzQXJyYXkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVZpZXdNb2RlbChjb21wb25lbnREZWZpbml0aW9uLCBlbGVtZW50LCBvcmlnaW5hbENoaWxkTm9kZXMsIGNvbXBvbmVudFBhcmFtcykge1xuICAgICAgICB2YXIgY29tcG9uZW50Vmlld01vZGVsRmFjdG9yeSA9IGNvbXBvbmVudERlZmluaXRpb25bJ2NyZWF0ZVZpZXdNb2RlbCddO1xuICAgICAgICByZXR1cm4gY29tcG9uZW50Vmlld01vZGVsRmFjdG9yeVxuICAgICAgICAgICAgPyBjb21wb25lbnRWaWV3TW9kZWxGYWN0b3J5LmNhbGwoY29tcG9uZW50RGVmaW5pdGlvbiwgY29tcG9uZW50UGFyYW1zLCB7ICdlbGVtZW50JzogZWxlbWVudCwgJ3RlbXBsYXRlTm9kZXMnOiBvcmlnaW5hbENoaWxkTm9kZXMgfSlcbiAgICAgICAgICAgIDogY29tcG9uZW50UGFyYW1zOyAvLyBUZW1wbGF0ZS1vbmx5IGNvbXBvbmVudFxuICAgIH1cblxufSkoKTtcbnZhciBhdHRySHRtbFRvSmF2YXNjcmlwdE1hcCA9IHsgJ2NsYXNzJzogJ2NsYXNzTmFtZScsICdmb3InOiAnaHRtbEZvcicgfTtcbmtvLmJpbmRpbmdIYW5kbGVyc1snYXR0ciddID0ge1xuICAgICd1cGRhdGUnOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncykge1xuICAgICAgICB2YXIgdmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSkgfHwge307XG4gICAgICAgIGtvLnV0aWxzLm9iamVjdEZvckVhY2godmFsdWUsIGZ1bmN0aW9uKGF0dHJOYW1lLCBhdHRyVmFsdWUpIHtcbiAgICAgICAgICAgIGF0dHJWYWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUoYXR0clZhbHVlKTtcblxuICAgICAgICAgICAgLy8gVG8gY292ZXIgY2FzZXMgbGlrZSBcImF0dHI6IHsgY2hlY2tlZDpzb21lUHJvcCB9XCIsIHdlIHdhbnQgdG8gcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgZW50aXJlbHlcbiAgICAgICAgICAgIC8vIHdoZW4gc29tZVByb3AgaXMgYSBcIm5vIHZhbHVlXCItbGlrZSB2YWx1ZSAoc3RyaWN0bHkgbnVsbCwgZmFsc2UsIG9yIHVuZGVmaW5lZClcbiAgICAgICAgICAgIC8vIChiZWNhdXNlIHRoZSBhYnNlbmNlIG9mIHRoZSBcImNoZWNrZWRcIiBhdHRyIGlzIGhvdyB0byBtYXJrIGFuIGVsZW1lbnQgYXMgbm90IGNoZWNrZWQsIGV0Yy4pXG4gICAgICAgICAgICB2YXIgdG9SZW1vdmUgPSAoYXR0clZhbHVlID09PSBmYWxzZSkgfHwgKGF0dHJWYWx1ZSA9PT0gbnVsbCkgfHwgKGF0dHJWYWx1ZSA9PT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGlmICh0b1JlbW92ZSlcbiAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSk7XG5cbiAgICAgICAgICAgIC8vIEluIElFIDw9IDcgYW5kIElFOCBRdWlya3MgTW9kZSwgeW91IGhhdmUgdG8gdXNlIHRoZSBKYXZhc2NyaXB0IHByb3BlcnR5IG5hbWUgaW5zdGVhZCBvZiB0aGVcbiAgICAgICAgICAgIC8vIEhUTUwgYXR0cmlidXRlIG5hbWUgZm9yIGNlcnRhaW4gYXR0cmlidXRlcy4gSUU4IFN0YW5kYXJkcyBNb2RlIHN1cHBvcnRzIHRoZSBjb3JyZWN0IGJlaGF2aW9yLFxuICAgICAgICAgICAgLy8gYnV0IGluc3RlYWQgb2YgZmlndXJpbmcgb3V0IHRoZSBtb2RlLCB3ZSdsbCBqdXN0IHNldCB0aGUgYXR0cmlidXRlIHRocm91Z2ggdGhlIEphdmFzY3JpcHRcbiAgICAgICAgICAgIC8vIHByb3BlcnR5IGZvciBJRSA8PSA4LlxuICAgICAgICAgICAgaWYgKGtvLnV0aWxzLmllVmVyc2lvbiA8PSA4ICYmIGF0dHJOYW1lIGluIGF0dHJIdG1sVG9KYXZhc2NyaXB0TWFwKSB7XG4gICAgICAgICAgICAgICAgYXR0ck5hbWUgPSBhdHRySHRtbFRvSmF2YXNjcmlwdE1hcFthdHRyTmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKHRvUmVtb3ZlKVxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50W2F0dHJOYW1lXSA9IGF0dHJWYWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRvUmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJWYWx1ZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVHJlYXQgXCJuYW1lXCIgc3BlY2lhbGx5IC0gYWx0aG91Z2ggeW91IGNhbiB0aGluayBvZiBpdCBhcyBhbiBhdHRyaWJ1dGUsIGl0IGFsc28gbmVlZHNcbiAgICAgICAgICAgIC8vIHNwZWNpYWwgaGFuZGxpbmcgb24gb2xkZXIgdmVyc2lvbnMgb2YgSUUgKGh0dHBzOi8vZ2l0aHViLmNvbS9TdGV2ZVNhbmRlcnNvbi9rbm9ja291dC9wdWxsLzMzMylcbiAgICAgICAgICAgIC8vIERlbGliZXJhdGVseSBiZWluZyBjYXNlLXNlbnNpdGl2ZSBoZXJlIGJlY2F1c2UgWEhUTUwgd291bGQgcmVnYXJkIFwiTmFtZVwiIGFzIGEgZGlmZmVyZW50IHRoaW5nXG4gICAgICAgICAgICAvLyBlbnRpcmVseSwgYW5kIHRoZXJlJ3Mgbm8gc3Ryb25nIHJlYXNvbiB0byBhbGxvdyBmb3Igc3VjaCBjYXNpbmcgaW4gSFRNTC5cbiAgICAgICAgICAgIGlmIChhdHRyTmFtZSA9PT0gXCJuYW1lXCIpIHtcbiAgICAgICAgICAgICAgICBrby51dGlscy5zZXRFbGVtZW50TmFtZShlbGVtZW50LCB0b1JlbW92ZSA/IFwiXCIgOiBhdHRyVmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG4oZnVuY3Rpb24oKSB7XG5cbmtvLmJpbmRpbmdIYW5kbGVyc1snY2hlY2tlZCddID0ge1xuICAgICdhZnRlcic6IFsndmFsdWUnLCAnYXR0ciddLFxuICAgICdpbml0JzogZnVuY3Rpb24gKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzKSB7XG4gICAgICAgIHZhciBjaGVja2VkVmFsdWUgPSBrby5wdXJlQ29tcHV0ZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBUcmVhdCBcInZhbHVlXCIgbGlrZSBcImNoZWNrZWRWYWx1ZVwiIHdoZW4gaXQgaXMgaW5jbHVkZWQgd2l0aCBcImNoZWNrZWRcIiBiaW5kaW5nXG4gICAgICAgICAgICBpZiAoYWxsQmluZGluZ3NbJ2hhcyddKCdjaGVja2VkVmFsdWUnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGFsbEJpbmRpbmdzLmdldCgnY2hlY2tlZFZhbHVlJykpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhbGxCaW5kaW5nc1snaGFzJ10oJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShhbGxCaW5kaW5ncy5nZXQoJ3ZhbHVlJykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlTW9kZWwoKSB7XG4gICAgICAgICAgICAvLyBUaGlzIHVwZGF0ZXMgdGhlIG1vZGVsIHZhbHVlIGZyb20gdGhlIHZpZXcgdmFsdWUuXG4gICAgICAgICAgICAvLyBJdCBydW5zIGluIHJlc3BvbnNlIHRvIERPTSBldmVudHMgKGNsaWNrKSBhbmQgY2hhbmdlcyBpbiBjaGVja2VkVmFsdWUuXG4gICAgICAgICAgICB2YXIgaXNDaGVja2VkID0gZWxlbWVudC5jaGVja2VkLFxuICAgICAgICAgICAgICAgIGVsZW1WYWx1ZSA9IHVzZUNoZWNrZWRWYWx1ZSA/IGNoZWNrZWRWYWx1ZSgpIDogaXNDaGVja2VkO1xuXG4gICAgICAgICAgICAvLyBXaGVuIHdlJ3JlIGZpcnN0IHNldHRpbmcgdXAgdGhpcyBjb21wdXRlZCwgZG9uJ3QgY2hhbmdlIGFueSBtb2RlbCBzdGF0ZS5cbiAgICAgICAgICAgIGlmIChrby5jb21wdXRlZENvbnRleHQuaXNJbml0aWFsKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFdlIGNhbiBpZ25vcmUgdW5jaGVja2VkIHJhZGlvIGJ1dHRvbnMsIGJlY2F1c2Ugc29tZSBvdGhlciByYWRpb1xuICAgICAgICAgICAgLy8gYnV0dG9uIHdpbGwgYmUgZ2V0dGluZyBjaGVja2VkLCBhbmQgdGhhdCBvbmUgY2FuIHRha2UgY2FyZSBvZiB1cGRhdGluZyBzdGF0ZS5cbiAgICAgICAgICAgIGlmIChpc1JhZGlvICYmICFpc0NoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBtb2RlbFZhbHVlID0ga28uZGVwZW5kZW5jeURldGVjdGlvbi5pZ25vcmUodmFsdWVBY2Nlc3Nvcik7XG4gICAgICAgICAgICBpZiAodmFsdWVJc0FycmF5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHdyaXRhYmxlVmFsdWUgPSByYXdWYWx1ZUlzTm9uQXJyYXlPYnNlcnZhYmxlID8gbW9kZWxWYWx1ZS5wZWVrKCkgOiBtb2RlbFZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChvbGRFbGVtVmFsdWUgIT09IGVsZW1WYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHdlJ3JlIHJlc3BvbmRpbmcgdG8gdGhlIGNoZWNrZWRWYWx1ZSBjaGFuZ2luZywgYW5kIHRoZSBlbGVtZW50IGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGN1cnJlbnRseSBjaGVja2VkLCByZXBsYWNlIHRoZSBvbGQgZWxlbSB2YWx1ZSB3aXRoIHRoZSBuZXcgZWxlbSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAvLyBpbiB0aGUgbW9kZWwgYXJyYXkuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0NoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvLnV0aWxzLmFkZE9yUmVtb3ZlSXRlbSh3cml0YWJsZVZhbHVlLCBlbGVtVmFsdWUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAga28udXRpbHMuYWRkT3JSZW1vdmVJdGVtKHdyaXRhYmxlVmFsdWUsIG9sZEVsZW1WYWx1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgb2xkRWxlbVZhbHVlID0gZWxlbVZhbHVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gd2UncmUgcmVzcG9uZGluZyB0byB0aGUgdXNlciBoYXZpbmcgY2hlY2tlZC91bmNoZWNrZWQgYSBjaGVja2JveCxcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkL3JlbW92ZSB0aGUgZWxlbWVudCB2YWx1ZSB0byB0aGUgbW9kZWwgYXJyYXkuXG4gICAgICAgICAgICAgICAgICAgIGtvLnV0aWxzLmFkZE9yUmVtb3ZlSXRlbSh3cml0YWJsZVZhbHVlLCBlbGVtVmFsdWUsIGlzQ2hlY2tlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyYXdWYWx1ZUlzTm9uQXJyYXlPYnNlcnZhYmxlICYmIGtvLmlzV3JpdGVhYmxlT2JzZXJ2YWJsZShtb2RlbFZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbFZhbHVlKHdyaXRhYmxlVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAga28uZXhwcmVzc2lvblJld3JpdGluZy53cml0ZVZhbHVlVG9Qcm9wZXJ0eShtb2RlbFZhbHVlLCBhbGxCaW5kaW5ncywgJ2NoZWNrZWQnLCBlbGVtVmFsdWUsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVZpZXcoKSB7XG4gICAgICAgICAgICAvLyBUaGlzIHVwZGF0ZXMgdGhlIHZpZXcgdmFsdWUgZnJvbSB0aGUgbW9kZWwgdmFsdWUuXG4gICAgICAgICAgICAvLyBJdCBydW5zIGluIHJlc3BvbnNlIHRvIGNoYW5nZXMgaW4gdGhlIGJvdW5kIChjaGVja2VkKSB2YWx1ZS5cbiAgICAgICAgICAgIHZhciBtb2RlbFZhbHVlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZUFjY2Vzc29yKCkpO1xuXG4gICAgICAgICAgICBpZiAodmFsdWVJc0FycmF5KSB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiBhIGNoZWNrYm94IGlzIGJvdW5kIHRvIGFuIGFycmF5LCBiZWluZyBjaGVja2VkIHJlcHJlc2VudHMgaXRzIHZhbHVlIGJlaW5nIHByZXNlbnQgaW4gdGhhdCBhcnJheVxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IGtvLnV0aWxzLmFycmF5SW5kZXhPZihtb2RlbFZhbHVlLCBjaGVja2VkVmFsdWUoKSkgPj0gMDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNDaGVja2JveCkge1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gYSBjaGVja2JveCBpcyBib3VuZCB0byBhbnkgb3RoZXIgdmFsdWUgKG5vdCBhbiBhcnJheSksIGJlaW5nIGNoZWNrZWQgcmVwcmVzZW50cyB0aGUgdmFsdWUgYmVpbmcgdHJ1ZWlzaFxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IG1vZGVsVmFsdWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEZvciByYWRpbyBidXR0b25zLCBiZWluZyBjaGVja2VkIG1lYW5zIHRoYXQgdGhlIHJhZGlvIGJ1dHRvbidzIHZhbHVlIGNvcnJlc3BvbmRzIHRvIHRoZSBtb2RlbCB2YWx1ZVxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IChjaGVja2VkVmFsdWUoKSA9PT0gbW9kZWxWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGlzQ2hlY2tib3ggPSBlbGVtZW50LnR5cGUgPT0gXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgaXNSYWRpbyA9IGVsZW1lbnQudHlwZSA9PSBcInJhZGlvXCI7XG5cbiAgICAgICAgLy8gT25seSBiaW5kIHRvIGNoZWNrIGJveGVzIGFuZCByYWRpbyBidXR0b25zXG4gICAgICAgIGlmICghaXNDaGVja2JveCAmJiAhaXNSYWRpbykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJhd1ZhbHVlID0gdmFsdWVBY2Nlc3NvcigpLFxuICAgICAgICAgICAgdmFsdWVJc0FycmF5ID0gaXNDaGVja2JveCAmJiAoa28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShyYXdWYWx1ZSkgaW5zdGFuY2VvZiBBcnJheSksXG4gICAgICAgICAgICByYXdWYWx1ZUlzTm9uQXJyYXlPYnNlcnZhYmxlID0gISh2YWx1ZUlzQXJyYXkgJiYgcmF3VmFsdWUucHVzaCAmJiByYXdWYWx1ZS5zcGxpY2UpLFxuICAgICAgICAgICAgb2xkRWxlbVZhbHVlID0gdmFsdWVJc0FycmF5ID8gY2hlY2tlZFZhbHVlKCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB1c2VDaGVja2VkVmFsdWUgPSBpc1JhZGlvIHx8IHZhbHVlSXNBcnJheTtcblxuICAgICAgICAvLyBJRSA2IHdvbid0IGFsbG93IHJhZGlvIGJ1dHRvbnMgdG8gYmUgc2VsZWN0ZWQgdW5sZXNzIHRoZXkgaGF2ZSBhIG5hbWVcbiAgICAgICAgaWYgKGlzUmFkaW8gJiYgIWVsZW1lbnQubmFtZSlcbiAgICAgICAgICAgIGtvLmJpbmRpbmdIYW5kbGVyc1sndW5pcXVlTmFtZSddWydpbml0J10oZWxlbWVudCwgZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlIH0pO1xuXG4gICAgICAgIC8vIFNldCB1cCB0d28gY29tcHV0ZWRzIHRvIHVwZGF0ZSB0aGUgYmluZGluZzpcblxuICAgICAgICAvLyBUaGUgZmlyc3QgcmVzcG9uZHMgdG8gY2hhbmdlcyBpbiB0aGUgY2hlY2tlZFZhbHVlIHZhbHVlIGFuZCB0byBlbGVtZW50IGNsaWNrc1xuICAgICAgICBrby5jb21wdXRlZCh1cGRhdGVNb2RlbCwgbnVsbCwgeyBkaXNwb3NlV2hlbk5vZGVJc1JlbW92ZWQ6IGVsZW1lbnQgfSk7XG4gICAgICAgIGtvLnV0aWxzLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKGVsZW1lbnQsIFwiY2xpY2tcIiwgdXBkYXRlTW9kZWwpO1xuXG4gICAgICAgIC8vIFRoZSBzZWNvbmQgcmVzcG9uZHMgdG8gY2hhbmdlcyBpbiB0aGUgbW9kZWwgdmFsdWUgKHRoZSBvbmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBjaGVja2VkIGJpbmRpbmcpXG4gICAgICAgIGtvLmNvbXB1dGVkKHVwZGF0ZVZpZXcsIG51bGwsIHsgZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkOiBlbGVtZW50IH0pO1xuXG4gICAgICAgIHJhd1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgIH1cbn07XG5rby5leHByZXNzaW9uUmV3cml0aW5nLnR3b1dheUJpbmRpbmdzWydjaGVja2VkJ10gPSB0cnVlO1xuXG5rby5iaW5kaW5nSGFuZGxlcnNbJ2NoZWNrZWRWYWx1ZSddID0ge1xuICAgICd1cGRhdGUnOiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcikge1xuICAgICAgICBlbGVtZW50LnZhbHVlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZUFjY2Vzc29yKCkpO1xuICAgIH1cbn07XG5cbn0pKCk7dmFyIGNsYXNzZXNXcml0dGVuQnlCaW5kaW5nS2V5ID0gJ19fa29fX2Nzc1ZhbHVlJztcbmtvLmJpbmRpbmdIYW5kbGVyc1snY3NzJ10gPSB7XG4gICAgJ3VwZGF0ZSc6IGZ1bmN0aW9uIChlbGVtZW50LCB2YWx1ZUFjY2Vzc29yKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKTtcbiAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBrby51dGlscy5vYmplY3RGb3JFYWNoKHZhbHVlLCBmdW5jdGlvbihjbGFzc05hbWUsIHNob3VsZEhhdmVDbGFzcykge1xuICAgICAgICAgICAgICAgIHNob3VsZEhhdmVDbGFzcyA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUoc2hvdWxkSGF2ZUNsYXNzKTtcbiAgICAgICAgICAgICAgICBrby51dGlscy50b2dnbGVEb21Ob2RlQ3NzQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lLCBzaG91bGRIYXZlQ2xhc3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGtvLnV0aWxzLnN0cmluZ1RyaW0oU3RyaW5nKHZhbHVlIHx8ICcnKSk7IC8vIE1ha2Ugc3VyZSB3ZSBkb24ndCB0cnkgdG8gc3RvcmUgb3Igc2V0IGEgbm9uLXN0cmluZyB2YWx1ZVxuICAgICAgICAgICAga28udXRpbHMudG9nZ2xlRG9tTm9kZUNzc0NsYXNzKGVsZW1lbnQsIGVsZW1lbnRbY2xhc3Nlc1dyaXR0ZW5CeUJpbmRpbmdLZXldLCBmYWxzZSk7XG4gICAgICAgICAgICBlbGVtZW50W2NsYXNzZXNXcml0dGVuQnlCaW5kaW5nS2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAga28udXRpbHMudG9nZ2xlRG9tTm9kZUNzc0NsYXNzKGVsZW1lbnQsIHZhbHVlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5rby5iaW5kaW5nSGFuZGxlcnNbJ2VuYWJsZSddID0ge1xuICAgICd1cGRhdGUnOiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcikge1xuICAgICAgICB2YXIgdmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSk7XG4gICAgICAgIGlmICh2YWx1ZSAmJiBlbGVtZW50LmRpc2FibGVkKVxuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgZWxzZSBpZiAoKCF2YWx1ZSkgJiYgKCFlbGVtZW50LmRpc2FibGVkKSlcbiAgICAgICAgICAgIGVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbn07XG5cbmtvLmJpbmRpbmdIYW5kbGVyc1snZGlzYWJsZSddID0ge1xuICAgICd1cGRhdGUnOiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcikge1xuICAgICAgICBrby5iaW5kaW5nSGFuZGxlcnNbJ2VuYWJsZSddWyd1cGRhdGUnXShlbGVtZW50LCBmdW5jdGlvbigpIHsgcmV0dXJuICFrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSkgfSk7XG4gICAgfVxufTtcbi8vIEZvciBjZXJ0YWluIGNvbW1vbiBldmVudHMgKGN1cnJlbnRseSBqdXN0ICdjbGljaycpLCBhbGxvdyBhIHNpbXBsaWZpZWQgZGF0YS1iaW5kaW5nIHN5bnRheFxuLy8gZS5nLiBjbGljazpoYW5kbGVyIGluc3RlYWQgb2YgdGhlIHVzdWFsIGZ1bGwtbGVuZ3RoIGV2ZW50OntjbGljazpoYW5kbGVyfVxuZnVuY3Rpb24gbWFrZUV2ZW50SGFuZGxlclNob3J0Y3V0KGV2ZW50TmFtZSkge1xuICAgIGtvLmJpbmRpbmdIYW5kbGVyc1tldmVudE5hbWVdID0ge1xuICAgICAgICAnaW5pdCc6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgICAgICAgICB2YXIgbmV3VmFsdWVBY2Nlc3NvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgICAgICAgICAgcmVzdWx0W2V2ZW50TmFtZV0gPSB2YWx1ZUFjY2Vzc29yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4ga28uYmluZGluZ0hhbmRsZXJzWydldmVudCddWydpbml0J10uY2FsbCh0aGlzLCBlbGVtZW50LCBuZXdWYWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncywgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmtvLmJpbmRpbmdIYW5kbGVyc1snZXZlbnQnXSA9IHtcbiAgICAnaW5pdCcgOiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICAgICAgdmFyIGV2ZW50c1RvSGFuZGxlID0gdmFsdWVBY2Nlc3NvcigpIHx8IHt9O1xuICAgICAgICBrby51dGlscy5vYmplY3RGb3JFYWNoKGV2ZW50c1RvSGFuZGxlLCBmdW5jdGlvbihldmVudE5hbWUpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXZlbnROYW1lID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBrby51dGlscy5yZWdpc3RlckV2ZW50SGFuZGxlcihlbGVtZW50LCBldmVudE5hbWUsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGFuZGxlclJldHVyblZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGFuZGxlckZ1bmN0aW9uID0gdmFsdWVBY2Nlc3NvcigpW2V2ZW50TmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFuZGxlckZ1bmN0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUYWtlIGFsbCB0aGUgZXZlbnQgYXJncywgYW5kIHByZWZpeCB3aXRoIHRoZSB2aWV3bW9kZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzRm9ySGFuZGxlciA9IGtvLnV0aWxzLm1ha2VBcnJheShhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlld01vZGVsID0gYmluZGluZ0NvbnRleHRbJyRkYXRhJ107XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzRm9ySGFuZGxlci51bnNoaWZ0KHZpZXdNb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyUmV0dXJuVmFsdWUgPSBoYW5kbGVyRnVuY3Rpb24uYXBwbHkodmlld01vZGVsLCBhcmdzRm9ySGFuZGxlcik7XG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlclJldHVyblZhbHVlICE9PSB0cnVlKSB7IC8vIE5vcm1hbGx5IHdlIHdhbnQgdG8gcHJldmVudCBkZWZhdWx0IGFjdGlvbi4gRGV2ZWxvcGVyIGNhbiBvdmVycmlkZSB0aGlzIGJlIGV4cGxpY2l0bHkgcmV0dXJuaW5nIHRydWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBidWJibGUgPSBhbGxCaW5kaW5ncy5nZXQoZXZlbnROYW1lICsgJ0J1YmJsZScpICE9PSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFidWJibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG4vLyBcImZvcmVhY2g6IHNvbWVFeHByZXNzaW9uXCIgaXMgZXF1aXZhbGVudCB0byBcInRlbXBsYXRlOiB7IGZvcmVhY2g6IHNvbWVFeHByZXNzaW9uIH1cIlxuLy8gXCJmb3JlYWNoOiB7IGRhdGE6IHNvbWVFeHByZXNzaW9uLCBhZnRlckFkZDogbXlmbiB9XCIgaXMgZXF1aXZhbGVudCB0byBcInRlbXBsYXRlOiB7IGZvcmVhY2g6IHNvbWVFeHByZXNzaW9uLCBhZnRlckFkZDogbXlmbiB9XCJcbmtvLmJpbmRpbmdIYW5kbGVyc1snZm9yZWFjaCddID0ge1xuICAgIG1ha2VUZW1wbGF0ZVZhbHVlQWNjZXNzb3I6IGZ1bmN0aW9uKHZhbHVlQWNjZXNzb3IpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG1vZGVsVmFsdWUgPSB2YWx1ZUFjY2Vzc29yKCksXG4gICAgICAgICAgICAgICAgdW53cmFwcGVkVmFsdWUgPSBrby51dGlscy5wZWVrT2JzZXJ2YWJsZShtb2RlbFZhbHVlKTsgICAgLy8gVW53cmFwIHdpdGhvdXQgc2V0dGluZyBhIGRlcGVuZGVuY3kgaGVyZVxuXG4gICAgICAgICAgICAvLyBJZiB1bndyYXBwZWRWYWx1ZSBpcyB0aGUgYXJyYXksIHBhc3MgaW4gdGhlIHdyYXBwZWQgdmFsdWUgb24gaXRzIG93blxuICAgICAgICAgICAgLy8gVGhlIHZhbHVlIHdpbGwgYmUgdW53cmFwcGVkIGFuZCB0cmFja2VkIHdpdGhpbiB0aGUgdGVtcGxhdGUgYmluZGluZ1xuICAgICAgICAgICAgLy8gKFNlZSBodHRwczovL2dpdGh1Yi5jb20vU3RldmVTYW5kZXJzb24va25vY2tvdXQvaXNzdWVzLzUyMylcbiAgICAgICAgICAgIGlmICgoIXVud3JhcHBlZFZhbHVlKSB8fCB0eXBlb2YgdW53cmFwcGVkVmFsdWUubGVuZ3RoID09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgJ2ZvcmVhY2gnOiBtb2RlbFZhbHVlLCAndGVtcGxhdGVFbmdpbmUnOiBrby5uYXRpdmVUZW1wbGF0ZUVuZ2luZS5pbnN0YW5jZSB9O1xuXG4gICAgICAgICAgICAvLyBJZiB1bndyYXBwZWRWYWx1ZS5kYXRhIGlzIHRoZSBhcnJheSwgcHJlc2VydmUgYWxsIHJlbGV2YW50IG9wdGlvbnMgYW5kIHVud3JhcCBhZ2FpbiB2YWx1ZSBzbyB3ZSBnZXQgdXBkYXRlc1xuICAgICAgICAgICAga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShtb2RlbFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ2ZvcmVhY2gnOiB1bndyYXBwZWRWYWx1ZVsnZGF0YSddLFxuICAgICAgICAgICAgICAgICdhcyc6IHVud3JhcHBlZFZhbHVlWydhcyddLFxuICAgICAgICAgICAgICAgICdpbmNsdWRlRGVzdHJveWVkJzogdW53cmFwcGVkVmFsdWVbJ2luY2x1ZGVEZXN0cm95ZWQnXSxcbiAgICAgICAgICAgICAgICAnYWZ0ZXJBZGQnOiB1bndyYXBwZWRWYWx1ZVsnYWZ0ZXJBZGQnXSxcbiAgICAgICAgICAgICAgICAnYmVmb3JlUmVtb3ZlJzogdW53cmFwcGVkVmFsdWVbJ2JlZm9yZVJlbW92ZSddLFxuICAgICAgICAgICAgICAgICdhZnRlclJlbmRlcic6IHVud3JhcHBlZFZhbHVlWydhZnRlclJlbmRlciddLFxuICAgICAgICAgICAgICAgICdiZWZvcmVNb3ZlJzogdW53cmFwcGVkVmFsdWVbJ2JlZm9yZU1vdmUnXSxcbiAgICAgICAgICAgICAgICAnYWZ0ZXJNb3ZlJzogdW53cmFwcGVkVmFsdWVbJ2FmdGVyTW92ZSddLFxuICAgICAgICAgICAgICAgICd0ZW1wbGF0ZUVuZ2luZSc6IGtvLm5hdGl2ZVRlbXBsYXRlRW5naW5lLmluc3RhbmNlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgJ2luaXQnOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncywgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgICAgICByZXR1cm4ga28uYmluZGluZ0hhbmRsZXJzWyd0ZW1wbGF0ZSddWydpbml0J10oZWxlbWVudCwga28uYmluZGluZ0hhbmRsZXJzWydmb3JlYWNoJ10ubWFrZVRlbXBsYXRlVmFsdWVBY2Nlc3Nvcih2YWx1ZUFjY2Vzc29yKSk7XG4gICAgfSxcbiAgICAndXBkYXRlJzogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIGtvLmJpbmRpbmdIYW5kbGVyc1sndGVtcGxhdGUnXVsndXBkYXRlJ10oZWxlbWVudCwga28uYmluZGluZ0hhbmRsZXJzWydmb3JlYWNoJ10ubWFrZVRlbXBsYXRlVmFsdWVBY2Nlc3Nvcih2YWx1ZUFjY2Vzc29yKSwgYWxsQmluZGluZ3MsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpO1xuICAgIH1cbn07XG5rby5leHByZXNzaW9uUmV3cml0aW5nLmJpbmRpbmdSZXdyaXRlVmFsaWRhdG9yc1snZm9yZWFjaCddID0gZmFsc2U7IC8vIENhbid0IHJld3JpdGUgY29udHJvbCBmbG93IGJpbmRpbmdzXG5rby52aXJ0dWFsRWxlbWVudHMuYWxsb3dlZEJpbmRpbmdzWydmb3JlYWNoJ10gPSB0cnVlO1xudmFyIGhhc2ZvY3VzVXBkYXRpbmdQcm9wZXJ0eSA9ICdfX2tvX2hhc2ZvY3VzVXBkYXRpbmcnO1xudmFyIGhhc2ZvY3VzTGFzdFZhbHVlID0gJ19fa29faGFzZm9jdXNMYXN0VmFsdWUnO1xua28uYmluZGluZ0hhbmRsZXJzWydoYXNmb2N1cyddID0ge1xuICAgICdpbml0JzogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MpIHtcbiAgICAgICAgdmFyIGhhbmRsZUVsZW1lbnRGb2N1c0NoYW5nZSA9IGZ1bmN0aW9uKGlzRm9jdXNlZCkge1xuICAgICAgICAgICAgLy8gV2hlcmUgcG9zc2libGUsIGlnbm9yZSB3aGljaCBldmVudCB3YXMgcmFpc2VkIGFuZCBkZXRlcm1pbmUgZm9jdXMgc3RhdGUgdXNpbmcgYWN0aXZlRWxlbWVudCxcbiAgICAgICAgICAgIC8vIGFzIHRoaXMgYXZvaWRzIHBoYW50b20gZm9jdXMvYmx1ciBldmVudHMgcmFpc2VkIHdoZW4gY2hhbmdpbmcgdGFicyBpbiBtb2Rlcm4gYnJvd3NlcnMuXG4gICAgICAgICAgICAvLyBIb3dldmVyLCBub3QgYWxsIEtPLXRhcmdldGVkIGJyb3dzZXJzIChGaXJlZm94IDIpIHN1cHBvcnQgYWN0aXZlRWxlbWVudC4gRm9yIHRob3NlIGJyb3dzZXJzLFxuICAgICAgICAgICAgLy8gcHJldmVudCBhIGxvc3Mgb2YgZm9jdXMgd2hlbiBjaGFuZ2luZyB0YWJzL3dpbmRvd3MgYnkgc2V0dGluZyBhIGZsYWcgdGhhdCBwcmV2ZW50cyBoYXNmb2N1c1xuICAgICAgICAgICAgLy8gZnJvbSBjYWxsaW5nICdibHVyKCknIG9uIHRoZSBlbGVtZW50IHdoZW4gaXQgbG9zZXMgZm9jdXMuXG4gICAgICAgICAgICAvLyBEaXNjdXNzaW9uIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9TdGV2ZVNhbmRlcnNvbi9rbm9ja291dC9wdWxsLzM1MlxuICAgICAgICAgICAgZWxlbWVudFtoYXNmb2N1c1VwZGF0aW5nUHJvcGVydHldID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvd25lckRvYyA9IGVsZW1lbnQub3duZXJEb2N1bWVudDtcbiAgICAgICAgICAgIGlmIChcImFjdGl2ZUVsZW1lbnRcIiBpbiBvd25lckRvYykge1xuICAgICAgICAgICAgICAgIHZhciBhY3RpdmU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlID0gb3duZXJEb2MuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSUU5IHRocm93cyBpZiB5b3UgYWNjZXNzIGFjdGl2ZUVsZW1lbnQgZHVyaW5nIHBhZ2UgbG9hZCAoc2VlIGlzc3VlICM3MDMpXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZSA9IG93bmVyRG9jLmJvZHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlzRm9jdXNlZCA9IChhY3RpdmUgPT09IGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1vZGVsVmFsdWUgPSB2YWx1ZUFjY2Vzc29yKCk7XG4gICAgICAgICAgICBrby5leHByZXNzaW9uUmV3cml0aW5nLndyaXRlVmFsdWVUb1Byb3BlcnR5KG1vZGVsVmFsdWUsIGFsbEJpbmRpbmdzLCAnaGFzZm9jdXMnLCBpc0ZvY3VzZWQsIHRydWUpO1xuXG4gICAgICAgICAgICAvL2NhY2hlIHRoZSBsYXRlc3QgdmFsdWUsIHNvIHdlIGNhbiBhdm9pZCB1bm5lY2Vzc2FyaWx5IGNhbGxpbmcgZm9jdXMvYmx1ciBpbiB0aGUgdXBkYXRlIGZ1bmN0aW9uXG4gICAgICAgICAgICBlbGVtZW50W2hhc2ZvY3VzTGFzdFZhbHVlXSA9IGlzRm9jdXNlZDtcbiAgICAgICAgICAgIGVsZW1lbnRbaGFzZm9jdXNVcGRhdGluZ1Byb3BlcnR5XSA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgaGFuZGxlRWxlbWVudEZvY3VzSW4gPSBoYW5kbGVFbGVtZW50Rm9jdXNDaGFuZ2UuYmluZChudWxsLCB0cnVlKTtcbiAgICAgICAgdmFyIGhhbmRsZUVsZW1lbnRGb2N1c091dCA9IGhhbmRsZUVsZW1lbnRGb2N1c0NoYW5nZS5iaW5kKG51bGwsIGZhbHNlKTtcblxuICAgICAgICBrby51dGlscy5yZWdpc3RlckV2ZW50SGFuZGxlcihlbGVtZW50LCBcImZvY3VzXCIsIGhhbmRsZUVsZW1lbnRGb2N1c0luKTtcbiAgICAgICAga28udXRpbHMucmVnaXN0ZXJFdmVudEhhbmRsZXIoZWxlbWVudCwgXCJmb2N1c2luXCIsIGhhbmRsZUVsZW1lbnRGb2N1c0luKTsgLy8gRm9yIElFXG4gICAgICAgIGtvLnV0aWxzLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKGVsZW1lbnQsIFwiYmx1clwiLCAgaGFuZGxlRWxlbWVudEZvY3VzT3V0KTtcbiAgICAgICAga28udXRpbHMucmVnaXN0ZXJFdmVudEhhbmRsZXIoZWxlbWVudCwgXCJmb2N1c291dFwiLCAgaGFuZGxlRWxlbWVudEZvY3VzT3V0KTsgLy8gRm9yIElFXG4gICAgfSxcbiAgICAndXBkYXRlJzogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcikge1xuICAgICAgICB2YXIgdmFsdWUgPSAhIWtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKTtcblxuICAgICAgICBpZiAoIWVsZW1lbnRbaGFzZm9jdXNVcGRhdGluZ1Byb3BlcnR5XSAmJiBlbGVtZW50W2hhc2ZvY3VzTGFzdFZhbHVlXSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHZhbHVlID8gZWxlbWVudC5mb2N1cygpIDogZWxlbWVudC5ibHVyKCk7XG5cbiAgICAgICAgICAgIC8vIEluIElFLCB0aGUgYmx1ciBtZXRob2QgZG9lc24ndCBhbHdheXMgY2F1c2UgdGhlIGVsZW1lbnQgdG8gbG9zZSBmb2N1cyAoZm9yIGV4YW1wbGUsIGlmIHRoZSB3aW5kb3cgaXMgbm90IGluIGZvY3VzKS5cbiAgICAgICAgICAgIC8vIFNldHRpbmcgZm9jdXMgdG8gdGhlIGJvZHkgZWxlbWVudCBkb2VzIHNlZW0gdG8gYmUgcmVsaWFibGUgaW4gSUUsIGJ1dCBzaG91bGQgb25seSBiZSB1c2VkIGlmIHdlIGtub3cgdGhhdCB0aGUgY3VycmVudFxuICAgICAgICAgICAgLy8gZWxlbWVudCB3YXMgZm9jdXNlZCBhbHJlYWR5LlxuICAgICAgICAgICAgaWYgKCF2YWx1ZSAmJiBlbGVtZW50W2hhc2ZvY3VzTGFzdFZhbHVlXSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQub3duZXJEb2N1bWVudC5ib2R5LmZvY3VzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEZvciBJRSwgd2hpY2ggZG9lc24ndCByZWxpYWJseSBmaXJlIFwiZm9jdXNcIiBvciBcImJsdXJcIiBldmVudHMgc3luY2hyb25vdXNseVxuICAgICAgICAgICAga28uZGVwZW5kZW5jeURldGVjdGlvbi5pZ25vcmUoa28udXRpbHMudHJpZ2dlckV2ZW50LCBudWxsLCBbZWxlbWVudCwgdmFsdWUgPyBcImZvY3VzaW5cIiA6IFwiZm9jdXNvdXRcIl0pO1xuICAgICAgICB9XG4gICAgfVxufTtcbmtvLmV4cHJlc3Npb25SZXdyaXRpbmcudHdvV2F5QmluZGluZ3NbJ2hhc2ZvY3VzJ10gPSB0cnVlO1xuXG5rby5iaW5kaW5nSGFuZGxlcnNbJ2hhc0ZvY3VzJ10gPSBrby5iaW5kaW5nSGFuZGxlcnNbJ2hhc2ZvY3VzJ107IC8vIE1ha2UgXCJoYXNGb2N1c1wiIGFuIGFsaWFzXG5rby5leHByZXNzaW9uUmV3cml0aW5nLnR3b1dheUJpbmRpbmdzWydoYXNGb2N1cyddID0gdHJ1ZTtcbmtvLmJpbmRpbmdIYW5kbGVyc1snaHRtbCddID0ge1xuICAgICdpbml0JzogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFByZXZlbnQgYmluZGluZyBvbiB0aGUgZHluYW1pY2FsbHktaW5qZWN0ZWQgSFRNTCAoYXMgZGV2ZWxvcGVycyBhcmUgdW5saWtlbHkgdG8gZXhwZWN0IHRoYXQsIGFuZCBpdCBoYXMgc2VjdXJpdHkgaW1wbGljYXRpb25zKVxuICAgICAgICByZXR1cm4geyAnY29udHJvbHNEZXNjZW5kYW50QmluZGluZ3MnOiB0cnVlIH07XG4gICAgfSxcbiAgICAndXBkYXRlJzogZnVuY3Rpb24gKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpIHtcbiAgICAgICAgLy8gc2V0SHRtbCB3aWxsIHVud3JhcCB0aGUgdmFsdWUgaWYgbmVlZGVkXG4gICAgICAgIGtvLnV0aWxzLnNldEh0bWwoZWxlbWVudCwgdmFsdWVBY2Nlc3NvcigpKTtcbiAgICB9XG59O1xuLy8gTWFrZXMgYSBiaW5kaW5nIGxpa2Ugd2l0aCBvciBpZlxuZnVuY3Rpb24gbWFrZVdpdGhJZkJpbmRpbmcoYmluZGluZ0tleSwgaXNXaXRoLCBpc05vdCwgbWFrZUNvbnRleHRDYWxsYmFjaykge1xuICAgIGtvLmJpbmRpbmdIYW5kbGVyc1tiaW5kaW5nS2V5XSA9IHtcbiAgICAgICAgJ2luaXQnOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncywgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgICAgICAgICAgdmFyIGRpZERpc3BsYXlPbkxhc3RVcGRhdGUsXG4gICAgICAgICAgICAgICAgc2F2ZWROb2RlcztcbiAgICAgICAgICAgIGtvLmNvbXB1dGVkKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhVmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSksXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZERpc3BsYXkgPSAhaXNOb3QgIT09ICFkYXRhVmFsdWUsIC8vIGVxdWl2YWxlbnQgdG8gaXNOb3QgPyAhZGF0YVZhbHVlIDogISFkYXRhVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgaXNGaXJzdFJlbmRlciA9ICFzYXZlZE5vZGVzLFxuICAgICAgICAgICAgICAgICAgICBuZWVkc1JlZnJlc2ggPSBpc0ZpcnN0UmVuZGVyIHx8IGlzV2l0aCB8fCAoc2hvdWxkRGlzcGxheSAhPT0gZGlkRGlzcGxheU9uTGFzdFVwZGF0ZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAobmVlZHNSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNhdmUgYSBjb3B5IG9mIHRoZSBpbm5lciBub2RlcyBvbiB0aGUgaW5pdGlhbCB1cGRhdGUsIGJ1dCBvbmx5IGlmIHdlIGhhdmUgZGVwZW5kZW5jaWVzLlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNGaXJzdFJlbmRlciAmJiBrby5jb21wdXRlZENvbnRleHQuZ2V0RGVwZW5kZW5jaWVzQ291bnQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWROb2RlcyA9IGtvLnV0aWxzLmNsb25lTm9kZXMoa28udmlydHVhbEVsZW1lbnRzLmNoaWxkTm9kZXMoZWxlbWVudCksIHRydWUgLyogc2hvdWxkQ2xlYW5Ob2RlcyAqLyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkRGlzcGxheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0ZpcnN0UmVuZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga28udmlydHVhbEVsZW1lbnRzLnNldERvbU5vZGVDaGlsZHJlbihlbGVtZW50LCBrby51dGlscy5jbG9uZU5vZGVzKHNhdmVkTm9kZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGtvLmFwcGx5QmluZGluZ3NUb0Rlc2NlbmRhbnRzKG1ha2VDb250ZXh0Q2FsbGJhY2sgPyBtYWtlQ29udGV4dENhbGxiYWNrKGJpbmRpbmdDb250ZXh0LCBkYXRhVmFsdWUpIDogYmluZGluZ0NvbnRleHQsIGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAga28udmlydHVhbEVsZW1lbnRzLmVtcHR5Tm9kZShlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGRpZERpc3BsYXlPbkxhc3RVcGRhdGUgPSBzaG91bGREaXNwbGF5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIG51bGwsIHsgZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkOiBlbGVtZW50IH0pO1xuICAgICAgICAgICAgcmV0dXJuIHsgJ2NvbnRyb2xzRGVzY2VuZGFudEJpbmRpbmdzJzogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBrby5leHByZXNzaW9uUmV3cml0aW5nLmJpbmRpbmdSZXdyaXRlVmFsaWRhdG9yc1tiaW5kaW5nS2V5XSA9IGZhbHNlOyAvLyBDYW4ndCByZXdyaXRlIGNvbnRyb2wgZmxvdyBiaW5kaW5nc1xuICAgIGtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3NbYmluZGluZ0tleV0gPSB0cnVlO1xufVxuXG4vLyBDb25zdHJ1Y3QgdGhlIGFjdHVhbCBiaW5kaW5nIGhhbmRsZXJzXG5tYWtlV2l0aElmQmluZGluZygnaWYnKTtcbm1ha2VXaXRoSWZCaW5kaW5nKCdpZm5vdCcsIGZhbHNlIC8qIGlzV2l0aCAqLywgdHJ1ZSAvKiBpc05vdCAqLyk7XG5tYWtlV2l0aElmQmluZGluZygnd2l0aCcsIHRydWUgLyogaXNXaXRoICovLCBmYWxzZSAvKiBpc05vdCAqLyxcbiAgICBmdW5jdGlvbihiaW5kaW5nQ29udGV4dCwgZGF0YVZhbHVlKSB7XG4gICAgICAgIHJldHVybiBiaW5kaW5nQ29udGV4dFsnY3JlYXRlQ2hpbGRDb250ZXh0J10oZGF0YVZhbHVlKTtcbiAgICB9XG4pO1xudmFyIGNhcHRpb25QbGFjZWhvbGRlciA9IHt9O1xua28uYmluZGluZ0hhbmRsZXJzWydvcHRpb25zJ10gPSB7XG4gICAgJ2luaXQnOiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIGlmIChrby51dGlscy50YWdOYW1lTG93ZXIoZWxlbWVudCkgIT09IFwic2VsZWN0XCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJvcHRpb25zIGJpbmRpbmcgYXBwbGllcyBvbmx5IHRvIFNFTEVDVCBlbGVtZW50c1wiKTtcblxuICAgICAgICAvLyBSZW1vdmUgYWxsIGV4aXN0aW5nIDxvcHRpb24+cy5cbiAgICAgICAgd2hpbGUgKGVsZW1lbnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmUoMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFbnN1cmVzIHRoYXQgdGhlIGJpbmRpbmcgcHJvY2Vzc29yIGRvZXNuJ3QgdHJ5IHRvIGJpbmQgdGhlIG9wdGlvbnNcbiAgICAgICAgcmV0dXJuIHsgJ2NvbnRyb2xzRGVzY2VuZGFudEJpbmRpbmdzJzogdHJ1ZSB9O1xuICAgIH0sXG4gICAgJ3VwZGF0ZSc6IGZ1bmN0aW9uIChlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncykge1xuICAgICAgICBmdW5jdGlvbiBzZWxlY3RlZE9wdGlvbnMoKSB7XG4gICAgICAgICAgICByZXR1cm4ga28udXRpbHMuYXJyYXlGaWx0ZXIoZWxlbWVudC5vcHRpb25zLCBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5zZWxlY3RlZDsgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2VsZWN0V2FzUHJldmlvdXNseUVtcHR5ID0gZWxlbWVudC5sZW5ndGggPT0gMCxcbiAgICAgICAgICAgIG11bHRpcGxlID0gZWxlbWVudC5tdWx0aXBsZSxcbiAgICAgICAgICAgIHByZXZpb3VzU2Nyb2xsVG9wID0gKCFzZWxlY3RXYXNQcmV2aW91c2x5RW1wdHkgJiYgbXVsdGlwbGUpID8gZWxlbWVudC5zY3JvbGxUb3AgOiBudWxsLFxuICAgICAgICAgICAgdW53cmFwcGVkQXJyYXkgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSksXG4gICAgICAgICAgICB2YWx1ZUFsbG93VW5zZXQgPSBhbGxCaW5kaW5ncy5nZXQoJ3ZhbHVlQWxsb3dVbnNldCcpICYmIGFsbEJpbmRpbmdzWydoYXMnXSgndmFsdWUnKSxcbiAgICAgICAgICAgIGluY2x1ZGVEZXN0cm95ZWQgPSBhbGxCaW5kaW5ncy5nZXQoJ29wdGlvbnNJbmNsdWRlRGVzdHJveWVkJyksXG4gICAgICAgICAgICBhcnJheVRvRG9tTm9kZUNoaWxkcmVuT3B0aW9ucyA9IHt9LFxuICAgICAgICAgICAgY2FwdGlvblZhbHVlLFxuICAgICAgICAgICAgZmlsdGVyZWRBcnJheSxcbiAgICAgICAgICAgIHByZXZpb3VzU2VsZWN0ZWRWYWx1ZXMgPSBbXTtcblxuICAgICAgICBpZiAoIXZhbHVlQWxsb3dVbnNldCkge1xuICAgICAgICAgICAgaWYgKG11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZFZhbHVlcyA9IGtvLnV0aWxzLmFycmF5TWFwKHNlbGVjdGVkT3B0aW9ucygpLCBrby5zZWxlY3RFeHRlbnNpb25zLnJlYWRWYWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuc2VsZWN0ZWRJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZFZhbHVlcy5wdXNoKGtvLnNlbGVjdEV4dGVuc2lvbnMucmVhZFZhbHVlKGVsZW1lbnQub3B0aW9uc1tlbGVtZW50LnNlbGVjdGVkSW5kZXhdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodW53cmFwcGVkQXJyYXkpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdW53cmFwcGVkQXJyYXkubGVuZ3RoID09IFwidW5kZWZpbmVkXCIpIC8vIENvZXJjZSBzaW5nbGUgdmFsdWUgaW50byBhcnJheVxuICAgICAgICAgICAgICAgIHVud3JhcHBlZEFycmF5ID0gW3Vud3JhcHBlZEFycmF5XTtcblxuICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBhbnkgZW50cmllcyBtYXJrZWQgYXMgZGVzdHJveWVkXG4gICAgICAgICAgICBmaWx0ZXJlZEFycmF5ID0ga28udXRpbHMuYXJyYXlGaWx0ZXIodW53cmFwcGVkQXJyYXksIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5jbHVkZURlc3Ryb3llZCB8fCBpdGVtID09PSB1bmRlZmluZWQgfHwgaXRlbSA9PT0gbnVsbCB8fCAha28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShpdGVtWydfZGVzdHJveSddKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBJZiBjYXB0aW9uIGlzIGluY2x1ZGVkLCBhZGQgaXQgdG8gdGhlIGFycmF5XG4gICAgICAgICAgICBpZiAoYWxsQmluZGluZ3NbJ2hhcyddKCdvcHRpb25zQ2FwdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgY2FwdGlvblZhbHVlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShhbGxCaW5kaW5ncy5nZXQoJ29wdGlvbnNDYXB0aW9uJykpO1xuICAgICAgICAgICAgICAgIC8vIElmIGNhcHRpb24gdmFsdWUgaXMgbnVsbCBvciB1bmRlZmluZWQsIGRvbid0IHNob3cgYSBjYXB0aW9uXG4gICAgICAgICAgICAgICAgaWYgKGNhcHRpb25WYWx1ZSAhPT0gbnVsbCAmJiBjYXB0aW9uVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5LnVuc2hpZnQoY2FwdGlvblBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiBhIGZhbHN5IHZhbHVlIGlzIHByb3ZpZGVkIChlLmcuIG51bGwpLCB3ZSdsbCBzaW1wbHkgZW1wdHkgdGhlIHNlbGVjdCBlbGVtZW50XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhcHBseVRvT2JqZWN0KG9iamVjdCwgcHJlZGljYXRlLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGVUeXBlID0gdHlwZW9mIHByZWRpY2F0ZTtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGVUeXBlID09IFwiZnVuY3Rpb25cIikgICAgLy8gR2l2ZW4gYSBmdW5jdGlvbjsgcnVuIGl0IGFnYWluc3QgdGhlIGRhdGEgdmFsdWVcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJlZGljYXRlKG9iamVjdCk7XG4gICAgICAgICAgICBlbHNlIGlmIChwcmVkaWNhdGVUeXBlID09IFwic3RyaW5nXCIpIC8vIEdpdmVuIGEgc3RyaW5nOyB0cmVhdCBpdCBhcyBhIHByb3BlcnR5IG5hbWUgb24gdGhlIGRhdGEgdmFsdWVcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0W3ByZWRpY2F0ZV07XG4gICAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHaXZlbiBubyBvcHRpb25zVGV4dCBhcmc7IHVzZSB0aGUgZGF0YSB2YWx1ZSBpdHNlbGZcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBmdW5jdGlvbnMgY2FuIHJ1biBhdCB0d28gZGlmZmVyZW50IHRpbWVzOlxuICAgICAgICAvLyBUaGUgZmlyc3QgaXMgd2hlbiB0aGUgd2hvbGUgYXJyYXkgaXMgYmVpbmcgdXBkYXRlZCBkaXJlY3RseSBmcm9tIHRoaXMgYmluZGluZyBoYW5kbGVyLlxuICAgICAgICAvLyBUaGUgc2Vjb25kIGlzIHdoZW4gYW4gb2JzZXJ2YWJsZSB2YWx1ZSBmb3IgYSBzcGVjaWZpYyBhcnJheSBlbnRyeSBpcyB1cGRhdGVkLlxuICAgICAgICAvLyBvbGRPcHRpb25zIHdpbGwgYmUgZW1wdHkgaW4gdGhlIGZpcnN0IGNhc2UsIGJ1dCB3aWxsIGJlIGZpbGxlZCB3aXRoIHRoZSBwcmV2aW91c2x5IGdlbmVyYXRlZCBvcHRpb24gaW4gdGhlIHNlY29uZC5cbiAgICAgICAgdmFyIGl0ZW1VcGRhdGUgPSBmYWxzZTtcbiAgICAgICAgZnVuY3Rpb24gb3B0aW9uRm9yQXJyYXlJdGVtKGFycmF5RW50cnksIGluZGV4LCBvbGRPcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAob2xkT3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBwcmV2aW91c1NlbGVjdGVkVmFsdWVzID0gIXZhbHVlQWxsb3dVbnNldCAmJiBvbGRPcHRpb25zWzBdLnNlbGVjdGVkID8gWyBrby5zZWxlY3RFeHRlbnNpb25zLnJlYWRWYWx1ZShvbGRPcHRpb25zWzBdKSBdIDogW107XG4gICAgICAgICAgICAgICAgaXRlbVVwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb3B0aW9uID0gZWxlbWVudC5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICAgICAgICBpZiAoYXJyYXlFbnRyeSA9PT0gY2FwdGlvblBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAga28udXRpbHMuc2V0VGV4dENvbnRlbnQob3B0aW9uLCBhbGxCaW5kaW5ncy5nZXQoJ29wdGlvbnNDYXB0aW9uJykpO1xuICAgICAgICAgICAgICAgIGtvLnNlbGVjdEV4dGVuc2lvbnMud3JpdGVWYWx1ZShvcHRpb24sIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFwcGx5IGEgdmFsdWUgdG8gdGhlIG9wdGlvbiBlbGVtZW50XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvblZhbHVlID0gYXBwbHlUb09iamVjdChhcnJheUVudHJ5LCBhbGxCaW5kaW5ncy5nZXQoJ29wdGlvbnNWYWx1ZScpLCBhcnJheUVudHJ5KTtcbiAgICAgICAgICAgICAgICBrby5zZWxlY3RFeHRlbnNpb25zLndyaXRlVmFsdWUob3B0aW9uLCBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKG9wdGlvblZhbHVlKSk7XG5cbiAgICAgICAgICAgICAgICAvLyBBcHBseSBzb21lIHRleHQgdG8gdGhlIG9wdGlvbiBlbGVtZW50XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvblRleHQgPSBhcHBseVRvT2JqZWN0KGFycmF5RW50cnksIGFsbEJpbmRpbmdzLmdldCgnb3B0aW9uc1RleHQnKSwgb3B0aW9uVmFsdWUpO1xuICAgICAgICAgICAgICAgIGtvLnV0aWxzLnNldFRleHRDb250ZW50KG9wdGlvbiwgb3B0aW9uVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW29wdGlvbl07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCeSB1c2luZyBhIGJlZm9yZVJlbW92ZSBjYWxsYmFjaywgd2UgZGVsYXkgdGhlIHJlbW92YWwgdW50aWwgYWZ0ZXIgbmV3IGl0ZW1zIGFyZSBhZGRlZC4gVGhpcyBmaXhlcyBhIHNlbGVjdGlvblxuICAgICAgICAvLyBwcm9ibGVtIGluIElFPD04IGFuZCBGaXJlZm94LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2tub2Nrb3V0L2tub2Nrb3V0L2lzc3Vlcy8xMjA4XG4gICAgICAgIGFycmF5VG9Eb21Ob2RlQ2hpbGRyZW5PcHRpb25zWydiZWZvcmVSZW1vdmUnXSA9XG4gICAgICAgICAgICBmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChvcHRpb24pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBzZXRTZWxlY3Rpb25DYWxsYmFjayhhcnJheUVudHJ5LCBuZXdPcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoaXRlbVVwZGF0ZSAmJiB2YWx1ZUFsbG93VW5zZXQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgbW9kZWwgdmFsdWUgaXMgYXV0aG9yaXRhdGl2ZSwgc28gbWFrZSBzdXJlIGl0cyB2YWx1ZSBpcyB0aGUgb25lIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gbmVlZCB0byB1c2UgZGVwZW5kZW5jeURldGVjdGlvbi5pZ25vcmUgc2luY2Ugc2V0RG9tTm9kZUNoaWxkcmVuRnJvbUFycmF5TWFwcGluZyBkb2VzIHNvIGFscmVhZHkuXG4gICAgICAgICAgICAgICAga28uc2VsZWN0RXh0ZW5zaW9ucy53cml0ZVZhbHVlKGVsZW1lbnQsIGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUoYWxsQmluZGluZ3MuZ2V0KCd2YWx1ZScpKSwgdHJ1ZSAvKiBhbGxvd1Vuc2V0ICovKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJldmlvdXNTZWxlY3RlZFZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAvLyBJRTYgZG9lc24ndCBsaWtlIHVzIHRvIGFzc2lnbiBzZWxlY3Rpb24gdG8gT1BUSU9OIG5vZGVzIGJlZm9yZSB0aGV5J3JlIGFkZGVkIHRvIHRoZSBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICAvLyBUaGF0J3Mgd2h5IHdlIGZpcnN0IGFkZGVkIHRoZW0gd2l0aG91dCBzZWxlY3Rpb24uIE5vdyBpdCdzIHRpbWUgdG8gc2V0IHRoZSBzZWxlY3Rpb24uXG4gICAgICAgICAgICAgICAgdmFyIGlzU2VsZWN0ZWQgPSBrby51dGlscy5hcnJheUluZGV4T2YocHJldmlvdXNTZWxlY3RlZFZhbHVlcywga28uc2VsZWN0RXh0ZW5zaW9ucy5yZWFkVmFsdWUobmV3T3B0aW9uc1swXSkpID49IDA7XG4gICAgICAgICAgICAgICAga28udXRpbHMuc2V0T3B0aW9uTm9kZVNlbGVjdGlvblN0YXRlKG5ld09wdGlvbnNbMF0sIGlzU2VsZWN0ZWQpO1xuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBvcHRpb24gd2FzIGNoYW5nZWQgZnJvbSBiZWluZyBzZWxlY3RlZCBkdXJpbmcgYSBzaW5nbGUtaXRlbSB1cGRhdGUsIG5vdGlmeSB0aGUgY2hhbmdlXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1VcGRhdGUgJiYgIWlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAga28uZGVwZW5kZW5jeURldGVjdGlvbi5pZ25vcmUoa28udXRpbHMudHJpZ2dlckV2ZW50LCBudWxsLCBbZWxlbWVudCwgXCJjaGFuZ2VcIl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjYWxsYmFjayA9IHNldFNlbGVjdGlvbkNhbGxiYWNrO1xuICAgICAgICBpZiAoYWxsQmluZGluZ3NbJ2hhcyddKCdvcHRpb25zQWZ0ZXJSZW5kZXInKSAmJiB0eXBlb2YgYWxsQmluZGluZ3MuZ2V0KCdvcHRpb25zQWZ0ZXJSZW5kZXInKSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gZnVuY3Rpb24oYXJyYXlFbnRyeSwgbmV3T3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHNldFNlbGVjdGlvbkNhbGxiYWNrKGFycmF5RW50cnksIG5ld09wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGtvLmRlcGVuZGVuY3lEZXRlY3Rpb24uaWdub3JlKGFsbEJpbmRpbmdzLmdldCgnb3B0aW9uc0FmdGVyUmVuZGVyJyksIG51bGwsIFtuZXdPcHRpb25zWzBdLCBhcnJheUVudHJ5ICE9PSBjYXB0aW9uUGxhY2Vob2xkZXIgPyBhcnJheUVudHJ5IDogdW5kZWZpbmVkXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBrby51dGlscy5zZXREb21Ob2RlQ2hpbGRyZW5Gcm9tQXJyYXlNYXBwaW5nKGVsZW1lbnQsIGZpbHRlcmVkQXJyYXksIG9wdGlvbkZvckFycmF5SXRlbSwgYXJyYXlUb0RvbU5vZGVDaGlsZHJlbk9wdGlvbnMsIGNhbGxiYWNrKTtcblxuICAgICAgICBrby5kZXBlbmRlbmN5RGV0ZWN0aW9uLmlnbm9yZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodmFsdWVBbGxvd1Vuc2V0KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIG1vZGVsIHZhbHVlIGlzIGF1dGhvcml0YXRpdmUsIHNvIG1ha2Ugc3VyZSBpdHMgdmFsdWUgaXMgdGhlIG9uZSBzZWxlY3RlZFxuICAgICAgICAgICAgICAgIGtvLnNlbGVjdEV4dGVuc2lvbnMud3JpdGVWYWx1ZShlbGVtZW50LCBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGFsbEJpbmRpbmdzLmdldCgndmFsdWUnKSksIHRydWUgLyogYWxsb3dVbnNldCAqLyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIERldGVybWluZSBpZiB0aGUgc2VsZWN0aW9uIGhhcyBjaGFuZ2VkIGFzIGEgcmVzdWx0IG9mIHVwZGF0aW5nIHRoZSBvcHRpb25zIGxpc3RcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0aW9uQ2hhbmdlZDtcbiAgICAgICAgICAgICAgICBpZiAobXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGEgbXVsdGlwbGUtc2VsZWN0IGJveCwgY29tcGFyZSB0aGUgbmV3IHNlbGVjdGlvbiBjb3VudCB0byB0aGUgcHJldmlvdXMgb25lXG4gICAgICAgICAgICAgICAgICAgIC8vIEJ1dCBpZiBub3RoaW5nIHdhcyBzZWxlY3RlZCBiZWZvcmUsIHRoZSBzZWxlY3Rpb24gY2FuJ3QgaGF2ZSBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbkNoYW5nZWQgPSBwcmV2aW91c1NlbGVjdGVkVmFsdWVzLmxlbmd0aCAmJiBzZWxlY3RlZE9wdGlvbnMoKS5sZW5ndGggPCBwcmV2aW91c1NlbGVjdGVkVmFsdWVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBGb3IgYSBzaW5nbGUtc2VsZWN0IGJveCwgY29tcGFyZSB0aGUgY3VycmVudCB2YWx1ZSB0byB0aGUgcHJldmlvdXMgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgLy8gQnV0IGlmIG5vdGhpbmcgd2FzIHNlbGVjdGVkIGJlZm9yZSBvciBub3RoaW5nIGlzIHNlbGVjdGVkIG5vdywganVzdCBsb29rIGZvciBhIGNoYW5nZSBpbiBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uQ2hhbmdlZCA9IChwcmV2aW91c1NlbGVjdGVkVmFsdWVzLmxlbmd0aCAmJiBlbGVtZW50LnNlbGVjdGVkSW5kZXggPj0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKGtvLnNlbGVjdEV4dGVuc2lvbnMucmVhZFZhbHVlKGVsZW1lbnQub3B0aW9uc1tlbGVtZW50LnNlbGVjdGVkSW5kZXhdKSAhPT0gcHJldmlvdXNTZWxlY3RlZFZhbHVlc1swXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogKHByZXZpb3VzU2VsZWN0ZWRWYWx1ZXMubGVuZ3RoIHx8IGVsZW1lbnQuc2VsZWN0ZWRJbmRleCA+PSAwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgY29uc2lzdGVuY3kgYmV0d2VlbiBtb2RlbCB2YWx1ZSBhbmQgc2VsZWN0ZWQgb3B0aW9uLlxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBkcm9wZG93biB3YXMgY2hhbmdlZCBzbyB0aGF0IHNlbGVjdGlvbiBpcyBubyBsb25nZXIgdGhlIHNhbWUsXG4gICAgICAgICAgICAgICAgLy8gbm90aWZ5IHRoZSB2YWx1ZSBvciBzZWxlY3RlZE9wdGlvbnMgYmluZGluZy5cbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICBrby51dGlscy50cmlnZ2VyRXZlbnQoZWxlbWVudCwgXCJjaGFuZ2VcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBJRSBidWdcbiAgICAgICAga28udXRpbHMuZW5zdXJlU2VsZWN0RWxlbWVudElzUmVuZGVyZWRDb3JyZWN0bHkoZWxlbWVudCk7XG5cbiAgICAgICAgaWYgKHByZXZpb3VzU2Nyb2xsVG9wICYmIE1hdGguYWJzKHByZXZpb3VzU2Nyb2xsVG9wIC0gZWxlbWVudC5zY3JvbGxUb3ApID4gMjApXG4gICAgICAgICAgICBlbGVtZW50LnNjcm9sbFRvcCA9IHByZXZpb3VzU2Nyb2xsVG9wO1xuICAgIH1cbn07XG5rby5iaW5kaW5nSGFuZGxlcnNbJ29wdGlvbnMnXS5vcHRpb25WYWx1ZURvbURhdGFLZXkgPSBrby51dGlscy5kb21EYXRhLm5leHRLZXkoKTtcbmtvLmJpbmRpbmdIYW5kbGVyc1snc2VsZWN0ZWRPcHRpb25zJ10gPSB7XG4gICAgJ2FmdGVyJzogWydvcHRpb25zJywgJ2ZvcmVhY2gnXSxcbiAgICAnaW5pdCc6IGZ1bmN0aW9uIChlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncykge1xuICAgICAgICBrby51dGlscy5yZWdpc3RlckV2ZW50SGFuZGxlcihlbGVtZW50LCBcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZUFjY2Vzc29yKCksIHZhbHVlVG9Xcml0ZSA9IFtdO1xuICAgICAgICAgICAga28udXRpbHMuYXJyYXlGb3JFYWNoKGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJvcHRpb25cIiksIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5zZWxlY3RlZClcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVUb1dyaXRlLnB1c2goa28uc2VsZWN0RXh0ZW5zaW9ucy5yZWFkVmFsdWUobm9kZSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBrby5leHByZXNzaW9uUmV3cml0aW5nLndyaXRlVmFsdWVUb1Byb3BlcnR5KHZhbHVlLCBhbGxCaW5kaW5ncywgJ3NlbGVjdGVkT3B0aW9ucycsIHZhbHVlVG9Xcml0ZSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgJ3VwZGF0ZSc6IGZ1bmN0aW9uIChlbGVtZW50LCB2YWx1ZUFjY2Vzc29yKSB7XG4gICAgICAgIGlmIChrby51dGlscy50YWdOYW1lTG93ZXIoZWxlbWVudCkgIT0gXCJzZWxlY3RcIilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInZhbHVlcyBiaW5kaW5nIGFwcGxpZXMgb25seSB0byBTRUxFQ1QgZWxlbWVudHNcIik7XG5cbiAgICAgICAgdmFyIG5ld1ZhbHVlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZUFjY2Vzc29yKCkpLFxuICAgICAgICAgICAgcHJldmlvdXNTY3JvbGxUb3AgPSBlbGVtZW50LnNjcm9sbFRvcDtcblxuICAgICAgICBpZiAobmV3VmFsdWUgJiYgdHlwZW9mIG5ld1ZhbHVlLmxlbmd0aCA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICBrby51dGlscy5hcnJheUZvckVhY2goZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcIm9wdGlvblwiKSwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBpc1NlbGVjdGVkID0ga28udXRpbHMuYXJyYXlJbmRleE9mKG5ld1ZhbHVlLCBrby5zZWxlY3RFeHRlbnNpb25zLnJlYWRWYWx1ZShub2RlKSkgPj0gMDtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5zZWxlY3RlZCAhPSBpc1NlbGVjdGVkKSB7ICAgICAgLy8gVGhpcyBjaGVjayBwcmV2ZW50cyBmbGFzaGluZyBvZiB0aGUgc2VsZWN0IGVsZW1lbnQgaW4gSUVcbiAgICAgICAgICAgICAgICAgICAga28udXRpbHMuc2V0T3B0aW9uTm9kZVNlbGVjdGlvblN0YXRlKG5vZGUsIGlzU2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSBwcmV2aW91c1Njcm9sbFRvcDtcbiAgICB9XG59O1xua28uZXhwcmVzc2lvblJld3JpdGluZy50d29XYXlCaW5kaW5nc1snc2VsZWN0ZWRPcHRpb25zJ10gPSB0cnVlO1xua28uYmluZGluZ0hhbmRsZXJzWydzdHlsZSddID0ge1xuICAgICd1cGRhdGUnOiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcikge1xuICAgICAgICB2YXIgdmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSB8fCB7fSk7XG4gICAgICAgIGtvLnV0aWxzLm9iamVjdEZvckVhY2godmFsdWUsIGZ1bmN0aW9uKHN0eWxlTmFtZSwgc3R5bGVWYWx1ZSkge1xuICAgICAgICAgICAgc3R5bGVWYWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUoc3R5bGVWYWx1ZSk7XG5cbiAgICAgICAgICAgIGlmIChzdHlsZVZhbHVlID09PSBudWxsIHx8IHN0eWxlVmFsdWUgPT09IHVuZGVmaW5lZCB8fCBzdHlsZVZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vIEVtcHR5IHN0cmluZyByZW1vdmVzIHRoZSB2YWx1ZSwgd2hlcmVhcyBudWxsL3VuZGVmaW5lZCBoYXZlIG5vIGVmZmVjdFxuICAgICAgICAgICAgICAgIHN0eWxlVmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlW3N0eWxlTmFtZV0gPSBzdHlsZVZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xua28uYmluZGluZ0hhbmRsZXJzWydzdWJtaXQnXSA9IHtcbiAgICAnaW5pdCc6IGZ1bmN0aW9uIChlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncywgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlQWNjZXNzb3IoKSAhPSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdmFsdWUgZm9yIGEgc3VibWl0IGJpbmRpbmcgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICBrby51dGlscy5yZWdpc3RlckV2ZW50SGFuZGxlcihlbGVtZW50LCBcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGVyUmV0dXJuVmFsdWU7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZUFjY2Vzc29yKCk7XG4gICAgICAgICAgICB0cnkgeyBoYW5kbGVyUmV0dXJuVmFsdWUgPSB2YWx1ZS5jYWxsKGJpbmRpbmdDb250ZXh0WyckZGF0YSddLCBlbGVtZW50KTsgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXJSZXR1cm5WYWx1ZSAhPT0gdHJ1ZSkgeyAvLyBOb3JtYWxseSB3ZSB3YW50IHRvIHByZXZlbnQgZGVmYXVsdCBhY3Rpb24uIERldmVsb3BlciBjYW4gb3ZlcnJpZGUgdGhpcyBiZSBleHBsaWNpdGx5IHJldHVybmluZyB0cnVlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQucHJldmVudERlZmF1bHQpXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufTtcbmtvLmJpbmRpbmdIYW5kbGVyc1sndGV4dCddID0ge1xuICAgICdpbml0JzogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFByZXZlbnQgYmluZGluZyBvbiB0aGUgZHluYW1pY2FsbHktaW5qZWN0ZWQgdGV4dCBub2RlIChhcyBkZXZlbG9wZXJzIGFyZSB1bmxpa2VseSB0byBleHBlY3QgdGhhdCwgYW5kIGl0IGhhcyBzZWN1cml0eSBpbXBsaWNhdGlvbnMpLlxuICAgICAgICAvLyBJdCBzaG91bGQgYWxzbyBtYWtlIHRoaW5ncyBmYXN0ZXIsIGFzIHdlIG5vIGxvbmdlciBoYXZlIHRvIGNvbnNpZGVyIHdoZXRoZXIgdGhlIHRleHQgbm9kZSBtaWdodCBiZSBiaW5kYWJsZS5cbiAgICAgICAgcmV0dXJuIHsgJ2NvbnRyb2xzRGVzY2VuZGFudEJpbmRpbmdzJzogdHJ1ZSB9O1xuICAgIH0sXG4gICAgJ3VwZGF0ZSc6IGZ1bmN0aW9uIChlbGVtZW50LCB2YWx1ZUFjY2Vzc29yKSB7XG4gICAgICAgIGtvLnV0aWxzLnNldFRleHRDb250ZW50KGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IoKSk7XG4gICAgfVxufTtcbmtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3NbJ3RleHQnXSA9IHRydWU7XG4oZnVuY3Rpb24gKCkge1xuXG5pZiAod2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3IpIHtcbiAgICB2YXIgcGFyc2VWZXJzaW9uID0gZnVuY3Rpb24gKG1hdGNoZXMpIHtcbiAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KG1hdGNoZXNbMV0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIERldGVjdCB2YXJpb3VzIGJyb3dzZXIgdmVyc2lvbnMgYmVjYXVzZSBzb21lIG9sZCB2ZXJzaW9ucyBkb24ndCBmdWxseSBzdXBwb3J0IHRoZSAnaW5wdXQnIGV2ZW50XG4gICAgdmFyIG9wZXJhVmVyc2lvbiA9IHdpbmRvdy5vcGVyYSAmJiB3aW5kb3cub3BlcmEudmVyc2lvbiAmJiBwYXJzZUludCh3aW5kb3cub3BlcmEudmVyc2lvbigpKSxcbiAgICAgICAgdXNlckFnZW50ID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAgIHNhZmFyaVZlcnNpb24gPSBwYXJzZVZlcnNpb24odXNlckFnZW50Lm1hdGNoKC9eKD86KD8hY2hyb21lKS4pKnZlcnNpb25cXC8oW14gXSopIHNhZmFyaS9pKSksXG4gICAgICAgIGZpcmVmb3hWZXJzaW9uID0gcGFyc2VWZXJzaW9uKHVzZXJBZ2VudC5tYXRjaCgvRmlyZWZveFxcLyhbXiBdKikvKSk7XG59XG5cbi8vIElFIDggYW5kIDkgaGF2ZSBidWdzIHRoYXQgcHJldmVudCB0aGUgbm9ybWFsIGV2ZW50cyBmcm9tIGZpcmluZyB3aGVuIHRoZSB2YWx1ZSBjaGFuZ2VzLlxuLy8gQnV0IGl0IGRvZXMgZmlyZSB0aGUgJ3NlbGVjdGlvbmNoYW5nZScgZXZlbnQgb24gbWFueSBvZiB0aG9zZSwgcHJlc3VtYWJseSBiZWNhdXNlIHRoZVxuLy8gY3Vyc29yIGlzIG1vdmluZyBhbmQgdGhhdCBjb3VudHMgYXMgdGhlIHNlbGVjdGlvbiBjaGFuZ2luZy4gVGhlICdzZWxlY3Rpb25jaGFuZ2UnIGV2ZW50IGlzXG4vLyBmaXJlZCBhdCB0aGUgZG9jdW1lbnQgbGV2ZWwgb25seSBhbmQgZG9lc24ndCBkaXJlY3RseSBpbmRpY2F0ZSB3aGljaCBlbGVtZW50IGNoYW5nZWQuIFdlXG4vLyBzZXQgdXAganVzdCBvbmUgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGRvY3VtZW50IGFuZCB1c2UgJ2FjdGl2ZUVsZW1lbnQnIHRvIGRldGVybWluZSB3aGljaFxuLy8gZWxlbWVudCB3YXMgY2hhbmdlZC5cbmlmIChrby51dGlscy5pZVZlcnNpb24gPCAxMCkge1xuICAgIHZhciBzZWxlY3Rpb25DaGFuZ2VSZWdpc3RlcmVkTmFtZSA9IGtvLnV0aWxzLmRvbURhdGEubmV4dEtleSgpLFxuICAgICAgICBzZWxlY3Rpb25DaGFuZ2VIYW5kbGVyTmFtZSA9IGtvLnV0aWxzLmRvbURhdGEubmV4dEtleSgpO1xuICAgIHZhciBzZWxlY3Rpb25DaGFuZ2VIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuYWN0aXZlRWxlbWVudCxcbiAgICAgICAgICAgIGhhbmRsZXIgPSB0YXJnZXQgJiYga28udXRpbHMuZG9tRGF0YS5nZXQodGFyZ2V0LCBzZWxlY3Rpb25DaGFuZ2VIYW5kbGVyTmFtZSk7XG4gICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgICBoYW5kbGVyKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIHJlZ2lzdGVyRm9yU2VsZWN0aW9uQ2hhbmdlRXZlbnQgPSBmdW5jdGlvbiAoZWxlbWVudCwgaGFuZGxlcikge1xuICAgICAgICB2YXIgb3duZXJEb2MgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQ7XG4gICAgICAgIGlmICgha28udXRpbHMuZG9tRGF0YS5nZXQob3duZXJEb2MsIHNlbGVjdGlvbkNoYW5nZVJlZ2lzdGVyZWROYW1lKSkge1xuICAgICAgICAgICAga28udXRpbHMuZG9tRGF0YS5zZXQob3duZXJEb2MsIHNlbGVjdGlvbkNoYW5nZVJlZ2lzdGVyZWROYW1lLCB0cnVlKTtcbiAgICAgICAgICAgIGtvLnV0aWxzLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKG93bmVyRG9jLCAnc2VsZWN0aW9uY2hhbmdlJywgc2VsZWN0aW9uQ2hhbmdlSGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgICAga28udXRpbHMuZG9tRGF0YS5zZXQoZWxlbWVudCwgc2VsZWN0aW9uQ2hhbmdlSGFuZGxlck5hbWUsIGhhbmRsZXIpO1xuICAgIH07XG59XG5cbmtvLmJpbmRpbmdIYW5kbGVyc1sndGV4dElucHV0J10gPSB7XG4gICAgJ2luaXQnOiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MpIHtcblxuICAgICAgICB2YXIgcHJldmlvdXNFbGVtZW50VmFsdWUgPSBlbGVtZW50LnZhbHVlLFxuICAgICAgICAgICAgdGltZW91dEhhbmRsZSxcbiAgICAgICAgICAgIGVsZW1lbnRWYWx1ZUJlZm9yZUV2ZW50O1xuXG4gICAgICAgIHZhciB1cGRhdGVNb2RlbCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRIYW5kbGUpO1xuICAgICAgICAgICAgZWxlbWVudFZhbHVlQmVmb3JlRXZlbnQgPSB0aW1lb3V0SGFuZGxlID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB2YXIgZWxlbWVudFZhbHVlID0gZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgIGlmIChwcmV2aW91c0VsZW1lbnRWYWx1ZSAhPT0gZWxlbWVudFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgLy8gUHJvdmlkZSBhIHdheSBmb3IgdGVzdHMgdG8ga25vdyBleGFjdGx5IHdoaWNoIGV2ZW50IHdhcyBwcm9jZXNzZWRcbiAgICAgICAgICAgICAgICBpZiAoREVCVUcgJiYgZXZlbnQpIGVsZW1lbnRbJ19rb190ZXh0SW5wdXRQcm9jZXNzZWRFdmVudCddID0gZXZlbnQudHlwZTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnRWYWx1ZSA9IGVsZW1lbnRWYWx1ZTtcbiAgICAgICAgICAgICAgICBrby5leHByZXNzaW9uUmV3cml0aW5nLndyaXRlVmFsdWVUb1Byb3BlcnR5KHZhbHVlQWNjZXNzb3IoKSwgYWxsQmluZGluZ3MsICd0ZXh0SW5wdXQnLCBlbGVtZW50VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBkZWZlclVwZGF0ZU1vZGVsID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoIXRpbWVvdXRIYW5kbGUpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudFZhbHVlQmVmb3JlRXZlbnQgdmFyaWFibGUgaXMgc2V0ICpvbmx5KiBkdXJpbmcgdGhlIGJyaWVmIGdhcCBiZXR3ZWVuIGFuXG4gICAgICAgICAgICAgICAgLy8gZXZlbnQgZmlyaW5nIGFuZCB0aGUgdXBkYXRlTW9kZWwgZnVuY3Rpb24gcnVubmluZy4gVGhpcyBhbGxvd3MgdXMgdG8gaWdub3JlIG1vZGVsXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlcyB0aGF0IGFyZSBmcm9tIHRoZSBwcmV2aW91cyBzdGF0ZSBvZiB0aGUgZWxlbWVudCwgdXN1YWxseSBkdWUgdG8gdGVjaG5pcXVlc1xuICAgICAgICAgICAgICAgIC8vIHN1Y2ggYXMgcmF0ZUxpbWl0LiBTdWNoIHVwZGF0ZXMsIGlmIG5vdCBpZ25vcmVkLCBjYW4gY2F1c2Uga2V5c3Ryb2tlcyB0byBiZSBsb3N0LlxuICAgICAgICAgICAgICAgIGVsZW1lbnRWYWx1ZUJlZm9yZUV2ZW50ID0gZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlciA9IERFQlVHID8gdXBkYXRlTW9kZWwuYmluZChlbGVtZW50LCB7dHlwZTogZXZlbnQudHlwZX0pIDogdXBkYXRlTW9kZWw7XG4gICAgICAgICAgICAgICAgdGltZW91dEhhbmRsZSA9IGtvLnV0aWxzLnNldFRpbWVvdXQoaGFuZGxlciwgNCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSUU5IHdpbGwgbWVzcyB1cCB0aGUgRE9NIGlmIHlvdSBoYW5kbGUgZXZlbnRzIHN5bmNocm9ub3VzbHkgd2hpY2ggcmVzdWx0cyBpbiBET00gY2hhbmdlcyAoc3VjaCBhcyBvdGhlciBiaW5kaW5ncyk7XG4gICAgICAgIC8vIHNvIHdlJ2xsIG1ha2Ugc3VyZSBhbGwgdXBkYXRlcyBhcmUgYXN5bmNocm9ub3VzXG4gICAgICAgIHZhciBpZVVwZGF0ZU1vZGVsID0ga28udXRpbHMuaWVWZXJzaW9uID09IDkgPyBkZWZlclVwZGF0ZU1vZGVsIDogdXBkYXRlTW9kZWw7XG5cbiAgICAgICAgdmFyIHVwZGF0ZVZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbW9kZWxWYWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKTtcblxuICAgICAgICAgICAgaWYgKG1vZGVsVmFsdWUgPT09IG51bGwgfHwgbW9kZWxWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbW9kZWxWYWx1ZSA9ICcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZWxlbWVudFZhbHVlQmVmb3JlRXZlbnQgIT09IHVuZGVmaW5lZCAmJiBtb2RlbFZhbHVlID09PSBlbGVtZW50VmFsdWVCZWZvcmVFdmVudCkge1xuICAgICAgICAgICAgICAgIGtvLnV0aWxzLnNldFRpbWVvdXQodXBkYXRlVmlldywgNCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGVsZW1lbnQgb25seSBpZiB0aGUgZWxlbWVudCBhbmQgbW9kZWwgYXJlIGRpZmZlcmVudC4gT24gc29tZSBicm93c2VycywgdXBkYXRpbmcgdGhlIHZhbHVlXG4gICAgICAgICAgICAvLyB3aWxsIG1vdmUgdGhlIGN1cnNvciB0byB0aGUgZW5kIG9mIHRoZSBpbnB1dCwgd2hpY2ggd291bGQgYmUgYmFkIHdoaWxlIHRoZSB1c2VyIGlzIHR5cGluZy5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LnZhbHVlICE9PSBtb2RlbFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50VmFsdWUgPSBtb2RlbFZhbHVlOyAgLy8gTWFrZSBzdXJlIHdlIGlnbm9yZSBldmVudHMgKHByb3BlcnR5Y2hhbmdlKSB0aGF0IHJlc3VsdCBmcm9tIHVwZGF0aW5nIHRoZSB2YWx1ZVxuICAgICAgICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSBtb2RlbFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBvbkV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgICAgICAgICBrby51dGlscy5yZWdpc3RlckV2ZW50SGFuZGxlcihlbGVtZW50LCBldmVudCwgaGFuZGxlcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKERFQlVHICYmIGtvLmJpbmRpbmdIYW5kbGVyc1sndGV4dElucHV0J11bJ19mb3JjZVVwZGF0ZU9uJ10pIHtcbiAgICAgICAgICAgIC8vIFByb3ZpZGUgYSB3YXkgZm9yIHRlc3RzIHRvIHNwZWNpZnkgZXhhY3RseSB3aGljaCBldmVudHMgYXJlIGJvdW5kXG4gICAgICAgICAgICBrby51dGlscy5hcnJheUZvckVhY2goa28uYmluZGluZ0hhbmRsZXJzWyd0ZXh0SW5wdXQnXVsnX2ZvcmNlVXBkYXRlT24nXSwgZnVuY3Rpb24oZXZlbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50TmFtZS5zbGljZSgwLDUpID09ICdhZnRlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgb25FdmVudChldmVudE5hbWUuc2xpY2UoNSksIGRlZmVyVXBkYXRlTW9kZWwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9uRXZlbnQoZXZlbnROYW1lLCB1cGRhdGVNb2RlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoa28udXRpbHMuaWVWZXJzaW9uIDwgMTApIHtcbiAgICAgICAgICAgICAgICAvLyBJbnRlcm5ldCBFeHBsb3JlciA8PSA4IGRvZXNuJ3Qgc3VwcG9ydCB0aGUgJ2lucHV0JyBldmVudCwgYnV0IGRvZXMgaW5jbHVkZSAncHJvcGVydHljaGFuZ2UnIHRoYXQgZmlyZXMgd2hlbmV2ZXJcbiAgICAgICAgICAgICAgICAvLyBhbnkgcHJvcGVydHkgb2YgYW4gZWxlbWVudCBjaGFuZ2VzLiBVbmxpa2UgJ2lucHV0JywgaXQgYWxzbyBmaXJlcyBpZiBhIHByb3BlcnR5IGlzIGNoYW5nZWQgZnJvbSBKYXZhU2NyaXB0IGNvZGUsXG4gICAgICAgICAgICAgICAgLy8gYnV0IHRoYXQncyBhbiBhY2NlcHRhYmxlIGNvbXByb21pc2UgZm9yIHRoaXMgYmluZGluZy4gSUUgOSBkb2VzIHN1cHBvcnQgJ2lucHV0JywgYnV0IHNpbmNlIGl0IGRvZXNuJ3QgZmlyZSBpdFxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdXNpbmcgYXV0b2NvbXBsZXRlLCB3ZSdsbCB1c2UgJ3Byb3BlcnR5Y2hhbmdlJyBmb3IgaXQgYWxzby5cbiAgICAgICAgICAgICAgICBvbkV2ZW50KCdwcm9wZXJ0eWNoYW5nZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5wcm9wZXJ0eU5hbWUgPT09ICd2YWx1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGllVXBkYXRlTW9kZWwoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoa28udXRpbHMuaWVWZXJzaW9uID09IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSUUgOCBoYXMgYSBidWcgd2hlcmUgaXQgZmFpbHMgdG8gZmlyZSAncHJvcGVydHljaGFuZ2UnIG9uIHRoZSBmaXJzdCB1cGRhdGUgZm9sbG93aW5nIGEgdmFsdWUgY2hhbmdlIGZyb21cbiAgICAgICAgICAgICAgICAgICAgLy8gSmF2YVNjcmlwdCBjb2RlLiBJdCBhbHNvIGRvZXNuJ3QgZmlyZSBpZiB5b3UgY2xlYXIgdGhlIGVudGlyZSB2YWx1ZS4gVG8gZml4IHRoaXMsIHdlIGJpbmQgdG8gdGhlIGZvbGxvd2luZ1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMgdG9vLlxuICAgICAgICAgICAgICAgICAgICBvbkV2ZW50KCdrZXl1cCcsIHVwZGF0ZU1vZGVsKTsgICAgICAvLyBBIHNpbmdsZSBrZXlzdG9rZVxuICAgICAgICAgICAgICAgICAgICBvbkV2ZW50KCdrZXlkb3duJywgdXBkYXRlTW9kZWwpOyAgICAvLyBUaGUgZmlyc3QgY2hhcmFjdGVyIHdoZW4gYSBrZXkgaXMgaGVsZCBkb3duXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrby51dGlscy5pZVZlcnNpb24gPj0gOCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbnRlcm5ldCBFeHBsb3JlciA5IGRvZXNuJ3QgZmlyZSB0aGUgJ2lucHV0JyBldmVudCB3aGVuIGRlbGV0aW5nIHRleHQsIGluY2x1ZGluZyB1c2luZ1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYmFja3NwYWNlLCBkZWxldGUsIG9yIGN0cmwteCBrZXlzLCBjbGlja2luZyB0aGUgJ3gnIHRvIGNsZWFyIHRoZSBpbnB1dCwgZHJhZ2dpbmcgdGV4dFxuICAgICAgICAgICAgICAgICAgICAvLyBvdXQgb2YgdGhlIGZpZWxkLCBhbmQgY3V0dGluZyBvciBkZWxldGluZyB0ZXh0IHVzaW5nIHRoZSBjb250ZXh0IG1lbnUuICdzZWxlY3Rpb25jaGFuZ2UnXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbiBkZXRlY3QgYWxsIG9mIHRob3NlIGV4Y2VwdCBkcmFnZ2luZyB0ZXh0IG91dCBvZiB0aGUgZmllbGQsIGZvciB3aGljaCB3ZSB1c2UgJ2RyYWdlbmQnLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGVzZSBhcmUgYWxzbyBuZWVkZWQgaW4gSUU4IGJlY2F1c2Ugb2YgdGhlIGJ1ZyBkZXNjcmliZWQgYWJvdmUuXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyRm9yU2VsZWN0aW9uQ2hhbmdlRXZlbnQoZWxlbWVudCwgaWVVcGRhdGVNb2RlbCk7ICAvLyAnc2VsZWN0aW9uY2hhbmdlJyBjb3ZlcnMgY3V0LCBwYXN0ZSwgZHJvcCwgZGVsZXRlLCBldGMuXG4gICAgICAgICAgICAgICAgICAgIG9uRXZlbnQoJ2RyYWdlbmQnLCBkZWZlclVwZGF0ZU1vZGVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFsbCBvdGhlciBzdXBwb3J0ZWQgYnJvd3NlcnMgc3VwcG9ydCB0aGUgJ2lucHV0JyBldmVudCwgd2hpY2ggZmlyZXMgd2hlbmV2ZXIgdGhlIGNvbnRlbnQgb2YgdGhlIGVsZW1lbnQgaXMgY2hhbmdlZFxuICAgICAgICAgICAgICAgIC8vIHRocm91Z2ggdGhlIHVzZXIgaW50ZXJmYWNlLlxuICAgICAgICAgICAgICAgIG9uRXZlbnQoJ2lucHV0JywgdXBkYXRlTW9kZWwpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNhZmFyaVZlcnNpb24gPCA1ICYmIGtvLnV0aWxzLnRhZ05hbWVMb3dlcihlbGVtZW50KSA9PT0gXCJ0ZXh0YXJlYVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNhZmFyaSA8NSBkb2Vzbid0IGZpcmUgdGhlICdpbnB1dCcgZXZlbnQgZm9yIDx0ZXh0YXJlYT4gZWxlbWVudHMgKGl0IGRvZXMgZmlyZSAndGV4dElucHV0J1xuICAgICAgICAgICAgICAgICAgICAvLyBidXQgb25seSB3aGVuIHR5cGluZykuIFNvIHdlJ2xsIGp1c3QgY2F0Y2ggYXMgbXVjaCBhcyB3ZSBjYW4gd2l0aCBrZXlkb3duLCBjdXQsIGFuZCBwYXN0ZS5cbiAgICAgICAgICAgICAgICAgICAgb25FdmVudCgna2V5ZG93bicsIGRlZmVyVXBkYXRlTW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICBvbkV2ZW50KCdwYXN0ZScsIGRlZmVyVXBkYXRlTW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICBvbkV2ZW50KCdjdXQnLCBkZWZlclVwZGF0ZU1vZGVsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wZXJhVmVyc2lvbiA8IDExKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9wZXJhIDEwIGRvZXNuJ3QgYWx3YXlzIGZpcmUgdGhlICdpbnB1dCcgZXZlbnQgZm9yIGN1dCwgcGFzdGUsIHVuZG8gJiBkcm9wIG9wZXJhdGlvbnMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGNhbiB0cnkgdG8gY2F0Y2ggc29tZSBvZiB0aG9zZSB1c2luZyAna2V5ZG93bicuXG4gICAgICAgICAgICAgICAgICAgIG9uRXZlbnQoJ2tleWRvd24nLCBkZWZlclVwZGF0ZU1vZGVsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpcmVmb3hWZXJzaW9uIDwgNC4wKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggPD0gMy42IGRvZXNuJ3QgZmlyZSB0aGUgJ2lucHV0JyBldmVudCB3aGVuIHRleHQgaXMgZmlsbGVkIGluIHRocm91Z2ggYXV0b2NvbXBsZXRlXG4gICAgICAgICAgICAgICAgICAgIG9uRXZlbnQoJ0RPTUF1dG9Db21wbGV0ZScsIHVwZGF0ZU1vZGVsKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBGaXJlZm94IDw9My41IGRvZXNuJ3QgZmlyZSB0aGUgJ2lucHV0JyBldmVudCB3aGVuIHRleHQgaXMgZHJvcHBlZCBpbnRvIHRoZSBpbnB1dC5cbiAgICAgICAgICAgICAgICAgICAgb25FdmVudCgnZHJhZ2Ryb3AnLCB1cGRhdGVNb2RlbCk7ICAgICAgIC8vIDwzLjVcbiAgICAgICAgICAgICAgICAgICAgb25FdmVudCgnZHJvcCcsIHVwZGF0ZU1vZGVsKTsgICAgICAgICAgIC8vIDMuNVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJpbmQgdG8gdGhlIGNoYW5nZSBldmVudCBzbyB0aGF0IHdlIGNhbiBjYXRjaCBwcm9ncmFtbWF0aWMgdXBkYXRlcyBvZiB0aGUgdmFsdWUgdGhhdCBmaXJlIHRoaXMgZXZlbnQuXG4gICAgICAgIG9uRXZlbnQoJ2NoYW5nZScsIHVwZGF0ZU1vZGVsKTtcblxuICAgICAgICBrby5jb21wdXRlZCh1cGRhdGVWaWV3LCBudWxsLCB7IGRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZDogZWxlbWVudCB9KTtcbiAgICB9XG59O1xua28uZXhwcmVzc2lvblJld3JpdGluZy50d29XYXlCaW5kaW5nc1sndGV4dElucHV0J10gPSB0cnVlO1xuXG4vLyB0ZXh0aW5wdXQgaXMgYW4gYWxpYXMgZm9yIHRleHRJbnB1dFxua28uYmluZGluZ0hhbmRsZXJzWyd0ZXh0aW5wdXQnXSA9IHtcbiAgICAvLyBwcmVwcm9jZXNzIGlzIHRoZSBvbmx5IHdheSB0byBzZXQgdXAgYSBmdWxsIGFsaWFzXG4gICAgJ3ByZXByb2Nlc3MnOiBmdW5jdGlvbiAodmFsdWUsIG5hbWUsIGFkZEJpbmRpbmcpIHtcbiAgICAgICAgYWRkQmluZGluZygndGV4dElucHV0JywgdmFsdWUpO1xuICAgIH1cbn07XG5cbn0pKCk7a28uYmluZGluZ0hhbmRsZXJzWyd1bmlxdWVOYW1lJ10gPSB7XG4gICAgJ2luaXQnOiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcikge1xuICAgICAgICBpZiAodmFsdWVBY2Nlc3NvcigpKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IFwia29fdW5pcXVlX1wiICsgKCsra28uYmluZGluZ0hhbmRsZXJzWyd1bmlxdWVOYW1lJ10uY3VycmVudEluZGV4KTtcbiAgICAgICAgICAgIGtvLnV0aWxzLnNldEVsZW1lbnROYW1lKGVsZW1lbnQsIG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxufTtcbmtvLmJpbmRpbmdIYW5kbGVyc1sndW5pcXVlTmFtZSddLmN1cnJlbnRJbmRleCA9IDA7XG5rby5iaW5kaW5nSGFuZGxlcnNbJ3ZhbHVlJ10gPSB7XG4gICAgJ2FmdGVyJzogWydvcHRpb25zJywgJ2ZvcmVhY2gnXSxcbiAgICAnaW5pdCc6IGZ1bmN0aW9uIChlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncykge1xuICAgICAgICAvLyBJZiB0aGUgdmFsdWUgYmluZGluZyBpcyBwbGFjZWQgb24gYSByYWRpby9jaGVja2JveCwgdGhlbiBqdXN0IHBhc3MgdGhyb3VnaCB0byBjaGVja2VkVmFsdWUgYW5kIHF1aXRcbiAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09IFwiaW5wdXRcIiAmJiAoZWxlbWVudC50eXBlID09IFwiY2hlY2tib3hcIiB8fCBlbGVtZW50LnR5cGUgPT0gXCJyYWRpb1wiKSkge1xuICAgICAgICAgICAga28uYXBwbHlCaW5kaW5nQWNjZXNzb3JzVG9Ob2RlKGVsZW1lbnQsIHsgJ2NoZWNrZWRWYWx1ZSc6IHZhbHVlQWNjZXNzb3IgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBbHdheXMgY2F0Y2ggXCJjaGFuZ2VcIiBldmVudDsgcG9zc2libHkgb3RoZXIgZXZlbnRzIHRvbyBpZiBhc2tlZFxuICAgICAgICB2YXIgZXZlbnRzVG9DYXRjaCA9IFtcImNoYW5nZVwiXTtcbiAgICAgICAgdmFyIHJlcXVlc3RlZEV2ZW50c1RvQ2F0Y2ggPSBhbGxCaW5kaW5ncy5nZXQoXCJ2YWx1ZVVwZGF0ZVwiKTtcbiAgICAgICAgdmFyIHByb3BlcnR5Q2hhbmdlZEZpcmVkID0gZmFsc2U7XG4gICAgICAgIHZhciBlbGVtZW50VmFsdWVCZWZvcmVFdmVudCA9IG51bGw7XG5cbiAgICAgICAgaWYgKHJlcXVlc3RlZEV2ZW50c1RvQ2F0Y2gpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdGVkRXZlbnRzVG9DYXRjaCA9PSBcInN0cmluZ1wiKSAvLyBBbGxvdyBib3RoIGluZGl2aWR1YWwgZXZlbnQgbmFtZXMsIGFuZCBhcnJheXMgb2YgZXZlbnQgbmFtZXNcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRFdmVudHNUb0NhdGNoID0gW3JlcXVlc3RlZEV2ZW50c1RvQ2F0Y2hdO1xuICAgICAgICAgICAga28udXRpbHMuYXJyYXlQdXNoQWxsKGV2ZW50c1RvQ2F0Y2gsIHJlcXVlc3RlZEV2ZW50c1RvQ2F0Y2gpO1xuICAgICAgICAgICAgZXZlbnRzVG9DYXRjaCA9IGtvLnV0aWxzLmFycmF5R2V0RGlzdGluY3RWYWx1ZXMoZXZlbnRzVG9DYXRjaCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdmFsdWVVcGRhdGVIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBlbGVtZW50VmFsdWVCZWZvcmVFdmVudCA9IG51bGw7XG4gICAgICAgICAgICBwcm9wZXJ0eUNoYW5nZWRGaXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIG1vZGVsVmFsdWUgPSB2YWx1ZUFjY2Vzc29yKCk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudFZhbHVlID0ga28uc2VsZWN0RXh0ZW5zaW9ucy5yZWFkVmFsdWUoZWxlbWVudCk7XG4gICAgICAgICAgICBrby5leHByZXNzaW9uUmV3cml0aW5nLndyaXRlVmFsdWVUb1Byb3BlcnR5KG1vZGVsVmFsdWUsIGFsbEJpbmRpbmdzLCAndmFsdWUnLCBlbGVtZW50VmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL1N0ZXZlU2FuZGVyc29uL2tub2Nrb3V0L2lzc3Vlcy8xMjJcbiAgICAgICAgLy8gSUUgZG9lc24ndCBmaXJlIFwiY2hhbmdlXCIgZXZlbnRzIG9uIHRleHRib3hlcyBpZiB0aGUgdXNlciBzZWxlY3RzIGEgdmFsdWUgZnJvbSBpdHMgYXV0b2NvbXBsZXRlIGxpc3RcbiAgICAgICAgdmFyIGllQXV0b0NvbXBsZXRlSGFja05lZWRlZCA9IGtvLnV0aWxzLmllVmVyc2lvbiAmJiBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PSBcImlucHV0XCIgJiYgZWxlbWVudC50eXBlID09IFwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBlbGVtZW50LmF1dG9jb21wbGV0ZSAhPSBcIm9mZlwiICYmICghZWxlbWVudC5mb3JtIHx8IGVsZW1lbnQuZm9ybS5hdXRvY29tcGxldGUgIT0gXCJvZmZcIik7XG4gICAgICAgIGlmIChpZUF1dG9Db21wbGV0ZUhhY2tOZWVkZWQgJiYga28udXRpbHMuYXJyYXlJbmRleE9mKGV2ZW50c1RvQ2F0Y2gsIFwicHJvcGVydHljaGFuZ2VcIikgPT0gLTEpIHtcbiAgICAgICAgICAgIGtvLnV0aWxzLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKGVsZW1lbnQsIFwicHJvcGVydHljaGFuZ2VcIiwgZnVuY3Rpb24gKCkgeyBwcm9wZXJ0eUNoYW5nZWRGaXJlZCA9IHRydWUgfSk7XG4gICAgICAgICAgICBrby51dGlscy5yZWdpc3RlckV2ZW50SGFuZGxlcihlbGVtZW50LCBcImZvY3VzXCIsIGZ1bmN0aW9uICgpIHsgcHJvcGVydHlDaGFuZ2VkRmlyZWQgPSBmYWxzZSB9KTtcbiAgICAgICAgICAgIGtvLnV0aWxzLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKGVsZW1lbnQsIFwiYmx1clwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydHlDaGFuZ2VkRmlyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVVcGRhdGVIYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBrby51dGlscy5hcnJheUZvckVhY2goZXZlbnRzVG9DYXRjaCwgZnVuY3Rpb24oZXZlbnROYW1lKSB7XG4gICAgICAgICAgICAvLyBUaGUgc3ludGF4IFwiYWZ0ZXI8ZXZlbnRuYW1lPlwiIG1lYW5zIFwicnVuIHRoZSBoYW5kbGVyIGFzeW5jaHJvbm91c2x5IGFmdGVyIHRoZSBldmVudFwiXG4gICAgICAgICAgICAvLyBUaGlzIGlzIHVzZWZ1bCwgZm9yIGV4YW1wbGUsIHRvIGNhdGNoIFwia2V5ZG93blwiIGV2ZW50cyBhZnRlciB0aGUgYnJvd3NlciBoYXMgdXBkYXRlZCB0aGUgY29udHJvbFxuICAgICAgICAgICAgLy8gKG90aGVyd2lzZSwga28uc2VsZWN0RXh0ZW5zaW9ucy5yZWFkVmFsdWUodGhpcykgd2lsbCByZWNlaXZlIHRoZSBjb250cm9sJ3MgdmFsdWUgKmJlZm9yZSogdGhlIGtleSBldmVudClcbiAgICAgICAgICAgIHZhciBoYW5kbGVyID0gdmFsdWVVcGRhdGVIYW5kbGVyO1xuICAgICAgICAgICAgaWYgKGtvLnV0aWxzLnN0cmluZ1N0YXJ0c1dpdGgoZXZlbnROYW1lLCBcImFmdGVyXCIpKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudFZhbHVlQmVmb3JlRXZlbnQgdmFyaWFibGUgaXMgbm9uLW51bGwgKm9ubHkqIGR1cmluZyB0aGUgYnJpZWYgZ2FwIGJldHdlZW5cbiAgICAgICAgICAgICAgICAgICAgLy8gYSBrZXlYIGV2ZW50IGZpcmluZyBhbmQgdGhlIHZhbHVlVXBkYXRlSGFuZGxlciBydW5uaW5nLCB3aGljaCBpcyBzY2hlZHVsZWQgdG8gaGFwcGVuXG4gICAgICAgICAgICAgICAgICAgIC8vIGF0IHRoZSBlYXJsaWVzdCBhc3luY2hyb25vdXMgb3Bwb3J0dW5pdHkuIFdlIHN0b3JlIHRoaXMgdGVtcG9yYXJ5IGluZm9ybWF0aW9uIHNvIHRoYXRcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYsIGJldHdlZW4ga2V5WCBhbmQgdmFsdWVVcGRhdGVIYW5kbGVyLCB0aGUgdW5kZXJseWluZyBtb2RlbCB2YWx1ZSBjaGFuZ2VzIHNlcGFyYXRlbHksXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGNhbiBvdmVyd3JpdGUgdGhhdCBtb2RlbCB2YWx1ZSBjaGFuZ2Ugd2l0aCB0aGUgdmFsdWUgdGhlIHVzZXIganVzdCB0eXBlZC4gT3RoZXJ3aXNlLFxuICAgICAgICAgICAgICAgICAgICAvLyB0ZWNobmlxdWVzIGxpa2UgcmF0ZUxpbWl0IGNhbiB0cmlnZ2VyIG1vZGVsIGNoYW5nZXMgYXQgY3JpdGljYWwgbW9tZW50cyB0aGF0IHdpbGxcbiAgICAgICAgICAgICAgICAgICAgLy8gb3ZlcnJpZGUgdGhlIHVzZXIncyBpbnB1dHMsIGNhdXNpbmcga2V5c3Ryb2tlcyB0byBiZSBsb3N0LlxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50VmFsdWVCZWZvcmVFdmVudCA9IGtvLnNlbGVjdEV4dGVuc2lvbnMucmVhZFZhbHVlKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICBrby51dGlscy5zZXRUaW1lb3V0KHZhbHVlVXBkYXRlSGFuZGxlciwgMCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBldmVudE5hbWUgPSBldmVudE5hbWUuc3Vic3RyaW5nKFwiYWZ0ZXJcIi5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAga28udXRpbHMucmVnaXN0ZXJFdmVudEhhbmRsZXIoZWxlbWVudCwgZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHVwZGF0ZUZyb21Nb2RlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50VmFsdWUgPSBrby5zZWxlY3RFeHRlbnNpb25zLnJlYWRWYWx1ZShlbGVtZW50KTtcblxuICAgICAgICAgICAgaWYgKGVsZW1lbnRWYWx1ZUJlZm9yZUV2ZW50ICE9PSBudWxsICYmIG5ld1ZhbHVlID09PSBlbGVtZW50VmFsdWVCZWZvcmVFdmVudCkge1xuICAgICAgICAgICAgICAgIGtvLnV0aWxzLnNldFRpbWVvdXQodXBkYXRlRnJvbU1vZGVsLCAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB2YWx1ZUhhc0NoYW5nZWQgPSAobmV3VmFsdWUgIT09IGVsZW1lbnRWYWx1ZSk7XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZUhhc0NoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoa28udXRpbHMudGFnTmFtZUxvd2VyKGVsZW1lbnQpID09PSBcInNlbGVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhbGxvd1Vuc2V0ID0gYWxsQmluZGluZ3MuZ2V0KCd2YWx1ZUFsbG93VW5zZXQnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFwcGx5VmFsdWVBY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrby5zZWxlY3RFeHRlbnNpb25zLndyaXRlVmFsdWUoZWxlbWVudCwgbmV3VmFsdWUsIGFsbG93VW5zZXQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBhcHBseVZhbHVlQWN0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbGxvd1Vuc2V0ICYmIG5ld1ZhbHVlICE9PSBrby5zZWxlY3RFeHRlbnNpb25zLnJlYWRWYWx1ZShlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgeW91IHRyeSB0byBzZXQgYSBtb2RlbCB2YWx1ZSB0aGF0IGNhbid0IGJlIHJlcHJlc2VudGVkIGluIGFuIGFscmVhZHktcG9wdWxhdGVkIGRyb3Bkb3duLCByZWplY3QgdGhhdCBjaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIHlvdSdyZSBub3QgYWxsb3dlZCB0byBoYXZlIGEgbW9kZWwgdmFsdWUgdGhhdCBkaXNhZ3JlZXMgd2l0aCBhIHZpc2libGUgVUkgc2VsZWN0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAga28uZGVwZW5kZW5jeURldGVjdGlvbi5pZ25vcmUoa28udXRpbHMudHJpZ2dlckV2ZW50LCBudWxsLCBbZWxlbWVudCwgXCJjaGFuZ2VcIl0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgSUU2IGJ1ZzogSXQgd29uJ3QgcmVsaWFibHkgYXBwbHkgdmFsdWVzIHRvIFNFTEVDVCBub2RlcyBkdXJpbmcgdGhlIHNhbWUgZXhlY3V0aW9uIHRocmVhZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmlnaHQgYWZ0ZXIgeW91J3ZlIGNoYW5nZWQgdGhlIHNldCBvZiBPUFRJT04gbm9kZXMgb24gaXQuIFNvIGZvciB0aGF0IG5vZGUgdHlwZSwgd2UnbGwgc2NoZWR1bGUgYSBzZWNvbmQgdGhyZWFkXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0byBhcHBseSB0aGUgdmFsdWUgYXMgd2VsbC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGtvLnV0aWxzLnNldFRpbWVvdXQoYXBwbHlWYWx1ZUFjdGlvbiwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBrby5zZWxlY3RFeHRlbnNpb25zLndyaXRlVmFsdWUoZWxlbWVudCwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBrby5jb21wdXRlZCh1cGRhdGVGcm9tTW9kZWwsIG51bGwsIHsgZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkOiBlbGVtZW50IH0pO1xuICAgIH0sXG4gICAgJ3VwZGF0ZSc6IGZ1bmN0aW9uKCkge30gLy8gS2VlcCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCBjb2RlIHRoYXQgbWF5IGhhdmUgd3JhcHBlZCB2YWx1ZSBiaW5kaW5nXG59O1xua28uZXhwcmVzc2lvblJld3JpdGluZy50d29XYXlCaW5kaW5nc1sndmFsdWUnXSA9IHRydWU7XG5rby5iaW5kaW5nSGFuZGxlcnNbJ3Zpc2libGUnXSA9IHtcbiAgICAndXBkYXRlJzogZnVuY3Rpb24gKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpIHtcbiAgICAgICAgdmFyIHZhbHVlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZUFjY2Vzc29yKCkpO1xuICAgICAgICB2YXIgaXNDdXJyZW50bHlWaXNpYmxlID0gIShlbGVtZW50LnN0eWxlLmRpc3BsYXkgPT0gXCJub25lXCIpO1xuICAgICAgICBpZiAodmFsdWUgJiYgIWlzQ3VycmVudGx5VmlzaWJsZSlcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgIGVsc2UgaWYgKCghdmFsdWUpICYmIGlzQ3VycmVudGx5VmlzaWJsZSlcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cbn07XG4vLyAnY2xpY2snIGlzIGp1c3QgYSBzaG9ydGhhbmQgZm9yIHRoZSB1c3VhbCBmdWxsLWxlbmd0aCBldmVudDp7Y2xpY2s6aGFuZGxlcn1cbm1ha2VFdmVudEhhbmRsZXJTaG9ydGN1dCgnY2xpY2snKTtcbi8vIElmIHlvdSB3YW50IHRvIG1ha2UgYSBjdXN0b20gdGVtcGxhdGUgZW5naW5lLFxuLy9cbi8vIFsxXSBJbmhlcml0IGZyb20gdGhpcyBjbGFzcyAobGlrZSBrby5uYXRpdmVUZW1wbGF0ZUVuZ2luZSBkb2VzKVxuLy8gWzJdIE92ZXJyaWRlICdyZW5kZXJUZW1wbGF0ZVNvdXJjZScsIHN1cHBseWluZyBhIGZ1bmN0aW9uIHdpdGggdGhpcyBzaWduYXR1cmU6XG4vL1xuLy8gICAgICAgIGZ1bmN0aW9uICh0ZW1wbGF0ZVNvdXJjZSwgYmluZGluZ0NvbnRleHQsIG9wdGlvbnMpIHtcbi8vICAgICAgICAgICAgLy8gLSB0ZW1wbGF0ZVNvdXJjZS50ZXh0KCkgaXMgdGhlIHRleHQgb2YgdGhlIHRlbXBsYXRlIHlvdSBzaG91bGQgcmVuZGVyXG4vLyAgICAgICAgICAgIC8vIC0gYmluZGluZ0NvbnRleHQuJGRhdGEgaXMgdGhlIGRhdGEgeW91IHNob3VsZCBwYXNzIGludG8gdGhlIHRlbXBsYXRlXG4vLyAgICAgICAgICAgIC8vICAgLSB5b3UgbWlnaHQgYWxzbyB3YW50IHRvIG1ha2UgYmluZGluZ0NvbnRleHQuJHBhcmVudCwgYmluZGluZ0NvbnRleHQuJHBhcmVudHMsXG4vLyAgICAgICAgICAgIC8vICAgICBhbmQgYmluZGluZ0NvbnRleHQuJHJvb3QgYXZhaWxhYmxlIGluIHRoZSB0ZW1wbGF0ZSB0b29cbi8vICAgICAgICAgICAgLy8gLSBvcHRpb25zIGdpdmVzIHlvdSBhY2Nlc3MgdG8gYW55IG90aGVyIHByb3BlcnRpZXMgc2V0IG9uIFwiZGF0YS1iaW5kOiB7IHRlbXBsYXRlOiBvcHRpb25zIH1cIlxuLy8gICAgICAgICAgICAvLyAtIHRlbXBsYXRlRG9jdW1lbnQgaXMgdGhlIGRvY3VtZW50IG9iamVjdCBvZiB0aGUgdGVtcGxhdGVcbi8vICAgICAgICAgICAgLy9cbi8vICAgICAgICAgICAgLy8gUmV0dXJuIHZhbHVlOiBhbiBhcnJheSBvZiBET00gbm9kZXNcbi8vICAgICAgICB9XG4vL1xuLy8gWzNdIE92ZXJyaWRlICdjcmVhdGVKYXZhU2NyaXB0RXZhbHVhdG9yQmxvY2snLCBzdXBwbHlpbmcgYSBmdW5jdGlvbiB3aXRoIHRoaXMgc2lnbmF0dXJlOlxuLy9cbi8vICAgICAgICBmdW5jdGlvbiAoc2NyaXB0KSB7XG4vLyAgICAgICAgICAgIC8vIFJldHVybiB2YWx1ZTogV2hhdGV2ZXIgc3ludGF4IG1lYW5zIFwiRXZhbHVhdGUgdGhlIEphdmFTY3JpcHQgc3RhdGVtZW50ICdzY3JpcHQnIGFuZCBvdXRwdXQgdGhlIHJlc3VsdFwiXG4vLyAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgRm9yIGV4YW1wbGUsIHRoZSBqcXVlcnkudG1wbCB0ZW1wbGF0ZSBlbmdpbmUgY29udmVydHMgJ3NvbWVTY3JpcHQnIHRvICckeyBzb21lU2NyaXB0IH0nXG4vLyAgICAgICAgfVxuLy9cbi8vICAgICBUaGlzIGlzIG9ubHkgbmVjZXNzYXJ5IGlmIHlvdSB3YW50IHRvIGFsbG93IGRhdGEtYmluZCBhdHRyaWJ1dGVzIHRvIHJlZmVyZW5jZSBhcmJpdHJhcnkgdGVtcGxhdGUgdmFyaWFibGVzLlxuLy8gICAgIElmIHlvdSBkb24ndCB3YW50IHRvIGFsbG93IHRoYXQsIHlvdSBjYW4gc2V0IHRoZSBwcm9wZXJ0eSAnYWxsb3dUZW1wbGF0ZVJld3JpdGluZycgdG8gZmFsc2UgKGxpa2Uga28ubmF0aXZlVGVtcGxhdGVFbmdpbmUgZG9lcylcbi8vICAgICBhbmQgdGhlbiB5b3UgZG9uJ3QgbmVlZCB0byBvdmVycmlkZSAnY3JlYXRlSmF2YVNjcmlwdEV2YWx1YXRvckJsb2NrJy5cblxua28udGVtcGxhdGVFbmdpbmUgPSBmdW5jdGlvbiAoKSB7IH07XG5cbmtvLnRlbXBsYXRlRW5naW5lLnByb3RvdHlwZVsncmVuZGVyVGVtcGxhdGVTb3VyY2UnXSA9IGZ1bmN0aW9uICh0ZW1wbGF0ZVNvdXJjZSwgYmluZGluZ0NvbnRleHQsIG9wdGlvbnMsIHRlbXBsYXRlRG9jdW1lbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJPdmVycmlkZSByZW5kZXJUZW1wbGF0ZVNvdXJjZVwiKTtcbn07XG5cbmtvLnRlbXBsYXRlRW5naW5lLnByb3RvdHlwZVsnY3JlYXRlSmF2YVNjcmlwdEV2YWx1YXRvckJsb2NrJ10gPSBmdW5jdGlvbiAoc2NyaXB0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiT3ZlcnJpZGUgY3JlYXRlSmF2YVNjcmlwdEV2YWx1YXRvckJsb2NrXCIpO1xufTtcblxua28udGVtcGxhdGVFbmdpbmUucHJvdG90eXBlWydtYWtlVGVtcGxhdGVTb3VyY2UnXSA9IGZ1bmN0aW9uKHRlbXBsYXRlLCB0ZW1wbGF0ZURvY3VtZW50KSB7XG4gICAgLy8gTmFtZWQgdGVtcGxhdGVcbiAgICBpZiAodHlwZW9mIHRlbXBsYXRlID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGVtcGxhdGVEb2N1bWVudCA9IHRlbXBsYXRlRG9jdW1lbnQgfHwgZG9jdW1lbnQ7XG4gICAgICAgIHZhciBlbGVtID0gdGVtcGxhdGVEb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZW1wbGF0ZSk7XG4gICAgICAgIGlmICghZWxlbSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIHRlbXBsYXRlIHdpdGggSUQgXCIgKyB0ZW1wbGF0ZSk7XG4gICAgICAgIHJldHVybiBuZXcga28udGVtcGxhdGVTb3VyY2VzLmRvbUVsZW1lbnQoZWxlbSk7XG4gICAgfSBlbHNlIGlmICgodGVtcGxhdGUubm9kZVR5cGUgPT0gMSkgfHwgKHRlbXBsYXRlLm5vZGVUeXBlID09IDgpKSB7XG4gICAgICAgIC8vIEFub255bW91cyB0ZW1wbGF0ZVxuICAgICAgICByZXR1cm4gbmV3IGtvLnRlbXBsYXRlU291cmNlcy5hbm9ueW1vdXNUZW1wbGF0ZSh0ZW1wbGF0ZSk7XG4gICAgfSBlbHNlXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gdGVtcGxhdGUgdHlwZTogXCIgKyB0ZW1wbGF0ZSk7XG59O1xuXG5rby50ZW1wbGF0ZUVuZ2luZS5wcm90b3R5cGVbJ3JlbmRlclRlbXBsYXRlJ10gPSBmdW5jdGlvbiAodGVtcGxhdGUsIGJpbmRpbmdDb250ZXh0LCBvcHRpb25zLCB0ZW1wbGF0ZURvY3VtZW50KSB7XG4gICAgdmFyIHRlbXBsYXRlU291cmNlID0gdGhpc1snbWFrZVRlbXBsYXRlU291cmNlJ10odGVtcGxhdGUsIHRlbXBsYXRlRG9jdW1lbnQpO1xuICAgIHJldHVybiB0aGlzWydyZW5kZXJUZW1wbGF0ZVNvdXJjZSddKHRlbXBsYXRlU291cmNlLCBiaW5kaW5nQ29udGV4dCwgb3B0aW9ucywgdGVtcGxhdGVEb2N1bWVudCk7XG59O1xuXG5rby50ZW1wbGF0ZUVuZ2luZS5wcm90b3R5cGVbJ2lzVGVtcGxhdGVSZXdyaXR0ZW4nXSA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgdGVtcGxhdGVEb2N1bWVudCkge1xuICAgIC8vIFNraXAgcmV3cml0aW5nIGlmIHJlcXVlc3RlZFxuICAgIGlmICh0aGlzWydhbGxvd1RlbXBsYXRlUmV3cml0aW5nJ10gPT09IGZhbHNlKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gdGhpc1snbWFrZVRlbXBsYXRlU291cmNlJ10odGVtcGxhdGUsIHRlbXBsYXRlRG9jdW1lbnQpWydkYXRhJ10oXCJpc1Jld3JpdHRlblwiKTtcbn07XG5cbmtvLnRlbXBsYXRlRW5naW5lLnByb3RvdHlwZVsncmV3cml0ZVRlbXBsYXRlJ10gPSBmdW5jdGlvbiAodGVtcGxhdGUsIHJld3JpdGVyQ2FsbGJhY2ssIHRlbXBsYXRlRG9jdW1lbnQpIHtcbiAgICB2YXIgdGVtcGxhdGVTb3VyY2UgPSB0aGlzWydtYWtlVGVtcGxhdGVTb3VyY2UnXSh0ZW1wbGF0ZSwgdGVtcGxhdGVEb2N1bWVudCk7XG4gICAgdmFyIHJld3JpdHRlbiA9IHJld3JpdGVyQ2FsbGJhY2sodGVtcGxhdGVTb3VyY2VbJ3RleHQnXSgpKTtcbiAgICB0ZW1wbGF0ZVNvdXJjZVsndGV4dCddKHJld3JpdHRlbik7XG4gICAgdGVtcGxhdGVTb3VyY2VbJ2RhdGEnXShcImlzUmV3cml0dGVuXCIsIHRydWUpO1xufTtcblxua28uZXhwb3J0U3ltYm9sKCd0ZW1wbGF0ZUVuZ2luZScsIGtvLnRlbXBsYXRlRW5naW5lKTtcblxua28udGVtcGxhdGVSZXdyaXRpbmcgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBtZW1vaXplRGF0YUJpbmRpbmdBdHRyaWJ1dGVTeW50YXhSZWdleCA9IC8oPChbYS16XStcXGQqKSg/OlxccysoPyFkYXRhLWJpbmRcXHMqPVxccyopW2EtejAtOVxcLV0rKD86PSg/OlxcXCJbXlxcXCJdKlxcXCJ8XFwnW15cXCddKlxcJ3xbXj5dKikpPykqXFxzKylkYXRhLWJpbmRcXHMqPVxccyooW1wiJ10pKFtcXHNcXFNdKj8pXFwzL2dpO1xuICAgIHZhciBtZW1vaXplVmlydHVhbENvbnRhaW5lckJpbmRpbmdTeW50YXhSZWdleCA9IC88IS0tXFxzKmtvXFxiXFxzKihbXFxzXFxTXSo/KVxccyotLT4vZztcblxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlRGF0YUJpbmRWYWx1ZXNGb3JSZXdyaXRpbmcoa2V5VmFsdWVBcnJheSkge1xuICAgICAgICB2YXIgYWxsVmFsaWRhdG9ycyA9IGtvLmV4cHJlc3Npb25SZXdyaXRpbmcuYmluZGluZ1Jld3JpdGVWYWxpZGF0b3JzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleVZhbHVlQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlWYWx1ZUFycmF5W2ldWydrZXknXTtcbiAgICAgICAgICAgIGlmIChhbGxWYWxpZGF0b3JzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsaWRhdG9yID0gYWxsVmFsaWRhdG9yc1trZXldO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0b3IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVFcnJvck1lc3NhZ2UgPSB2YWxpZGF0b3Ioa2V5VmFsdWVBcnJheVtpXVsndmFsdWUnXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NzaWJsZUVycm9yTWVzc2FnZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihwb3NzaWJsZUVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdmFsaWRhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgdGVtcGxhdGUgZW5naW5lIGRvZXMgbm90IHN1cHBvcnQgdGhlICdcIiArIGtleSArIFwiJyBiaW5kaW5nIHdpdGhpbiBpdHMgdGVtcGxhdGVzXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbnN0cnVjdE1lbW9pemVkVGFnUmVwbGFjZW1lbnQoZGF0YUJpbmRBdHRyaWJ1dGVWYWx1ZSwgdGFnVG9SZXRhaW4sIG5vZGVOYW1lLCB0ZW1wbGF0ZUVuZ2luZSkge1xuICAgICAgICB2YXIgZGF0YUJpbmRLZXlWYWx1ZUFycmF5ID0ga28uZXhwcmVzc2lvblJld3JpdGluZy5wYXJzZU9iamVjdExpdGVyYWwoZGF0YUJpbmRBdHRyaWJ1dGVWYWx1ZSk7XG4gICAgICAgIHZhbGlkYXRlRGF0YUJpbmRWYWx1ZXNGb3JSZXdyaXRpbmcoZGF0YUJpbmRLZXlWYWx1ZUFycmF5KTtcbiAgICAgICAgdmFyIHJld3JpdHRlbkRhdGFCaW5kQXR0cmlidXRlVmFsdWUgPSBrby5leHByZXNzaW9uUmV3cml0aW5nLnByZVByb2Nlc3NCaW5kaW5ncyhkYXRhQmluZEtleVZhbHVlQXJyYXksIHsndmFsdWVBY2Nlc3NvcnMnOnRydWV9KTtcblxuICAgICAgICAvLyBGb3Igbm8gb2J2aW91cyByZWFzb24sIE9wZXJhIGZhaWxzIHRvIGV2YWx1YXRlIHJld3JpdHRlbkRhdGFCaW5kQXR0cmlidXRlVmFsdWUgdW5sZXNzIGl0J3Mgd3JhcHBlZCBpbiBhbiBhZGRpdGlvbmFsXG4gICAgICAgIC8vIGFub255bW91cyBmdW5jdGlvbiwgZXZlbiB0aG91Z2ggT3BlcmEncyBidWlsdC1pbiBkZWJ1Z2dlciBjYW4gZXZhbHVhdGUgaXQgYW55d2F5LiBObyBvdGhlciBicm93c2VyIHJlcXVpcmVzIHRoaXNcbiAgICAgICAgLy8gZXh0cmEgaW5kaXJlY3Rpb24uXG4gICAgICAgIHZhciBhcHBseUJpbmRpbmdzVG9OZXh0U2libGluZ1NjcmlwdCA9XG4gICAgICAgICAgICBcImtvLl9fdHJfYW1idG5zKGZ1bmN0aW9uKCRjb250ZXh0LCRlbGVtZW50KXtyZXR1cm4oZnVuY3Rpb24oKXtyZXR1cm57IFwiICsgcmV3cml0dGVuRGF0YUJpbmRBdHRyaWJ1dGVWYWx1ZSArIFwiIH0gfSkoKX0sJ1wiICsgbm9kZU5hbWUudG9Mb3dlckNhc2UoKSArIFwiJylcIjtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlRW5naW5lWydjcmVhdGVKYXZhU2NyaXB0RXZhbHVhdG9yQmxvY2snXShhcHBseUJpbmRpbmdzVG9OZXh0U2libGluZ1NjcmlwdCkgKyB0YWdUb1JldGFpbjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBlbnN1cmVUZW1wbGF0ZUlzUmV3cml0dGVuOiBmdW5jdGlvbiAodGVtcGxhdGUsIHRlbXBsYXRlRW5naW5lLCB0ZW1wbGF0ZURvY3VtZW50KSB7XG4gICAgICAgICAgICBpZiAoIXRlbXBsYXRlRW5naW5lWydpc1RlbXBsYXRlUmV3cml0dGVuJ10odGVtcGxhdGUsIHRlbXBsYXRlRG9jdW1lbnQpKVxuICAgICAgICAgICAgICAgIHRlbXBsYXRlRW5naW5lWydyZXdyaXRlVGVtcGxhdGUnXSh0ZW1wbGF0ZSwgZnVuY3Rpb24gKGh0bWxTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtvLnRlbXBsYXRlUmV3cml0aW5nLm1lbW9pemVCaW5kaW5nQXR0cmlidXRlU3ludGF4KGh0bWxTdHJpbmcsIHRlbXBsYXRlRW5naW5lKTtcbiAgICAgICAgICAgICAgICB9LCB0ZW1wbGF0ZURvY3VtZW50KTtcbiAgICAgICAgfSxcblxuICAgICAgICBtZW1vaXplQmluZGluZ0F0dHJpYnV0ZVN5bnRheDogZnVuY3Rpb24gKGh0bWxTdHJpbmcsIHRlbXBsYXRlRW5naW5lKSB7XG4gICAgICAgICAgICByZXR1cm4gaHRtbFN0cmluZy5yZXBsYWNlKG1lbW9pemVEYXRhQmluZGluZ0F0dHJpYnV0ZVN5bnRheFJlZ2V4LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN0cnVjdE1lbW9pemVkVGFnUmVwbGFjZW1lbnQoLyogZGF0YUJpbmRBdHRyaWJ1dGVWYWx1ZTogKi8gYXJndW1lbnRzWzRdLCAvKiB0YWdUb1JldGFpbjogKi8gYXJndW1lbnRzWzFdLCAvKiBub2RlTmFtZTogKi8gYXJndW1lbnRzWzJdLCB0ZW1wbGF0ZUVuZ2luZSk7XG4gICAgICAgICAgICB9KS5yZXBsYWNlKG1lbW9pemVWaXJ0dWFsQ29udGFpbmVyQmluZGluZ1N5bnRheFJlZ2V4LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc3RydWN0TWVtb2l6ZWRUYWdSZXBsYWNlbWVudCgvKiBkYXRhQmluZEF0dHJpYnV0ZVZhbHVlOiAqLyBhcmd1bWVudHNbMV0sIC8qIHRhZ1RvUmV0YWluOiAqLyBcIjwhLS0ga28gLS0+XCIsIC8qIG5vZGVOYW1lOiAqLyBcIiNjb21tZW50XCIsIHRlbXBsYXRlRW5naW5lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGFwcGx5TWVtb2l6ZWRCaW5kaW5nc1RvTmV4dFNpYmxpbmc6IGZ1bmN0aW9uIChiaW5kaW5ncywgbm9kZU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBrby5tZW1vaXphdGlvbi5tZW1vaXplKGZ1bmN0aW9uIChkb21Ob2RlLCBiaW5kaW5nQ29udGV4dCkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlVG9CaW5kID0gZG9tTm9kZS5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICBpZiAobm9kZVRvQmluZCAmJiBub2RlVG9CaW5kLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGtvLmFwcGx5QmluZGluZ0FjY2Vzc29yc1RvTm9kZShub2RlVG9CaW5kLCBiaW5kaW5ncywgYmluZGluZ0NvbnRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcblxuXG4vLyBFeHBvcnRlZCBvbmx5IGJlY2F1c2UgaXQgaGFzIHRvIGJlIHJlZmVyZW5jZWQgYnkgc3RyaW5nIGxvb2t1cCBmcm9tIHdpdGhpbiByZXdyaXR0ZW4gdGVtcGxhdGVcbmtvLmV4cG9ydFN5bWJvbCgnX190cl9hbWJ0bnMnLCBrby50ZW1wbGF0ZVJld3JpdGluZy5hcHBseU1lbW9pemVkQmluZGluZ3NUb05leHRTaWJsaW5nKTtcbihmdW5jdGlvbigpIHtcbiAgICAvLyBBIHRlbXBsYXRlIHNvdXJjZSByZXByZXNlbnRzIGEgcmVhZC93cml0ZSB3YXkgb2YgYWNjZXNzaW5nIGEgdGVtcGxhdGUuIFRoaXMgaXMgdG8gZWxpbWluYXRlIHRoZSBuZWVkIGZvciB0ZW1wbGF0ZSBsb2FkaW5nL3NhdmluZ1xuICAgIC8vIGxvZ2ljIHRvIGJlIGR1cGxpY2F0ZWQgaW4gZXZlcnkgdGVtcGxhdGUgZW5naW5lIChhbmQgbWVhbnMgdGhleSBjYW4gYWxsIHdvcmsgd2l0aCBhbm9ueW1vdXMgdGVtcGxhdGVzLCBldGMuKVxuICAgIC8vXG4gICAgLy8gVHdvIGFyZSBwcm92aWRlZCBieSBkZWZhdWx0OlxuICAgIC8vICAxLiBrby50ZW1wbGF0ZVNvdXJjZXMuZG9tRWxlbWVudCAgICAgICAtIHJlYWRzL3dyaXRlcyB0aGUgdGV4dCBjb250ZW50IG9mIGFuIGFyYml0cmFyeSBET00gZWxlbWVudFxuICAgIC8vICAyLiBrby50ZW1wbGF0ZVNvdXJjZXMuYW5vbnltb3VzRWxlbWVudCAtIHVzZXMga28udXRpbHMuZG9tRGF0YSB0byByZWFkL3dyaXRlIHRleHQgKmFzc29jaWF0ZWQqIHdpdGggdGhlIERPTSBlbGVtZW50LCBidXRcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRob3V0IHJlYWRpbmcvd3JpdGluZyB0aGUgYWN0dWFsIGVsZW1lbnQgdGV4dCBjb250ZW50LCBzaW5jZSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCB0aGUgcmVuZGVyZWQgdGVtcGxhdGUgb3V0cHV0LlxuICAgIC8vIFlvdSBjYW4gaW1wbGVtZW50IHlvdXIgb3duIHRlbXBsYXRlIHNvdXJjZSBpZiB5b3Ugd2FudCB0byBmZXRjaC9zdG9yZSB0ZW1wbGF0ZXMgc29tZXdoZXJlIG90aGVyIHRoYW4gaW4gRE9NIGVsZW1lbnRzLlxuICAgIC8vIFRlbXBsYXRlIHNvdXJjZXMgbmVlZCB0byBoYXZlIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zOlxuICAgIC8vICAgdGV4dCgpIFx0XHRcdC0gcmV0dXJucyB0aGUgdGVtcGxhdGUgdGV4dCBmcm9tIHlvdXIgc3RvcmFnZSBsb2NhdGlvblxuICAgIC8vICAgdGV4dCh2YWx1ZSlcdFx0LSB3cml0ZXMgdGhlIHN1cHBsaWVkIHRlbXBsYXRlIHRleHQgdG8geW91ciBzdG9yYWdlIGxvY2F0aW9uXG4gICAgLy8gICBkYXRhKGtleSlcdFx0XHQtIHJlYWRzIHZhbHVlcyBzdG9yZWQgdXNpbmcgZGF0YShrZXksIHZhbHVlKSAtIHNlZSBiZWxvd1xuICAgIC8vICAgZGF0YShrZXksIHZhbHVlKVx0LSBhc3NvY2lhdGVzIFwidmFsdWVcIiB3aXRoIHRoaXMgdGVtcGxhdGUgYW5kIHRoZSBrZXkgXCJrZXlcIi4gSXMgdXNlZCB0byBzdG9yZSBpbmZvcm1hdGlvbiBsaWtlIFwiaXNSZXdyaXR0ZW5cIi5cbiAgICAvL1xuICAgIC8vIE9wdGlvbmFsbHksIHRlbXBsYXRlIHNvdXJjZXMgY2FuIGFsc28gaGF2ZSB0aGUgZm9sbG93aW5nIGZ1bmN0aW9uczpcbiAgICAvLyAgIG5vZGVzKCkgICAgICAgICAgICAtIHJldHVybnMgYSBET00gZWxlbWVudCBjb250YWluaW5nIHRoZSBub2RlcyBvZiB0aGlzIHRlbXBsYXRlLCB3aGVyZSBhdmFpbGFibGVcbiAgICAvLyAgIG5vZGVzKHZhbHVlKSAgICAgICAtIHdyaXRlcyB0aGUgZ2l2ZW4gRE9NIGVsZW1lbnQgdG8geW91ciBzdG9yYWdlIGxvY2F0aW9uXG4gICAgLy8gSWYgYSBET00gZWxlbWVudCBpcyBhdmFpbGFibGUgZm9yIGEgZ2l2ZW4gdGVtcGxhdGUgc291cmNlLCB0ZW1wbGF0ZSBlbmdpbmVzIGFyZSBlbmNvdXJhZ2VkIHRvIHVzZSBpdCBpbiBwcmVmZXJlbmNlIG92ZXIgdGV4dCgpXG4gICAgLy8gZm9yIGltcHJvdmVkIHNwZWVkLiBIb3dldmVyLCBhbGwgdGVtcGxhdGVTb3VyY2VzIG11c3Qgc3VwcGx5IHRleHQoKSBldmVuIGlmIHRoZXkgZG9uJ3Qgc3VwcGx5IG5vZGVzKCkuXG4gICAgLy9cbiAgICAvLyBPbmNlIHlvdSd2ZSBpbXBsZW1lbnRlZCBhIHRlbXBsYXRlU291cmNlLCBtYWtlIHlvdXIgdGVtcGxhdGUgZW5naW5lIHVzZSBpdCBieSBzdWJjbGFzc2luZyB3aGF0ZXZlciB0ZW1wbGF0ZSBlbmdpbmUgeW91IHdlcmVcbiAgICAvLyB1c2luZyBhbmQgb3ZlcnJpZGluZyBcIm1ha2VUZW1wbGF0ZVNvdXJjZVwiIHRvIHJldHVybiBhbiBpbnN0YW5jZSBvZiB5b3VyIGN1c3RvbSB0ZW1wbGF0ZSBzb3VyY2UuXG5cbiAgICBrby50ZW1wbGF0ZVNvdXJjZXMgPSB7fTtcblxuICAgIC8vIC0tLS0ga28udGVtcGxhdGVTb3VyY2VzLmRvbUVsZW1lbnQgLS0tLS1cblxuICAgIC8vIHRlbXBsYXRlIHR5cGVzXG4gICAgdmFyIHRlbXBsYXRlU2NyaXB0ID0gMSxcbiAgICAgICAgdGVtcGxhdGVUZXh0QXJlYSA9IDIsXG4gICAgICAgIHRlbXBsYXRlVGVtcGxhdGUgPSAzLFxuICAgICAgICB0ZW1wbGF0ZUVsZW1lbnQgPSA0O1xuXG4gICAga28udGVtcGxhdGVTb3VyY2VzLmRvbUVsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuZG9tRWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciB0YWdOYW1lTG93ZXIgPSBrby51dGlscy50YWdOYW1lTG93ZXIoZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlVHlwZSA9XG4gICAgICAgICAgICAgICAgdGFnTmFtZUxvd2VyID09PSBcInNjcmlwdFwiID8gdGVtcGxhdGVTY3JpcHQgOlxuICAgICAgICAgICAgICAgIHRhZ05hbWVMb3dlciA9PT0gXCJ0ZXh0YXJlYVwiID8gdGVtcGxhdGVUZXh0QXJlYSA6XG4gICAgICAgICAgICAgICAgICAgIC8vIEZvciBicm93c2VycyB3aXRoIHByb3BlciA8dGVtcGxhdGU+IGVsZW1lbnQgc3VwcG9ydCwgd2hlcmUgdGhlIC5jb250ZW50IHByb3BlcnR5IGdpdmVzIGEgZG9jdW1lbnQgZnJhZ21lbnRcbiAgICAgICAgICAgICAgICB0YWdOYW1lTG93ZXIgPT0gXCJ0ZW1wbGF0ZVwiICYmIGVsZW1lbnQuY29udGVudCAmJiBlbGVtZW50LmNvbnRlbnQubm9kZVR5cGUgPT09IDExID8gdGVtcGxhdGVUZW1wbGF0ZSA6XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVFbGVtZW50O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAga28udGVtcGxhdGVTb3VyY2VzLmRvbUVsZW1lbnQucHJvdG90eXBlWyd0ZXh0J10gPSBmdW5jdGlvbigvKiB2YWx1ZVRvV3JpdGUgKi8pIHtcbiAgICAgICAgdmFyIGVsZW1Db250ZW50c1Byb3BlcnR5ID0gdGhpcy50ZW1wbGF0ZVR5cGUgPT09IHRlbXBsYXRlU2NyaXB0ID8gXCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy50ZW1wbGF0ZVR5cGUgPT09IHRlbXBsYXRlVGV4dEFyZWEgPyBcInZhbHVlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJpbm5lckhUTUxcIjtcblxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb21FbGVtZW50W2VsZW1Db250ZW50c1Byb3BlcnR5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZVRvV3JpdGUgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICBpZiAoZWxlbUNvbnRlbnRzUHJvcGVydHkgPT09IFwiaW5uZXJIVE1MXCIpXG4gICAgICAgICAgICAgICAga28udXRpbHMuc2V0SHRtbCh0aGlzLmRvbUVsZW1lbnQsIHZhbHVlVG9Xcml0ZSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5kb21FbGVtZW50W2VsZW1Db250ZW50c1Byb3BlcnR5XSA9IHZhbHVlVG9Xcml0ZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZGF0YURvbURhdGFQcmVmaXggPSBrby51dGlscy5kb21EYXRhLm5leHRLZXkoKSArIFwiX1wiO1xuICAgIGtvLnRlbXBsYXRlU291cmNlcy5kb21FbGVtZW50LnByb3RvdHlwZVsnZGF0YSddID0gZnVuY3Rpb24oa2V5IC8qLCB2YWx1ZVRvV3JpdGUgKi8pIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBrby51dGlscy5kb21EYXRhLmdldCh0aGlzLmRvbUVsZW1lbnQsIGRhdGFEb21EYXRhUHJlZml4ICsga2V5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGtvLnV0aWxzLmRvbURhdGEuc2V0KHRoaXMuZG9tRWxlbWVudCwgZGF0YURvbURhdGFQcmVmaXggKyBrZXksIGFyZ3VtZW50c1sxXSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHRlbXBsYXRlc0RvbURhdGFLZXkgPSBrby51dGlscy5kb21EYXRhLm5leHRLZXkoKTtcbiAgICBmdW5jdGlvbiBnZXRUZW1wbGF0ZURvbURhdGEoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4ga28udXRpbHMuZG9tRGF0YS5nZXQoZWxlbWVudCwgdGVtcGxhdGVzRG9tRGF0YUtleSkgfHwge307XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldFRlbXBsYXRlRG9tRGF0YShlbGVtZW50LCBkYXRhKSB7XG4gICAgICAgIGtvLnV0aWxzLmRvbURhdGEuc2V0KGVsZW1lbnQsIHRlbXBsYXRlc0RvbURhdGFLZXksIGRhdGEpO1xuICAgIH1cblxuICAgIGtvLnRlbXBsYXRlU291cmNlcy5kb21FbGVtZW50LnByb3RvdHlwZVsnbm9kZXMnXSA9IGZ1bmN0aW9uKC8qIHZhbHVlVG9Xcml0ZSAqLykge1xuICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZG9tRWxlbWVudDtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgdmFyIHRlbXBsYXRlRGF0YSA9IGdldFRlbXBsYXRlRG9tRGF0YShlbGVtZW50KSxcbiAgICAgICAgICAgICAgICBjb250YWluZXJEYXRhID0gdGVtcGxhdGVEYXRhLmNvbnRhaW5lckRhdGE7XG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyRGF0YSB8fCAoXG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZVR5cGUgPT09IHRlbXBsYXRlVGVtcGxhdGUgPyBlbGVtZW50LmNvbnRlbnQgOlxuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVUeXBlID09PSB0ZW1wbGF0ZUVsZW1lbnQgPyBlbGVtZW50IDpcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHZhbHVlVG9Xcml0ZSA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIHNldFRlbXBsYXRlRG9tRGF0YShlbGVtZW50LCB7Y29udGFpbmVyRGF0YTogdmFsdWVUb1dyaXRlfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gLS0tLSBrby50ZW1wbGF0ZVNvdXJjZXMuYW5vbnltb3VzVGVtcGxhdGUgLS0tLS1cbiAgICAvLyBBbm9ueW1vdXMgdGVtcGxhdGVzIGFyZSBub3JtYWxseSBzYXZlZC9yZXRyaWV2ZWQgYXMgRE9NIG5vZGVzIHRocm91Z2ggXCJub2Rlc1wiLlxuICAgIC8vIEZvciBjb21wYXRpYmlsaXR5LCB5b3UgY2FuIGFsc28gcmVhZCBcInRleHRcIjsgaXQgd2lsbCBiZSBzZXJpYWxpemVkIGZyb20gdGhlIG5vZGVzIG9uIGRlbWFuZC5cbiAgICAvLyBXcml0aW5nIHRvIFwidGV4dFwiIGlzIHN0aWxsIHN1cHBvcnRlZCwgYnV0IHRoZW4gdGhlIHRlbXBsYXRlIGRhdGEgd2lsbCBub3QgYmUgYXZhaWxhYmxlIGFzIERPTSBub2Rlcy5cblxuICAgIGtvLnRlbXBsYXRlU291cmNlcy5hbm9ueW1vdXNUZW1wbGF0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5kb21FbGVtZW50ID0gZWxlbWVudDtcbiAgICB9XG4gICAga28udGVtcGxhdGVTb3VyY2VzLmFub255bW91c1RlbXBsYXRlLnByb3RvdHlwZSA9IG5ldyBrby50ZW1wbGF0ZVNvdXJjZXMuZG9tRWxlbWVudCgpO1xuICAgIGtvLnRlbXBsYXRlU291cmNlcy5hbm9ueW1vdXNUZW1wbGF0ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBrby50ZW1wbGF0ZVNvdXJjZXMuYW5vbnltb3VzVGVtcGxhdGU7XG4gICAga28udGVtcGxhdGVTb3VyY2VzLmFub255bW91c1RlbXBsYXRlLnByb3RvdHlwZVsndGV4dCddID0gZnVuY3Rpb24oLyogdmFsdWVUb1dyaXRlICovKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZURhdGEgPSBnZXRUZW1wbGF0ZURvbURhdGEodGhpcy5kb21FbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0ZW1wbGF0ZURhdGEudGV4dERhdGEgPT09IHVuZGVmaW5lZCAmJiB0ZW1wbGF0ZURhdGEuY29udGFpbmVyRGF0YSlcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZURhdGEudGV4dERhdGEgPSB0ZW1wbGF0ZURhdGEuY29udGFpbmVyRGF0YS5pbm5lckhUTUw7XG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGVEYXRhLnRleHREYXRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHZhbHVlVG9Xcml0ZSA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIHNldFRlbXBsYXRlRG9tRGF0YSh0aGlzLmRvbUVsZW1lbnQsIHt0ZXh0RGF0YTogdmFsdWVUb1dyaXRlfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAga28uZXhwb3J0U3ltYm9sKCd0ZW1wbGF0ZVNvdXJjZXMnLCBrby50ZW1wbGF0ZVNvdXJjZXMpO1xuICAgIGtvLmV4cG9ydFN5bWJvbCgndGVtcGxhdGVTb3VyY2VzLmRvbUVsZW1lbnQnLCBrby50ZW1wbGF0ZVNvdXJjZXMuZG9tRWxlbWVudCk7XG4gICAga28uZXhwb3J0U3ltYm9sKCd0ZW1wbGF0ZVNvdXJjZXMuYW5vbnltb3VzVGVtcGxhdGUnLCBrby50ZW1wbGF0ZVNvdXJjZXMuYW5vbnltb3VzVGVtcGxhdGUpO1xufSkoKTtcbihmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF90ZW1wbGF0ZUVuZ2luZTtcbiAgICBrby5zZXRUZW1wbGF0ZUVuZ2luZSA9IGZ1bmN0aW9uICh0ZW1wbGF0ZUVuZ2luZSkge1xuICAgICAgICBpZiAoKHRlbXBsYXRlRW5naW5lICE9IHVuZGVmaW5lZCkgJiYgISh0ZW1wbGF0ZUVuZ2luZSBpbnN0YW5jZW9mIGtvLnRlbXBsYXRlRW5naW5lKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRlbXBsYXRlRW5naW5lIG11c3QgaW5oZXJpdCBmcm9tIGtvLnRlbXBsYXRlRW5naW5lXCIpO1xuICAgICAgICBfdGVtcGxhdGVFbmdpbmUgPSB0ZW1wbGF0ZUVuZ2luZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnZva2VGb3JFYWNoTm9kZUluQ29udGludW91c1JhbmdlKGZpcnN0Tm9kZSwgbGFzdE5vZGUsIGFjdGlvbikge1xuICAgICAgICB2YXIgbm9kZSwgbmV4dEluUXVldWUgPSBmaXJzdE5vZGUsIGZpcnN0T3V0T2ZSYW5nZU5vZGUgPSBrby52aXJ0dWFsRWxlbWVudHMubmV4dFNpYmxpbmcobGFzdE5vZGUpO1xuICAgICAgICB3aGlsZSAobmV4dEluUXVldWUgJiYgKChub2RlID0gbmV4dEluUXVldWUpICE9PSBmaXJzdE91dE9mUmFuZ2VOb2RlKSkge1xuICAgICAgICAgICAgbmV4dEluUXVldWUgPSBrby52aXJ0dWFsRWxlbWVudHMubmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgICAgICBhY3Rpb24obm9kZSwgbmV4dEluUXVldWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGVCaW5kaW5nc09uQ29udGludW91c05vZGVBcnJheShjb250aW51b3VzTm9kZUFycmF5LCBiaW5kaW5nQ29udGV4dCkge1xuICAgICAgICAvLyBUbyBiZSB1c2VkIG9uIGFueSBub2RlcyB0aGF0IGhhdmUgYmVlbiByZW5kZXJlZCBieSBhIHRlbXBsYXRlIGFuZCBoYXZlIGJlZW4gaW5zZXJ0ZWQgaW50byBzb21lIHBhcmVudCBlbGVtZW50XG4gICAgICAgIC8vIFdhbGtzIHRocm91Z2ggY29udGludW91c05vZGVBcnJheSAod2hpY2ggKm11c3QqIGJlIGNvbnRpbnVvdXMsIGkuZS4sIGFuIHVuaW50ZXJydXB0ZWQgc2VxdWVuY2Ugb2Ygc2libGluZyBub2RlcywgYmVjYXVzZVxuICAgICAgICAvLyB0aGUgYWxnb3JpdGhtIGZvciB3YWxraW5nIHRoZW0gcmVsaWVzIG9uIHRoaXMpLCBhbmQgZm9yIGVhY2ggdG9wLWxldmVsIGl0ZW0gaW4gdGhlIHZpcnR1YWwtZWxlbWVudCBzZW5zZSxcbiAgICAgICAgLy8gKDEpIERvZXMgYSByZWd1bGFyIFwiYXBwbHlCaW5kaW5nc1wiIHRvIGFzc29jaWF0ZSBiaW5kaW5nQ29udGV4dCB3aXRoIHRoaXMgbm9kZSBhbmQgdG8gYWN0aXZhdGUgYW55IG5vbi1tZW1vaXplZCBiaW5kaW5nc1xuICAgICAgICAvLyAoMikgVW5tZW1vaXplcyBhbnkgbWVtb3MgaW4gdGhlIERPTSBzdWJ0cmVlIChlLmcuLCB0byBhY3RpdmF0ZSBiaW5kaW5ncyB0aGF0IGhhZCBiZWVuIG1lbW9pemVkIGR1cmluZyB0ZW1wbGF0ZSByZXdyaXRpbmcpXG5cbiAgICAgICAgaWYgKGNvbnRpbnVvdXNOb2RlQXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3ROb2RlID0gY29udGludW91c05vZGVBcnJheVswXSxcbiAgICAgICAgICAgICAgICBsYXN0Tm9kZSA9IGNvbnRpbnVvdXNOb2RlQXJyYXlbY29udGludW91c05vZGVBcnJheS5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlID0gZmlyc3ROb2RlLnBhcmVudE5vZGUsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXIgPSBrby5iaW5kaW5nUHJvdmlkZXJbJ2luc3RhbmNlJ10sXG4gICAgICAgICAgICAgICAgcHJlcHJvY2Vzc05vZGUgPSBwcm92aWRlclsncHJlcHJvY2Vzc05vZGUnXTtcblxuICAgICAgICAgICAgaWYgKHByZXByb2Nlc3NOb2RlKSB7XG4gICAgICAgICAgICAgICAgaW52b2tlRm9yRWFjaE5vZGVJbkNvbnRpbnVvdXNSYW5nZShmaXJzdE5vZGUsIGxhc3ROb2RlLCBmdW5jdGlvbihub2RlLCBuZXh0Tm9kZUluUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVQcmV2aW91c1NpYmxpbmcgPSBub2RlLnByZXZpb3VzU2libGluZztcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld05vZGVzID0gcHJlcHJvY2Vzc05vZGUuY2FsbChwcm92aWRlciwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdOb2Rlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUgPT09IGZpcnN0Tm9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdE5vZGUgPSBuZXdOb2Rlc1swXSB8fCBuZXh0Tm9kZUluUmFuZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSA9PT0gbGFzdE5vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE5vZGUgPSBuZXdOb2Rlc1tuZXdOb2Rlcy5sZW5ndGggLSAxXSB8fCBub2RlUHJldmlvdXNTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCZWNhdXNlIHByZXByb2Nlc3NOb2RlIGNhbiBjaGFuZ2UgdGhlIG5vZGVzLCBpbmNsdWRpbmcgdGhlIGZpcnN0IGFuZCBsYXN0IG5vZGVzLCB1cGRhdGUgY29udGludW91c05vZGVBcnJheSB0byBtYXRjaC5cbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRoZSBmdWxsIHNldCwgaW5jbHVkaW5nIGlubmVyIG5vZGVzLCBiZWNhdXNlIHRoZSB1bm1lbW9pemUgc3RlcCBtaWdodCByZW1vdmUgdGhlIGZpcnN0IG5vZGUgKGFuZCBzbyB0aGUgcmVhbFxuICAgICAgICAgICAgICAgIC8vIGZpcnN0IG5vZGUgbmVlZHMgdG8gYmUgaW4gdGhlIGFycmF5KS5cbiAgICAgICAgICAgICAgICBjb250aW51b3VzTm9kZUFycmF5Lmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKCFmaXJzdE5vZGUpIHsgLy8gcHJlcHJvY2Vzc05vZGUgbWlnaHQgaGF2ZSByZW1vdmVkIGFsbCB0aGUgbm9kZXMsIGluIHdoaWNoIGNhc2UgdGhlcmUncyBub3RoaW5nIGxlZnQgdG8gZG9cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmlyc3ROb2RlID09PSBsYXN0Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51b3VzTm9kZUFycmF5LnB1c2goZmlyc3ROb2RlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51b3VzTm9kZUFycmF5LnB1c2goZmlyc3ROb2RlLCBsYXN0Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGtvLnV0aWxzLmZpeFVwQ29udGludW91c05vZGVBcnJheShjb250aW51b3VzTm9kZUFycmF5LCBwYXJlbnROb2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE5lZWQgdG8gYXBwbHlCaW5kaW5ncyAqYmVmb3JlKiB1bm1lbW96aWF0aW9uLCBiZWNhdXNlIHVubWVtb2l6YXRpb24gbWlnaHQgaW50cm9kdWNlIGV4dHJhIG5vZGVzICh0aGF0IHdlIGRvbid0IHdhbnQgdG8gcmUtYmluZClcbiAgICAgICAgICAgIC8vIHdoZXJlYXMgYSByZWd1bGFyIGFwcGx5QmluZGluZ3Mgd29uJ3QgaW50cm9kdWNlIG5ldyBtZW1vaXplZCBub2Rlc1xuICAgICAgICAgICAgaW52b2tlRm9yRWFjaE5vZGVJbkNvbnRpbnVvdXNSYW5nZShmaXJzdE5vZGUsIGxhc3ROb2RlLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEgfHwgbm9kZS5ub2RlVHlwZSA9PT0gOClcbiAgICAgICAgICAgICAgICAgICAga28uYXBwbHlCaW5kaW5ncyhiaW5kaW5nQ29udGV4dCwgbm9kZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGludm9rZUZvckVhY2hOb2RlSW5Db250aW51b3VzUmFuZ2UoZmlyc3ROb2RlLCBsYXN0Tm9kZSwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAxIHx8IG5vZGUubm9kZVR5cGUgPT09IDgpXG4gICAgICAgICAgICAgICAgICAgIGtvLm1lbW9pemF0aW9uLnVubWVtb2l6ZURvbU5vZGVBbmREZXNjZW5kYW50cyhub2RlLCBbYmluZGluZ0NvbnRleHRdKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgYW55IGNoYW5nZXMgZG9uZSBieSBhcHBseUJpbmRpbmdzIG9yIHVubWVtb2l6ZSBhcmUgcmVmbGVjdGVkIGluIHRoZSBhcnJheVxuICAgICAgICAgICAga28udXRpbHMuZml4VXBDb250aW51b3VzTm9kZUFycmF5KGNvbnRpbnVvdXNOb2RlQXJyYXksIHBhcmVudE5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Rmlyc3ROb2RlRnJvbVBvc3NpYmxlQXJyYXkobm9kZU9yTm9kZUFycmF5KSB7XG4gICAgICAgIHJldHVybiBub2RlT3JOb2RlQXJyYXkubm9kZVR5cGUgPyBub2RlT3JOb2RlQXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG5vZGVPck5vZGVBcnJheS5sZW5ndGggPiAwID8gbm9kZU9yTm9kZUFycmF5WzBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4ZWN1dGVUZW1wbGF0ZSh0YXJnZXROb2RlT3JOb2RlQXJyYXksIHJlbmRlck1vZGUsIHRlbXBsYXRlLCBiaW5kaW5nQ29udGV4dCwgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIGZpcnN0VGFyZ2V0Tm9kZSA9IHRhcmdldE5vZGVPck5vZGVBcnJheSAmJiBnZXRGaXJzdE5vZGVGcm9tUG9zc2libGVBcnJheSh0YXJnZXROb2RlT3JOb2RlQXJyYXkpO1xuICAgICAgICB2YXIgdGVtcGxhdGVEb2N1bWVudCA9IChmaXJzdFRhcmdldE5vZGUgfHwgdGVtcGxhdGUgfHwge30pLm93bmVyRG9jdW1lbnQ7XG4gICAgICAgIHZhciB0ZW1wbGF0ZUVuZ2luZVRvVXNlID0gKG9wdGlvbnNbJ3RlbXBsYXRlRW5naW5lJ10gfHwgX3RlbXBsYXRlRW5naW5lKTtcbiAgICAgICAga28udGVtcGxhdGVSZXdyaXRpbmcuZW5zdXJlVGVtcGxhdGVJc1Jld3JpdHRlbih0ZW1wbGF0ZSwgdGVtcGxhdGVFbmdpbmVUb1VzZSwgdGVtcGxhdGVEb2N1bWVudCk7XG4gICAgICAgIHZhciByZW5kZXJlZE5vZGVzQXJyYXkgPSB0ZW1wbGF0ZUVuZ2luZVRvVXNlWydyZW5kZXJUZW1wbGF0ZSddKHRlbXBsYXRlLCBiaW5kaW5nQ29udGV4dCwgb3B0aW9ucywgdGVtcGxhdGVEb2N1bWVudCk7XG5cbiAgICAgICAgLy8gTG9vc2VseSBjaGVjayByZXN1bHQgaXMgYW4gYXJyYXkgb2YgRE9NIG5vZGVzXG4gICAgICAgIGlmICgodHlwZW9mIHJlbmRlcmVkTm9kZXNBcnJheS5sZW5ndGggIT0gXCJudW1iZXJcIikgfHwgKHJlbmRlcmVkTm9kZXNBcnJheS5sZW5ndGggPiAwICYmIHR5cGVvZiByZW5kZXJlZE5vZGVzQXJyYXlbMF0ubm9kZVR5cGUgIT0gXCJudW1iZXJcIikpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUZW1wbGF0ZSBlbmdpbmUgbXVzdCByZXR1cm4gYW4gYXJyYXkgb2YgRE9NIG5vZGVzXCIpO1xuXG4gICAgICAgIHZhciBoYXZlQWRkZWROb2Rlc1RvUGFyZW50ID0gZmFsc2U7XG4gICAgICAgIHN3aXRjaCAocmVuZGVyTW9kZSkge1xuICAgICAgICAgICAgY2FzZSBcInJlcGxhY2VDaGlsZHJlblwiOlxuICAgICAgICAgICAgICAgIGtvLnZpcnR1YWxFbGVtZW50cy5zZXREb21Ob2RlQ2hpbGRyZW4odGFyZ2V0Tm9kZU9yTm9kZUFycmF5LCByZW5kZXJlZE5vZGVzQXJyYXkpO1xuICAgICAgICAgICAgICAgIGhhdmVBZGRlZE5vZGVzVG9QYXJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJlcGxhY2VOb2RlXCI6XG4gICAgICAgICAgICAgICAga28udXRpbHMucmVwbGFjZURvbU5vZGVzKHRhcmdldE5vZGVPck5vZGVBcnJheSwgcmVuZGVyZWROb2Rlc0FycmF5KTtcbiAgICAgICAgICAgICAgICBoYXZlQWRkZWROb2Rlc1RvUGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJpZ25vcmVUYXJnZXROb2RlXCI6IGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHJlbmRlck1vZGU6IFwiICsgcmVuZGVyTW9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGF2ZUFkZGVkTm9kZXNUb1BhcmVudCkge1xuICAgICAgICAgICAgYWN0aXZhdGVCaW5kaW5nc09uQ29udGludW91c05vZGVBcnJheShyZW5kZXJlZE5vZGVzQXJyYXksIGJpbmRpbmdDb250ZXh0KTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zWydhZnRlclJlbmRlciddKVxuICAgICAgICAgICAgICAgIGtvLmRlcGVuZGVuY3lEZXRlY3Rpb24uaWdub3JlKG9wdGlvbnNbJ2FmdGVyUmVuZGVyJ10sIG51bGwsIFtyZW5kZXJlZE5vZGVzQXJyYXksIGJpbmRpbmdDb250ZXh0WyckZGF0YSddXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVuZGVyZWROb2Rlc0FycmF5O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdmVUZW1wbGF0ZU5hbWUodGVtcGxhdGUsIGRhdGEsIGNvbnRleHQpIHtcbiAgICAgICAgLy8gVGhlIHRlbXBsYXRlIGNhbiBiZSBzcGVjaWZpZWQgYXM6XG4gICAgICAgIGlmIChrby5pc09ic2VydmFibGUodGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAvLyAxLiBBbiBvYnNlcnZhYmxlLCB3aXRoIHN0cmluZyB2YWx1ZVxuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAvLyAyLiBBIGZ1bmN0aW9uIG9mIChkYXRhLCBjb250ZXh0KSByZXR1cm5pbmcgYSBzdHJpbmdcbiAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZShkYXRhLCBjb250ZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIDMuIEEgc3RyaW5nXG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBrby5yZW5kZXJUZW1wbGF0ZSA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgZGF0YU9yQmluZGluZ0NvbnRleHQsIG9wdGlvbnMsIHRhcmdldE5vZGVPck5vZGVBcnJheSwgcmVuZGVyTW9kZSkge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgaWYgKChvcHRpb25zWyd0ZW1wbGF0ZUVuZ2luZSddIHx8IF90ZW1wbGF0ZUVuZ2luZSkgPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2V0IGEgdGVtcGxhdGUgZW5naW5lIGJlZm9yZSBjYWxsaW5nIHJlbmRlclRlbXBsYXRlXCIpO1xuICAgICAgICByZW5kZXJNb2RlID0gcmVuZGVyTW9kZSB8fCBcInJlcGxhY2VDaGlsZHJlblwiO1xuXG4gICAgICAgIGlmICh0YXJnZXROb2RlT3JOb2RlQXJyYXkpIHtcbiAgICAgICAgICAgIHZhciBmaXJzdFRhcmdldE5vZGUgPSBnZXRGaXJzdE5vZGVGcm9tUG9zc2libGVBcnJheSh0YXJnZXROb2RlT3JOb2RlQXJyYXkpO1xuXG4gICAgICAgICAgICB2YXIgd2hlblRvRGlzcG9zZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICghZmlyc3RUYXJnZXROb2RlKSB8fCAha28udXRpbHMuZG9tTm9kZUlzQXR0YWNoZWRUb0RvY3VtZW50KGZpcnN0VGFyZ2V0Tm9kZSk7IH07IC8vIFBhc3NpdmUgZGlzcG9zYWwgKG9uIG5leHQgZXZhbHVhdGlvbilcbiAgICAgICAgICAgIHZhciBhY3RpdmVseURpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZCA9IChmaXJzdFRhcmdldE5vZGUgJiYgcmVuZGVyTW9kZSA9PSBcInJlcGxhY2VOb2RlXCIpID8gZmlyc3RUYXJnZXROb2RlLnBhcmVudE5vZGUgOiBmaXJzdFRhcmdldE5vZGU7XG5cbiAgICAgICAgICAgIHJldHVybiBrby5kZXBlbmRlbnRPYnNlcnZhYmxlKCAvLyBTbyB0aGUgRE9NIGlzIGF1dG9tYXRpY2FsbHkgdXBkYXRlZCB3aGVuIGFueSBkZXBlbmRlbmN5IGNoYW5nZXNcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB3ZSd2ZSBnb3QgYSBwcm9wZXIgYmluZGluZyBjb250ZXh0IHRvIHdvcmsgd2l0aFxuICAgICAgICAgICAgICAgICAgICB2YXIgYmluZGluZ0NvbnRleHQgPSAoZGF0YU9yQmluZGluZ0NvbnRleHQgJiYgKGRhdGFPckJpbmRpbmdDb250ZXh0IGluc3RhbmNlb2Yga28uYmluZGluZ0NvbnRleHQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBkYXRhT3JCaW5kaW5nQ29udGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXcga28uYmluZGluZ0NvbnRleHQoa28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShkYXRhT3JCaW5kaW5nQ29udGV4dCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZU5hbWUgPSByZXNvbHZlVGVtcGxhdGVOYW1lKHRlbXBsYXRlLCBiaW5kaW5nQ29udGV4dFsnJGRhdGEnXSwgYmluZGluZ0NvbnRleHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWROb2Rlc0FycmF5ID0gZXhlY3V0ZVRlbXBsYXRlKHRhcmdldE5vZGVPck5vZGVBcnJheSwgcmVuZGVyTW9kZSwgdGVtcGxhdGVOYW1lLCBiaW5kaW5nQ29udGV4dCwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbmRlck1vZGUgPT0gXCJyZXBsYWNlTm9kZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROb2RlT3JOb2RlQXJyYXkgPSByZW5kZXJlZE5vZGVzQXJyYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFRhcmdldE5vZGUgPSBnZXRGaXJzdE5vZGVGcm9tUG9zc2libGVBcnJheSh0YXJnZXROb2RlT3JOb2RlQXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIHsgZGlzcG9zZVdoZW46IHdoZW5Ub0Rpc3Bvc2UsIGRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZDogYWN0aXZlbHlEaXNwb3NlV2hlbk5vZGVJc1JlbW92ZWQgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFdlIGRvbid0IHlldCBoYXZlIGEgRE9NIG5vZGUgdG8gZXZhbHVhdGUsIHNvIHVzZSBhIG1lbW8gYW5kIHJlbmRlciB0aGUgdGVtcGxhdGUgbGF0ZXIgd2hlbiB0aGVyZSBpcyBhIERPTSBub2RlXG4gICAgICAgICAgICByZXR1cm4ga28ubWVtb2l6YXRpb24ubWVtb2l6ZShmdW5jdGlvbiAoZG9tTm9kZSkge1xuICAgICAgICAgICAgICAgIGtvLnJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhT3JCaW5kaW5nQ29udGV4dCwgb3B0aW9ucywgZG9tTm9kZSwgXCJyZXBsYWNlTm9kZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGtvLnJlbmRlclRlbXBsYXRlRm9yRWFjaCA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgYXJyYXlPck9ic2VydmFibGVBcnJheSwgb3B0aW9ucywgdGFyZ2V0Tm9kZSwgcGFyZW50QmluZGluZ0NvbnRleHQpIHtcbiAgICAgICAgLy8gU2luY2Ugc2V0RG9tTm9kZUNoaWxkcmVuRnJvbUFycmF5TWFwcGluZyBhbHdheXMgY2FsbHMgZXhlY3V0ZVRlbXBsYXRlRm9yQXJyYXlJdGVtIGFuZCB0aGVuXG4gICAgICAgIC8vIGFjdGl2YXRlQmluZGluZ3NDYWxsYmFjayBmb3IgYWRkZWQgaXRlbXMsIHdlIGNhbiBzdG9yZSB0aGUgYmluZGluZyBjb250ZXh0IGluIHRoZSBmb3JtZXIgdG8gdXNlIGluIHRoZSBsYXR0ZXIuXG4gICAgICAgIHZhciBhcnJheUl0ZW1Db250ZXh0O1xuXG4gICAgICAgIC8vIFRoaXMgd2lsbCBiZSBjYWxsZWQgYnkgc2V0RG9tTm9kZUNoaWxkcmVuRnJvbUFycmF5TWFwcGluZyB0byBnZXQgdGhlIG5vZGVzIHRvIGFkZCB0byB0YXJnZXROb2RlXG4gICAgICAgIHZhciBleGVjdXRlVGVtcGxhdGVGb3JBcnJheUl0ZW0gPSBmdW5jdGlvbiAoYXJyYXlWYWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIC8vIFN1cHBvcnQgc2VsZWN0aW5nIHRlbXBsYXRlIGFzIGEgZnVuY3Rpb24gb2YgdGhlIGRhdGEgYmVpbmcgcmVuZGVyZWRcbiAgICAgICAgICAgIGFycmF5SXRlbUNvbnRleHQgPSBwYXJlbnRCaW5kaW5nQ29udGV4dFsnY3JlYXRlQ2hpbGRDb250ZXh0J10oYXJyYXlWYWx1ZSwgb3B0aW9uc1snYXMnXSwgZnVuY3Rpb24oY29udGV4dCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRbJyRpbmRleCddID0gaW5kZXg7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlTmFtZSA9IHJlc29sdmVUZW1wbGF0ZU5hbWUodGVtcGxhdGUsIGFycmF5VmFsdWUsIGFycmF5SXRlbUNvbnRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVUZW1wbGF0ZShudWxsLCBcImlnbm9yZVRhcmdldE5vZGVcIiwgdGVtcGxhdGVOYW1lLCBhcnJheUl0ZW1Db250ZXh0LCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoaXMgd2lsbCBiZSBjYWxsZWQgd2hlbmV2ZXIgc2V0RG9tTm9kZUNoaWxkcmVuRnJvbUFycmF5TWFwcGluZyBoYXMgYWRkZWQgbm9kZXMgdG8gdGFyZ2V0Tm9kZVxuICAgICAgICB2YXIgYWN0aXZhdGVCaW5kaW5nc0NhbGxiYWNrID0gZnVuY3Rpb24oYXJyYXlWYWx1ZSwgYWRkZWROb2Rlc0FycmF5LCBpbmRleCkge1xuICAgICAgICAgICAgYWN0aXZhdGVCaW5kaW5nc09uQ29udGludW91c05vZGVBcnJheShhZGRlZE5vZGVzQXJyYXksIGFycmF5SXRlbUNvbnRleHQpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnNbJ2FmdGVyUmVuZGVyJ10pXG4gICAgICAgICAgICAgICAgb3B0aW9uc1snYWZ0ZXJSZW5kZXInXShhZGRlZE5vZGVzQXJyYXksIGFycmF5VmFsdWUpO1xuXG4gICAgICAgICAgICAvLyByZWxlYXNlIHRoZSBcImNhY2hlXCIgdmFyaWFibGUsIHNvIHRoYXQgaXQgY2FuIGJlIGNvbGxlY3RlZCBieVxuICAgICAgICAgICAgLy8gdGhlIEdDIHdoZW4gaXRzIHZhbHVlIGlzbid0IHVzZWQgZnJvbSB3aXRoaW4gdGhlIGJpbmRpbmdzIGFueW1vcmUuXG4gICAgICAgICAgICBhcnJheUl0ZW1Db250ZXh0ID0gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ga28uZGVwZW5kZW50T2JzZXJ2YWJsZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdW53cmFwcGVkQXJyYXkgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGFycmF5T3JPYnNlcnZhYmxlQXJyYXkpIHx8IFtdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1bndyYXBwZWRBcnJheS5sZW5ndGggPT0gXCJ1bmRlZmluZWRcIikgLy8gQ29lcmNlIHNpbmdsZSB2YWx1ZSBpbnRvIGFycmF5XG4gICAgICAgICAgICAgICAgdW53cmFwcGVkQXJyYXkgPSBbdW53cmFwcGVkQXJyYXldO1xuXG4gICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IGFueSBlbnRyaWVzIG1hcmtlZCBhcyBkZXN0cm95ZWRcbiAgICAgICAgICAgIHZhciBmaWx0ZXJlZEFycmF5ID0ga28udXRpbHMuYXJyYXlGaWx0ZXIodW53cmFwcGVkQXJyYXksIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9uc1snaW5jbHVkZURlc3Ryb3llZCddIHx8IGl0ZW0gPT09IHVuZGVmaW5lZCB8fCBpdGVtID09PSBudWxsIHx8ICFrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGl0ZW1bJ19kZXN0cm95J10pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIENhbGwgc2V0RG9tTm9kZUNoaWxkcmVuRnJvbUFycmF5TWFwcGluZywgaWdub3JpbmcgYW55IG9ic2VydmFibGVzIHVud3JhcHBlZCB3aXRoaW4gKG1vc3QgbGlrZWx5IGZyb20gYSBjYWxsYmFjayBmdW5jdGlvbikuXG4gICAgICAgICAgICAvLyBJZiB0aGUgYXJyYXkgaXRlbXMgYXJlIG9ic2VydmFibGVzLCB0aG91Z2gsIHRoZXkgd2lsbCBiZSB1bndyYXBwZWQgaW4gZXhlY3V0ZVRlbXBsYXRlRm9yQXJyYXlJdGVtIGFuZCBtYW5hZ2VkIHdpdGhpbiBzZXREb21Ob2RlQ2hpbGRyZW5Gcm9tQXJyYXlNYXBwaW5nLlxuICAgICAgICAgICAga28uZGVwZW5kZW5jeURldGVjdGlvbi5pZ25vcmUoa28udXRpbHMuc2V0RG9tTm9kZUNoaWxkcmVuRnJvbUFycmF5TWFwcGluZywgbnVsbCwgW3RhcmdldE5vZGUsIGZpbHRlcmVkQXJyYXksIGV4ZWN1dGVUZW1wbGF0ZUZvckFycmF5SXRlbSwgb3B0aW9ucywgYWN0aXZhdGVCaW5kaW5nc0NhbGxiYWNrXSk7XG5cbiAgICAgICAgfSwgbnVsbCwgeyBkaXNwb3NlV2hlbk5vZGVJc1JlbW92ZWQ6IHRhcmdldE5vZGUgfSk7XG4gICAgfTtcblxuICAgIHZhciB0ZW1wbGF0ZUNvbXB1dGVkRG9tRGF0YUtleSA9IGtvLnV0aWxzLmRvbURhdGEubmV4dEtleSgpO1xuICAgIGZ1bmN0aW9uIGRpc3Bvc2VPbGRDb21wdXRlZEFuZFN0b3JlTmV3T25lKGVsZW1lbnQsIG5ld0NvbXB1dGVkKSB7XG4gICAgICAgIHZhciBvbGRDb21wdXRlZCA9IGtvLnV0aWxzLmRvbURhdGEuZ2V0KGVsZW1lbnQsIHRlbXBsYXRlQ29tcHV0ZWREb21EYXRhS2V5KTtcbiAgICAgICAgaWYgKG9sZENvbXB1dGVkICYmICh0eXBlb2Yob2xkQ29tcHV0ZWQuZGlzcG9zZSkgPT0gJ2Z1bmN0aW9uJykpXG4gICAgICAgICAgICBvbGRDb21wdXRlZC5kaXNwb3NlKCk7XG4gICAgICAgIGtvLnV0aWxzLmRvbURhdGEuc2V0KGVsZW1lbnQsIHRlbXBsYXRlQ29tcHV0ZWREb21EYXRhS2V5LCAobmV3Q29tcHV0ZWQgJiYgbmV3Q29tcHV0ZWQuaXNBY3RpdmUoKSkgPyBuZXdDb21wdXRlZCA6IHVuZGVmaW5lZCk7XG4gICAgfVxuXG4gICAga28uYmluZGluZ0hhbmRsZXJzWyd0ZW1wbGF0ZSddID0ge1xuICAgICAgICAnaW5pdCc6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpIHtcbiAgICAgICAgICAgIC8vIFN1cHBvcnQgYW5vbnltb3VzIHRlbXBsYXRlc1xuICAgICAgICAgICAgdmFyIGJpbmRpbmdWYWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYmluZGluZ1ZhbHVlID09IFwic3RyaW5nXCIgfHwgYmluZGluZ1ZhbHVlWyduYW1lJ10pIHtcbiAgICAgICAgICAgICAgICAvLyBJdCdzIGEgbmFtZWQgdGVtcGxhdGUgLSBjbGVhciB0aGUgZWxlbWVudFxuICAgICAgICAgICAgICAgIGtvLnZpcnR1YWxFbGVtZW50cy5lbXB0eU5vZGUoZWxlbWVudCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCdub2RlcycgaW4gYmluZGluZ1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UndmUgYmVlbiBnaXZlbiBhbiBhcnJheSBvZiBET00gbm9kZXMuIFNhdmUgdGhlbSBhcyB0aGUgdGVtcGxhdGUgc291cmNlLlxuICAgICAgICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIGtub3duIHVzZSBjYXNlIGZvciB0aGUgbm9kZSBhcnJheSBiZWluZyBhbiBvYnNlcnZhYmxlIGFycmF5IChpZiB0aGUgb3V0cHV0XG4gICAgICAgICAgICAgICAgLy8gdmFyaWVzLCBwdXQgdGhhdCBiZWhhdmlvciAqaW50byogeW91ciB0ZW1wbGF0ZSAtIHRoYXQncyB3aGF0IHRlbXBsYXRlcyBhcmUgZm9yKSwgYW5kXG4gICAgICAgICAgICAgICAgLy8gdGhlIGltcGxlbWVudGF0aW9uIHdvdWxkIGJlIGEgbWVzcywgc28gYXNzZXJ0IHRoYXQgaXQncyBub3Qgb2JzZXJ2YWJsZS5cbiAgICAgICAgICAgICAgICB2YXIgbm9kZXMgPSBiaW5kaW5nVmFsdWVbJ25vZGVzJ10gfHwgW107XG4gICAgICAgICAgICAgICAgaWYgKGtvLmlzT2JzZXJ2YWJsZShub2RlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJub2Rlc1wiIG9wdGlvbiBtdXN0IGJlIGEgcGxhaW4sIG5vbi1vYnNlcnZhYmxlIGFycmF5LicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0ga28udXRpbHMubW92ZUNsZWFuZWROb2Rlc1RvQ29udGFpbmVyRWxlbWVudChub2Rlcyk7IC8vIFRoaXMgYWxzbyByZW1vdmVzIHRoZSBub2RlcyBmcm9tIHRoZWlyIGN1cnJlbnQgcGFyZW50XG4gICAgICAgICAgICAgICAgbmV3IGtvLnRlbXBsYXRlU291cmNlcy5hbm9ueW1vdXNUZW1wbGF0ZShlbGVtZW50KVsnbm9kZXMnXShjb250YWluZXIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJdCdzIGFuIGFub255bW91cyB0ZW1wbGF0ZSAtIHN0b3JlIHRoZSBlbGVtZW50IGNvbnRlbnRzLCB0aGVuIGNsZWFyIHRoZSBlbGVtZW50XG4gICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlTm9kZXMgPSBrby52aXJ0dWFsRWxlbWVudHMuY2hpbGROb2RlcyhlbGVtZW50KSxcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyID0ga28udXRpbHMubW92ZUNsZWFuZWROb2Rlc1RvQ29udGFpbmVyRWxlbWVudCh0ZW1wbGF0ZU5vZGVzKTsgLy8gVGhpcyBhbHNvIHJlbW92ZXMgdGhlIG5vZGVzIGZyb20gdGhlaXIgY3VycmVudCBwYXJlbnRcbiAgICAgICAgICAgICAgICBuZXcga28udGVtcGxhdGVTb3VyY2VzLmFub255bW91c1RlbXBsYXRlKGVsZW1lbnQpWydub2RlcyddKGNvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyAnY29udHJvbHNEZXNjZW5kYW50QmluZGluZ3MnOiB0cnVlIH07XG4gICAgICAgIH0sXG4gICAgICAgICd1cGRhdGUnOiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZhbHVlQWNjZXNzb3IoKSxcbiAgICAgICAgICAgICAgICBkYXRhVmFsdWUsXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWUpLFxuICAgICAgICAgICAgICAgIHNob3VsZERpc3BsYXkgPSB0cnVlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlQ29tcHV0ZWQgPSBudWxsLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlTmFtZTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlTmFtZSA9IG9wdGlvbnNbJ25hbWUnXTtcblxuICAgICAgICAgICAgICAgIC8vIFN1cHBvcnQgXCJpZlwiL1wiaWZub3RcIiBjb25kaXRpb25zXG4gICAgICAgICAgICAgICAgaWYgKCdpZicgaW4gb3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkRGlzcGxheSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUob3B0aW9uc1snaWYnXSk7XG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZERpc3BsYXkgJiYgJ2lmbm90JyBpbiBvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBzaG91bGREaXNwbGF5ID0gIWtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUob3B0aW9uc1snaWZub3QnXSk7XG5cbiAgICAgICAgICAgICAgICBkYXRhVmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKG9wdGlvbnNbJ2RhdGEnXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgnZm9yZWFjaCcgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIC8vIFJlbmRlciBvbmNlIGZvciBlYWNoIGRhdGEgcG9pbnQgKHRyZWF0aW5nIGRhdGEgc2V0IGFzIGVtcHR5IGlmIHNob3VsZERpc3BsYXk9PWZhbHNlKVxuICAgICAgICAgICAgICAgIHZhciBkYXRhQXJyYXkgPSAoc2hvdWxkRGlzcGxheSAmJiBvcHRpb25zWydmb3JlYWNoJ10pIHx8IFtdO1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlQ29tcHV0ZWQgPSBrby5yZW5kZXJUZW1wbGF0ZUZvckVhY2godGVtcGxhdGVOYW1lIHx8IGVsZW1lbnQsIGRhdGFBcnJheSwgb3B0aW9ucywgZWxlbWVudCwgYmluZGluZ0NvbnRleHQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghc2hvdWxkRGlzcGxheSkge1xuICAgICAgICAgICAgICAgIGtvLnZpcnR1YWxFbGVtZW50cy5lbXB0eU5vZGUoZWxlbWVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFJlbmRlciBvbmNlIGZvciB0aGlzIHNpbmdsZSBkYXRhIHBvaW50IChvciB1c2UgdGhlIHZpZXdNb2RlbCBpZiBubyBkYXRhIHdhcyBwcm92aWRlZClcbiAgICAgICAgICAgICAgICB2YXIgaW5uZXJCaW5kaW5nQ29udGV4dCA9ICgnZGF0YScgaW4gb3B0aW9ucykgP1xuICAgICAgICAgICAgICAgICAgICBiaW5kaW5nQ29udGV4dFsnY3JlYXRlQ2hpbGRDb250ZXh0J10oZGF0YVZhbHVlLCBvcHRpb25zWydhcyddKSA6ICAvLyBHaXZlbiBhbiBleHBsaXRpdCAnZGF0YScgdmFsdWUsIHdlIGNyZWF0ZSBhIGNoaWxkIGJpbmRpbmcgY29udGV4dCBmb3IgaXRcbiAgICAgICAgICAgICAgICAgICAgYmluZGluZ0NvbnRleHQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHaXZlbiBubyBleHBsaWNpdCAnZGF0YScgdmFsdWUsIHdlIHJldGFpbiB0aGUgc2FtZSBiaW5kaW5nIGNvbnRleHRcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUNvbXB1dGVkID0ga28ucmVuZGVyVGVtcGxhdGUodGVtcGxhdGVOYW1lIHx8IGVsZW1lbnQsIGlubmVyQmluZGluZ0NvbnRleHQsIG9wdGlvbnMsIGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJdCBvbmx5IG1ha2VzIHNlbnNlIHRvIGhhdmUgYSBzaW5nbGUgdGVtcGxhdGUgY29tcHV0ZWQgcGVyIGVsZW1lbnQgKG90aGVyd2lzZSB3aGljaCBvbmUgc2hvdWxkIGhhdmUgaXRzIG91dHB1dCBkaXNwbGF5ZWQ/KVxuICAgICAgICAgICAgZGlzcG9zZU9sZENvbXB1dGVkQW5kU3RvcmVOZXdPbmUoZWxlbWVudCwgdGVtcGxhdGVDb21wdXRlZCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gQW5vbnltb3VzIHRlbXBsYXRlcyBjYW4ndCBiZSByZXdyaXR0ZW4uIEdpdmUgYSBuaWNlIGVycm9yIG1lc3NhZ2UgaWYgeW91IHRyeSB0byBkbyBpdC5cbiAgICBrby5leHByZXNzaW9uUmV3cml0aW5nLmJpbmRpbmdSZXdyaXRlVmFsaWRhdG9yc1sndGVtcGxhdGUnXSA9IGZ1bmN0aW9uKGJpbmRpbmdWYWx1ZSkge1xuICAgICAgICB2YXIgcGFyc2VkQmluZGluZ1ZhbHVlID0ga28uZXhwcmVzc2lvblJld3JpdGluZy5wYXJzZU9iamVjdExpdGVyYWwoYmluZGluZ1ZhbHVlKTtcblxuICAgICAgICBpZiAoKHBhcnNlZEJpbmRpbmdWYWx1ZS5sZW5ndGggPT0gMSkgJiYgcGFyc2VkQmluZGluZ1ZhbHVlWzBdWyd1bmtub3duJ10pXG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gSXQgbG9va3MgbGlrZSBhIHN0cmluZyBsaXRlcmFsLCBub3QgYW4gb2JqZWN0IGxpdGVyYWwsIHNvIHRyZWF0IGl0IGFzIGEgbmFtZWQgdGVtcGxhdGUgKHdoaWNoIGlzIGFsbG93ZWQgZm9yIHJld3JpdGluZylcblxuICAgICAgICBpZiAoa28uZXhwcmVzc2lvblJld3JpdGluZy5rZXlWYWx1ZUFycmF5Q29udGFpbnNLZXkocGFyc2VkQmluZGluZ1ZhbHVlLCBcIm5hbWVcIikpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gTmFtZWQgdGVtcGxhdGVzIGNhbiBiZSByZXdyaXR0ZW4sIHNvIHJldHVybiBcIm5vIGVycm9yXCJcbiAgICAgICAgcmV0dXJuIFwiVGhpcyB0ZW1wbGF0ZSBlbmdpbmUgZG9lcyBub3Qgc3VwcG9ydCBhbm9ueW1vdXMgdGVtcGxhdGVzIG5lc3RlZCB3aXRoaW4gaXRzIHRlbXBsYXRlc1wiO1xuICAgIH07XG5cbiAgICBrby52aXJ0dWFsRWxlbWVudHMuYWxsb3dlZEJpbmRpbmdzWyd0ZW1wbGF0ZSddID0gdHJ1ZTtcbn0pKCk7XG5cbmtvLmV4cG9ydFN5bWJvbCgnc2V0VGVtcGxhdGVFbmdpbmUnLCBrby5zZXRUZW1wbGF0ZUVuZ2luZSk7XG5rby5leHBvcnRTeW1ib2woJ3JlbmRlclRlbXBsYXRlJywga28ucmVuZGVyVGVtcGxhdGUpO1xuLy8gR28gdGhyb3VnaCB0aGUgaXRlbXMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgYW5kIGRlbGV0ZWQgYW5kIHRyeSB0byBmaW5kIG1hdGNoZXMgYmV0d2VlbiB0aGVtLlxua28udXRpbHMuZmluZE1vdmVzSW5BcnJheUNvbXBhcmlzb24gPSBmdW5jdGlvbiAobGVmdCwgcmlnaHQsIGxpbWl0RmFpbGVkQ29tcGFyZXMpIHtcbiAgICBpZiAobGVmdC5sZW5ndGggJiYgcmlnaHQubGVuZ3RoKSB7XG4gICAgICAgIHZhciBmYWlsZWRDb21wYXJlcywgbCwgciwgbGVmdEl0ZW0sIHJpZ2h0SXRlbTtcbiAgICAgICAgZm9yIChmYWlsZWRDb21wYXJlcyA9IGwgPSAwOyAoIWxpbWl0RmFpbGVkQ29tcGFyZXMgfHwgZmFpbGVkQ29tcGFyZXMgPCBsaW1pdEZhaWxlZENvbXBhcmVzKSAmJiAobGVmdEl0ZW0gPSBsZWZ0W2xdKTsgKytsKSB7XG4gICAgICAgICAgICBmb3IgKHIgPSAwOyByaWdodEl0ZW0gPSByaWdodFtyXTsgKytyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxlZnRJdGVtWyd2YWx1ZSddID09PSByaWdodEl0ZW1bJ3ZhbHVlJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdEl0ZW1bJ21vdmVkJ10gPSByaWdodEl0ZW1bJ2luZGV4J107XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0SXRlbVsnbW92ZWQnXSA9IGxlZnRJdGVtWydpbmRleCddO1xuICAgICAgICAgICAgICAgICAgICByaWdodC5zcGxpY2UociwgMSk7ICAgICAgICAgLy8gVGhpcyBpdGVtIGlzIG1hcmtlZCBhcyBtb3ZlZDsgc28gcmVtb3ZlIGl0IGZyb20gcmlnaHQgbGlzdFxuICAgICAgICAgICAgICAgICAgICBmYWlsZWRDb21wYXJlcyA9IHIgPSAwOyAgICAgLy8gUmVzZXQgZmFpbGVkIGNvbXBhcmVzIGNvdW50IGJlY2F1c2Ugd2UncmUgY2hlY2tpbmcgZm9yIGNvbnNlY3V0aXZlIGZhaWx1cmVzXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZhaWxlZENvbXBhcmVzICs9IHI7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5rby51dGlscy5jb21wYXJlQXJyYXlzID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc3RhdHVzTm90SW5PbGQgPSAnYWRkZWQnLCBzdGF0dXNOb3RJbk5ldyA9ICdkZWxldGVkJztcblxuICAgIC8vIFNpbXBsZSBjYWxjdWxhdGlvbiBiYXNlZCBvbiBMZXZlbnNodGVpbiBkaXN0YW5jZS5cbiAgICBmdW5jdGlvbiBjb21wYXJlQXJyYXlzKG9sZEFycmF5LCBuZXdBcnJheSwgb3B0aW9ucykge1xuICAgICAgICAvLyBGb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgaWYgdGhlIHRoaXJkIGFyZyBpcyBhY3R1YWxseSBhIGJvb2wsIGludGVycHJldFxuICAgICAgICAvLyBpdCBhcyB0aGUgb2xkIHBhcmFtZXRlciAnZG9udExpbWl0TW92ZXMnLiBOZXdlciBjb2RlIHNob3VsZCB1c2UgeyBkb250TGltaXRNb3ZlczogdHJ1ZSB9LlxuICAgICAgICBvcHRpb25zID0gKHR5cGVvZiBvcHRpb25zID09PSAnYm9vbGVhbicpID8geyAnZG9udExpbWl0TW92ZXMnOiBvcHRpb25zIH0gOiAob3B0aW9ucyB8fCB7fSk7XG4gICAgICAgIG9sZEFycmF5ID0gb2xkQXJyYXkgfHwgW107XG4gICAgICAgIG5ld0FycmF5ID0gbmV3QXJyYXkgfHwgW107XG5cbiAgICAgICAgaWYgKG9sZEFycmF5Lmxlbmd0aCA8IG5ld0FycmF5Lmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBjb21wYXJlU21hbGxBcnJheVRvQmlnQXJyYXkob2xkQXJyYXksIG5ld0FycmF5LCBzdGF0dXNOb3RJbk9sZCwgc3RhdHVzTm90SW5OZXcsIG9wdGlvbnMpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gY29tcGFyZVNtYWxsQXJyYXlUb0JpZ0FycmF5KG5ld0FycmF5LCBvbGRBcnJheSwgc3RhdHVzTm90SW5OZXcsIHN0YXR1c05vdEluT2xkLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wYXJlU21hbGxBcnJheVRvQmlnQXJyYXkoc21sQXJyYXksIGJpZ0FycmF5LCBzdGF0dXNOb3RJblNtbCwgc3RhdHVzTm90SW5CaWcsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIG15TWluID0gTWF0aC5taW4sXG4gICAgICAgICAgICBteU1heCA9IE1hdGgubWF4LFxuICAgICAgICAgICAgZWRpdERpc3RhbmNlTWF0cml4ID0gW10sXG4gICAgICAgICAgICBzbWxJbmRleCwgc21sSW5kZXhNYXggPSBzbWxBcnJheS5sZW5ndGgsXG4gICAgICAgICAgICBiaWdJbmRleCwgYmlnSW5kZXhNYXggPSBiaWdBcnJheS5sZW5ndGgsXG4gICAgICAgICAgICBjb21wYXJlUmFuZ2UgPSAoYmlnSW5kZXhNYXggLSBzbWxJbmRleE1heCkgfHwgMSxcbiAgICAgICAgICAgIG1heERpc3RhbmNlID0gc21sSW5kZXhNYXggKyBiaWdJbmRleE1heCArIDEsXG4gICAgICAgICAgICB0aGlzUm93LCBsYXN0Um93LFxuICAgICAgICAgICAgYmlnSW5kZXhNYXhGb3JSb3csIGJpZ0luZGV4TWluRm9yUm93O1xuXG4gICAgICAgIGZvciAoc21sSW5kZXggPSAwOyBzbWxJbmRleCA8PSBzbWxJbmRleE1heDsgc21sSW5kZXgrKykge1xuICAgICAgICAgICAgbGFzdFJvdyA9IHRoaXNSb3c7XG4gICAgICAgICAgICBlZGl0RGlzdGFuY2VNYXRyaXgucHVzaCh0aGlzUm93ID0gW10pO1xuICAgICAgICAgICAgYmlnSW5kZXhNYXhGb3JSb3cgPSBteU1pbihiaWdJbmRleE1heCwgc21sSW5kZXggKyBjb21wYXJlUmFuZ2UpO1xuICAgICAgICAgICAgYmlnSW5kZXhNaW5Gb3JSb3cgPSBteU1heCgwLCBzbWxJbmRleCAtIDEpO1xuICAgICAgICAgICAgZm9yIChiaWdJbmRleCA9IGJpZ0luZGV4TWluRm9yUm93OyBiaWdJbmRleCA8PSBiaWdJbmRleE1heEZvclJvdzsgYmlnSW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGlmICghYmlnSW5kZXgpXG4gICAgICAgICAgICAgICAgICAgIHRoaXNSb3dbYmlnSW5kZXhdID0gc21sSW5kZXggKyAxO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzbWxJbmRleCkgIC8vIFRvcCByb3cgLSB0cmFuc2Zvcm0gZW1wdHkgYXJyYXkgaW50byBuZXcgYXJyYXkgdmlhIGFkZGl0aW9uc1xuICAgICAgICAgICAgICAgICAgICB0aGlzUm93W2JpZ0luZGV4XSA9IGJpZ0luZGV4ICsgMTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzbWxBcnJheVtzbWxJbmRleCAtIDFdID09PSBiaWdBcnJheVtiaWdJbmRleCAtIDFdKVxuICAgICAgICAgICAgICAgICAgICB0aGlzUm93W2JpZ0luZGV4XSA9IGxhc3RSb3dbYmlnSW5kZXggLSAxXTsgICAgICAgICAgICAgICAgICAvLyBjb3B5IHZhbHVlIChubyBlZGl0KVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbm9ydGhEaXN0YW5jZSA9IGxhc3RSb3dbYmlnSW5kZXhdIHx8IG1heERpc3RhbmNlOyAgICAgICAvLyBub3QgaW4gYmlnIChkZWxldGlvbilcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdlc3REaXN0YW5jZSA9IHRoaXNSb3dbYmlnSW5kZXggLSAxXSB8fCBtYXhEaXN0YW5jZTsgICAgLy8gbm90IGluIHNtYWxsIChhZGRpdGlvbilcbiAgICAgICAgICAgICAgICAgICAgdGhpc1Jvd1tiaWdJbmRleF0gPSBteU1pbihub3J0aERpc3RhbmNlLCB3ZXN0RGlzdGFuY2UpICsgMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZWRpdFNjcmlwdCA9IFtdLCBtZU1pbnVzT25lLCBub3RJblNtbCA9IFtdLCBub3RJbkJpZyA9IFtdO1xuICAgICAgICBmb3IgKHNtbEluZGV4ID0gc21sSW5kZXhNYXgsIGJpZ0luZGV4ID0gYmlnSW5kZXhNYXg7IHNtbEluZGV4IHx8IGJpZ0luZGV4Oykge1xuICAgICAgICAgICAgbWVNaW51c09uZSA9IGVkaXREaXN0YW5jZU1hdHJpeFtzbWxJbmRleF1bYmlnSW5kZXhdIC0gMTtcbiAgICAgICAgICAgIGlmIChiaWdJbmRleCAmJiBtZU1pbnVzT25lID09PSBlZGl0RGlzdGFuY2VNYXRyaXhbc21sSW5kZXhdW2JpZ0luZGV4LTFdKSB7XG4gICAgICAgICAgICAgICAgbm90SW5TbWwucHVzaChlZGl0U2NyaXB0W2VkaXRTY3JpcHQubGVuZ3RoXSA9IHsgICAgIC8vIGFkZGVkXG4gICAgICAgICAgICAgICAgICAgICdzdGF0dXMnOiBzdGF0dXNOb3RJblNtbCxcbiAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlJzogYmlnQXJyYXlbLS1iaWdJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICdpbmRleCc6IGJpZ0luZGV4IH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzbWxJbmRleCAmJiBtZU1pbnVzT25lID09PSBlZGl0RGlzdGFuY2VNYXRyaXhbc21sSW5kZXggLSAxXVtiaWdJbmRleF0pIHtcbiAgICAgICAgICAgICAgICBub3RJbkJpZy5wdXNoKGVkaXRTY3JpcHRbZWRpdFNjcmlwdC5sZW5ndGhdID0geyAgICAgLy8gZGVsZXRlZFxuICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJzogc3RhdHVzTm90SW5CaWcsXG4gICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IHNtbEFycmF5Wy0tc21sSW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICAnaW5kZXgnOiBzbWxJbmRleCB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLS1iaWdJbmRleDtcbiAgICAgICAgICAgICAgICAtLXNtbEluZGV4O1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9uc1snc3BhcnNlJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdFNjcmlwdC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdGF0dXMnOiBcInJldGFpbmVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBiaWdBcnJheVtiaWdJbmRleF0gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IGEgbGltaXQgb24gdGhlIG51bWJlciBvZiBjb25zZWN1dGl2ZSBub24tbWF0Y2hpbmcgY29tcGFyaXNvbnM7IGhhdmluZyBpdCBhIG11bHRpcGxlIG9mXG4gICAgICAgIC8vIHNtbEluZGV4TWF4IGtlZXBzIHRoZSB0aW1lIGNvbXBsZXhpdHkgb2YgdGhpcyBhbGdvcml0aG0gbGluZWFyLlxuICAgICAgICBrby51dGlscy5maW5kTW92ZXNJbkFycmF5Q29tcGFyaXNvbihub3RJbkJpZywgbm90SW5TbWwsICFvcHRpb25zWydkb250TGltaXRNb3ZlcyddICYmIHNtbEluZGV4TWF4ICogMTApO1xuXG4gICAgICAgIHJldHVybiBlZGl0U2NyaXB0LnJldmVyc2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29tcGFyZUFycmF5cztcbn0pKCk7XG5cbmtvLmV4cG9ydFN5bWJvbCgndXRpbHMuY29tcGFyZUFycmF5cycsIGtvLnV0aWxzLmNvbXBhcmVBcnJheXMpO1xuKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBPYmplY3RpdmU6XG4gICAgLy8gKiBHaXZlbiBhbiBpbnB1dCBhcnJheSwgYSBjb250YWluZXIgRE9NIG5vZGUsIGFuZCBhIGZ1bmN0aW9uIGZyb20gYXJyYXkgZWxlbWVudHMgdG8gYXJyYXlzIG9mIERPTSBub2RlcyxcbiAgICAvLyAgIG1hcCB0aGUgYXJyYXkgZWxlbWVudHMgdG8gYXJyYXlzIG9mIERPTSBub2RlcywgY29uY2F0ZW5hdGUgdG9nZXRoZXIgYWxsIHRoZXNlIGFycmF5cywgYW5kIHVzZSB0aGVtIHRvIHBvcHVsYXRlIHRoZSBjb250YWluZXIgRE9NIG5vZGVcbiAgICAvLyAqIE5leHQgdGltZSB3ZSdyZSBnaXZlbiB0aGUgc2FtZSBjb21iaW5hdGlvbiBvZiB0aGluZ3MgKHdpdGggdGhlIGFycmF5IHBvc3NpYmx5IGhhdmluZyBtdXRhdGVkKSwgdXBkYXRlIHRoZSBjb250YWluZXIgRE9NIG5vZGVcbiAgICAvLyAgIHNvIHRoYXQgaXRzIGNoaWxkcmVuIGlzIGFnYWluIHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZSBtYXBwaW5ncyBvZiB0aGUgYXJyYXkgZWxlbWVudHMsIGJ1dCBkb24ndCByZS1tYXAgYW55IGFycmF5IGVsZW1lbnRzIHRoYXQgd2VcbiAgICAvLyAgIHByZXZpb3VzbHkgbWFwcGVkIC0gcmV0YWluIHRob3NlIG5vZGVzLCBhbmQganVzdCBpbnNlcnQvZGVsZXRlIG90aGVyIG9uZXNcblxuICAgIC8vIFwiY2FsbGJhY2tBZnRlckFkZGluZ05vZGVzXCIgd2lsbCBiZSBpbnZva2VkIGFmdGVyIGFueSBcIm1hcHBpbmdcIi1nZW5lcmF0ZWQgbm9kZXMgYXJlIGluc2VydGVkIGludG8gdGhlIGNvbnRhaW5lciBub2RlXG4gICAgLy8gWW91IGNhbiB1c2UgdGhpcywgZm9yIGV4YW1wbGUsIHRvIGFjdGl2YXRlIGJpbmRpbmdzIG9uIHRob3NlIG5vZGVzLlxuXG4gICAgZnVuY3Rpb24gbWFwTm9kZUFuZFJlZnJlc2hXaGVuQ2hhbmdlZChjb250YWluZXJOb2RlLCBtYXBwaW5nLCB2YWx1ZVRvTWFwLCBjYWxsYmFja0FmdGVyQWRkaW5nTm9kZXMsIGluZGV4KSB7XG4gICAgICAgIC8vIE1hcCB0aGlzIGFycmF5IHZhbHVlIGluc2lkZSBhIGRlcGVuZGVudE9ic2VydmFibGUgc28gd2UgcmUtbWFwIHdoZW4gYW55IGRlcGVuZGVuY3kgY2hhbmdlc1xuICAgICAgICB2YXIgbWFwcGVkTm9kZXMgPSBbXTtcbiAgICAgICAgdmFyIGRlcGVuZGVudE9ic2VydmFibGUgPSBrby5kZXBlbmRlbnRPYnNlcnZhYmxlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG5ld01hcHBlZE5vZGVzID0gbWFwcGluZyh2YWx1ZVRvTWFwLCBpbmRleCwga28udXRpbHMuZml4VXBDb250aW51b3VzTm9kZUFycmF5KG1hcHBlZE5vZGVzLCBjb250YWluZXJOb2RlKSkgfHwgW107XG5cbiAgICAgICAgICAgIC8vIE9uIHN1YnNlcXVlbnQgZXZhbHVhdGlvbnMsIGp1c3QgcmVwbGFjZSB0aGUgcHJldmlvdXNseS1pbnNlcnRlZCBET00gbm9kZXNcbiAgICAgICAgICAgIGlmIChtYXBwZWROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAga28udXRpbHMucmVwbGFjZURvbU5vZGVzKG1hcHBlZE5vZGVzLCBuZXdNYXBwZWROb2Rlcyk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrQWZ0ZXJBZGRpbmdOb2RlcylcbiAgICAgICAgICAgICAgICAgICAga28uZGVwZW5kZW5jeURldGVjdGlvbi5pZ25vcmUoY2FsbGJhY2tBZnRlckFkZGluZ05vZGVzLCBudWxsLCBbdmFsdWVUb01hcCwgbmV3TWFwcGVkTm9kZXMsIGluZGV4XSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIGNvbnRlbnRzIG9mIHRoZSBtYXBwZWROb2RlcyBhcnJheSwgdGhlcmVieSB1cGRhdGluZyB0aGUgcmVjb3JkXG4gICAgICAgICAgICAvLyBvZiB3aGljaCBub2RlcyB3b3VsZCBiZSBkZWxldGVkIGlmIHZhbHVlVG9NYXAgd2FzIGl0c2VsZiBsYXRlciByZW1vdmVkXG4gICAgICAgICAgICBtYXBwZWROb2Rlcy5sZW5ndGggPSAwO1xuICAgICAgICAgICAga28udXRpbHMuYXJyYXlQdXNoQWxsKG1hcHBlZE5vZGVzLCBuZXdNYXBwZWROb2Rlcyk7XG4gICAgICAgIH0sIG51bGwsIHsgZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkOiBjb250YWluZXJOb2RlLCBkaXNwb3NlV2hlbjogZnVuY3Rpb24oKSB7IHJldHVybiAha28udXRpbHMuYW55RG9tTm9kZUlzQXR0YWNoZWRUb0RvY3VtZW50KG1hcHBlZE5vZGVzKTsgfSB9KTtcbiAgICAgICAgcmV0dXJuIHsgbWFwcGVkTm9kZXMgOiBtYXBwZWROb2RlcywgZGVwZW5kZW50T2JzZXJ2YWJsZSA6IChkZXBlbmRlbnRPYnNlcnZhYmxlLmlzQWN0aXZlKCkgPyBkZXBlbmRlbnRPYnNlcnZhYmxlIDogdW5kZWZpbmVkKSB9O1xuICAgIH1cblxuICAgIHZhciBsYXN0TWFwcGluZ1Jlc3VsdERvbURhdGFLZXkgPSBrby51dGlscy5kb21EYXRhLm5leHRLZXkoKSxcbiAgICAgICAgZGVsZXRlZEl0ZW1EdW1teVZhbHVlID0ga28udXRpbHMuZG9tRGF0YS5uZXh0S2V5KCk7XG5cbiAgICBrby51dGlscy5zZXREb21Ob2RlQ2hpbGRyZW5Gcm9tQXJyYXlNYXBwaW5nID0gZnVuY3Rpb24gKGRvbU5vZGUsIGFycmF5LCBtYXBwaW5nLCBvcHRpb25zLCBjYWxsYmFja0FmdGVyQWRkaW5nTm9kZXMpIHtcbiAgICAgICAgLy8gQ29tcGFyZSB0aGUgcHJvdmlkZWQgYXJyYXkgYWdhaW5zdCB0aGUgcHJldmlvdXMgb25lXG4gICAgICAgIGFycmF5ID0gYXJyYXkgfHwgW107XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICB2YXIgaXNGaXJzdEV4ZWN1dGlvbiA9IGtvLnV0aWxzLmRvbURhdGEuZ2V0KGRvbU5vZGUsIGxhc3RNYXBwaW5nUmVzdWx0RG9tRGF0YUtleSkgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIGxhc3RNYXBwaW5nUmVzdWx0ID0ga28udXRpbHMuZG9tRGF0YS5nZXQoZG9tTm9kZSwgbGFzdE1hcHBpbmdSZXN1bHREb21EYXRhS2V5KSB8fCBbXTtcbiAgICAgICAgdmFyIGxhc3RBcnJheSA9IGtvLnV0aWxzLmFycmF5TWFwKGxhc3RNYXBwaW5nUmVzdWx0LCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5hcnJheUVudHJ5OyB9KTtcbiAgICAgICAgdmFyIGVkaXRTY3JpcHQgPSBrby51dGlscy5jb21wYXJlQXJyYXlzKGxhc3RBcnJheSwgYXJyYXksIG9wdGlvbnNbJ2RvbnRMaW1pdE1vdmVzJ10pO1xuXG4gICAgICAgIC8vIEJ1aWxkIHRoZSBuZXcgbWFwcGluZyByZXN1bHRcbiAgICAgICAgdmFyIG5ld01hcHBpbmdSZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIGxhc3RNYXBwaW5nUmVzdWx0SW5kZXggPSAwO1xuICAgICAgICB2YXIgbmV3TWFwcGluZ1Jlc3VsdEluZGV4ID0gMDtcblxuICAgICAgICB2YXIgbm9kZXNUb0RlbGV0ZSA9IFtdO1xuICAgICAgICB2YXIgaXRlbXNUb1Byb2Nlc3MgPSBbXTtcbiAgICAgICAgdmFyIGl0ZW1zRm9yQmVmb3JlUmVtb3ZlQ2FsbGJhY2tzID0gW107XG4gICAgICAgIHZhciBpdGVtc0Zvck1vdmVDYWxsYmFja3MgPSBbXTtcbiAgICAgICAgdmFyIGl0ZW1zRm9yQWZ0ZXJBZGRDYWxsYmFja3MgPSBbXTtcbiAgICAgICAgdmFyIG1hcERhdGE7XG5cbiAgICAgICAgZnVuY3Rpb24gaXRlbU1vdmVkT3JSZXRhaW5lZChlZGl0U2NyaXB0SW5kZXgsIG9sZFBvc2l0aW9uKSB7XG4gICAgICAgICAgICBtYXBEYXRhID0gbGFzdE1hcHBpbmdSZXN1bHRbb2xkUG9zaXRpb25dO1xuICAgICAgICAgICAgaWYgKG5ld01hcHBpbmdSZXN1bHRJbmRleCAhPT0gb2xkUG9zaXRpb24pXG4gICAgICAgICAgICAgICAgaXRlbXNGb3JNb3ZlQ2FsbGJhY2tzW2VkaXRTY3JpcHRJbmRleF0gPSBtYXBEYXRhO1xuICAgICAgICAgICAgLy8gU2luY2UgdXBkYXRpbmcgdGhlIGluZGV4IG1pZ2h0IGNoYW5nZSB0aGUgbm9kZXMsIGRvIHNvIGJlZm9yZSBjYWxsaW5nIGZpeFVwQ29udGludW91c05vZGVBcnJheVxuICAgICAgICAgICAgbWFwRGF0YS5pbmRleE9ic2VydmFibGUobmV3TWFwcGluZ1Jlc3VsdEluZGV4KyspO1xuICAgICAgICAgICAga28udXRpbHMuZml4VXBDb250aW51b3VzTm9kZUFycmF5KG1hcERhdGEubWFwcGVkTm9kZXMsIGRvbU5vZGUpO1xuICAgICAgICAgICAgbmV3TWFwcGluZ1Jlc3VsdC5wdXNoKG1hcERhdGEpO1xuICAgICAgICAgICAgaXRlbXNUb1Byb2Nlc3MucHVzaChtYXBEYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNhbGxDYWxsYmFjayhjYWxsYmFjaywgaXRlbXMpIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gaXRlbXMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAga28udXRpbHMuYXJyYXlGb3JFYWNoKGl0ZW1zW2ldLm1hcHBlZE5vZGVzLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobm9kZSwgaSwgaXRlbXNbaV0uYXJyYXlFbnRyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBlZGl0U2NyaXB0SXRlbSwgbW92ZWRJbmRleDsgZWRpdFNjcmlwdEl0ZW0gPSBlZGl0U2NyaXB0W2ldOyBpKyspIHtcbiAgICAgICAgICAgIG1vdmVkSW5kZXggPSBlZGl0U2NyaXB0SXRlbVsnbW92ZWQnXTtcbiAgICAgICAgICAgIHN3aXRjaCAoZWRpdFNjcmlwdEl0ZW1bJ3N0YXR1cyddKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRlbGV0ZWRcIjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vdmVkSW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwRGF0YSA9IGxhc3RNYXBwaW5nUmVzdWx0W2xhc3RNYXBwaW5nUmVzdWx0SW5kZXhdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTdG9wIHRyYWNraW5nIGNoYW5nZXMgdG8gdGhlIG1hcHBpbmcgZm9yIHRoZXNlIG5vZGVzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwRGF0YS5kZXBlbmRlbnRPYnNlcnZhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwRGF0YS5kZXBlbmRlbnRPYnNlcnZhYmxlLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBEYXRhLmRlcGVuZGVudE9ic2VydmFibGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFF1ZXVlIHRoZXNlIG5vZGVzIGZvciBsYXRlciByZW1vdmFsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa28udXRpbHMuZml4VXBDb250aW51b3VzTm9kZUFycmF5KG1hcERhdGEubWFwcGVkTm9kZXMsIGRvbU5vZGUpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zWydiZWZvcmVSZW1vdmUnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNYXBwaW5nUmVzdWx0LnB1c2gobWFwRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zVG9Qcm9jZXNzLnB1c2gobWFwRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXBEYXRhLmFycmF5RW50cnkgPT09IGRlbGV0ZWRJdGVtRHVtbXlWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwRGF0YSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtc0ZvckJlZm9yZVJlbW92ZUNhbGxiYWNrc1tpXSA9IG1hcERhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXNUb0RlbGV0ZS5wdXNoLmFwcGx5KG5vZGVzVG9EZWxldGUsIG1hcERhdGEubWFwcGVkTm9kZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsYXN0TWFwcGluZ1Jlc3VsdEluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBcInJldGFpbmVkXCI6XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1Nb3ZlZE9yUmV0YWluZWQoaSwgbGFzdE1hcHBpbmdSZXN1bHRJbmRleCsrKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIFwiYWRkZWRcIjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vdmVkSW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbU1vdmVkT3JSZXRhaW5lZChpLCBtb3ZlZEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcERhdGEgPSB7IGFycmF5RW50cnk6IGVkaXRTY3JpcHRJdGVtWyd2YWx1ZSddLCBpbmRleE9ic2VydmFibGU6IGtvLm9ic2VydmFibGUobmV3TWFwcGluZ1Jlc3VsdEluZGV4KyspIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdNYXBwaW5nUmVzdWx0LnB1c2gobWFwRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1RvUHJvY2Vzcy5wdXNoKG1hcERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0ZpcnN0RXhlY3V0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zRm9yQWZ0ZXJBZGRDYWxsYmFja3NbaV0gPSBtYXBEYXRhO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3RvcmUgYSBjb3B5IG9mIHRoZSBhcnJheSBpdGVtcyB3ZSBqdXN0IGNvbnNpZGVyZWQgc28gd2UgY2FuIGRpZmZlcmVuY2UgaXQgbmV4dCB0aW1lXG4gICAgICAgIGtvLnV0aWxzLmRvbURhdGEuc2V0KGRvbU5vZGUsIGxhc3RNYXBwaW5nUmVzdWx0RG9tRGF0YUtleSwgbmV3TWFwcGluZ1Jlc3VsdCk7XG5cbiAgICAgICAgLy8gQ2FsbCBiZWZvcmVNb3ZlIGZpcnN0IGJlZm9yZSBhbnkgY2hhbmdlcyBoYXZlIGJlZW4gbWFkZSB0byB0aGUgRE9NXG4gICAgICAgIGNhbGxDYWxsYmFjayhvcHRpb25zWydiZWZvcmVNb3ZlJ10sIGl0ZW1zRm9yTW92ZUNhbGxiYWNrcyk7XG5cbiAgICAgICAgLy8gTmV4dCByZW1vdmUgbm9kZXMgZm9yIGRlbGV0ZWQgaXRlbXMgKG9yIGp1c3QgY2xlYW4gaWYgdGhlcmUncyBhIGJlZm9yZVJlbW92ZSBjYWxsYmFjaylcbiAgICAgICAga28udXRpbHMuYXJyYXlGb3JFYWNoKG5vZGVzVG9EZWxldGUsIG9wdGlvbnNbJ2JlZm9yZVJlbW92ZSddID8ga28uY2xlYW5Ob2RlIDoga28ucmVtb3ZlTm9kZSk7XG5cbiAgICAgICAgLy8gTmV4dCBhZGQvcmVvcmRlciB0aGUgcmVtYWluaW5nIGl0ZW1zICh3aWxsIGluY2x1ZGUgZGVsZXRlZCBpdGVtcyBpZiB0aGVyZSdzIGEgYmVmb3JlUmVtb3ZlIGNhbGxiYWNrKVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbmV4dE5vZGUgPSBrby52aXJ0dWFsRWxlbWVudHMuZmlyc3RDaGlsZChkb21Ob2RlKSwgbGFzdE5vZGUsIG5vZGU7IG1hcERhdGEgPSBpdGVtc1RvUHJvY2Vzc1tpXTsgaSsrKSB7XG4gICAgICAgICAgICAvLyBHZXQgbm9kZXMgZm9yIG5ld2x5IGFkZGVkIGl0ZW1zXG4gICAgICAgICAgICBpZiAoIW1hcERhdGEubWFwcGVkTm9kZXMpXG4gICAgICAgICAgICAgICAga28udXRpbHMuZXh0ZW5kKG1hcERhdGEsIG1hcE5vZGVBbmRSZWZyZXNoV2hlbkNoYW5nZWQoZG9tTm9kZSwgbWFwcGluZywgbWFwRGF0YS5hcnJheUVudHJ5LCBjYWxsYmFja0FmdGVyQWRkaW5nTm9kZXMsIG1hcERhdGEuaW5kZXhPYnNlcnZhYmxlKSk7XG5cbiAgICAgICAgICAgIC8vIFB1dCBub2RlcyBpbiB0aGUgcmlnaHQgcGxhY2UgaWYgdGhleSBhcmVuJ3QgdGhlcmUgYWxyZWFkeVxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IG5vZGUgPSBtYXBEYXRhLm1hcHBlZE5vZGVzW2pdOyBuZXh0Tm9kZSA9IG5vZGUubmV4dFNpYmxpbmcsIGxhc3ROb2RlID0gbm9kZSwgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUgIT09IG5leHROb2RlKVxuICAgICAgICAgICAgICAgICAgICBrby52aXJ0dWFsRWxlbWVudHMuaW5zZXJ0QWZ0ZXIoZG9tTm9kZSwgbm9kZSwgbGFzdE5vZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSdW4gdGhlIGNhbGxiYWNrcyBmb3IgbmV3bHkgYWRkZWQgbm9kZXMgKGZvciBleGFtcGxlLCB0byBhcHBseSBiaW5kaW5ncywgZXRjLilcbiAgICAgICAgICAgIGlmICghbWFwRGF0YS5pbml0aWFsaXplZCAmJiBjYWxsYmFja0FmdGVyQWRkaW5nTm9kZXMpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja0FmdGVyQWRkaW5nTm9kZXMobWFwRGF0YS5hcnJheUVudHJ5LCBtYXBEYXRhLm1hcHBlZE5vZGVzLCBtYXBEYXRhLmluZGV4T2JzZXJ2YWJsZSk7XG4gICAgICAgICAgICAgICAgbWFwRGF0YS5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGVyZSdzIGEgYmVmb3JlUmVtb3ZlIGNhbGxiYWNrLCBjYWxsIGl0IGFmdGVyIHJlb3JkZXJpbmcuXG4gICAgICAgIC8vIE5vdGUgdGhhdCB3ZSBhc3N1bWUgdGhhdCB0aGUgYmVmb3JlUmVtb3ZlIGNhbGxiYWNrIHdpbGwgdXN1YWxseSBiZSB1c2VkIHRvIHJlbW92ZSB0aGUgbm9kZXMgdXNpbmdcbiAgICAgICAgLy8gc29tZSBzb3J0IG9mIGFuaW1hdGlvbiwgd2hpY2ggaXMgd2h5IHdlIGZpcnN0IHJlb3JkZXIgdGhlIG5vZGVzIHRoYXQgd2lsbCBiZSByZW1vdmVkLiBJZiB0aGVcbiAgICAgICAgLy8gY2FsbGJhY2sgaW5zdGVhZCByZW1vdmVzIHRoZSBub2RlcyByaWdodCBhd2F5LCBpdCB3b3VsZCBiZSBtb3JlIGVmZmljaWVudCB0byBza2lwIHJlb3JkZXJpbmcgdGhlbS5cbiAgICAgICAgLy8gUGVyaGFwcyB3ZSdsbCBtYWtlIHRoYXQgY2hhbmdlIGluIHRoZSBmdXR1cmUgaWYgdGhpcyBzY2VuYXJpbyBiZWNvbWVzIG1vcmUgY29tbW9uLlxuICAgICAgICBjYWxsQ2FsbGJhY2sob3B0aW9uc1snYmVmb3JlUmVtb3ZlJ10sIGl0ZW1zRm9yQmVmb3JlUmVtb3ZlQ2FsbGJhY2tzKTtcblxuICAgICAgICAvLyBSZXBsYWNlIHRoZSBzdG9yZWQgdmFsdWVzIG9mIGRlbGV0ZWQgaXRlbXMgd2l0aCBhIGR1bW15IHZhbHVlLiBUaGlzIHByb3ZpZGVzIHR3byBiZW5lZml0czogaXQgbWFya3MgdGhpcyBpdGVtXG4gICAgICAgIC8vIGFzIGFscmVhZHkgXCJyZW1vdmVkXCIgc28gd2Ugd29uJ3QgY2FsbCBiZWZvcmVSZW1vdmUgZm9yIGl0IGFnYWluLCBhbmQgaXQgZW5zdXJlcyB0aGF0IHRoZSBpdGVtIHdvbid0IG1hdGNoIHVwXG4gICAgICAgIC8vIHdpdGggYW4gYWN0dWFsIGl0ZW0gaW4gdGhlIGFycmF5IGFuZCBhcHBlYXIgYXMgXCJyZXRhaW5lZFwiIG9yIFwibW92ZWRcIi5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGl0ZW1zRm9yQmVmb3JlUmVtb3ZlQ2FsbGJhY2tzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAoaXRlbXNGb3JCZWZvcmVSZW1vdmVDYWxsYmFja3NbaV0pIHtcbiAgICAgICAgICAgICAgICBpdGVtc0ZvckJlZm9yZVJlbW92ZUNhbGxiYWNrc1tpXS5hcnJheUVudHJ5ID0gZGVsZXRlZEl0ZW1EdW1teVZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmluYWxseSBjYWxsIGFmdGVyTW92ZSBhbmQgYWZ0ZXJBZGQgY2FsbGJhY2tzXG4gICAgICAgIGNhbGxDYWxsYmFjayhvcHRpb25zWydhZnRlck1vdmUnXSwgaXRlbXNGb3JNb3ZlQ2FsbGJhY2tzKTtcbiAgICAgICAgY2FsbENhbGxiYWNrKG9wdGlvbnNbJ2FmdGVyQWRkJ10sIGl0ZW1zRm9yQWZ0ZXJBZGRDYWxsYmFja3MpO1xuICAgIH1cbn0pKCk7XG5cbmtvLmV4cG9ydFN5bWJvbCgndXRpbHMuc2V0RG9tTm9kZUNoaWxkcmVuRnJvbUFycmF5TWFwcGluZycsIGtvLnV0aWxzLnNldERvbU5vZGVDaGlsZHJlbkZyb21BcnJheU1hcHBpbmcpO1xua28ubmF0aXZlVGVtcGxhdGVFbmdpbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpc1snYWxsb3dUZW1wbGF0ZVJld3JpdGluZyddID0gZmFsc2U7XG59XG5cbmtvLm5hdGl2ZVRlbXBsYXRlRW5naW5lLnByb3RvdHlwZSA9IG5ldyBrby50ZW1wbGF0ZUVuZ2luZSgpO1xua28ubmF0aXZlVGVtcGxhdGVFbmdpbmUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0ga28ubmF0aXZlVGVtcGxhdGVFbmdpbmU7XG5rby5uYXRpdmVUZW1wbGF0ZUVuZ2luZS5wcm90b3R5cGVbJ3JlbmRlclRlbXBsYXRlU291cmNlJ10gPSBmdW5jdGlvbiAodGVtcGxhdGVTb3VyY2UsIGJpbmRpbmdDb250ZXh0LCBvcHRpb25zLCB0ZW1wbGF0ZURvY3VtZW50KSB7XG4gICAgdmFyIHVzZU5vZGVzSWZBdmFpbGFibGUgPSAhKGtvLnV0aWxzLmllVmVyc2lvbiA8IDkpLCAvLyBJRTw5IGNsb25lTm9kZSBkb2Vzbid0IHdvcmsgcHJvcGVybHlcbiAgICAgICAgdGVtcGxhdGVOb2Rlc0Z1bmMgPSB1c2VOb2Rlc0lmQXZhaWxhYmxlID8gdGVtcGxhdGVTb3VyY2VbJ25vZGVzJ10gOiBudWxsLFxuICAgICAgICB0ZW1wbGF0ZU5vZGVzID0gdGVtcGxhdGVOb2Rlc0Z1bmMgPyB0ZW1wbGF0ZVNvdXJjZVsnbm9kZXMnXSgpIDogbnVsbDtcblxuICAgIGlmICh0ZW1wbGF0ZU5vZGVzKSB7XG4gICAgICAgIHJldHVybiBrby51dGlscy5tYWtlQXJyYXkodGVtcGxhdGVOb2Rlcy5jbG9uZU5vZGUodHJ1ZSkuY2hpbGROb2Rlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHRlbXBsYXRlVGV4dCA9IHRlbXBsYXRlU291cmNlWyd0ZXh0J10oKTtcbiAgICAgICAgcmV0dXJuIGtvLnV0aWxzLnBhcnNlSHRtbEZyYWdtZW50KHRlbXBsYXRlVGV4dCwgdGVtcGxhdGVEb2N1bWVudCk7XG4gICAgfVxufTtcblxua28ubmF0aXZlVGVtcGxhdGVFbmdpbmUuaW5zdGFuY2UgPSBuZXcga28ubmF0aXZlVGVtcGxhdGVFbmdpbmUoKTtcbmtvLnNldFRlbXBsYXRlRW5naW5lKGtvLm5hdGl2ZVRlbXBsYXRlRW5naW5lLmluc3RhbmNlKTtcblxua28uZXhwb3J0U3ltYm9sKCduYXRpdmVUZW1wbGF0ZUVuZ2luZScsIGtvLm5hdGl2ZVRlbXBsYXRlRW5naW5lKTtcbihmdW5jdGlvbigpIHtcbiAgICBrby5qcXVlcnlUbXBsVGVtcGxhdGVFbmdpbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIERldGVjdCB3aGljaCB2ZXJzaW9uIG9mIGpxdWVyeS10bXBsIHlvdSdyZSB1c2luZy4gVW5mb3J0dW5hdGVseSBqcXVlcnktdG1wbFxuICAgICAgICAvLyBkb2Vzbid0IGV4cG9zZSBhIHZlcnNpb24gbnVtYmVyLCBzbyB3ZSBoYXZlIHRvIGluZmVyIGl0LlxuICAgICAgICAvLyBOb3RlIHRoYXQgYXMgb2YgS25vY2tvdXQgMS4zLCB3ZSBvbmx5IHN1cHBvcnQgalF1ZXJ5LnRtcGwgMS4wLjBwcmUgYW5kIGxhdGVyLFxuICAgICAgICAvLyB3aGljaCBLTyBpbnRlcm5hbGx5IHJlZmVycyB0byBhcyB2ZXJzaW9uIFwiMlwiLCBzbyBvbGRlciB2ZXJzaW9ucyBhcmUgbm8gbG9uZ2VyIGRldGVjdGVkLlxuICAgICAgICB2YXIgalF1ZXJ5VG1wbFZlcnNpb24gPSB0aGlzLmpRdWVyeVRtcGxWZXJzaW9uID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCFqUXVlcnlJbnN0YW5jZSB8fCAhKGpRdWVyeUluc3RhbmNlWyd0bXBsJ10pKVxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgLy8gU2luY2UgaXQgZXhwb3NlcyBubyBvZmZpY2lhbCB2ZXJzaW9uIG51bWJlciwgd2UgdXNlIG91ciBvd24gbnVtYmVyaW5nIHN5c3RlbS4gVG8gYmUgdXBkYXRlZCBhcyBqcXVlcnktdG1wbCBldm9sdmVzLlxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5SW5zdGFuY2VbJ3RtcGwnXVsndGFnJ11bJ3RtcGwnXVsnb3BlbiddLnRvU3RyaW5nKCkuaW5kZXhPZignX18nKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIDEuMC4wcHJlLCBjdXN0b20gdGFncyBzaG91bGQgYXBwZW5kIG1hcmt1cCB0byBhbiBhcnJheSBjYWxsZWQgXCJfX1wiXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyOyAvLyBGaW5hbCB2ZXJzaW9uIG9mIGpxdWVyeS50bXBsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaChleCkgeyAvKiBBcHBhcmVudGx5IG5vdCB0aGUgdmVyc2lvbiB3ZSB3ZXJlIGxvb2tpbmcgZm9yICovIH1cblxuICAgICAgICAgICAgcmV0dXJuIDE7IC8vIEFueSBvbGRlciB2ZXJzaW9uIHRoYXQgd2UgZG9uJ3Qgc3VwcG9ydFxuICAgICAgICB9KSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGVuc3VyZUhhc1JlZmVyZW5jZWRKUXVlcnlUZW1wbGF0ZXMoKSB7XG4gICAgICAgICAgICBpZiAoalF1ZXJ5VG1wbFZlcnNpb24gPCAyKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdXIgdmVyc2lvbiBvZiBqUXVlcnkudG1wbCBpcyB0b28gb2xkLiBQbGVhc2UgdXBncmFkZSB0byBqUXVlcnkudG1wbCAxLjAuMHByZSBvciBsYXRlci5cIik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBleGVjdXRlVGVtcGxhdGUoY29tcGlsZWRUZW1wbGF0ZSwgZGF0YSwgalF1ZXJ5VGVtcGxhdGVPcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5SW5zdGFuY2VbJ3RtcGwnXShjb21waWxlZFRlbXBsYXRlLCBkYXRhLCBqUXVlcnlUZW1wbGF0ZU9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpc1sncmVuZGVyVGVtcGxhdGVTb3VyY2UnXSA9IGZ1bmN0aW9uKHRlbXBsYXRlU291cmNlLCBiaW5kaW5nQ29udGV4dCwgb3B0aW9ucywgdGVtcGxhdGVEb2N1bWVudCkge1xuICAgICAgICAgICAgdGVtcGxhdGVEb2N1bWVudCA9IHRlbXBsYXRlRG9jdW1lbnQgfHwgZG9jdW1lbnQ7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgICAgIGVuc3VyZUhhc1JlZmVyZW5jZWRKUXVlcnlUZW1wbGF0ZXMoKTtcblxuICAgICAgICAgICAgLy8gRW5zdXJlIHdlIGhhdmUgc3RvcmVkIGEgcHJlY29tcGlsZWQgdmVyc2lvbiBvZiB0aGlzIHRlbXBsYXRlIChkb24ndCB3YW50IHRvIHJlcGFyc2Ugb24gZXZlcnkgcmVuZGVyKVxuICAgICAgICAgICAgdmFyIHByZWNvbXBpbGVkID0gdGVtcGxhdGVTb3VyY2VbJ2RhdGEnXSgncHJlY29tcGlsZWQnKTtcbiAgICAgICAgICAgIGlmICghcHJlY29tcGlsZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVUZXh0ID0gdGVtcGxhdGVTb3VyY2VbJ3RleHQnXSgpIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgLy8gV3JhcCBpbiBcIndpdGgoJHdoYXRldmVyLmtvQmluZGluZ0NvbnRleHQpIHsgLi4uIH1cIlxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVGV4dCA9IFwie3trb193aXRoICRpdGVtLmtvQmluZGluZ0NvbnRleHR9fVwiICsgdGVtcGxhdGVUZXh0ICsgXCJ7ey9rb193aXRofX1cIjtcblxuICAgICAgICAgICAgICAgIHByZWNvbXBpbGVkID0galF1ZXJ5SW5zdGFuY2VbJ3RlbXBsYXRlJ10obnVsbCwgdGVtcGxhdGVUZXh0KTtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVNvdXJjZVsnZGF0YSddKCdwcmVjb21waWxlZCcsIHByZWNvbXBpbGVkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGRhdGEgPSBbYmluZGluZ0NvbnRleHRbJyRkYXRhJ11dOyAvLyBQcmV3cmFwIHRoZSBkYXRhIGluIGFuIGFycmF5IHRvIHN0b3AganF1ZXJ5LnRtcGwgZnJvbSB0cnlpbmcgdG8gdW53cmFwIGFueSBhcnJheXNcbiAgICAgICAgICAgIHZhciBqUXVlcnlUZW1wbGF0ZU9wdGlvbnMgPSBqUXVlcnlJbnN0YW5jZVsnZXh0ZW5kJ10oeyAna29CaW5kaW5nQ29udGV4dCc6IGJpbmRpbmdDb250ZXh0IH0sIG9wdGlvbnNbJ3RlbXBsYXRlT3B0aW9ucyddKTtcblxuICAgICAgICAgICAgdmFyIHJlc3VsdE5vZGVzID0gZXhlY3V0ZVRlbXBsYXRlKHByZWNvbXBpbGVkLCBkYXRhLCBqUXVlcnlUZW1wbGF0ZU9wdGlvbnMpO1xuICAgICAgICAgICAgcmVzdWx0Tm9kZXNbJ2FwcGVuZFRvJ10odGVtcGxhdGVEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTsgLy8gVXNpbmcgXCJhcHBlbmRUb1wiIGZvcmNlcyBqUXVlcnkvalF1ZXJ5LnRtcGwgdG8gcGVyZm9ybSBuZWNlc3NhcnkgY2xlYW51cCB3b3JrXG5cbiAgICAgICAgICAgIGpRdWVyeUluc3RhbmNlWydmcmFnbWVudHMnXSA9IHt9OyAvLyBDbGVhciBqUXVlcnkncyBmcmFnbWVudCBjYWNoZSB0byBhdm9pZCBhIG1lbW9yeSBsZWFrIGFmdGVyIGEgbGFyZ2UgbnVtYmVyIG9mIHRlbXBsYXRlIHJlbmRlcnNcbiAgICAgICAgICAgIHJldHVybiByZXN1bHROb2RlcztcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzWydjcmVhdGVKYXZhU2NyaXB0RXZhbHVhdG9yQmxvY2snXSA9IGZ1bmN0aW9uKHNjcmlwdCkge1xuICAgICAgICAgICAgcmV0dXJuIFwie3trb19jb2RlICgoZnVuY3Rpb24oKSB7IHJldHVybiBcIiArIHNjcmlwdCArIFwiIH0pKCkpIH19XCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpc1snYWRkVGVtcGxhdGUnXSA9IGZ1bmN0aW9uKHRlbXBsYXRlTmFtZSwgdGVtcGxhdGVNYXJrdXApIHtcbiAgICAgICAgICAgIGRvY3VtZW50LndyaXRlKFwiPHNjcmlwdCB0eXBlPSd0ZXh0L2h0bWwnIGlkPSdcIiArIHRlbXBsYXRlTmFtZSArIFwiJz5cIiArIHRlbXBsYXRlTWFya3VwICsgXCI8XCIgKyBcIi9zY3JpcHQ+XCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChqUXVlcnlUbXBsVmVyc2lvbiA+IDApIHtcbiAgICAgICAgICAgIGpRdWVyeUluc3RhbmNlWyd0bXBsJ11bJ3RhZyddWydrb19jb2RlJ10gPSB7XG4gICAgICAgICAgICAgICAgb3BlbjogXCJfXy5wdXNoKCQxIHx8ICcnKTtcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGpRdWVyeUluc3RhbmNlWyd0bXBsJ11bJ3RhZyddWydrb193aXRoJ10gPSB7XG4gICAgICAgICAgICAgICAgb3BlbjogXCJ3aXRoKCQxKSB7XCIsXG4gICAgICAgICAgICAgICAgY2xvc2U6IFwifSBcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBrby5qcXVlcnlUbXBsVGVtcGxhdGVFbmdpbmUucHJvdG90eXBlID0gbmV3IGtvLnRlbXBsYXRlRW5naW5lKCk7XG4gICAga28uanF1ZXJ5VG1wbFRlbXBsYXRlRW5naW5lLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGtvLmpxdWVyeVRtcGxUZW1wbGF0ZUVuZ2luZTtcblxuICAgIC8vIFVzZSB0aGlzIG9uZSBieSBkZWZhdWx0ICpvbmx5IGlmIGpxdWVyeS50bXBsIGlzIHJlZmVyZW5jZWQqXG4gICAgdmFyIGpxdWVyeVRtcGxUZW1wbGF0ZUVuZ2luZUluc3RhbmNlID0gbmV3IGtvLmpxdWVyeVRtcGxUZW1wbGF0ZUVuZ2luZSgpO1xuICAgIGlmIChqcXVlcnlUbXBsVGVtcGxhdGVFbmdpbmVJbnN0YW5jZS5qUXVlcnlUbXBsVmVyc2lvbiA+IDApXG4gICAgICAgIGtvLnNldFRlbXBsYXRlRW5naW5lKGpxdWVyeVRtcGxUZW1wbGF0ZUVuZ2luZUluc3RhbmNlKTtcblxuICAgIGtvLmV4cG9ydFN5bWJvbCgnanF1ZXJ5VG1wbFRlbXBsYXRlRW5naW5lJywga28uanF1ZXJ5VG1wbFRlbXBsYXRlRW5naW5lKTtcbn0pKCk7XG59KSk7XG59KCkpO1xufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
